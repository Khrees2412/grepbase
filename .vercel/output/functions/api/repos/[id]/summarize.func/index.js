
  
  globalThis._ENTRIES = {};
/**/;globalThis.__BUILD_MANIFEST = {
  "pages": {
    "/_app": []
  },
  "devFiles": [],
  "polyfillFiles": [
    "static/chunks/a6dad97d9634a72d.js"
  ],
  "lowPriorityFiles": [],
  "rootMainFiles": [
    "static/chunks/e0df3873fae7bdbe.js",
    "static/chunks/7021c85f9439b89e.js",
    "static/chunks/bd537e0a0b58a56b.js",
    "static/chunks/cc759f7c2413b7ff.js",
    "static/chunks/turbopack-f9e9c5bd2166a7b5.js"
  ]
};
globalThis.__BUILD_MANIFEST.lowPriorityFiles = [
"/static/" + process.env.__NEXT_BUILD_ID + "/_buildManifest.js",
"/static/" + process.env.__NEXT_BUILD_ID + "/_ssgManifest.js"
];
/**/;self.__INTERCEPTION_ROUTE_REWRITE_MANIFEST="[]";
/**/;self.__SERVER_FILES_MANIFEST={
  "version": 1,
  "config": {
    "distDir": ".next",
    "cacheComponents": false,
    "htmlLimitedBots": "[\\w-]+-Google|Google-[\\w-]+|Chrome-Lighthouse|Slurp|DuckDuckBot|baiduspider|yandex|sogou|bitlybot|tumblr|vkShare|quora link preview|redditbot|ia_archiver|Bingbot|BingPreview|applebot|facebookexternalhit|facebookcatalog|Twitterbot|LinkedInBot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|Yeti|googleweblight",
    "assetPrefix": "",
    "trailingSlash": false,
    "images": {
      "deviceSizes": [
        640,
        750,
        828,
        1080,
        1200,
        1920,
        2048,
        3840
      ],
      "imageSizes": [
        32,
        48,
        64,
        96,
        128,
        256,
        384
      ],
      "path": "/_next/image",
      "loader": "default",
      "loaderFile": "",
      "domains": [],
      "disableStaticImages": false,
      "minimumCacheTTL": 14400,
      "formats": [
        "image/webp"
      ],
      "maximumRedirects": 3,
      "dangerouslyAllowLocalIP": false,
      "dangerouslyAllowSVG": false,
      "contentSecurityPolicy": "script-src 'none'; frame-src 'none'; sandbox;",
      "contentDispositionType": "attachment",
      "localPatterns": [
        {
          "pathname": "**",
          "search": ""
        }
      ],
      "remotePatterns": [],
      "qualities": [
        75
      ],
      "unoptimized": false
    },
    "reactMaxHeadersLength": 6000,
    "cacheLife": {
      "default": {
        "stale": 300,
        "revalidate": 900,
        "expire": 4294967294
      },
      "seconds": {
        "stale": 30,
        "revalidate": 1,
        "expire": 60
      },
      "minutes": {
        "stale": 300,
        "revalidate": 60,
        "expire": 3600
      },
      "hours": {
        "stale": 300,
        "revalidate": 3600,
        "expire": 86400
      },
      "days": {
        "stale": 300,
        "revalidate": 86400,
        "expire": 604800
      },
      "weeks": {
        "stale": 300,
        "revalidate": 604800,
        "expire": 2592000
      },
      "max": {
        "stale": 300,
        "revalidate": 2592000,
        "expire": 31536000
      }
    },
    "basePath": "",
    "expireTime": 31536000,
    "generateEtags": true,
    "poweredByHeader": true,
    "cacheHandlers": {},
    "cacheMaxMemorySize": 52428800,
    "compress": false,
    "i18n": null,
    "httpAgentOptions": {
      "keepAlive": true
    },
    "pageExtensions": [
      "tsx",
      "ts",
      "jsx",
      "js"
    ],
    "useFileSystemPublicRoutes": true,
    "experimental": {
      "ppr": false,
      "staleTimes": {
        "dynamic": 0,
        "static": 300
      },
      "dynamicOnHover": false,
      "inlineCss": false,
      "authInterrupts": false,
      "fetchCacheKeyPrefix": "",
      "isrFlushToDisk": true,
      "optimizeCss": false,
      "nextScriptWorkers": false,
      "disableOptimizedLoading": false,
      "largePageDataBytes": 128000,
      "serverComponentsHmrCache": true,
      "caseSensitiveRoutes": false,
      "validateRSCRequestHeaders": false,
      "useSkewCookie": false,
      "preloadEntriesOnStart": true,
      "hideLogsAfterAbort": false,
      "removeUncaughtErrorAndRejectionListeners": false,
      "imgOptConcurrency": null,
      "imgOptMaxInputPixels": 268402689,
      "imgOptSequentialRead": null,
      "imgOptSkipMetadata": null,
      "imgOptTimeoutInSeconds": 7,
      "proxyClientMaxBodySize": 10485760,
      "trustHostHeader": true,
      "isExperimentalCompile": false
    }
  },
  "appDir": "/Users/mac/Desktop/code/grepbase",
  "relativeAppDir": "",
  "files": [
    ".next/routes-manifest.json",
    ".next/server/pages-manifest.json",
    ".next/build-manifest.json",
    ".next/prerender-manifest.json",
    ".next/server/functions-config-manifest.json",
    ".next/server/middleware-manifest.json",
    ".next/server/middleware-build-manifest.js",
    ".next/server/app-paths-manifest.json",
    ".next/app-path-routes-manifest.json",
    ".next/server/server-reference-manifest.js",
    ".next/server/server-reference-manifest.json",
    ".next/BUILD_ID",
    ".next/server/next-font-manifest.js",
    ".next/server/next-font-manifest.json",
    ".next/required-server-files.json"
  ],
  "ignore": []
}
/**/;self.__RSC_SERVER_MANIFEST="{\n  \"node\": {},\n  \"edge\": {},\n  \"encryptionKey\": \"HIkFfxuDQ9rfgXGUELv4X49Y5t2fwI9K7IXQ1Y4+o5A=\"\n}"
/**/;globalThis.__RSC_MANIFEST = globalThis.__RSC_MANIFEST || {};
globalThis.__RSC_MANIFEST["/api/repos/[id]/summarize/route"] = {"moduleLoading":{"prefix":"","crossOrigin":null},"clientModules":{},"ssrModuleMapping":{},"edgeSSRModuleMapping":{},"rscModuleMapping":{},"edgeRscModuleMapping":{},"entryCSSFiles":{},"entryJSFiles":{}}

/**/;(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["chunks/_next-internal_server_app_api_repos_[id]_summarize_route_actions_9442c97c.js",7377,(_,s,a)=>{}]);

//# sourceMappingURL=_next-internal_server_app_api_repos_%5Bid%5D_summarize_route_actions_9442c97c.js.map
/**/;(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["chunks/[root-of-the-server]__5f5efe2e._.js",85105,e=>{"use strict";var t=e.i(34953);e.s(["afterTaskAsyncStorage",()=>t.afterTaskAsyncStorageInstance])},78500,(e,t,n)=>{t.exports=e.x("node:async_hooks",()=>require("node:async_hooks"))},69568,e=>{"use strict";let t;class n extends Error{constructor(e,t){super(`Invariant: ${e.endsWith(".")?e:e+"."} This is a bug in Next.js.`,t),this.name="InvariantError"}}class r{constructor(){throw this.count=0,this.earlyListeners=[],this.listeners=[],this.tickPending=!1,this.pendingTimeoutCleanup=null,this.subscribedSignals=null,this.invokeListenersIfNoPendingReads=()=>{if(this.pendingTimeoutCleanup=null,0===this.count){for(let e=0;e<this.listeners.length;e++)this.listeners[e]();this.listeners.length=0}},Object.defineProperty(new n("CacheSignal cannot be used in the edge runtime, because `cacheComponents` does not support it."),"__NEXT_ERROR_CODE",{value:"E728",enumerable:!1,configurable:!0})}noMorePendingCaches(){var e;let t,n;this.tickPending||(this.tickPending=!0,queueMicrotask(()=>process.nextTick(()=>{if(this.tickPending=!1,0===this.count){for(let e=0;e<this.earlyListeners.length;e++)this.earlyListeners[e]();this.earlyListeners.length=0}}))),this.pendingTimeoutCleanup&&this.pendingTimeoutCleanup(),this.pendingTimeoutCleanup=(e=this.invokeListenersIfNoPendingReads,n=setImmediate(()=>{t=clearTimeout.bind(null,setTimeout(e,0))}),t=clearImmediate.bind(null,n),()=>t())}inputReady(){return new Promise(e=>{this.earlyListeners.push(e),0===this.count&&this.noMorePendingCaches()})}cacheReady(){return new Promise(e=>{this.listeners.push(e),0===this.count&&this.noMorePendingCaches()})}beginRead(){if(this.count++,this.pendingTimeoutCleanup&&(this.pendingTimeoutCleanup(),this.pendingTimeoutCleanup=null),null!==this.subscribedSignals)for(let e of this.subscribedSignals)e.beginRead()}endRead(){if(0===this.count)throw Object.defineProperty(new n("CacheSignal got more endRead() calls than beginRead() calls"),"__NEXT_ERROR_CODE",{value:"E678",enumerable:!1,configurable:!0});if(this.count--,0===this.count&&this.noMorePendingCaches(),null!==this.subscribedSignals)for(let e of this.subscribedSignals)e.endRead()}hasPendingReads(){return this.count>0}trackRead(e){this.beginRead();let t=this.endRead.bind(this);return e.then(t,t),e}subscribeToReads(e){if(e===this)throw Object.defineProperty(new n("A CacheSignal cannot subscribe to itself"),"__NEXT_ERROR_CODE",{value:"E679",enumerable:!1,configurable:!0});null===this.subscribedSignals&&(this.subscribedSignals=new Set),this.subscribedSignals.add(e);for(let t=0;t<this.count;t++)e.beginRead();return this.unsubscribeFromReads.bind(this,e)}unsubscribeFromReads(e){this.subscribedSignals&&this.subscribedSignals.delete(e)}}function s(){return t||(t=new r),t}function i(e){s().trackRead(e)}function a(e){let t=s();if(null!==e&&"object"==typeof e&&"then"in e&&"function"==typeof e.then){let n=Promise.resolve(e);t.trackRead(n)}}function o(e){let t=s().subscribeToReads(e);e.cacheReady().then(t)}e.s(["trackPendingChunkLoad",()=>i,"trackPendingImport",()=>a,"trackPendingModules",()=>o],69568)},70438,e=>{"use strict";var t=e.i(89610);e.s(["actionAsyncStorage",()=>t.actionAsyncStorageInstance])},34080,35171,e=>{"use strict";let t=(0,e.i(42871).createAsyncLocalStorage)();e.s(["dynamicAccessAsyncStorageInstance",0,t],34080),e.s(["dynamicAccessAsyncStorage",0,t],35171)},51615,(e,t,n)=>{t.exports=e.x("node:buffer",()=>require("node:buffer"))},42871,e=>{"use strict";let t=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class n{disable(){throw t}getStore(){}run(){throw t}exit(){throw t}enterWith(){throw t}static bind(e){return e}}let r="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function s(){return r?new r:new n}e.s(["createAsyncLocalStorage",()=>s])},13477,e=>{"use strict";let t=(0,e.i(42871).createAsyncLocalStorage)();e.s(["workAsyncStorageInstance",0,t])},68644,e=>{"use strict";var t=e.i(13477);e.s(["workAsyncStorage",()=>t.workAsyncStorageInstance])},85021,e=>{"use strict";let t=(0,e.i(42871).createAsyncLocalStorage)();e.s(["workUnitAsyncStorageInstance",0,t])},18904,e=>{"use strict";var t=e.i(85021);e.s(["workUnitAsyncStorage",()=>t.workUnitAsyncStorageInstance])},89610,e=>{"use strict";let t=(0,e.i(42871).createAsyncLocalStorage)();e.s(["actionAsyncStorageInstance",0,t])},34953,e=>{"use strict";let t=(0,e.i(42871).createAsyncLocalStorage)();e.s(["afterTaskAsyncStorageInstance",0,t])},84256,e=>{"use strict";async function t(){return"_ENTRIES"in globalThis&&_ENTRIES.middleware_instrumentation&&await _ENTRIES.middleware_instrumentation}let n=null;async function r(){if("phase-production-build"===process.env.NEXT_PHASE)return;n||(n=t());let e=await n;if(null==e?void 0:e.register)try{await e.register()}catch(e){throw e.message=`An error occurred while loading instrumentation hook: ${e.message}`,e}}async function s(...e){let n=await t();try{var r;await (null==n||null==(r=n.onRequestError)?void 0:r.call(n,...e))}catch(e){console.error("Error in instrumentation.onRequestError:",e)}}let i=null;function a(){return i||(i=r()),i}function o(e){return`The edge runtime does not support Node.js '${e}' module.
Learn More: https://nextjs.org/docs/messages/node-module-in-edge-runtime`}process!==e.g.process&&(process.env=e.g.process.env,e.g.process=process);try{Object.defineProperty(globalThis,"__import_unsupported",{value:function(e){let t=new Proxy(function(){},{get(t,n){if("then"===n)return{};throw Object.defineProperty(Error(o(e)),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})},construct(){throw Object.defineProperty(Error(o(e)),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})},apply(n,r,s){if("function"==typeof s[0])return s[0](t);throw Object.defineProperty(Error(o(e)),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}});return new Proxy({},{get:()=>t})},enumerable:!1,configurable:!1})}catch{}a(),e.s(["edgeInstrumentationOnRequestError",()=>s,"ensureInstrumentationRegistered",()=>a,"getEdgeInstrumentationModule",()=>t])},66060,(e,t,n)=>{self._ENTRIES||={};let r=Promise.resolve().then(()=>e.i(33330));r.catch(()=>{}),self._ENTRIES["middleware_app/api/repos/[id]/summarize/route"]=new Proxy(r,{get(e,t){if("then"===t)return(t,n)=>e.then(t,n);let n=(...n)=>e.then(e=>(0,e[t])(...n));return n.then=(n,r)=>e.then(e=>e[t]).then(n,r),n}})},33330,e=>{"use strict";let t;var n,r=e.i(92480),s=e.i(87259),i=e.i(51615),a=e.i(73246),o=e.i(23646),l=e.i(32995),u=e.i(4842),c=e.i(68045),d=e.i(87167),p=e.i(20900),h=e.i(83877),g=e.i(546),m=e.i(66163),f=e.i(16423),R=e.i(63402),b=e.i(40409),E=e.i(14327),y=e.i(80441);e.i(27064);var w=e.i(34277),v=e.i(40831);e.i(17649);var S=e.i(60378),T=e.i(71062),_=e.i(87633),A=e.i(97804);async function C(e,{params:t}){try{let n=(0,v.getDb)(),{id:r}=await t,{provider:s,apiKey:i,model:a,baseUrl:o}=await e.json(),l=await n.select().from(S.repositories).where((0,T.eq)(S.repositories.id,parseInt(r))).limit(1);if(0===l.length)return Response.json({error:"Repository not found"},{status:404});let u=l[0];if("ollama"!==s&&"lmstudio"!==s&&!i)return Response.json({error:"API key is required"},{status:400});let c=(0,_.createAIProvider)({type:s,apiKey:i,model:a,baseUrl:o}),d=`You are an expert at explaining software projects to developers. 
Your role is to provide a clear, engaging overview of a GitHub repository that helps newcomers understand:
1. What the project does and why it exists
2. The main technologies and patterns used
3. Key concepts someone should understand
4. How to get started exploring the codebase

Be concise but thorough. Use markdown formatting with headers and bullet points.
Write in an enthusiastic, welcoming tone that encourages exploration.`,p=`Please analyze this GitHub repository and provide a comprehensive overview:

**Repository:** ${u.owner}/${u.name}
**Description:** ${u.description||"No description provided"}
**Stars:** ${u.stars}

${u.readme?`**README Content:**
${u.readme.substring(0,8e3)}${u.readme.length>8e3?"\n... (truncated)":""}`:"No README available."}

Please provide:
1. **What This Project Does** - A beginner-friendly explanation
2. **Key Technologies** - Main languages, frameworks, and tools used
3. **Core Concepts** - Important patterns or ideas to understand
4. **Where to Start** - Recommended files or areas to explore first
5. **Quick Tips** - Advice for someone new to this codebase`;return(0,A.streamText)({model:c,system:d,prompt:p,maxOutputTokens:2e3}).toTextStreamResponse()}catch(e){return console.error("Error generating summary:",e),Response.json({error:e instanceof Error?e.message:"Failed to generate summary"},{status:500})}}e.s(["POST",()=>C,"runtime",0,"edge"],73653);var P=e.i(73653);let x=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/repos/[id]/summarize/route",pathname:"/api/repos/[id]/summarize",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/repos/[id]/summarize/route.ts",nextConfigOutput:"",userland:P}),{workAsyncStorage:O,workUnitAsyncStorage:k,serverHooks:I}=x;function N(){return(0,l.patchFetch)({workAsyncStorage:O,workUnitAsyncStorage:k})}async function M(e,t,n){x.isDev&&(0,u.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let s="/api/repos/[id]/summarize/route";s=s.replace(/\/index$/,"")||"/";let a=await x.prepare(e,t,{srcPage:s,multiZoneDraftMode:!1});if(!a)return t.statusCode=400,t.end("Bad Request"),null==n.waitUntil||n.waitUntil.call(n,Promise.resolve()),null;let{buildId:l,params:v,nextConfig:S,parsedUrl:T,isDraftMode:_,prerenderManifest:A,routerServerContext:C,isOnDemandRevalidate:P,revalidateOnlyGenerated:O,resolvedPathname:k,clientReferenceManifest:I,serverActionsManifest:N}=a,M=(0,d.normalizeAppPath)(s),j=!!(A.dynamicRoutes[M]||A.routes[k]),D=async()=>((null==C?void 0:C.render404)?await C.render404(e,t,T,!1):t.end("This page could not be found"),null);if(j&&!_){let e=!!A.routes[k],t=A.dynamicRoutes[M];if(t&&!1===t.fallback&&!e){if(S.experimental.adapterPath)return await D();throw new y.NoFallbackError}}let U=null;!j||x.isDev||_||(U="/index"===(U=k)?"/":U);let q=!0===x.isDev||!j,L=j&&!q;N&&I&&(0,r.setManifestsSingleton)({page:s,clientReferenceManifest:I,serverActionsManifest:N});let H=e.method||"GET",$=(0,c.getTracer)(),F=$.getActiveScopeSpan(),K={params:v,prerenderManifest:A,renderOpts:{experimental:{authInterrupts:!!S.experimental.authInterrupts},cacheComponents:!!S.cacheComponents,supportsDynamicResponse:q,incrementalCache:(0,u.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:S.cacheLife,waitUntil:n.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,n,r,s)=>x.onRequestError(e,t,r,s,C)},sharedContext:{buildId:l}},X=new p.NodeNextRequest(e),z=new p.NodeNextResponse(t),W=h.NextRequestAdapter.fromNodeNextRequest(X,(0,h.signalFromNodeResponse)(t));try{let r=async e=>x.handle(W,K).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let n=$.getRootSpanAttributes();if(!n)return;if(n.get("next.span_type")!==g.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${n.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let r=n.get("next.route");if(r){let t=`${H} ${r}`;e.setAttributes({"next.route":r,"http.route":r,"next.span_name":t}),e.updateName(t)}else e.updateName(`${H} ${s}`)}),a=!!(0,u.getRequestMeta)(e,"minimalMode"),l=async l=>{var u,c;let d=async({previousCacheEntry:o})=>{try{if(!a&&P&&O&&!o)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let s=await r(l);e.fetchMetrics=K.renderOpts.fetchMetrics;let u=K.renderOpts.pendingWaitUntil;u&&n.waitUntil&&(n.waitUntil(u),u=void 0);let c=K.renderOpts.collectedTags;if(!j)return await (0,f.sendResponse)(X,z,s,K.renderOpts.pendingWaitUntil),null;{let e=await s.blob(),t=(0,R.toNodeOutgoingHttpHeaders)(s.headers);c&&(t[E.NEXT_CACHE_TAGS_HEADER]=c),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let n=void 0!==K.renderOpts.collectedRevalidate&&!(K.renderOpts.collectedRevalidate>=E.INFINITE_CACHE)&&K.renderOpts.collectedRevalidate,r=void 0===K.renderOpts.collectedExpire||K.renderOpts.collectedExpire>=E.INFINITE_CACHE?void 0:K.renderOpts.collectedExpire;return{value:{kind:w.CachedRouteKind.APP_ROUTE,status:s.status,body:i.Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:n,expire:r}}}}catch(t){throw(null==o?void 0:o.isStale)&&await x.onRequestError(e,t,{routerKind:"App Router",routePath:s,routeType:"route",revalidateReason:(0,m.getRevalidateReason)({isStaticGeneration:L,isOnDemandRevalidate:P})},!1,C),t}},p=await x.handleResponse({req:e,nextConfig:S,cacheKey:U,routeKind:o.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:A,isRoutePPREnabled:!1,isOnDemandRevalidate:P,revalidateOnlyGenerated:O,responseGenerator:d,waitUntil:n.waitUntil,isMinimalMode:a});if(!j)return null;if((null==p||null==(u=p.value)?void 0:u.kind)!==w.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==p||null==(c=p.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});a||t.setHeader("x-nextjs-cache",P?"REVALIDATED":p.isMiss?"MISS":p.isStale?"STALE":"HIT"),_&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let h=(0,R.fromNodeOutgoingHttpHeaders)(p.value.headers);return a&&j||h.delete(E.NEXT_CACHE_TAGS_HEADER),!p.cacheControl||t.getHeader("Cache-Control")||h.get("Cache-Control")||h.set("Cache-Control",(0,b.getCacheControlHeader)(p.cacheControl)),await (0,f.sendResponse)(X,z,new Response(p.value.body,{headers:h,status:p.value.status||200})),null};F?await l(F):await $.withPropagatedContext(e.headers,()=>$.trace(g.BaseServerSpan.handleRequest,{spanName:`${H} ${s}`,kind:c.SpanKind.SERVER,attributes:{"http.method":H,"http.target":e.url}},l))}catch(t){if(t instanceof y.NoFallbackError||await x.onRequestError(e,t,{routerKind:"App Router",routePath:M,routeType:"route",revalidateReason:(0,m.getRevalidateReason)({isStaticGeneration:L,isOnDemandRevalidate:P})},!1,C),j)throw t;return await (0,f.sendResponse)(X,z,new Response(null,{status:500})),null}}e.s(["handler",()=>M,"patchFetch",()=>N,"routeModule",()=>x,"serverHooks",()=>I,"workAsyncStorage",()=>O,"workUnitAsyncStorage",()=>k],97382);var j=e.i(97382);let D=null==(n=self.__RSC_MANIFEST)?void 0:n["/api/repos/[id]/summarize/route"],U=(t=self.__RSC_SERVER_MANIFEST)?JSON.parse(t):void 0;D&&U&&(0,r.setManifestsSingleton)({page:"/api/repos/[id]/summarize/route",clientReferenceManifest:D,serverActionsManifest:U});let q=s.EdgeRouteModuleWrapper.wrap(j.routeModule,{page:"/api/repos/[id]/summarize/route"});e.s(["ComponentMod",0,j,"default",0,q],33330)}]);

//# sourceMappingURL=%5Broot-of-the-server%5D__5f5efe2e._.js.map
/**/;(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["chunks/_7ece717d._.js",59518,(e,t,i)=>{},58168,(e,t,i)=>{"use strict";let s,r,n,a,l;var o=Object.create,u=Object.defineProperty,c=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyNames,d=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,m=(e,t,i,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of h(t))f.call(e,r)||r===i||u(e,r,{get:()=>t[r],enumerable:!(s=c(t,r))||s.enumerable});return e},g=(s={"../../node_modules/dedent-tabs/dist/dedent-tabs.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){for(var t="string"==typeof e?[e]:e.raw,i="",s=0;s<t.length;s++)if(i+=t[s].replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\\{/g,"{"),s<(1>=arguments.length?0:arguments.length-1)){var r=i.substring(i.lastIndexOf("\n")+1).match(/^(\s*)\S?/);i+=((1>s+1||arguments.length<=s+1?void 0:arguments[s+1])+"").replace(/\n/g,"\n"+r[1])}var n=i.split("\n"),a=null;if(n.forEach(function(e){var t=Math.min,i=e.match(/^(\s+)\S+/);if(i){var s=i[1].length;a=a?t(a,s):s}}),null!==a){var l=a;i=n.map(function(e){return" "===e[0]||"	"===e[0]?e.slice(l):e}).join("\n")}return i.trim().replace(/\\n/g,"\n")}}},function(){return r||(0,s[h(s)[0]])((r={exports:{}}).exports,r),r.exports}),p={},y={getOptionalRequestContext:()=>v,getRequestContext:()=>T};for(var b in y)u(p,b,{get:y[b],enumerable:!0});t.exports=m(u({},"__esModule",{value:!0}),p),e.r(59518);var w=(l=null!=(n=g())?o(d(n)):{},m(!a&&n&&n.__esModule?l:u(l,"default",{value:n,enumerable:!0}),n)),S=Symbol.for("__cloudflare-request-context__");function v(){let e=globalThis[S];if("nodejs"==(process?.release?.name==="node"?"nodejs":"edge"))throw Error(w.default`
			\`getRequestContext\` and \`getOptionalRequestContext\` can only be run
			inside the edge runtime, so please make sure to have included
			\`export const runtime = 'edge'\` in all the routes using such functions
			(regardless of whether they are used directly or indirectly through imports).
		`);return e}function T(){let e=v();if(!e){if(process?.env?.NEXT_PHASE==="phase-production-build")throw Error(w.default`
				\n\`getRequestContext\` is being called at the top level of a route file, this is not supported
				for more details see https://developers.cloudflare.com/pages/framework-guides/nextjs/ssr/troubleshooting/#top-level-getrequestcontext \n
			`);throw Error("Failed to retrieve the Cloudflare request context.")}return e}},40831,71062,76436,60378,17649,e=>{"use strict";let t,i;var s,r=e.i(58168);let n=Symbol.for("drizzle:entityKind");function a(e,t){if(!e||"object"!=typeof e)return!1;if(e instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,n))throw Error(`Class "${t.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let i=Object.getPrototypeOf(e).constructor;if(i)for(;i;){if(n in i&&i[n]===t[n])return!0;i=Object.getPrototypeOf(i)}return!1}Symbol.for("drizzle:hasOwnEntityKind");class l{static [n]="ConsoleLogWriter";write(e){console.log(e)}}class o{static [n]="DefaultLogger";writer;constructor(e){this.writer=e?.writer??new l}logQuery(e,t){let i=t.map(e=>{try{return JSON.stringify(e)}catch{return String(e)}}),s=i.length?` -- params: [${i.join(", ")}]`:"";this.writer.write(`Query: ${e}${s}`)}}class u{static [n]="NoopLogger";logQuery(){}}let c=Symbol.for("drizzle:Name"),h=Symbol.for("drizzle:Schema"),d=Symbol.for("drizzle:Columns"),f=Symbol.for("drizzle:ExtraConfigColumns"),m=Symbol.for("drizzle:OriginalName"),g=Symbol.for("drizzle:BaseName"),p=Symbol.for("drizzle:IsAlias"),y=Symbol.for("drizzle:ExtraConfigBuilder"),b=Symbol.for("drizzle:IsDrizzleTable");class w{static [n]="Table";static Symbol={Name:c,Schema:h,OriginalName:m,Columns:d,ExtraConfigColumns:f,BaseName:g,IsAlias:p,ExtraConfigBuilder:y};[c];[m];[h];[d];[f];[g];[p]=!1;[b]=!0;[y]=void 0;constructor(e,t,i){this[c]=this[m]=e,this[h]=t,this[g]=i}}function S(e){return`${e[h]??"public"}.${e[c]}`}class v{constructor(e,t){this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}static [n]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return void 0!==this.config.generated&&"byDefault"!==this.config.generated.type}}class T{static [n]="ColumnBuilder";config;constructor(e,t,i){this.config={name:e,keyAsName:""===e,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:i,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){""===this.config.name&&(this.config.name=e)}}class x{static [n]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,t){this.reference=()=>{let{name:t,columns:i,foreignColumns:s}=e();return{name:t,columns:i,foreignTable:s[0].table,foreignColumns:s}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=void 0===e?"no action":e,this}onDelete(e){return this._onDelete=void 0===e?"no action":e,this}build(e){return new $(e,this)}}class ${constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}static [n]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:t,foreignColumns:i}=this.reference(),s=t.map(e=>e.name),r=i.map(e=>e.name),n=[this.table[c],...s,i[0].table[c],...r];return e??`${n.join("_")}_fk`}}function N(e,...t){return e(...t)}function Q(e,t){return`${e[c]}_${t.join("_")}_unique`}class C{constructor(e,t){this.name=t,this.columns=e}static [n]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new B(e,this.columns,this.nullsNotDistinctConfig,this.name)}}class P{static [n]="PgUniqueOnConstraintBuilder";name;constructor(e){this.name=e}on(...e){return new C(e,this.name)}}class B{constructor(e,t,i,s){this.table=e,this.columns=t,this.name=s??Q(this.table,this.columns.map(e=>e.name)),this.nullsNotDistinct=i}static [n]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}}function L(e,t,i){for(let s=t;s<e.length;s++){let r=e[s];if("\\"===r){s++;continue}if('"'===r)return[e.slice(t,s).replace(/\\/g,""),s+1];if(!i&&(","===r||"}"===r))return[e.slice(t,s).replace(/\\/g,""),s]}return[e.slice(t).replace(/\\/g,""),e.length]}class q extends T{foreignKeyConfigs=[];static [n]="PgColumnBuilder";array(e){return new j(this.config.name,this,e)}references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e,t){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=t?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:i,actions:s})=>N((i,s)=>{let r=new x(()=>({columns:[e],foreignColumns:[i()]}));return s.onUpdate&&r.onUpdate(s.onUpdate),s.onDelete&&r.onDelete(s.onDelete),r.build(t)},i,s))}buildExtraConfigColumn(e){return new O(e,this.config)}}class D extends v{constructor(e,t){t.uniqueName||(t.uniqueName=Q(e,[t.name])),super(e,t),this.table=e}static [n]="PgColumn"}class O extends D{static [n]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}}class F{static [n]="IndexedColumn";constructor(e,t,i,s){this.name=e,this.keyAsName=t,this.type=i,this.indexConfig=s}name;keyAsName;type;indexConfig}class j extends q{static [n]="PgArrayBuilder";constructor(e,t,i){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=i}build(e){let t=this.config.baseBuilder.build(e);return new _(e,this.config,t)}}class _ extends D{constructor(e,t,i,s){super(e,t),this.baseColumn=i,this.range=s,this.size=t.size}size;static [n]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${"number"==typeof this.size?this.size:""}]`}mapFromDriverValue(e){return"string"==typeof e&&(e=function(e){let[t]=function e(t,i=0){let s=[],r=i,n=!1;for(;r<t.length;){let a=t[r];if(","===a){(n||r===i)&&s.push(""),n=!0,r++;continue}if(n=!1,"\\"===a){r+=2;continue}if('"'===a){let[e,i]=L(t,r+1,!0);s.push(e),r=i;continue}if("}"===a)return[s,r+1];if("{"===a){let[i,n]=e(t,r+1);s.push(i),r=n;continue}let[l,o]=L(t,r,!1);s.push(l),r=o}return[s,r]}(e,1);return t}(e)),e.map(e=>this.baseColumn.mapFromDriverValue(e))}mapToDriverValue(e,t=!1){let i=e.map(e=>null===e?null:a(this.baseColumn,_)?this.baseColumn.mapToDriverValue(e,!0):this.baseColumn.mapToDriverValue(e));return t?i:function e(t){return`{${t.map(t=>Array.isArray(t)?e(t):"string"==typeof t?`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${t}`).join(",")}}`}(i)}}class A extends q{static [n]="PgEnumObjectColumnBuilder";constructor(e,t){super(e,"string","PgEnumObjectColumn"),this.config.enum=t}build(e){return new I(e,this.config)}}class I extends D{static [n]="PgEnumObjectColumn";enum;enumValues=this.config.enum.enumValues;constructor(e,t){super(e,t),this.enum=t.enum}getSQLType(){return this.enum.enumName}}let V=Symbol.for("drizzle:isPgEnum");class R extends q{static [n]="PgEnumColumnBuilder";constructor(e,t){super(e,"string","PgEnumColumn"),this.config.enum=t}build(e){return new E(e,this.config)}}class E extends D{static [n]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(e,t){super(e,t),this.enum=t.enum}getSQLType(){return this.enum.enumName}}class z{static [n]="Subquery";constructor(e,t,i,s=!1,r=[]){this._={brand:"Subquery",sql:e,selectedFields:t,alias:i,isWith:s,usedTables:r}}}class M extends z{static [n]="WithSubquery"}let U=(e,s)=>t?(i||(i=t.trace.getTracer("drizzle-orm","0.45.1")),N((t,i)=>i.startActiveSpan(e,e=>{try{return s(e)}catch(i){throw e.setStatus({code:t.SpanStatusCode.ERROR,message:i instanceof Error?i.message:"Unknown error"}),i}finally{e.end()}}),t,i)):s(),k=Symbol.for("drizzle:ViewBaseConfig");class K{static [n]="FakePrimitiveParam"}function J(e){return null!=e&&"function"==typeof e.getSQL}class W{static [n]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new G([this])}}class G{constructor(e){for(const t of(this.queryChunks=e,e))if(a(t,w)){const e=t[w.Symbol.Schema];this.usedTables.push(void 0===e?t[w.Symbol.Name]:e+"."+t[w.Symbol.Name])}}static [n]="SQL";decoder=H;shouldInlineParams=!1;usedTables=[];append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return U("drizzle.buildSQL",t=>{let i=this.buildQueryFromSourceParams(this.queryChunks,e);return t?.setAttributes({"drizzle.query.text":i.sql,"drizzle.query.params":JSON.stringify(i.params)}),i})}buildQueryFromSourceParams(e,t){let i=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{casing:s,escapeName:r,escapeParam:n,prepareTyping:l,inlineParams:o,paramStartIndex:u}=i;var c=e.map(e=>{if(a(e,W))return{sql:e.value.join(""),params:[]};if(a(e,Y))return{sql:r(e.value),params:[]};if(void 0===e)return{sql:"",params:[]};if(Array.isArray(e)){let t=[new W("(")];for(let[i,s]of e.entries())t.push(s),i<e.length-1&&t.push(new W(", "));return t.push(new W(")")),this.buildQueryFromSourceParams(t,i)}if(a(e,G))return this.buildQueryFromSourceParams(e.queryChunks,{...i,inlineParams:o||e.shouldInlineParams});if(a(e,w)){let t=e[w.Symbol.Schema],i=e[w.Symbol.Name];return{sql:void 0===t||e[p]?r(i):r(t)+"."+r(i),params:[]}}if(a(e,v)){let i=s.getColumnCasing(e);if("indexes"===t.invokeSource)return{sql:r(i),params:[]};let n=e.table[w.Symbol.Schema];return{sql:e.table[p]||void 0===n?r(e.table[w.Symbol.Name])+"."+r(i):r(n)+"."+r(e.table[w.Symbol.Name])+"."+r(i),params:[]}}if(a(e,ea)){let t=e[k].schema,i=e[k].name;return{sql:void 0===t||e[k].isAlias?r(i):r(t)+"."+r(i),params:[]}}if(a(e,X)){if(a(e.value,es))return{sql:n(u.value++,e),params:[e],typings:["none"]};let t=null===e.value?null:e.encoder.mapToDriverValue(e.value);if(a(t,G))return this.buildQueryFromSourceParams([t],i);if(o)return{sql:this.mapInlineParam(t,i),params:[]};let s=["none"];return l&&(s=[l(e.encoder)]),{sql:n(u.value++,t),params:[t],typings:s}}return a(e,es)?{sql:n(u.value++,e),params:[e],typings:["none"]}:a(e,G.Aliased)&&void 0!==e.fieldAlias?{sql:r(e.fieldAlias),params:[]}:a(e,z)?e._.isWith?{sql:r(e._.alias),params:[]}:this.buildQueryFromSourceParams([new W("("),e._.sql,new W(") "),new Y(e._.alias)],i):e&&"function"==typeof e&&V in e&&!0===e[V]?e.schema?{sql:r(e.schema)+"."+r(e.enumName),params:[]}:{sql:r(e.enumName),params:[]}:J(e)?e.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([e.getSQL()],i):this.buildQueryFromSourceParams([new W("("),e.getSQL(),new W(")")],i):o?{sql:this.mapInlineParam(e,i),params:[]}:{sql:n(u.value++,e),params:[e],typings:["none"]}});let h={sql:"",params:[]};for(let e of c)h.sql+=e.sql,h.params.push(...e.params),e.typings?.length&&(h.typings||(h.typings=[]),h.typings.push(...e.typings));return h}mapInlineParam(e,{escapeString:t}){if(null===e)return"null";if("number"==typeof e||"boolean"==typeof e)return e.toString();if("string"==typeof e)return t(e);if("object"==typeof e){let i=e.toString();return"[object Object]"===i?t(JSON.stringify(e)):t(i)}throw Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return void 0===e?this:new G.Aliased(this,e)}mapWith(e){return this.decoder="function"==typeof e?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}}class Y{constructor(e){this.value=e}static [n]="Name";brand;getSQL(){return new G([this])}}let H={mapFromDriverValue:e=>e},Z={mapToDriverValue:e=>e};({...H,...Z});class X{constructor(e,t=Z){this.value=e,this.encoder=t}static [n]="Param";brand;getSQL(){return new G([this])}}function ee(e,...t){let i=[];for(let[s,r]of((t.length>0||e.length>0&&""!==e[0])&&i.push(new W(e[0])),t.entries()))i.push(r,new W(e[s+1]));return new G(i)}(s=ee||(ee={})).empty=function(){return new G([])},s.fromList=function(e){return new G(e)},s.raw=function(e){return new G([new W(e)])},s.join=function(e,t){let i=[];for(let[s,r]of e.entries())s>0&&void 0!==t&&i.push(t),i.push(r);return new G(i)},s.identifier=function(e){return new Y(e)},s.placeholder=function(e){return new es(e)},s.param=function(e,t){return new X(e,t)};var et=G||(G={});class ei{constructor(e,t){this.sql=e,this.fieldAlias=t}static [n]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new ei(this.sql,this.fieldAlias)}}et.Aliased=ei;class es{constructor(e){this.name=e}static [n]="Placeholder";getSQL(){return new G([this])}}function er(e,t){return e.map(e=>{if(a(e,es)){if(!(e.name in t))throw Error(`No value for placeholder "${e.name}" was provided`);return t[e.name]}if(a(e,X)&&a(e.value,es)){if(!(e.value.name in t))throw Error(`No value for placeholder "${e.value.name}" was provided`);return e.encoder.mapToDriverValue(t[e.value.name])}return e})}let en=Symbol.for("drizzle:IsDrizzleView");class ea{static [n]="View";[k];[en]=!0;constructor({name:e,schema:t,selectedFields:i,query:s}){this[k]={name:e,originalName:e,schema:t,selectedFields:i,query:s,isExisting:!s,isAlias:!1}}getSQL(){return new G([this])}}function el(e,t,i){let s={},r=e.reduce((e,{path:r,field:n},l)=>{let o;o=a(n,v)?n:a(n,G)?n.decoder:a(n,z)?n._.sql.decoder:n.sql.decoder;let u=e;for(let[e,h]of r.entries())if(e<r.length-1)h in u||(u[h]={}),u=u[h];else{let e=t[l],d=u[h]=null===e?null:o.mapFromDriverValue(e);if(i&&a(n,v)&&2===r.length){let e=r[0];e in s?"string"==typeof s[e]&&s[e]!==n.table[c]&&(s[e]=!1):s[e]=null===d&&n.table[c]}}return e},{});if(i&&Object.keys(s).length>0)for(let[e,t]of Object.entries(s))"string"!=typeof t||i[t]||(r[e]=null);return r}function eo(e,t){return Object.entries(e).reduce((e,[i,s])=>{if("string"!=typeof i)return e;let r=t?[...t,i]:[i];return a(s,v)||a(s,G)||a(s,G.Aliased)||a(s,z)?e.push({path:r,field:s}):a(s,w)?e.push(...eo(s[w.Symbol.Columns],r)):e.push(...eo(s,r)),e},[])}function eu(e,t){let i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(let[e,t]of i.entries())if(t!==s[e])return!1;return!0}function ec(e,t){let i=Object.entries(t).filter(([,e])=>void 0!==e).map(([t,i])=>a(i,G)||a(i,v)?[t,i]:[t,new X(i,e[w.Symbol.Columns][t])]);if(0===i.length)throw Error("No values to set");return Object.fromEntries(i)}function eh(e){return a(e,z)?e._.alias:a(e,ea)?e[k].name:a(e,G)?void 0:e[w.Symbol.IsAlias]?e[w.Symbol.Name]:e[w.Symbol.BaseName]}function ed(e,t){return{name:"string"==typeof e&&e.length>0?e:"",config:"object"==typeof e?e:t}}v.prototype.getSQL=function(){return new G([this])},w.prototype.getSQL=function(){return new G([this])},z.prototype.getSQL=function(){return new G([this])};let ef="undefined"==typeof TextDecoder?null:new TextDecoder;class em extends q{static [n]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){let{name:t,...i}=e;this.config.generatedIdentity={type:"always",sequenceName:t,sequenceOptions:i}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){let{name:t,...i}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:t,sequenceOptions:i}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}class eg extends em{static [n]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new ep(e,this.config)}}class ep extends D{static [n]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}}class ey extends em{static [n]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new eb(e,this.config)}}class eb extends D{static [n]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}class ew extends q{static [n]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new eS(e,this.config)}}class eS extends D{static [n]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}}class ev extends q{static [n]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new eT(e,this.config)}}class eT extends D{static [n]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}class ex extends q{static [n]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new e$(e,this.config)}}class e$ extends D{static [n]="PgBoolean";getSQLType(){return"boolean"}}class eN extends q{static [n]="PgCharBuilder";constructor(e,t){super(e,"string","PgChar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new eQ(e,this.config)}}class eQ extends D{static [n]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"char":`char(${this.length})`}}class eC extends q{static [n]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new eP(e,this.config)}}class eP extends D{static [n]="PgCidr";getSQLType(){return"cidr"}}class eB extends q{static [n]="PgCustomColumnBuilder";constructor(e,t,i){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=i}build(e){return new eL(e,this.config)}}class eL extends D{static [n]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,t){super(e,t),this.sqlName=t.customTypeParams.dataType(t.fieldConfig),this.mapTo=t.customTypeParams.toDriver,this.mapFrom=t.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return"function"==typeof this.mapFrom?this.mapFrom(e):e}mapToDriverValue(e){return"function"==typeof this.mapTo?this.mapTo(e):e}}class eq extends q{static [n]="PgDateColumnBaseBuilder";defaultNow(){return this.default(ee`now()`)}}class eD extends eq{static [n]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new eO(e,this.config)}}class eO extends D{static [n]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return"string"==typeof e?new Date(e):e}mapToDriverValue(e){return e.toISOString()}}class eF extends eq{static [n]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new ej(e,this.config)}}class ej extends D{static [n]="PgDateString";getSQLType(){return"date"}mapFromDriverValue(e){return"string"==typeof e?e:e.toISOString().slice(0,-14)}}class e_ extends q{static [n]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new eA(e,this.config)}}class eA extends D{static [n]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return"string"==typeof e?Number.parseFloat(e):e}}class eI extends q{static [n]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new eV(e,this.config)}}class eV extends D{static [n]="PgInet";getSQLType(){return"inet"}}class eR extends em{static [n]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new eE(e,this.config)}}class eE extends D{static [n]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return"string"==typeof e?Number.parseInt(e):e}}class ez extends q{static [n]="PgIntervalBuilder";constructor(e,t){super(e,"string","PgInterval"),this.config.intervalConfig=t}build(e){return new eM(e,this.config)}}class eM extends D{static [n]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let e=this.fields?` ${this.fields}`:"",t=this.precision?`(${this.precision})`:"";return`interval${e}${t}`}}class eU extends q{static [n]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new ek(e,this.config)}}class ek extends D{static [n]="PgJson";constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if("string"==typeof e)try{return JSON.parse(e)}catch{}return e}}class eK extends q{static [n]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new eJ(e,this.config)}}class eJ extends D{static [n]="PgJsonb";constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if("string"==typeof e)try{return JSON.parse(e)}catch{}return e}}class eW extends q{static [n]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new eG(e,this.config)}}class eG extends D{static [n]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){let[t,i,s]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(i),Number.parseFloat(s)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}class eY extends q{static [n]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new eH(e,this.config)}}class eH extends D{static [n]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){let[t,i,s]=e.slice(1,-1).split(",");return{a:Number.parseFloat(t),b:Number.parseFloat(i),c:Number.parseFloat(s)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}class eZ extends q{static [n]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new eX(e,this.config)}}class eX extends D{static [n]="PgMacaddr";getSQLType(){return"macaddr"}}class e0 extends q{static [n]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new e1(e,this.config)}}class e1 extends D{static [n]="PgMacaddr8";getSQLType(){return"macaddr8"}}class e6 extends q{static [n]="PgNumericBuilder";constructor(e,t,i){super(e,"string","PgNumeric"),this.config.precision=t,this.config.scale=i}build(e){return new e8(e,this.config)}}class e8 extends D{static [n]="PgNumeric";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue(e){return"string"==typeof e?e:String(e)}getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}class e5 extends q{static [n]="PgNumericNumberBuilder";constructor(e,t,i){super(e,"number","PgNumericNumber"),this.config.precision=t,this.config.scale=i}build(e){return new e4(e,this.config)}}class e4 extends D{static [n]="PgNumericNumber";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}mapToDriverValue=String;getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}class e2 extends q{static [n]="PgNumericBigIntBuilder";constructor(e,t,i){super(e,"bigint","PgNumericBigInt"),this.config.precision=t,this.config.scale=i}build(e){return new e3(e,this.config)}}class e3 extends D{static [n]="PgNumericBigInt";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}class e7 extends q{static [n]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new e9(e,this.config)}}class e9 extends D{static [n]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if("string"==typeof e){let[t,i]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(i)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}class te extends q{static [n]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new tt(e,this.config)}}class tt extends D{static [n]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if("string"==typeof e){let[t,i]=e.slice(1,-1).split(",");return{x:Number.parseFloat(t),y:Number.parseFloat(i)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}function ti(e,t){let i=new DataView(new ArrayBuffer(8));for(let s=0;s<8;s++)i.setUint8(s,e[t+s]);return i.getFloat64(0,!0)}function ts(e){let t=function(e){let t=[];for(let i=0;i<e.length;i+=2)t.push(Number.parseInt(e.slice(i,i+2),16));return new Uint8Array(t)}(e),i=0,s=t[0];i+=1;let r=new DataView(t.buffer),n=r.getUint32(i,1===s);if(i+=4,0x20000000&n&&(r.getUint32(i,1===s),i+=4),(65535&n)==1){let e=ti(t,i),s=ti(t,i+=8);return i+=8,[e,s]}throw Error("Unsupported geometry type")}class tr extends q{static [n]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new tn(e,this.config)}}class tn extends D{static [n]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return ts(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}class ta extends q{static [n]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new tl(e,this.config)}}class tl extends D{static [n]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){let t=ts(e);return{x:t[0],y:t[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}class to extends q{static [n]="PgRealBuilder";constructor(e,t){super(e,"number","PgReal"),this.config.length=t}build(e){return new tu(e,this.config)}}class tu extends D{static [n]="PgReal";constructor(e,t){super(e,t)}getSQLType(){return"real"}mapFromDriverValue=e=>"string"==typeof e?Number.parseFloat(e):e}class tc extends q{static [n]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new th(e,this.config)}}class th extends D{static [n]="PgSerial";getSQLType(){return"serial"}}class td extends em{static [n]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new tf(e,this.config)}}class tf extends D{static [n]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=e=>"string"==typeof e?Number(e):e}class tm extends q{static [n]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new tg(e,this.config)}}class tg extends D{static [n]="PgSmallSerial";getSQLType(){return"smallserial"}}class tp extends q{static [n]="PgTextBuilder";constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}build(e){return new ty(e,this.config)}}class ty extends D{static [n]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}class tb extends eq{constructor(e,t,i){super(e,"string","PgTime"),this.withTimezone=t,this.precision=i,this.config.withTimezone=t,this.config.precision=i}static [n]="PgTimeBuilder";build(e){return new tw(e,this.config)}}class tw extends D{static [n]="PgTime";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){let e=void 0===this.precision?"":`(${this.precision})`;return`time${e}${this.withTimezone?" with time zone":""}`}}class tS extends eq{static [n]="PgTimestampBuilder";constructor(e,t,i){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=i}build(e){return new tv(e,this.config)}}class tv extends D{static [n]="PgTimestamp";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){let e=void 0===this.precision?"":` (${this.precision})`;return`timestamp${e}${this.withTimezone?" with time zone":""}`}mapFromDriverValue(e){return"string"==typeof e?new Date(this.withTimezone?e:e+"+0000"):e}mapToDriverValue=e=>e.toISOString()}class tT extends eq{static [n]="PgTimestampStringBuilder";constructor(e,t,i){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=i}build(e){return new tx(e,this.config)}}class tx extends D{static [n]="PgTimestampString";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){let e=void 0===this.precision?"":`(${this.precision})`;return`timestamp${e}${this.withTimezone?" with time zone":""}`}mapFromDriverValue(e){if("string"==typeof e)return e;let t=e.toISOString().slice(0,-1).replace("T"," ");if(this.withTimezone){let i=e.getTimezoneOffset();return`${t}${i<=0?"+":"-"}${Math.floor(Math.abs(i)/60).toString().padStart(2,"0")}`}return t}}class t$ extends q{static [n]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(ee`gen_random_uuid()`)}build(e){return new tN(e,this.config)}}class tN extends D{static [n]="PgUUID";getSQLType(){return"uuid"}}class tQ extends q{static [n]="PgVarcharBuilder";constructor(e,t){super(e,"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new tC(e,this.config)}}class tC extends D{static [n]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"varchar":`varchar(${this.length})`}}class tP extends q{static [n]="PgBinaryVectorBuilder";constructor(e,t){super(e,"string","PgBinaryVector"),this.config.dimensions=t.dimensions}build(e){return new tB(e,this.config)}}class tB extends D{static [n]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}class tL extends q{static [n]="PgHalfVectorBuilder";constructor(e,t){super(e,"array","PgHalfVector"),this.config.dimensions=t.dimensions}build(e){return new tq(e,this.config)}}class tq extends D{static [n]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(e=>Number.parseFloat(e))}}class tD extends q{static [n]="PgSparseVectorBuilder";constructor(e,t){super(e,"string","PgSparseVector"),this.config.dimensions=t.dimensions}build(e){return new tO(e,this.config)}}class tO extends D{static [n]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}class tF extends q{static [n]="PgVectorBuilder";constructor(e,t){super(e,"array","PgVector"),this.config.dimensions=t.dimensions}build(e){return new tj(e,this.config)}}class tj extends D{static [n]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(e=>Number.parseFloat(e))}}let t_=Symbol.for("drizzle:PgInlineForeignKeys"),tA=Symbol.for("drizzle:EnableRLS");class tI extends w{static [n]="PgTable";static Symbol=Object.assign({},w.Symbol,{InlineForeignKeys:t_,EnableRLS:tA});[t_]=[];[tA]=!1;[w.Symbol.ExtraConfigBuilder]=void 0;[w.Symbol.ExtraConfigColumns]={}}class tV{static [n]="PgPrimaryKeyBuilder";columns;name;constructor(e,t){this.columns=e,this.name=t}build(e){return new tR(e,this.columns,this.name)}}class tR{constructor(e,t,i){this.table=e,this.columns=t,this.name=i}static [n]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[tI.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}}function tE(e,t){return"object"!=typeof t||null===t||!("mapToDriverValue"in t)||"function"!=typeof t.mapToDriverValue||J(e)||a(e,X)||a(e,es)||a(e,v)||a(e,w)||a(e,ea)?e:new X(e,t)}let tz=(e,t)=>ee`${e} = ${tE(t,e)}`,tM=(e,t)=>ee`${e} <> ${tE(t,e)}`;function tU(...e){let t=e.filter(e=>void 0!==e);if(0!==t.length)return new G(1===t.length?t:[new W("("),ee.join(t,new W(" and ")),new W(")")])}function tk(...e){let t=e.filter(e=>void 0!==e);if(0!==t.length)return new G(1===t.length?t:[new W("("),ee.join(t,new W(" or ")),new W(")")])}function tK(e){return ee`not ${e}`}let tJ=(e,t)=>ee`${e} > ${tE(t,e)}`,tW=(e,t)=>ee`${e} >= ${tE(t,e)}`,tG=(e,t)=>ee`${e} < ${tE(t,e)}`,tY=(e,t)=>ee`${e} <= ${tE(t,e)}`;function tH(e,t){return Array.isArray(t)?0===t.length?ee`false`:ee`${e} in ${t.map(t=>tE(t,e))}`:ee`${e} in ${tE(t,e)}`}function tZ(e,t){return Array.isArray(t)?0===t.length?ee`true`:ee`${e} not in ${t.map(t=>tE(t,e))}`:ee`${e} not in ${tE(t,e)}`}function tX(e){return ee`${e} is null`}function t0(e){return ee`${e} is not null`}function t1(e){return ee`exists ${e}`}function t6(e){return ee`not exists ${e}`}function t8(e,t,i){return ee`${e} between ${tE(t,e)} and ${tE(i,e)}`}function t5(e,t,i){return ee`${e} not between ${tE(t,e)} and ${tE(i,e)}`}function t4(e,t){return ee`${e} like ${t}`}function t2(e,t){return ee`${e} not like ${t}`}function t3(e,t){return ee`${e} ilike ${t}`}function t7(e,t){return ee`${e} not ilike ${t}`}function t9(e){return ee`${e} asc`}function ie(e){return ee`${e} desc`}e.s(["and",()=>tU,"between",()=>t8,"eq",()=>tz,"exists",()=>t1,"gt",()=>tJ,"gte",()=>tW,"ilike",()=>t3,"inArray",()=>tH,"isNotNull",()=>t0,"isNull",()=>tX,"like",()=>t4,"lt",()=>tG,"lte",()=>tY,"ne",()=>tM,"not",()=>tK,"notBetween",()=>t5,"notExists",()=>t6,"notIlike",()=>t7,"notInArray",()=>tZ,"notLike",()=>t2,"or",()=>tk],71062),e.s(["asc",()=>t9,"desc",()=>ie],76436);class it{constructor(e,t,i){this.sourceTable=e,this.referencedTable=t,this.relationName=i,this.referencedTableName=t[w.Symbol.Name]}static [n]="Relation";referencedTableName;fieldName}class ii{constructor(e,t){this.table=e,this.config=t}static [n]="Relations"}class is extends it{constructor(e,t,i,s){super(e,t,i?.relationName),this.config=i,this.isNullable=s}static [n]="One";withFieldName(e){let t=new is(this.sourceTable,this.referencedTable,this.config,this.isNullable);return t.fieldName=e,t}}class ir extends it{constructor(e,t,i){super(e,t,i?.relationName),this.config=i}static [n]="Many";withFieldName(e){let t=new ir(this.sourceTable,this.referencedTable,this.config);return t.fieldName=e,t}}function ia(e){return{one:function(t,i){return new is(e,t,i,i?.fields.reduce((e,t)=>e&&t.notNull,!0)??!1)},many:function(t,i){return new ir(e,t,i)}}}class il{constructor(e){this.table=e}static [n]="ColumnAliasProxyHandler";get(e,t){return"table"===t?this.table:e[t]}}class io{constructor(e,t){this.alias=e,this.replaceOriginalName=t}static [n]="TableAliasProxyHandler";get(e,t){if(t===w.Symbol.IsAlias)return!0;if(t===w.Symbol.Name||this.replaceOriginalName&&t===w.Symbol.OriginalName)return this.alias;if(t===k)return{...e[k],name:this.alias,isAlias:!0};if(t===w.Symbol.Columns){let t=e[w.Symbol.Columns];if(!t)return t;let i={};return Object.keys(t).map(s=>{i[s]=new Proxy(t[s],new il(new Proxy(e,this)))}),i}let i=e[t];return a(i,v)?new Proxy(i,new il(new Proxy(e,this))):i}}class iu{constructor(e){this.alias=e}static [n]="RelationTableAliasProxyHandler";get(e,t){return"sourceTable"===t?ic(e.sourceTable,this.alias):e[t]}}function ic(e,t){return new Proxy(e,new io(t,!1))}function ih(e,t){return new Proxy(e,new il(new Proxy(e.table,new io(t,!1))))}function id(e,t){return new G.Aliased(im(e.sql,t),e.fieldAlias)}function im(e,t){return ee.join(e.queryChunks.map(e=>a(e,v)?ih(e,t):a(e,G)?im(e,t):a(e,G.Aliased)?id(e,t):e))}class ig{static [n]="SelectionProxyHandler";config;constructor(e){this.config={...e}}get(e,t){if("_"===t)return{...e._,selectedFields:new Proxy(e._.selectedFields,this)};if(t===k)return{...e[k],selectedFields:new Proxy(e[k].selectedFields,this)};if("symbol"==typeof t)return e[t];let i=(a(e,z)?e._.selectedFields:a(e,ea)?e[k].selectedFields:e)[t];if(a(i,G.Aliased)){if("sql"===this.config.sqlAliasedBehavior&&!i.isSelectionField)return i.sql;let e=i.clone();return e.isSelectionField=!0,e}if(a(i,G)){if("sql"===this.config.sqlBehavior)return i;throw Error(`You tried to reference "${t}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return a(i,v)?this.config.alias?new Proxy(i,new il(new Proxy(i.table,new io(this.config.alias,this.config.replaceOriginalName??!1)))):i:"object"!=typeof i||null===i?i:new Proxy(i,new ig(this.config))}}function ip(e){return(e.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(e=>e.toLowerCase()).join("_")}function iy(e){return(e.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((e,t,i)=>e+(0===i?t.toLowerCase():`${t[0].toUpperCase()}${t.slice(1)}`),"")}function ib(e){return e}class iw{static [n]="CasingCache";cache={};cachedTables={};convert;constructor(e){this.convert="snake_case"===e?ip:"camelCase"===e?iy:ib}getColumnCasing(e){if(!e.keyAsName)return e.name;let t=e.table[w.Symbol.Schema]??"public",i=e.table[w.Symbol.OriginalName],s=`${t}.${i}.${e.name}`;return this.cache[s]||this.cacheTable(e.table),this.cache[s]}cacheTable(e){let t=e[w.Symbol.Schema]??"public",i=e[w.Symbol.OriginalName],s=`${t}.${i}`;if(!this.cachedTables[s]){for(let t of Object.values(e[w.Symbol.Columns])){let e=`${s}.${t.name}`;this.cache[e]=this.convert(t.name)}this.cachedTables[s]=!0}}clearCache(){this.cache={},this.cachedTables={}}}class iS extends Error{static [n]="DrizzleError";constructor({message:e,cause:t}){super(e),this.name="DrizzleError",this.cause=t}}class iv extends Error{constructor(e,t,i){super(`Failed query: ${e}
params: ${t}`),this.query=e,this.params=t,this.cause=i,Error.captureStackTrace(this,iv),i&&(this.cause=i)}}class iT extends iS{static [n]="TransactionRollbackError";constructor(){super({message:"Rollback"})}}class ix{static [n]="SQLiteForeignKeyBuilder";reference;_onUpdate;_onDelete;constructor(e,t){this.reference=()=>{let{name:t,columns:i,foreignColumns:s}=e();return{name:t,columns:i,foreignTable:s[0].table,foreignColumns:s}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=e,this}onDelete(e){return this._onDelete=e,this}build(e){return new i$(e,this)}}class i${constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}static [n]="SQLiteForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:t,foreignColumns:i}=this.reference(),s=t.map(e=>e.name),r=i.map(e=>e.name),n=[this.table[c],...s,i[0].table[c],...r];return e??`${n.join("_")}_fk`}}function iN(e,t){return`${e[c]}_${t.join("_")}_unique`}class iQ{constructor(e,t){this.name=t,this.columns=e}static [n]="SQLiteUniqueConstraintBuilder";columns;build(e){return new iP(e,this.columns,this.name)}}class iC{static [n]="SQLiteUniqueOnConstraintBuilder";name;constructor(e){this.name=e}on(...e){return new iQ(e,this.name)}}class iP{constructor(e,t,i){this.table=e,this.columns=t,this.name=i??iN(this.table,this.columns.map(e=>e.name))}static [n]="SQLiteUniqueConstraint";columns;name;getName(){return this.name}}class iB extends T{static [n]="SQLiteColumnBuilder";foreignKeyConfigs=[];references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e){return this.config.isUnique=!0,this.config.uniqueName=e,this}generatedAlwaysAs(e,t){return this.config.generated={as:e,type:"always",mode:t?.mode??"virtual"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:i,actions:s})=>{let r;return r=new ix(()=>({columns:[e],foreignColumns:[i()]})),s.onUpdate&&r.onUpdate(s.onUpdate),s.onDelete&&r.onDelete(s.onDelete),r.build(t)})}}class iL extends v{constructor(e,t){t.uniqueName||(t.uniqueName=iN(e,[t.name])),super(e,t),this.table=e}static [n]="SQLiteColumn"}var iq=e.i(51615);class iD extends iB{static [n]="SQLiteBigIntBuilder";constructor(e){super(e,"bigint","SQLiteBigInt")}build(e){return new iO(e,this.config)}}class iO extends iL{static [n]="SQLiteBigInt";getSQLType(){return"blob"}mapFromDriverValue(e){return void 0!==iq.Buffer&&iq.Buffer.from?BigInt((iq.Buffer.isBuffer(e)?e:e instanceof ArrayBuffer?iq.Buffer.from(e):e.buffer?iq.Buffer.from(e.buffer,e.byteOffset,e.byteLength):iq.Buffer.from(e)).toString("utf8")):BigInt(ef.decode(e))}mapToDriverValue(e){return iq.Buffer.from(e.toString())}}class iF extends iB{static [n]="SQLiteBlobJsonBuilder";constructor(e){super(e,"json","SQLiteBlobJson")}build(e){return new ij(e,this.config)}}class ij extends iL{static [n]="SQLiteBlobJson";getSQLType(){return"blob"}mapFromDriverValue(e){return void 0!==iq.Buffer&&iq.Buffer.from?JSON.parse((iq.Buffer.isBuffer(e)?e:e instanceof ArrayBuffer?iq.Buffer.from(e):e.buffer?iq.Buffer.from(e.buffer,e.byteOffset,e.byteLength):iq.Buffer.from(e)).toString("utf8")):JSON.parse(ef.decode(e))}mapToDriverValue(e){return iq.Buffer.from(JSON.stringify(e))}}class i_ extends iB{static [n]="SQLiteBlobBufferBuilder";constructor(e){super(e,"buffer","SQLiteBlobBuffer")}build(e){return new iA(e,this.config)}}class iA extends iL{static [n]="SQLiteBlobBuffer";mapFromDriverValue(e){return iq.Buffer.isBuffer(e)?e:iq.Buffer.from(e)}getSQLType(){return"blob"}}function iI(e,t){let{name:i,config:s}=ed(e,t);return s?.mode==="json"?new iF(i):s?.mode==="bigint"?new iD(i):new i_(i)}class iV extends iB{static [n]="SQLiteCustomColumnBuilder";constructor(e,t,i){super(e,"custom","SQLiteCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=i}build(e){return new iR(e,this.config)}}class iR extends iL{static [n]="SQLiteCustomColumn";sqlName;mapTo;mapFrom;constructor(e,t){super(e,t),this.sqlName=t.customTypeParams.dataType(t.fieldConfig),this.mapTo=t.customTypeParams.toDriver,this.mapFrom=t.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return"function"==typeof this.mapFrom?this.mapFrom(e):e}mapToDriverValue(e){return"function"==typeof this.mapTo?this.mapTo(e):e}}function iE(e){return(t,i)=>{let{name:s,config:r}=ed(t,i);return new iV(s,r,e)}}class iz extends iB{static [n]="SQLiteBaseIntegerBuilder";constructor(e,t,i){super(e,t,i),this.config.autoIncrement=!1}primaryKey(e){return e?.autoIncrement&&(this.config.autoIncrement=!0),this.config.hasDefault=!0,super.primaryKey()}}class iM extends iL{static [n]="SQLiteBaseInteger";autoIncrement=this.config.autoIncrement;getSQLType(){return"integer"}}class iU extends iz{static [n]="SQLiteIntegerBuilder";constructor(e){super(e,"number","SQLiteInteger")}build(e){return new ik(e,this.config)}}class ik extends iM{static [n]="SQLiteInteger"}class iK extends iz{static [n]="SQLiteTimestampBuilder";constructor(e,t){super(e,"date","SQLiteTimestamp"),this.config.mode=t}defaultNow(){return this.default(ee`(cast((julianday('now') - 2440587.5)*86400000 as integer))`)}build(e){return new iJ(e,this.config)}}class iJ extends iM{static [n]="SQLiteTimestamp";mode=this.config.mode;mapFromDriverValue(e){return new Date("timestamp"===this.config.mode?1e3*e:e)}mapToDriverValue(e){let t=e.getTime();return"timestamp"===this.config.mode?Math.floor(t/1e3):t}}class iW extends iz{static [n]="SQLiteBooleanBuilder";constructor(e,t){super(e,"boolean","SQLiteBoolean"),this.config.mode=t}build(e){return new iG(e,this.config)}}class iG extends iM{static [n]="SQLiteBoolean";mode=this.config.mode;mapFromDriverValue(e){return 1===Number(e)}mapToDriverValue(e){return+!!e}}function iY(e,t){let{name:i,config:s}=ed(e,t);return s?.mode==="timestamp"||s?.mode==="timestamp_ms"?new iK(i,s.mode):s?.mode==="boolean"?new iW(i,s.mode):new iU(i)}class iH extends iB{static [n]="SQLiteNumericBuilder";constructor(e){super(e,"string","SQLiteNumeric")}build(e){return new iZ(e,this.config)}}class iZ extends iL{static [n]="SQLiteNumeric";mapFromDriverValue(e){return"string"==typeof e?e:String(e)}getSQLType(){return"numeric"}}class iX extends iB{static [n]="SQLiteNumericNumberBuilder";constructor(e){super(e,"number","SQLiteNumericNumber")}build(e){return new i0(e,this.config)}}class i0 extends iL{static [n]="SQLiteNumericNumber";mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}mapToDriverValue=String;getSQLType(){return"numeric"}}class i1 extends iB{static [n]="SQLiteNumericBigIntBuilder";constructor(e){super(e,"bigint","SQLiteNumericBigInt")}build(e){return new i6(e,this.config)}}class i6 extends iL{static [n]="SQLiteNumericBigInt";mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){return"numeric"}}function i8(e,t){let{name:i,config:s}=ed(e,t),r=s?.mode;return"number"===r?new iX(i):"bigint"===r?new i1(i):new iH(i)}class i5 extends iB{static [n]="SQLiteRealBuilder";constructor(e){super(e,"number","SQLiteReal")}build(e){return new i4(e,this.config)}}class i4 extends iL{static [n]="SQLiteReal";getSQLType(){return"real"}}function i2(e){return new i5(e??"")}class i3 extends iB{static [n]="SQLiteTextBuilder";constructor(e,t){super(e,"string","SQLiteText"),this.config.enumValues=t.enum,this.config.length=t.length}build(e){return new i7(e,this.config)}}class i7 extends iL{static [n]="SQLiteText";enumValues=this.config.enumValues;length=this.config.length;constructor(e,t){super(e,t)}getSQLType(){return`text${this.config.length?`(${this.config.length})`:""}`}}class i9 extends iB{static [n]="SQLiteTextJsonBuilder";constructor(e){super(e,"json","SQLiteTextJson")}build(e){return new se(e,this.config)}}class se extends iL{static [n]="SQLiteTextJson";getSQLType(){return"text"}mapFromDriverValue(e){return JSON.parse(e)}mapToDriverValue(e){return JSON.stringify(e)}}function st(e,t={}){let{name:i,config:s}=ed(e,t);return"json"===s.mode?new i9(i):new i3(i,s)}let si=Symbol.for("drizzle:SQLiteInlineForeignKeys");class ss extends w{static [n]="SQLiteTable";static Symbol=Object.assign({},w.Symbol,{InlineForeignKeys:si});[w.Symbol.Columns];[si]=[];[w.Symbol.ExtraConfigBuilder]=void 0}let sr=(e,t,i)=>(function(e,t,i,s,r=e){let n=new ss(e,void 0,r),a=Object.fromEntries(Object.entries("function"==typeof t?t({blob:iI,customType:iE,integer:iY,numeric:i8,real:i2,text:st}):t).map(([e,t])=>{t.setName(e);let i=t.build(n);return n[si].push(...t.buildForeignKeys(i,n)),[e,i]})),l=Object.assign(n,a);return l[w.Symbol.Columns]=a,l[w.Symbol.ExtraConfigColumns]=a,i&&(l[ss.Symbol.ExtraConfigBuilder]=i),l})(e,t,i);class sn extends ea{static [n]="SQLiteViewBase"}class sa{static [n]="SQLiteDialect";casing;constructor(e){this.casing=new iw(e?.casing)}escapeName(e){return`"${e}"`}escapeParam(e){return"?"}escapeString(e){return`'${e.replace(/'/g,"''")}'`}buildWithCTE(e){if(!e?.length)return;let t=[ee`with `];for(let[i,s]of e.entries())t.push(ee`${ee.identifier(s._.alias)} as (${s._.sql})`),i<e.length-1&&t.push(ee`, `);return t.push(ee` `),ee.join(t)}buildDeleteQuery({table:e,where:t,returning:i,withList:s,limit:r,orderBy:n}){let a=this.buildWithCTE(s),l=i?ee` returning ${this.buildSelection(i,{isSingleTable:!0})}`:void 0,o=t?ee` where ${t}`:void 0,u=this.buildOrderBy(n),c=this.buildLimit(r);return ee`${a}delete from ${e}${o}${l}${u}${c}`}buildUpdateSet(e,t){let i=e[w.Symbol.Columns],s=Object.keys(i).filter(e=>void 0!==t[e]||i[e]?.onUpdateFn!==void 0),r=s.length;return ee.join(s.flatMap((e,s)=>{let n=i[e],l=n.onUpdateFn?.(),o=t[e]??(a(l,G)?l:ee.param(l,n)),u=ee`${ee.identifier(this.casing.getColumnCasing(n))} = ${o}`;return s<r-1?[u,ee.raw(", ")]:[u]}))}buildUpdateQuery({table:e,set:t,where:i,returning:s,withList:r,joins:n,from:a,limit:l,orderBy:o}){let u=this.buildWithCTE(r),c=this.buildUpdateSet(e,t),h=a&&ee.join([ee.raw(" from "),this.buildFromTable(a)]),d=this.buildJoins(n),f=s?ee` returning ${this.buildSelection(s,{isSingleTable:!0})}`:void 0,m=i?ee` where ${i}`:void 0,g=this.buildOrderBy(o),p=this.buildLimit(l);return ee`${u}update ${e} set ${c}${h}${d}${m}${f}${g}${p}`}buildSelection(e,{isSingleTable:t=!1}={}){let i=e.length,s=e.flatMap(({field:e},s)=>{let r=[];if(a(e,G.Aliased)&&e.isSelectionField)r.push(ee.identifier(e.fieldAlias));else if(a(e,G.Aliased)||a(e,G)){let i=a(e,G.Aliased)?e.sql:e;t?r.push(new G(i.queryChunks.map(e=>a(e,v)?ee.identifier(this.casing.getColumnCasing(e)):e))):r.push(i),a(e,G.Aliased)&&r.push(ee` as ${ee.identifier(e.fieldAlias)}`)}else if(a(e,v)){let i=e.table[w.Symbol.Name];"SQLiteNumericBigInt"===e.columnType?t?r.push(ee`cast(${ee.identifier(this.casing.getColumnCasing(e))} as text)`):r.push(ee`cast(${ee.identifier(i)}.${ee.identifier(this.casing.getColumnCasing(e))} as text)`):t?r.push(ee.identifier(this.casing.getColumnCasing(e))):r.push(ee`${ee.identifier(i)}.${ee.identifier(this.casing.getColumnCasing(e))}`)}else if(a(e,z)){let t=Object.entries(e._.selectedFields);if(1===t.length){let i=t[0][1],s=a(i,G)?i.decoder:a(i,v)?{mapFromDriverValue:e=>i.mapFromDriverValue(e)}:i.sql.decoder;s&&(e._.sql.decoder=s)}r.push(e)}return s<i-1&&r.push(ee`, `),r});return ee.join(s)}buildJoins(e){if(!e||0===e.length)return;let t=[];if(e)for(let[i,s]of e.entries()){0===i&&t.push(ee` `);let r=s.table,n=s.on?ee` on ${s.on}`:void 0;if(a(r,ss)){let e=r[ss.Symbol.Name],i=r[ss.Symbol.Schema],a=r[ss.Symbol.OriginalName],l=e===a?void 0:s.alias;t.push(ee`${ee.raw(s.joinType)} join ${i?ee`${ee.identifier(i)}.`:void 0}${ee.identifier(a)}${l&&ee` ${ee.identifier(l)}`}${n}`)}else t.push(ee`${ee.raw(s.joinType)} join ${r}${n}`);i<e.length-1&&t.push(ee` `)}return ee.join(t)}buildLimit(e){return"object"==typeof e||"number"==typeof e&&e>=0?ee` limit ${e}`:void 0}buildOrderBy(e){let t=[];if(e)for(let[i,s]of e.entries())t.push(s),i<e.length-1&&t.push(ee`, `);return t.length>0?ee` order by ${ee.join(t)}`:void 0}buildFromTable(e){return a(e,w)&&e[w.Symbol.IsAlias]?ee`${ee`${ee.identifier(e[w.Symbol.Schema]??"")}.`.if(e[w.Symbol.Schema])}${ee.identifier(e[w.Symbol.OriginalName])} ${ee.identifier(e[w.Symbol.Name])}`:e}buildSelectQuery({withList:e,fields:t,fieldsFlat:i,where:s,having:r,table:n,joins:l,orderBy:o,groupBy:u,limit:h,offset:d,distinct:f,setOperators:m}){let g=i??eo(t);for(let e of g){let t;if(a(e.field,v)&&e.field.table[c]!==(a(n,z)?n._.alias:a(n,sn)?n[k].name:a(n,G)?void 0:n[c])&&(t=e.field.table,!l?.some(({alias:e})=>e===(t[w.Symbol.IsAlias]?t[c]:t[w.Symbol.BaseName])))){let t=e.field.table[c];throw Error(`Your "${e.path.join("->")}" field references a column "${t}"."${e.field.name}", but the table "${t}" is not part of the query! Did you forget to join it?`)}}let p=!l||0===l.length,y=this.buildWithCTE(e),b=f?ee` distinct`:void 0,S=this.buildSelection(g,{isSingleTable:p}),T=this.buildFromTable(n),x=this.buildJoins(l),$=s?ee` where ${s}`:void 0,N=r?ee` having ${r}`:void 0,Q=[];if(u)for(let[e,t]of u.entries())Q.push(t),e<u.length-1&&Q.push(ee`, `);let C=Q.length>0?ee` group by ${ee.join(Q)}`:void 0,P=this.buildOrderBy(o),B=this.buildLimit(h),L=d?ee` offset ${d}`:void 0,q=ee`${y}select${b} ${S} from ${T}${x}${$}${C}${N}${P}${B}${L}`;return m.length>0?this.buildSetOperations(q,m):q}buildSetOperations(e,t){let[i,...s]=t;if(!i)throw Error("Cannot pass undefined values to any set operator");return 0===s.length?this.buildSetOperationQuery({leftSelect:e,setOperator:i}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:e,setOperator:i}),s)}buildSetOperationQuery({leftSelect:e,setOperator:{type:t,isAll:i,rightSelect:s,limit:r,orderBy:n,offset:l}}){let o,u=ee`${e.getSQL()} `,c=ee`${s.getSQL()}`;if(n&&n.length>0){let e=[];for(let t of n)if(a(t,iL))e.push(ee.identifier(t.name));else if(a(t,G)){for(let e=0;e<t.queryChunks.length;e++){let i=t.queryChunks[e];a(i,iL)&&(t.queryChunks[e]=ee.identifier(this.casing.getColumnCasing(i)))}e.push(ee`${t}`)}else e.push(ee`${t}`);o=ee` order by ${ee.join(e,ee`, `)}`}let h="object"==typeof r||"number"==typeof r&&r>=0?ee` limit ${r}`:void 0,d=ee.raw(`${t} ${i?"all ":""}`),f=l?ee` offset ${l}`:void 0;return ee`${u}${d}${c}${o}${h}${f}`}buildInsertQuery({table:e,values:t,onConflict:i,returning:s,withList:r,select:n}){let l=[],o=Object.entries(e[w.Symbol.Columns]).filter(([e,t])=>!t.shouldDisableInsert()),u=o.map(([,e])=>ee.identifier(this.casing.getColumnCasing(e)));if(n)a(t,G)?l.push(t):l.push(t.getSQL());else for(let[e,i]of(l.push(ee.raw("values ")),t.entries())){let s=[];for(let[e,t]of o){let r=i[e];if(void 0===r||a(r,X)&&void 0===r.value){let e;if(null!==t.default&&void 0!==t.default)e=a(t.default,G)?t.default:ee.param(t.default,t);else if(void 0!==t.defaultFn){let i=t.defaultFn();e=a(i,G)?i:ee.param(i,t)}else if(t.default||void 0===t.onUpdateFn)e=ee`null`;else{let i=t.onUpdateFn();e=a(i,G)?i:ee.param(i,t)}s.push(e)}else s.push(r)}l.push(s),e<t.length-1&&l.push(ee`, `)}let c=this.buildWithCTE(r),h=ee.join(l),d=s?ee` returning ${this.buildSelection(s,{isSingleTable:!0})}`:void 0,f=i?.length?ee.join(i):void 0;return ee`${c}insert into ${e} ${u} ${h}${f}${d}`}sqlToQuery(e,t){return e.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,invokeSource:t})}buildRelationalQuery({fullSchema:e,schema:t,tableNamesMap:i,table:s,tableConfig:r,queryConfig:n,tableAlias:l,nestedQueryRelation:o,joinOn:u}){let c,h=[],d,f,m=[],g,p=[];if(!0===n)h=Object.entries(r.columns).map(([e,t])=>({dbKey:t.name,tsKey:e,field:ih(t,l),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let s=Object.fromEntries(Object.entries(r.columns).map(([e,t])=>[e,ih(t,l)]));if(n.where){let e="function"==typeof n.where?n.where(s,{and:tU,between:t8,eq:tz,exists:t1,gt:tJ,gte:tW,ilike:t3,inArray:tH,isNull:tX,isNotNull:t0,like:t4,lt:tG,lte:tY,ne:tM,not:tK,notBetween:t5,notExists:t6,notLike:t2,notIlike:t7,notInArray:tZ,or:tk,sql:ee}):n.where;g=e&&im(e,l)}let o=[],u=[];if(n.columns){let e=!1;for(let[t,i]of Object.entries(n.columns))void 0!==i&&t in r.columns&&(e||!0!==i||(e=!0),u.push(t));u.length>0&&(u=e?u.filter(e=>n.columns?.[e]===!0):Object.keys(r.columns).filter(e=>!u.includes(e)))}else u=Object.keys(r.columns);for(let e of u){let t=r.columns[e];o.push({tsKey:e,value:t})}let c=[];if(n.with&&(c=Object.entries(n.with).filter(e=>!!e[1]).map(([e,t])=>({tsKey:e,queryConfig:t,relation:r.relations[e]}))),n.extras)for(let[e,t]of Object.entries("function"==typeof n.extras?n.extras(s,{sql:ee}):n.extras))o.push({tsKey:e,value:id(t,l)});for(let{tsKey:e,value:t}of o)h.push({dbKey:a(t,G.Aliased)?t.fieldAlias:r.columns[e].name,tsKey:e,field:a(t,v)?ih(t,l):t,relationTableTsKey:void 0,isJson:!1,selection:[]});let p="function"==typeof n.orderBy?n.orderBy(s,{sql:ee,asc:t9,desc:ie}):n.orderBy??[];for(let{tsKey:s,queryConfig:r,relation:o}of(Array.isArray(p)||(p=[p]),m=p.map(e=>a(e,v)?ih(e,l):im(e,l)),d=n.limit,f=n.offset,c)){let n=function(e,t,i){if(a(i,is)&&i.config)return{fields:i.config.fields,references:i.config.references};let s=t[S(i.referencedTable)];if(!s)throw Error(`Table "${i.referencedTable[w.Symbol.Name]}" not found in schema`);let r=e[s];if(!r)throw Error(`Table "${s}" not found in schema`);let n=i.sourceTable,l=t[S(n)];if(!l)throw Error(`Table "${n[w.Symbol.Name]}" not found in schema`);let o=[];for(let e of Object.values(r.relations))(i.relationName&&i!==e&&e.relationName===i.relationName||!i.relationName&&e.referencedTable===i.sourceTable)&&o.push(e);if(o.length>1)throw i.relationName?Error(`There are multiple relations with name "${i.relationName}" in table "${s}"`):Error(`There are multiple relations between "${s}" and "${i.sourceTable[w.Symbol.Name]}". Please specify relation name`);if(o[0]&&a(o[0],is)&&o[0].config)return{fields:o[0].config.references,references:o[0].config.fields};throw Error(`There is not enough information to infer relation "${l}.${i.fieldName}"`)}(t,i,o),u=i[S(o.referencedTable)],c=`${l}_${s}`,d=tU(...n.fields.map((e,t)=>tz(ih(n.references[t],c),ih(e,l)))),f=this.buildRelationalQuery({fullSchema:e,schema:t,tableNamesMap:i,table:e[u],tableConfig:t[u],queryConfig:a(o,is)?!0===r?{limit:1}:{...r,limit:1}:r,tableAlias:c,joinOn:d,nestedQueryRelation:o}),m=ee`(${f.sql})`.as(s);h.push({dbKey:s,tsKey:s,field:m,relationTableTsKey:u,isJson:!0,selection:f.selection})}}if(0===h.length)throw new iS({message:`No fields selected for table "${r.tsName}" ("${l}"). You need to have at least one item in "columns", "with" or "extras". If you need to select all columns, omit the "columns" key or set it to undefined.`});if(g=tU(u,g),o){let e=ee`json_array(${ee.join(h.map(({field:e})=>a(e,iL)?ee.identifier(this.casing.getColumnCasing(e)):a(e,G.Aliased)?e.sql:e),ee`, `)})`;a(o,ir)&&(e=ee`coalesce(json_group_array(${e}), json_array())`);let t=[{dbKey:"data",tsKey:"data",field:e.as("data"),isJson:!0,relationTableTsKey:r.tsName,selection:h}];void 0!==d||void 0!==f||m.length>0?(c=this.buildSelectQuery({table:ic(s,l),fields:{},fieldsFlat:[{path:[],field:ee.raw("*")}],where:g,limit:d,offset:f,orderBy:m,setOperators:[]}),g=void 0,d=void 0,f=void 0,m=void 0):c=ic(s,l),c=this.buildSelectQuery({table:a(c,ss)?c:new z(c,{},l),fields:{},fieldsFlat:t.map(({field:e})=>({path:[],field:a(e,v)?ih(e,l):e})),joins:p,where:g,limit:d,offset:f,orderBy:m,setOperators:[]})}else c=this.buildSelectQuery({table:ic(s,l),fields:{},fieldsFlat:h.map(({field:e})=>({path:[],field:a(e,v)?ih(e,l):e})),joins:p,where:g,limit:d,offset:f,orderBy:m,setOperators:[]});return{tableTsKey:r.tsName,sql:c,selection:h}}}class sl extends sa{static [n]="SQLiteSyncDialect";migrate(e,t,i){let s=void 0===i||"string"==typeof i?"__drizzle_migrations":i.migrationsTable??"__drizzle_migrations",r=ee`
			CREATE TABLE IF NOT EXISTS ${ee.identifier(s)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at numeric
			)
		`;t.run(r);let n=t.values(ee`SELECT id, hash, created_at FROM ${ee.identifier(s)} ORDER BY created_at DESC LIMIT 1`)[0]??void 0;t.run(ee`BEGIN`);try{for(let i of e)if(!n||Number(n[2])<i.folderMillis){for(let e of i.sql)t.run(ee.raw(e));t.run(ee`INSERT INTO ${ee.identifier(s)} ("hash", "created_at") VALUES(${i.hash}, ${i.folderMillis})`)}t.run(ee`COMMIT`)}catch(e){throw t.run(ee`ROLLBACK`),e}}}class so extends sa{static [n]="SQLiteAsyncDialect";async migrate(e,t,i){let s=void 0===i||"string"==typeof i?"__drizzle_migrations":i.migrationsTable??"__drizzle_migrations",r=ee`
			CREATE TABLE IF NOT EXISTS ${ee.identifier(s)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at numeric
			)
		`;await t.run(r);let n=(await t.values(ee`SELECT id, hash, created_at FROM ${ee.identifier(s)} ORDER BY created_at DESC LIMIT 1`))[0]??void 0;await t.transaction(async t=>{for(let i of e)if(!n||Number(n[2])<i.folderMillis){for(let e of i.sql)await t.run(ee.raw(e));await t.run(ee`INSERT INTO ${ee.identifier(s)} ("hash", "created_at") VALUES(${i.hash}, ${i.folderMillis})`)}})}}class su{static [n]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}}class sc{static [n]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}then(e,t){return this.execute().then(e,t)}}class sh{constructor(e,t){this.name=e,this.value=t}static [n]="SQLiteCheckBuilder";brand;build(e){return new sd(e,this)}}class sd{constructor(e,t){this.table=e,this.name=t.name,this.value=t.value}static [n]="SQLiteCheck";name;value}class sf{constructor(e,t){this.name=e,this.unique=t}static [n]="SQLiteIndexBuilderOn";on(...e){return new sm(this.name,e,this.unique)}}class sm{static [n]="SQLiteIndexBuilder";config;constructor(e,t,i){this.config={name:e,columns:t,unique:i,where:void 0}}where(e){return this.config.where=e,this}build(e){return new sg(this.config,e)}}class sg{static [n]="SQLiteIndex";config;constructor(e,t){this.config={...e,table:t}}}class sp{static [n]="SQLitePrimaryKeyBuilder";columns;name;constructor(e,t){this.columns=e,this.name=t}build(e){return new sy(e,this.columns,this.name)}}class sy{constructor(e,t,i){this.table=e,this.columns=t,this.name=i}static [n]="SQLitePrimaryKey";columns;name;getName(){return this.name??`${this.table[ss.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}}function sb(e){return a(e,ss)?[`${e[w.Symbol.BaseName]}`]:a(e,z)?e._.usedTables??[]:a(e,G)?e.usedTables??[]:[]}class sw{static [n]="SQLiteSelectBuilder";fields;session;dialect;withList;distinct;constructor(e){this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,this.withList=e.withList,this.distinct=e.distinct}from(e){let t,i=!!this.fields;return t=this.fields?this.fields:a(e,z)?Object.fromEntries(Object.keys(e._.selectedFields).map(t=>[t,e[t]])):a(e,sn)?e[k].selectedFields:a(e,G)?{}:e[w.Symbol.Columns],new sv({table:e,fields:t,isPartialSelect:i,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct})}}class sS extends su{static [n]="SQLiteSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;cacheConfig=void 0;usedTables=new Set;constructor({table:e,fields:t,isPartialSelect:i,session:s,dialect:r,withList:n,distinct:a}){for(const l of(super(),this.config={withList:n,table:e,fields:{...t},distinct:a,setOperators:[]},this.isPartialSelect=i,this.session=s,this.dialect=r,this._={selectedFields:t,config:this.config},this.tableName=eh(e),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{},sb(e)))this.usedTables.add(l)}getUsedTables(){return[...this.usedTables]}createJoin(e){return(t,i)=>{let s=this.tableName,r=eh(t);for(let e of sb(t))this.usedTables.add(e);if("string"==typeof r&&this.config.joins?.some(e=>e.alias===r))throw Error(`Alias "${r}" is already used in this query`);if(!this.isPartialSelect&&(1===Object.keys(this.joinsNotNullableMap).length&&"string"==typeof s&&(this.config.fields={[s]:this.config.fields}),"string"==typeof r&&!a(t,G))){let e=a(t,z)?t._.selectedFields:a(t,ea)?t[k].selectedFields:t[w.Symbol.Columns];this.config.fields[r]=e}if("function"==typeof i&&(i=i(new Proxy(this.config.fields,new ig({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:i,table:t,joinType:e,alias:r}),"string"==typeof r)switch(e){case"left":this.joinsNotNullableMap[r]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([e])=>[e,!1])),this.joinsNotNullableMap[r]=!0;break;case"cross":case"inner":this.joinsNotNullableMap[r]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([e])=>[e,!1])),this.joinsNotNullableMap[r]=!1}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");crossJoin=this.createJoin("cross");createSetOperator(e,t){return i=>{let s="function"==typeof i?i(sx()):i;if(!eu(this.getSelectedFields(),s.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:e,isAll:t,rightSelect:s}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);except=this.createSetOperator("except",!1);addSetOperators(e){return this.config.setOperators.push(...e),this}where(e){return"function"==typeof e&&(e=e(new Proxy(this.config.fields,new ig({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=e,this}having(e){return"function"==typeof e&&(e=e(new Proxy(this.config.fields,new ig({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=e,this}groupBy(...e){if("function"==typeof e[0]){let t=e[0](new Proxy(this.config.fields,new ig({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(t)?t:[t]}else this.config.groupBy=e;return this}orderBy(...e){if("function"==typeof e[0]){let t=e[0](new Proxy(this.config.fields,new ig({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),i=Array.isArray(t)?t:[t];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=i:this.config.orderBy=i}else this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=e:this.config.orderBy=e;return this}limit(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=e:this.config.limit=e,this}offset(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=e:this.config.offset=e,this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}as(e){let t=[];if(t.push(...sb(this.config.table)),this.config.joins)for(let e of this.config.joins)t.push(...sb(e.table));return new Proxy(new z(this.getSQL(),this.config.fields,e,!1,[...new Set(t)]),new ig({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new ig({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}}class sv extends sS{static [n]="SQLiteSelect";_prepare(e=!0){if(!this.session)throw Error("Cannot execute a query on a query builder. Please use a database instance instead.");let t=eo(this.config.fields),i=this.session[e?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),t,"all",!0,void 0,{type:"select",tables:[...this.usedTables]},this.cacheConfig);return i.joinsNotNullableMap=this.joinsNotNullableMap,i}$withCache(e){return this.cacheConfig=void 0===e?{config:{},enable:!0,autoInvalidate:!0}:!1===e?{enable:!1}:{enable:!0,autoInvalidate:!0,...e},this}prepare(){return this._prepare(!1)}run=e=>this._prepare().run(e);all=e=>this._prepare().all(e);get=e=>this._prepare().get(e);values=e=>this._prepare().values(e);async execute(){return this.all()}}for(let e of[sc])for(let t of Object.getOwnPropertyNames(e.prototype))"constructor"!==t&&Object.defineProperty(sv.prototype,t,Object.getOwnPropertyDescriptor(e.prototype,t)||Object.create(null));function sT(e,t){return(i,s,...r)=>{let n=[s,...r].map(i=>({type:e,isAll:t,rightSelect:i}));for(let e of n)if(!eu(i.getSelectedFields(),e.rightSelect.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return i.addSetOperators(n)}}let sx=()=>({union:s$,unionAll:sN,intersect:sQ,except:sC}),s$=sT("union",!1),sN=sT("union",!0),sQ=sT("intersect",!1),sC=sT("except",!1);class sP{static [n]="SQLiteQueryBuilder";dialect;dialectConfig;constructor(e){this.dialect=a(e,sa)?e:void 0,this.dialectConfig=a(e,sa)?void 0:e}$with=(e,t)=>{let i=this;return{as:s=>("function"==typeof s&&(s=s(i)),new Proxy(new M(s.getSQL(),t??("getSelectedFields"in s?s.getSelectedFields()??{}:{}),e,!0),new ig({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};with(...e){let t=this;return{select:function(i){return new sw({fields:i??void 0,session:void 0,dialect:t.getDialect(),withList:e})},selectDistinct:function(i){return new sw({fields:i??void 0,session:void 0,dialect:t.getDialect(),withList:e,distinct:!0})}}}select(e){return new sw({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new sw({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}getDialect(){return this.dialect||(this.dialect=new sl(this.dialectConfig)),this.dialect}}class sB extends sc{constructor(e,t,i,s){super(),this.table=e,this.session=t,this.dialect=i,this.config={table:e,withList:s}}static [n]="SQLiteDelete";config;where(e){return this.config.where=e,this}orderBy(...e){if("function"==typeof e[0]){let t=e[0](new Proxy(this.config.table[w.Symbol.Columns],new ig({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),i=Array.isArray(t)?t:[t];this.config.orderBy=i}else this.config.orderBy=e;return this}limit(e){return this.config.limit=e,this}returning(e=this.table[ss.Symbol.Columns]){return this.config.returning=eo(e),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e=!0){return this.session[e?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0,void 0,{type:"delete",tables:sb(this.config.table)})}prepare(){return this._prepare(!1)}run=e=>this._prepare().run(e);all=e=>this._prepare().all(e);get=e=>this._prepare().get(e);values=e=>this._prepare().values(e);async execute(e){return this._prepare().execute(e)}$dynamic(){return this}}class sL{constructor(e,t,i,s){this.table=e,this.session=t,this.dialect=i,this.withList=s}static [n]="SQLiteInsertBuilder";values(e){if(0===(e=Array.isArray(e)?e:[e]).length)throw Error("values() must be called with at least one value");let t=e.map(e=>{let t={},i=this.table[w.Symbol.Columns];for(let s of Object.keys(e)){let r=e[s];t[s]=a(r,G)?r:new X(r,i[s])}return t});return new sq(this.table,t,this.session,this.dialect,this.withList)}select(e){let t="function"==typeof e?e(new sP):e;if(!a(t,G)&&!eu(this.table[d],t._.selectedFields))throw Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new sq(this.table,t,this.session,this.dialect,this.withList,!0)}}class sq extends sc{constructor(e,t,i,s,r,n){super(),this.session=i,this.dialect=s,this.config={table:e,values:t,withList:r,select:n}}static [n]="SQLiteInsert";config;returning(e=this.config.table[ss.Symbol.Columns]){return this.config.returning=eo(e),this}onConflictDoNothing(e={}){if(this.config.onConflict||(this.config.onConflict=[]),void 0===e.target)this.config.onConflict.push(ee` on conflict do nothing`);else{let t=Array.isArray(e.target)?ee`${e.target}`:ee`${[e.target]}`,i=e.where?ee` where ${e.where}`:ee``;this.config.onConflict.push(ee` on conflict ${t} do nothing${i}`)}return this}onConflictDoUpdate(e){if(e.where&&(e.targetWhere||e.setWhere))throw Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');this.config.onConflict||(this.config.onConflict=[]);let t=e.where?ee` where ${e.where}`:void 0,i=e.targetWhere?ee` where ${e.targetWhere}`:void 0,s=e.setWhere?ee` where ${e.setWhere}`:void 0,r=Array.isArray(e.target)?ee`${e.target}`:ee`${[e.target]}`,n=this.dialect.buildUpdateSet(this.config.table,ec(this.config.table,e.set));return this.config.onConflict.push(ee` on conflict ${r}${i} do update set ${n}${t}${s}`),this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e=!0){return this.session[e?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0,void 0,{type:"insert",tables:sb(this.config.table)})}prepare(){return this._prepare(!1)}run=e=>this._prepare().run(e);all=e=>this._prepare().all(e);get=e=>this._prepare().get(e);values=e=>this._prepare().values(e);async execute(){return this.config.returning?this.all():this.run()}$dynamic(){return this}}class sD{constructor(e,t,i,s){this.table=e,this.session=t,this.dialect=i,this.withList=s}static [n]="SQLiteUpdateBuilder";set(e){return new sO(this.table,ec(this.table,e),this.session,this.dialect,this.withList)}}class sO extends sc{constructor(e,t,i,s,r){super(),this.session=i,this.dialect=s,this.config={set:t,table:e,withList:r,joins:[]}}static [n]="SQLiteUpdate";config;from(e){return this.config.from=e,this}createJoin(e){return(t,i)=>{let s=eh(t);if("string"==typeof s&&this.config.joins.some(e=>e.alias===s))throw Error(`Alias "${s}" is already used in this query`);if("function"==typeof i){let e=this.config.from?a(t,ss)?t[w.Symbol.Columns]:a(t,z)?t._.selectedFields:a(t,sn)?t[k].selectedFields:void 0:void 0;i=i(new Proxy(this.config.table[w.Symbol.Columns],new ig({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),e&&new Proxy(e,new ig({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}return this.config.joins.push({on:i,table:t,joinType:e,alias:s}),this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(e){return this.config.where=e,this}orderBy(...e){if("function"==typeof e[0]){let t=e[0](new Proxy(this.config.table[w.Symbol.Columns],new ig({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),i=Array.isArray(t)?t:[t];this.config.orderBy=i}else this.config.orderBy=e;return this}limit(e){return this.config.limit=e,this}returning(e=this.config.table[ss.Symbol.Columns]){return this.config.returning=eo(e),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e=!0){return this.session[e?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0,void 0,{type:"insert",tables:sb(this.config.table)})}prepare(){return this._prepare(!1)}run=e=>this._prepare().run(e);all=e=>this._prepare().all(e);get=e=>this._prepare().get(e);values=e=>this._prepare().values(e);async execute(){return this.config.returning?this.all():this.run()}$dynamic(){return this}}class sF extends G{constructor(e){super(sF.buildEmbeddedCount(e.source,e.filters).queryChunks),this.params=e,this.session=e.session,this.sql=sF.buildCount(e.source,e.filters)}sql;static [n]="SQLiteCountBuilderAsync";[Symbol.toStringTag]="SQLiteCountBuilderAsync";session;static buildEmbeddedCount(e,t){return ee`(select count(*) from ${e}${ee.raw(" where ").if(t)}${t})`}static buildCount(e,t){return ee`select count(*) from ${e}${ee.raw(" where ").if(t)}${t}`}then(e,t){return Promise.resolve(this.session.count(this.sql)).then(e,t)}catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}}class sj{constructor(e,t,i,s,r,n,a,l){this.mode=e,this.fullSchema=t,this.schema=i,this.tableNamesMap=s,this.table=r,this.tableConfig=n,this.dialect=a,this.session=l}static [n]="SQLiteAsyncRelationalQueryBuilder";findMany(e){return"sync"===this.mode?new sA(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many"):new s_(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many")}findFirst(e){return"sync"===this.mode?new sA(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first"):new s_(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first")}}class s_ extends sc{constructor(e,t,i,s,r,n,a,l,o){super(),this.fullSchema=e,this.schema=t,this.tableNamesMap=i,this.table=s,this.tableConfig=r,this.dialect=n,this.session=a,this.config=l,this.mode=o}static [n]="SQLiteAsyncRelationalQuery";mode;getSQL(){return this.dialect.buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}).sql}_prepare(e=!1){let{query:t,builtQuery:i}=this._toSQL();return this.session[e?"prepareOneTimeQuery":"prepareQuery"](i,void 0,"first"===this.mode?"get":"all",!0,(e,i)=>{let s=e.map(e=>(function e(t,i,s,r,n=e=>e){let l={};for(let[o,u]of r.entries())if(u.isJson){let r=i.relations[u.tsKey],c=s[o],h="string"==typeof c?JSON.parse(c):c;l[u.tsKey]=a(r,is)?h&&e(t,t[u.relationTableTsKey],h,u.selection,n):h.map(i=>e(t,t[u.relationTableTsKey],i,u.selection,n))}else{let e,t=n(s[o]),i=u.field;e=a(i,v)?i:a(i,G)?i.decoder:i.sql.decoder,l[u.tsKey]=null===t?null:e.mapFromDriverValue(t)}return l})(this.schema,this.tableConfig,e,t.selection,i));return"first"===this.mode?s[0]:s})}prepare(){return this._prepare(!1)}_toSQL(){let e=this.dialect.buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}),t=this.dialect.sqlToQuery(e.sql);return{query:e,builtQuery:t}}toSQL(){return this._toSQL().builtQuery}executeRaw(){return"first"===this.mode?this._prepare(!1).get():this._prepare(!1).all()}async execute(){return this.executeRaw()}}class sA extends s_{static [n]="SQLiteSyncRelationalQuery";sync(){return this.executeRaw()}}class sI extends sc{constructor(e,t,i,s,r){super(),this.execute=e,this.getSQL=t,this.dialect=s,this.mapBatchResult=r,this.config={action:i}}static [n]="SQLiteRaw";config;getQuery(){return{...this.dialect.sqlToQuery(this.getSQL()),method:this.config.action}}mapResult(e,t){return t?this.mapBatchResult(e):e}_prepare(){return this}isResponseInArrayMode(){return!1}}class sV{constructor(e,t,i,s){this.resultKind=e,this.dialect=t,this.session=i,this._=s?{schema:s.schema,fullSchema:s.fullSchema,tableNamesMap:s.tableNamesMap}:{schema:void 0,fullSchema:{},tableNamesMap:{}},this.query={};const r=this.query;if(this._.schema)for(const[n,a]of Object.entries(this._.schema))r[n]=new sj(e,s.fullSchema,this._.schema,this._.tableNamesMap,s.fullSchema[n],a,t,i);this.$cache={invalidate:async e=>{}}}static [n]="BaseSQLiteDatabase";query;$with=(e,t)=>{let i=this;return{as:s=>("function"==typeof s&&(s=s(new sP(i.dialect))),new Proxy(new M(s.getSQL(),t??("getSelectedFields"in s?s.getSelectedFields()??{}:{}),e,!0),new ig({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};$count(e,t){return new sF({source:e,filters:t,session:this.session})}with(...e){let t=this;return{select:function(i){return new sw({fields:i??void 0,session:t.session,dialect:t.dialect,withList:e})},selectDistinct:function(i){return new sw({fields:i??void 0,session:t.session,dialect:t.dialect,withList:e,distinct:!0})},update:function(i){return new sD(i,t.session,t.dialect,e)},insert:function(i){return new sL(i,t.session,t.dialect,e)},delete:function(i){return new sB(i,t.session,t.dialect,e)}}}select(e){return new sw({fields:e??void 0,session:this.session,dialect:this.dialect})}selectDistinct(e){return new sw({fields:e??void 0,session:this.session,dialect:this.dialect,distinct:!0})}update(e){return new sD(e,this.session,this.dialect)}$cache;insert(e){return new sL(e,this.session,this.dialect)}delete(e){return new sB(e,this.session,this.dialect)}run(e){let t="string"==typeof e?ee.raw(e):e.getSQL();return"async"===this.resultKind?new sI(async()=>this.session.run(t),()=>t,"run",this.dialect,this.session.extractRawRunValueFromBatchResult.bind(this.session)):this.session.run(t)}all(e){let t="string"==typeof e?ee.raw(e):e.getSQL();return"async"===this.resultKind?new sI(async()=>this.session.all(t),()=>t,"all",this.dialect,this.session.extractRawAllValueFromBatchResult.bind(this.session)):this.session.all(t)}get(e){let t="string"==typeof e?ee.raw(e):e.getSQL();return"async"===this.resultKind?new sI(async()=>this.session.get(t),()=>t,"get",this.dialect,this.session.extractRawGetValueFromBatchResult.bind(this.session)):this.session.get(t)}values(e){let t="string"==typeof e?ee.raw(e):e.getSQL();return"async"===this.resultKind?new sI(async()=>this.session.values(t),()=>t,"values",this.dialect,this.session.extractRawValuesValueFromBatchResult.bind(this.session)):this.session.values(t)}transaction(e,t){return this.session.transaction(e,t)}}class sR{static [n]="Cache"}class sE extends sR{strategy(){return"all"}static [n]="NoopCache";async get(e){}async put(e,t,i,s){}async onMutate(e){}}async function sz(e,t){let i=`${e}-${JSON.stringify(t)}`,s=new TextEncoder().encode(i);return[...new Uint8Array(await crypto.subtle.digest("SHA-256",s))].map(e=>e.toString(16).padStart(2,"0")).join("")}class sM extends sc{constructor(e){super(),this.resultCb=e}static [n]="ExecuteResultSync";async execute(){return this.resultCb()}sync(){return this.resultCb()}}class sU{constructor(e,t,i,s,r,n){this.mode=e,this.executeMethod=t,this.query=i,this.cache=s,this.queryMetadata=r,this.cacheConfig=n,s&&"all"===s.strategy()&&void 0===n&&(this.cacheConfig={enable:!0,autoInvalidate:!0}),this.cacheConfig?.enable||(this.cacheConfig=void 0)}static [n]="PreparedQuery";joinsNotNullableMap;async queryWithCache(e,t,i){if(void 0===this.cache||a(this.cache,sE)||void 0===this.queryMetadata||this.cacheConfig&&!this.cacheConfig.enable)try{return await i()}catch(i){throw new iv(e,t,i)}if(("insert"===this.queryMetadata.type||"update"===this.queryMetadata.type||"delete"===this.queryMetadata.type)&&this.queryMetadata.tables.length>0)try{let[e]=await Promise.all([i(),this.cache.onMutate({tables:this.queryMetadata.tables})]);return e}catch(i){throw new iv(e,t,i)}if(!this.cacheConfig)try{return await i()}catch(i){throw new iv(e,t,i)}if("select"===this.queryMetadata.type){let s=await this.cache.get(this.cacheConfig.tag??await sz(e,t),this.queryMetadata.tables,void 0!==this.cacheConfig.tag,this.cacheConfig.autoInvalidate);if(void 0===s){let s;try{s=await i()}catch(i){throw new iv(e,t,i)}return await this.cache.put(this.cacheConfig.tag??await sz(e,t),s,this.cacheConfig.autoInvalidate?this.queryMetadata.tables:[],void 0!==this.cacheConfig.tag,this.cacheConfig.config),s}return s}try{return await i()}catch(i){throw new iv(e,t,i)}}getQuery(){return this.query}mapRunResult(e,t){return e}mapAllResult(e,t){throw Error("Not implemented")}mapGetResult(e,t){throw Error("Not implemented")}execute(e){return"async"===this.mode?this[this.executeMethod](e):new sM(()=>this[this.executeMethod](e))}mapResult(e,t){switch(this.executeMethod){case"run":return this.mapRunResult(e,t);case"all":return this.mapAllResult(e,t);case"get":return this.mapGetResult(e,t)}}}class sk{constructor(e){this.dialect=e}static [n]="SQLiteSession";prepareOneTimeQuery(e,t,i,s,r,n,a){return this.prepareQuery(e,t,i,s,r,n,a)}run(e){let t=this.dialect.sqlToQuery(e);try{return this.prepareOneTimeQuery(t,void 0,"run",!1).run()}catch(e){throw new iS({cause:e,message:`Failed to run the query '${t.sql}'`})}}extractRawRunValueFromBatchResult(e){return e}all(e){return this.prepareOneTimeQuery(this.dialect.sqlToQuery(e),void 0,"run",!1).all()}extractRawAllValueFromBatchResult(e){throw Error("Not implemented")}get(e){return this.prepareOneTimeQuery(this.dialect.sqlToQuery(e),void 0,"run",!1).get()}extractRawGetValueFromBatchResult(e){throw Error("Not implemented")}values(e){return this.prepareOneTimeQuery(this.dialect.sqlToQuery(e),void 0,"run",!1).values()}async count(e){return(await this.values(e))[0][0]}extractRawValuesValueFromBatchResult(e){throw Error("Not implemented")}}class sK extends sV{constructor(e,t,i,s,r=0){super(e,t,i,s),this.schema=s,this.nestedIndex=r}static [n]="SQLiteTransaction";rollback(){throw new iT}}class sJ extends sk{constructor(e,t,i,s={}){super(t),this.client=e,this.schema=i,this.options=s,this.logger=s.logger??new u,this.cache=s.cache??new sE}static [n]="SQLiteD1Session";logger;cache;prepareQuery(e,t,i,s,r,n,a){return new sY(this.client.prepare(e.sql),e,this.logger,this.cache,n,a,t,i,s,r)}async batch(e){let t=[],i=[];for(let s of e){let e=s._prepare(),r=e.getQuery();if(t.push(e),r.params.length>0)i.push(e.stmt.bind(...r.params));else{let t=e.getQuery();i.push(this.client.prepare(t.sql).bind(...t.params))}}return(await this.client.batch(i)).map((e,i)=>t[i].mapResult(e,!0))}extractRawAllValueFromBatchResult(e){return e.results}extractRawGetValueFromBatchResult(e){return e.results[0]}extractRawValuesValueFromBatchResult(e){return sG(e.results)}async transaction(e,t){let i=new sW("async",this.dialect,this,this.schema);await this.run(ee.raw(`begin${t?.behavior?" "+t.behavior:""}`));try{let t=await e(i);return await this.run(ee`commit`),t}catch(e){throw await this.run(ee`rollback`),e}}}class sW extends sK{static [n]="D1Transaction";async transaction(e){let t=`sp${this.nestedIndex}`,i=new sW("async",this.dialect,this.session,this.schema,this.nestedIndex+1);await this.session.run(ee.raw(`savepoint ${t}`));try{let s=await e(i);return await this.session.run(ee.raw(`release savepoint ${t}`)),s}catch(e){throw await this.session.run(ee.raw(`rollback to savepoint ${t}`)),e}}}function sG(e){let t=[];for(let i of e){let e=Object.keys(i).map(e=>i[e]);t.push(e)}return t}class sY extends sU{constructor(e,t,i,s,r,n,a,l,o,u){super("async",l,t,s,r,n),this.logger=i,this._isResponseInArrayMode=o,this.customResultMapper=u,this.fields=a,this.stmt=e}static [n]="D1PreparedQuery";customResultMapper;fields;stmt;async run(e){let t=er(this.query.params,e??{});return this.logger.logQuery(this.query.sql,t),await this.queryWithCache(this.query.sql,t,async()=>this.stmt.bind(...t).run())}async all(e){let{fields:t,query:i,logger:s,stmt:r,customResultMapper:n}=this;if(!t&&!n){let t=er(i.params,e??{});return s.logQuery(i.sql,t),await this.queryWithCache(i.sql,t,async()=>r.bind(...t).all().then(({results:e})=>this.mapAllResult(e)))}let a=await this.values(e);return this.mapAllResult(a)}mapAllResult(e,t){return(t&&(e=sG(e.results)),this.fields||this.customResultMapper)?this.customResultMapper?this.customResultMapper(e):e.map(e=>el(this.fields,e,this.joinsNotNullableMap)):e}async get(e){let{fields:t,joinsNotNullableMap:i,query:s,logger:r,stmt:n,customResultMapper:a}=this;if(!t&&!a){let t=er(s.params,e??{});return r.logQuery(s.sql,t),await this.queryWithCache(s.sql,t,async()=>n.bind(...t).all().then(({results:e})=>e[0]))}let l=await this.values(e);if(l[0])return a?a(l):el(t,l[0],i)}mapGetResult(e,t){return(t&&(e=sG(e.results)[0]),this.fields||this.customResultMapper)?this.customResultMapper?this.customResultMapper([e]):el(this.fields,e,this.joinsNotNullableMap):e}async values(e){let t=er(this.query.params,e??{});return this.logger.logQuery(this.query.sql,t),await this.queryWithCache(this.query.sql,t,async()=>this.stmt.bind(...t).raw())}isResponseInArrayMode(){return this._isResponseInArrayMode}}class sH extends sV{static [n]="D1Database";async batch(e){return this.session.batch(e)}}let sZ=sr("repositories",{id:iY("id").primaryKey({autoIncrement:!0}),url:st("url").notNull().unique(),owner:st("owner").notNull(),name:st("name").notNull(),description:st("description"),stars:iY("stars").default(0),defaultBranch:st("default_branch").default("main"),readme:st("readme"),lastFetched:iY("last_fetched",{mode:"timestamp"}).notNull(),createdAt:iY("created_at",{mode:"timestamp"}).notNull()}),sX=sr("commits",{id:iY("id").primaryKey({autoIncrement:!0}),repoId:iY("repo_id").notNull().references(()=>sZ.id,{onDelete:"cascade"}),sha:st("sha").notNull(),message:st("message").notNull(),authorName:st("author_name"),authorEmail:st("author_email"),date:iY("date",{mode:"timestamp"}).notNull(),order:iY("order").notNull()}),s0=sr("files",{id:iY("id").primaryKey({autoIncrement:!0}),commitId:iY("commit_id").notNull().references(()=>sX.id,{onDelete:"cascade"}),path:st("path").notNull(),content:st("content"),size:iY("size").default(0),language:st("language")}),s1=sr("analyses",{id:iY("id").primaryKey({autoIncrement:!0}),commitId:iY("commit_id").notNull().references(()=>sX.id,{onDelete:"cascade"}),provider:st("provider").notNull(),explanation:st("explanation").notNull(),createdAt:iY("created_at",{mode:"timestamp"}).notNull()});e.s(["analyses",0,s1,"commits",0,sX,"files",0,s0,"repositories",0,sZ],60378);var s6=e.i(60378);function s8(e){return function(e,t={}){let i,s,r=new so({casing:t.casing});if(!0===t.logger?i=new o:!1!==t.logger&&(i=t.logger),t.schema){let e=function(e,t){1===Object.keys(e).length&&"default"in e&&!a(e.default,w)&&(e=e.default);let i={},s={},r={};for(let[n,l]of Object.entries(e))if(a(l,w)){let e=S(l),t=s[e];for(let s of(i[e]=n,r[n]={tsName:n,dbName:l[w.Symbol.Name],schema:l[w.Symbol.Schema],columns:l[w.Symbol.Columns],relations:t?.relations??{},primaryKey:t?.primaryKey??[]},Object.values(l[w.Symbol.Columns])))s.primary&&r[n].primaryKey.push(s);let o=l[w.Symbol.ExtraConfigBuilder]?.(l[w.Symbol.ExtraConfigColumns]);if(o)for(let e of Object.values(o))a(e,tV)&&r[n].primaryKey.push(...e.columns)}else if(a(l,ii)){let e,n=S(l.table),a=i[n];for(let[i,o]of Object.entries(l.config(t(l.table))))if(a){let t=r[a];t.relations[i]=o,e&&t.primaryKey.push(...e)}else n in s||(s[n]={relations:{},primaryKey:e}),s[n].relations[i]=o}return{tables:r,tableNamesMap:i}}(t.schema,ia);s={fullSchema:t.schema,schema:e.tables,tableNamesMap:e.tableNamesMap}}let n=new sJ(e,r,s,{logger:i,cache:t.cache}),l=new sH("async",r,n,s);return l.$client=e,l.$cache=t.cache,l.$cache&&(l.$cache.invalidate=t.cache?.onMutate),l}(e,{schema:s6})}function s5(){let{env:e}=(0,r.getRequestContext)();return s8(e.grepbase_db)}e.s(["createDb",()=>s8],17649),e.s(["getDb",()=>s5],40831)}]);

//# sourceMappingURL=_7ece717d._.js.map
/**/;(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["chunks/node_modules_@opentelemetry_api_build_esm_a886cc58._.js",30623,24158,t=>{"use strict";function e(t){return Symbol.for(t)}var r=new function t(e){var r=this;r._currentContext=e?new Map(e):new Map,r.getValue=function(t){return r._currentContext.get(t)},r.setValue=function(e,n){var o=new t(r._currentContext);return o._currentContext.set(e,n),o},r.deleteValue=function(e){var n=new t(r._currentContext);return n._currentContext.delete(e),n}};t.s(["ROOT_CONTEXT",()=>r,"createContextKey",()=>e],24158);var n=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},o=function(t,e,r){if(r||2==arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},i=function(){function t(){}return t.prototype.active=function(){return r},t.prototype.with=function(t,e,r){for(var i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];return e.call.apply(e,o([r],n(i),!1))},t.prototype.bind=function(t,e){return e},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}();t.s(["NoopContextManager",()=>i],30623)},98688,t=>{"use strict";var e="object"==typeof globalThis?globalThis:"object"==typeof self?self:t.g,r="1.9.0",n=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,o=function(t){var e=new Set([t]),r=new Set,o=t.match(n);if(!o)return function(){return!1};var i={major:+o[1],minor:+o[2],patch:+o[3],prerelease:o[4]};if(null!=i.prerelease)return function(e){return e===t};function a(t){return r.add(t),!1}return function(t){if(e.has(t))return!0;if(r.has(t))return!1;var o=t.match(n);if(!o)return a(t);var u={major:+o[1],minor:+o[2],patch:+o[3],prerelease:o[4]};if(null!=u.prerelease||i.major!==u.major)return a(t);if(0===i.major)return i.minor===u.minor&&i.patch<=u.patch?(e.add(t),!0):a(t);return i.minor<=u.minor?(e.add(t),!0):a(t)}}(r),i=Symbol.for("opentelemetry.js.api."+r.split(".")[0]);function a(t,n,o,a){void 0===a&&(a=!1);var u,c=e[i]=null!=(u=e[i])?u:{version:r};if(!a&&c[t]){var l=Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return o.error(l.stack||l.message),!1}if(c.version!==r){var l=Error("@opentelemetry/api: Registration of version v"+c.version+" for "+t+" does not match previously registered API v"+r);return o.error(l.stack||l.message),!1}return c[t]=n,o.debug("@opentelemetry/api: Registered a global for "+t+" v"+r+"."),!0}function u(t){var r,n,a=null==(r=e[i])?void 0:r.version;if(a&&o(a))return null==(n=e[i])?void 0:n[t]}function c(t,n){n.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+r+".");var o=e[i];o&&delete o[t]}t.s(["getGlobal",()=>u,"registerGlobal",()=>a,"unregisterGlobal",()=>c],98688)},94323,63689,91008,34529,89622,65839,9729,68677,29322,31232,t=>{"use strict";var e,r,n,o,i,a,u=t.i(98688),c=t.i(30623),l=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},s=function(t,e,r){if(r||2==arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},p=function(){function t(t){this._namespace=t.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return f("debug",this._namespace,t)},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return f("error",this._namespace,t)},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return f("info",this._namespace,t)},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return f("warn",this._namespace,t)},t.prototype.verbose=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return f("verbose",this._namespace,t)},t}();function f(t,e,r){var n=(0,u.getGlobal)("diag");if(n)return r.unshift(e),n[t].apply(n,s([],l(r),!1))}(e=o||(o={}))[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL",t.s(["DiagLogLevel",()=>o],63689);var g=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},v=function(t,e,r){if(r||2==arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},y=function(){function t(){function t(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=(0,u.getGlobal)("diag");if(n)return n[t].apply(n,v([],g(e),!1))}}var e=this;e.setLogger=function(t,r){if(void 0===r&&(r={logLevel:o.INFO}),t===e){var n,i,a,c=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return e.error(null!=(n=c.stack)?n:c.message),!1}"number"==typeof r&&(r={logLevel:r});var l=(0,u.getGlobal)("diag"),s=function(t,e){function r(r,n){var o=e[r];return"function"==typeof o&&t>=n?o.bind(e):function(){}}return t<o.NONE?t=o.NONE:t>o.ALL&&(t=o.ALL),e=e||{},{error:r("error",o.ERROR),warn:r("warn",o.WARN),info:r("info",o.INFO),debug:r("debug",o.DEBUG),verbose:r("verbose",o.VERBOSE)}}(null!=(i=r.logLevel)?i:o.INFO,t);if(l&&!r.suppressOverrideMessage){var p=null!=(a=Error().stack)?a:"<failed to generate stacktrace>";l.warn("Current logger will be overwritten from "+p),s.warn("Current logger will overwrite one already registered from "+p)}return(0,u.registerGlobal)("diag",s,e,!0)},e.disable=function(){(0,u.unregisterGlobal)("diag",e)},e.createComponentLogger=function(t){return new p(t)},e.verbose=t("verbose"),e.debug=t("debug"),e.info=t("info"),e.warn=t("warn"),e.error=t("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}();t.s(["DiagAPI",()=>y],91008);var h=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},d=function(t,e,r){if(r||2==arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},b="context",m=new c.NoopContextManager,_=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(t){return(0,u.registerGlobal)(b,t,y.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(t,e,r){for(var n,o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return(n=this._getContextManager()).with.apply(n,d([t,e,r],h(o),!1))},t.prototype.bind=function(t,e){return this._getContextManager().bind(t,e)},t.prototype._getContextManager=function(){return(0,u.getGlobal)(b)||m},t.prototype.disable=function(){this._getContextManager().disable(),(0,u.unregisterGlobal)(b,y.instance())},t}();t.s(["ContextAPI",()=>_],34529);var w=t.i(24158);(r=i||(i={}))[r.NONE=0]="NONE",r[r.SAMPLED=1]="SAMPLED",t.s(["TraceFlags",()=>i],89622);var S="0000000000000000",x="00000000000000000000000000000000",C={traceId:x,spanId:S,traceFlags:i.NONE};t.s(["INVALID_SPANID",()=>S,"INVALID_SPAN_CONTEXT",()=>C,"INVALID_TRACEID",()=>x],65839);var T=function(){function t(t){void 0===t&&(t=C),this._spanContext=t}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(t,e){return this},t.prototype.setAttributes=function(t){return this},t.prototype.addEvent=function(t,e){return this},t.prototype.addLink=function(t){return this},t.prototype.addLinks=function(t){return this},t.prototype.setStatus=function(t){return this},t.prototype.updateName=function(t){return this},t.prototype.end=function(t){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(t,e){},t}(),A=(0,w.createContextKey)("OpenTelemetry Context Key SPAN");function N(t){return t.getValue(A)||void 0}function E(){return N(_.getInstance().active())}function I(t,e){return t.setValue(A,e)}function O(t){return t.deleteValue(A)}function R(t,e){return I(t,new T(e))}function L(t){var e;return null==(e=N(t))?void 0:e.spanContext()}var P=/^([0-9a-f]{32})$/i,D=/^[0-9a-f]{16}$/i;function G(t){return P.test(t)&&t!==x}function V(t){return D.test(t)&&t!==S}function M(t){return G(t.traceId)&&V(t.spanId)}function j(t){return new T(t)}t.s(["isSpanContextValid",()=>M,"isValidSpanId",()=>V,"isValidTraceId",()=>G,"wrapSpanContext",()=>j],9729);var k=_.getInstance(),B=function(){function t(){}return t.prototype.startSpan=function(t,e,r){if(void 0===r&&(r=k.active()),null==e?void 0:e.root)return new T;var n,o=r&&L(r);return"object"==typeof(n=o)&&"string"==typeof n.spanId&&"string"==typeof n.traceId&&"number"==typeof n.traceFlags&&M(o)?new T(o):new T},t.prototype.startActiveSpan=function(t,e,r,n){if(!(arguments.length<2)){2==arguments.length?a=e:3==arguments.length?(o=e,a=r):(o=e,i=r,a=n);var o,i,a,u=null!=i?i:k.active(),c=this.startSpan(t,o,u),l=I(u,c);return k.with(l,a,void 0,c)}},t}(),F=new B,U=function(){function t(t,e,r,n){this._provider=t,this.name=e,this.version=r,this.options=n}return t.prototype.startSpan=function(t,e,r){return this._getTracer().startSpan(t,e,r)},t.prototype.startActiveSpan=function(t,e,r,n){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):F},t}();t.s(["ProxyTracer",()=>U],68677);var K=new(function(){function t(){}return t.prototype.getTracer=function(t,e,r){return new B},t}()),W=function(){function t(){}return t.prototype.getTracer=function(t,e,r){var n;return null!=(n=this.getDelegateTracer(t,e,r))?n:new U(this,t,e,r)},t.prototype.getDelegate=function(){var t;return null!=(t=this._delegate)?t:K},t.prototype.setDelegate=function(t){this._delegate=t},t.prototype.getDelegateTracer=function(t,e,r){var n;return null==(n=this._delegate)?void 0:n.getTracer(t,e,r)},t}();t.s(["ProxyTracerProvider",()=>W],29322);var $="trace",X=(function(){function t(){this._proxyTracerProvider=new W,this.wrapSpanContext=j,this.isSpanContextValid=M,this.deleteSpan=O,this.getSpan=N,this.getActiveSpan=E,this.getSpanContext=L,this.setSpan=I,this.setSpanContext=R}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(t){var e=(0,u.registerGlobal)($,this._proxyTracerProvider,y.instance());return e&&this._proxyTracerProvider.setDelegate(t),e},t.prototype.getTracerProvider=function(){return(0,u.getGlobal)($)||this._proxyTracerProvider},t.prototype.getTracer=function(t,e){return this.getTracerProvider().getTracer(t,e)},t.prototype.disable=function(){(0,u.unregisterGlobal)($,y.instance()),this._proxyTracerProvider=new W},t})().getInstance();t.s(["trace",()=>X],94323),(n=a||(a={}))[n.UNSET=0]="UNSET",n[n.OK=1]="OK",n[n.ERROR=2]="ERROR",t.s(["SpanStatusCode",()=>a],31232)}]);

//# sourceMappingURL=node_modules_%40opentelemetry_api_build_esm_a886cc58._.js.map
/**/;(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["chunks/node_modules_@ai-sdk_provider-utils_dist_index_mjs_995f32ad._.js",66125,8715,6508,39017,e=>{"use strict";let t;var r,n,i,a,o,s,u,l,d,c,m,f,p,v,h,g,y,_,b,$,x,k,w,I,S,Z,O,z,j,N,U,P,E,A,T,D,C,R,L,F="vercel.ai.error",M=Symbol.for(F),J=class e extends(o=Error,a=M,o){constructor({name:e,message:t,cause:r}){super(t),this[a]=!0,this.name=e,this.cause=r}static isInstance(t){return e.hasMarker(t,F)}static hasMarker(e,t){let r=Symbol.for(t);return null!=e&&"object"==typeof e&&r in e&&"boolean"==typeof e[r]&&!0===e[r]}},V="AI_APICallError",B=`vercel.ai.error.${V}`,W=Symbol.for(B),K=class extends(u=J,s=W,u){constructor({message:e,url:t,requestBodyValues:r,statusCode:n,responseHeaders:i,responseBody:a,cause:o,isRetryable:u=null!=n&&(408===n||409===n||429===n||n>=500),data:l}){super({name:V,message:e,cause:o}),this[s]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=i,this.responseBody=a,this.isRetryable=u,this.data=l}static isInstance(e){return J.hasMarker(e,B)}},G="AI_EmptyResponseBodyError",q=`vercel.ai.error.${G}`,X=Symbol.for(q),H=class extends(d=J,l=X,d){constructor({message:e="Empty response body"}={}){super({name:G,message:e}),this[l]=!0}static isInstance(e){return J.hasMarker(e,q)}};function Y(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}var Q="AI_InvalidArgumentError",ee=`vercel.ai.error.${Q}`,et=Symbol.for(ee),er=class extends(m=J,c=et,m){constructor({message:e,cause:t,argument:r}){super({name:Q,message:e,cause:t}),this[c]=!0,this.argument=r}static isInstance(e){return J.hasMarker(e,ee)}},en="AI_InvalidPromptError",ei=`vercel.ai.error.${en}`,ea=Symbol.for(ei),eo=class extends(p=J,f=ea,p){constructor({prompt:e,message:t,cause:r}){super({name:en,message:`Invalid prompt: ${t}`,cause:r}),this[f]=!0,this.prompt=e}static isInstance(e){return J.hasMarker(e,ei)}},es="AI_InvalidResponseDataError",eu=`vercel.ai.error.${es}`,el=Symbol.for(eu),ed=class extends(h=J,v=el,h){constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:es,message:t}),this[v]=!0,this.data=e}static isInstance(e){return J.hasMarker(e,eu)}},ec="AI_JSONParseError",em=`vercel.ai.error.${ec}`,ef=Symbol.for(em),ep=class extends(y=J,g=ef,y){constructor({text:e,cause:t}){super({name:ec,message:`JSON parsing failed: Text: ${e}.
Error message: ${Y(t)}`,cause:t}),this[g]=!0,this.text=e}static isInstance(e){return J.hasMarker(e,em)}},ev="AI_LoadAPIKeyError",eh=`vercel.ai.error.${ev}`,eg=Symbol.for(eh),ey=class extends(b=J,_=eg,b){constructor({message:e}){super({name:ev,message:e}),this[_]=!0}static isInstance(e){return J.hasMarker(e,eh)}},e_="AI_LoadSettingError",eb=`vercel.ai.error.${e_}`,e$=Symbol.for(eb),ex=class extends(x=J,$=e$,x){constructor({message:e}){super({name:e_,message:e}),this[$]=!0}static isInstance(e){return J.hasMarker(e,eb)}},ek="AI_NoContentGeneratedError",ew=`vercel.ai.error.${ek}`,eI=Symbol.for(ew),eS=class extends(w=J,k=eI,w){constructor({message:e="No content generated."}={}){super({name:ek,message:e}),this[k]=!0}static isInstance(e){return J.hasMarker(e,ew)}},eZ="AI_NoSuchModelError",eO=`vercel.ai.error.${eZ}`,ez=Symbol.for(eO),ej=class extends(S=J,I=ez,S){constructor({errorName:e=eZ,modelId:t,modelType:r,message:n=`No such ${r}: ${t}`}){super({name:e,message:n}),this[I]=!0,this.modelId=t,this.modelType=r}static isInstance(e){return J.hasMarker(e,eO)}},eN="AI_TooManyEmbeddingValuesForCallError",eU=`vercel.ai.error.${eN}`,eP=Symbol.for(eU),eE=class extends(O=J,Z=eP,O){constructor(e){super({name:eN,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[Z]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return J.hasMarker(e,eU)}},eA="AI_TypeValidationError",eT=`vercel.ai.error.${eA}`,eD=Symbol.for(eT),eC=class e extends(j=J,z=eD,j){constructor({value:e,cause:t}){super({name:eA,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${Y(t)}`,cause:t}),this[z]=!0,this.value=e}static isInstance(e){return J.hasMarker(e,eT)}static wrap({value:t,cause:r}){return e.isInstance(r)&&r.value===t?r:new e({value:t,cause:r})}},eR="AI_UnsupportedFunctionalityError",eL=`vercel.ai.error.${eR}`,eF=Symbol.for(eL),eM=class extends(U=J,N=eF,U){constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:eR,message:t}),this[N]=!0,this.functionality=e}static isInstance(e){return J.hasMarker(e,eL)}};function eJ(e){return null===e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e||(Array.isArray(e)?e.every(eJ):"object"==typeof e&&Object.entries(e).every(([e,t])=>"string"==typeof e&&(void 0===t||eJ(t))))}function eV(e){return Array.isArray(e)&&e.every(eJ)}function eB(e){return null!=e&&"object"==typeof e&&Object.entries(e).every(([e,t])=>"string"==typeof e&&(void 0===t||eJ(t)))}e.s(["AISDKError",()=>J,"APICallError",()=>K,"EmptyResponseBodyError",()=>H,"InvalidArgumentError",()=>er,"InvalidPromptError",()=>eo,"InvalidResponseDataError",()=>ed,"JSONParseError",()=>ep,"LoadAPIKeyError",()=>ey,"LoadSettingError",()=>ex,"NoContentGeneratedError",()=>eS,"NoSuchModelError",()=>ej,"TooManyEmbeddingValuesForCallError",()=>eE,"TypeValidationError",()=>eC,"UnsupportedFunctionalityError",()=>eM,"getErrorMessage",()=>Y,"isJSONArray",()=>eV,"isJSONObject",()=>eB],8715);let eW=Object.freeze({status:"aborted"});function eK(e,t,r){function n(r,n){if(r._zod||Object.defineProperty(r,"_zod",{value:{def:n,constr:o,traits:new Set},enumerable:!1}),r._zod.traits.has(e))return;r._zod.traits.add(e),t(r,n);let i=o.prototype,a=Object.keys(i);for(let e=0;e<a.length;e++){let t=a[e];t in r||(r[t]=i[t].bind(r))}}let i=r?.Parent??Object;class a extends i{}function o(e){var t;let i=r?.Parent?new a:this;for(let r of(n(i,e),(t=i._zod).deferred??(t.deferred=[]),i._zod.deferred))r();return i}return Object.defineProperty(a,"name",{value:e}),Object.defineProperty(o,"init",{value:n}),Object.defineProperty(o,Symbol.hasInstance,{value:t=>!!r?.Parent&&t instanceof r.Parent||t?._zod?.traits?.has(e)}),Object.defineProperty(o,"name",{value:e}),o}let eG=Symbol("zod_brand");class eq extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class eX extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}let eH={};function eY(e){return e&&Object.assign(eH,e),eH}function eQ(e){return e}function e0(e){return e}function e4(e){}function e1(e){throw Error("Unexpected value in exhaustive check")}function e6(e){}function e9(e){let t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,r])=>-1===t.indexOf(+e)).map(([e,t])=>t)}function e2(e,t="|"){return e.map(e=>tw(e)).join(t)}function e3(e,t){return"bigint"==typeof t?t.toString():t}function e5(e){return{get value(){{let t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function e7(e){return null==e}function e8(e){let t=+!!e.startsWith("^"),r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function te(e,t){let r=(e.toString().split(".")[1]||"").length,n=t.toString(),i=(n.split(".")[1]||"").length;if(0===i&&/\d?e-\d?/.test(n)){let e=n.match(/\d?e-(\d?)/);e?.[1]&&(i=Number.parseInt(e[1]))}let a=r>i?r:i;return Number.parseInt(e.toFixed(a).replace(".",""))%Number.parseInt(t.toFixed(a).replace(".",""))/10**a}e.s(["$ZodAsyncError",()=>eq,"$ZodEncodeError",()=>eX,"$brand",0,eG,"$constructor",()=>eK,"NEVER",0,eW,"config",()=>eY,"globalConfig",0,eH],44214);let tt=Symbol("evaluating");function tr(e,t,r){let n;Object.defineProperty(e,t,{get(){if(n!==tt)return void 0===n&&(n=tt,n=r()),n},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function tn(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function ti(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function ta(...e){let t={};for(let r of e)Object.assign(t,Object.getOwnPropertyDescriptors(r));return Object.defineProperties({},t)}function to(e){return ta(e._zod.def)}function ts(e,t){return t?t.reduce((e,t)=>e?.[t],e):e}function tu(e){let t=Object.keys(e);return Promise.all(t.map(t=>e[t])).then(e=>{let r={};for(let n=0;n<t.length;n++)r[t[n]]=e[n];return r})}function tl(e=10){let t="abcdefghijklmnopqrstuvwxyz",r="";for(let n=0;n<e;n++)r+=t[Math.floor(Math.random()*t.length)];return r}function td(e){return JSON.stringify(e)}function tc(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}let tm="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function tf(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}let tp=e5(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(e){return!1}});function tv(e){if(!1===tf(e))return!1;let t=e.constructor;if(void 0===t||"function"!=typeof t)return!0;let r=t.prototype;return!1!==tf(r)&&!1!==Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")}function th(e){return tv(e)?{...e}:Array.isArray(e)?[...e]:e}function tg(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}let ty=new Set(["string","number","symbol"]),t_=new Set(["string","number","bigint","boolean","symbol","undefined"]);function tb(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t$(e,t,r){let n=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(n._zod.parent=e),n}function tx(e){if(!e)return{};if("string"==typeof e)return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");e.error=e.message}return(delete e.message,"string"==typeof e.error)?{...e,error:()=>e.error}:e}function tk(e){let t;return new Proxy({},{get:(r,n,i)=>(t??(t=e()),Reflect.get(t,n,i)),set:(r,n,i,a)=>(t??(t=e()),Reflect.set(t,n,i,a)),has:(r,n)=>(t??(t=e()),Reflect.has(t,n)),deleteProperty:(r,n)=>(t??(t=e()),Reflect.deleteProperty(t,n)),ownKeys:r=>(t??(t=e()),Reflect.ownKeys(t)),getOwnPropertyDescriptor:(r,n)=>(t??(t=e()),Reflect.getOwnPropertyDescriptor(t,n)),defineProperty:(r,n,i)=>(t??(t=e()),Reflect.defineProperty(t,n,i))})}function tw(e){return"bigint"==typeof e?e.toString()+"n":"string"==typeof e?`"${e}"`:`${e}`}function tI(e){return Object.keys(e).filter(t=>"optional"===e[t]._zod.optin&&"optional"===e[t]._zod.optout)}let tS={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-0x80000000,0x7fffffff],uint32:[0,0xffffffff],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},tZ={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function tO(e,t){let r=e._zod.def,n=ta(e._zod.def,{get shape(){let e={};for(let n in t){if(!(n in r.shape))throw Error(`Unrecognized key: "${n}"`);t[n]&&(e[n]=r.shape[n])}return ti(this,"shape",e),e},checks:[]});return t$(e,n)}function tz(e,t){let r=e._zod.def,n=ta(e._zod.def,{get shape(){let n={...e._zod.def.shape};for(let e in t){if(!(e in r.shape))throw Error(`Unrecognized key: "${e}"`);t[e]&&delete n[e]}return ti(this,"shape",n),n},checks:[]});return t$(e,n)}function tj(e,t){if(!tv(t))throw Error("Invalid input to extend: expected a plain object");let r=e._zod.def.checks;if(r&&r.length>0)throw Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let n=ta(e._zod.def,{get shape(){let r={...e._zod.def.shape,...t};return ti(this,"shape",r),r},checks:[]});return t$(e,n)}function tN(e,t){if(!tv(t))throw Error("Invalid input to safeExtend: expected a plain object");let r={...e._zod.def,get shape(){let r={...e._zod.def.shape,...t};return ti(this,"shape",r),r},checks:e._zod.def.checks};return t$(e,r)}function tU(e,t){let r=ta(e._zod.def,{get shape(){let r={...e._zod.def.shape,...t._zod.def.shape};return ti(this,"shape",r),r},get catchall(){return t._zod.def.catchall},checks:[]});return t$(e,r)}function tP(e,t,r){let n=ta(t._zod.def,{get shape(){let n=t._zod.def.shape,i={...n};if(r)for(let t in r){if(!(t in n))throw Error(`Unrecognized key: "${t}"`);r[t]&&(i[t]=e?new e({type:"optional",innerType:n[t]}):n[t])}else for(let t in n)i[t]=e?new e({type:"optional",innerType:n[t]}):n[t];return ti(this,"shape",i),i},checks:[]});return t$(t,n)}function tE(e,t,r){let n=ta(t._zod.def,{get shape(){let n=t._zod.def.shape,i={...n};if(r)for(let t in r){if(!(t in i))throw Error(`Unrecognized key: "${t}"`);r[t]&&(i[t]=new e({type:"nonoptional",innerType:n[t]}))}else for(let t in n)i[t]=new e({type:"nonoptional",innerType:n[t]});return ti(this,"shape",i),i},checks:[]});return t$(t,n)}function tA(e,t=0){if(!0===e.aborted)return!0;for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function tT(e,t){return t.map(t=>(t.path??(t.path=[]),t.path.unshift(e),t))}function tD(e){return"string"==typeof e?e:e?.message}function tC(e,t,r){let n={...e,path:e.path??[]};return e.message||(n.message=tD(e.inst?._zod.def?.error?.(e))??tD(t?.error?.(e))??tD(r.customError?.(e))??tD(r.localeError?.(e))??"Invalid input"),delete n.inst,delete n.continue,t?.reportInput||delete n.input,n}function tR(e){return e instanceof Set?"set":e instanceof Map?"map":e instanceof File?"file":"unknown"}function tL(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function tF(...e){let[t,r,n]=e;return"string"==typeof t?{message:t,code:"custom",input:r,inst:n}:{...t}}function tM(e){return Object.entries(e).filter(([e,t])=>Number.isNaN(Number.parseInt(e,10))).map(e=>e[1])}function tJ(e){let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}function tV(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function tB(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r="=".repeat((4-t.length%4)%4);return tJ(t+r)}function tW(e){return tV(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function tK(e){let t=e.replace(/^0x/,"");if(t.length%2!=0)throw Error("Invalid hex string length");let r=new Uint8Array(t.length/2);for(let e=0;e<t.length;e+=2)r[e/2]=Number.parseInt(t.slice(e,e+2),16);return r}function tG(e){return Array.from(e).map(e=>e.toString(16).padStart(2,"0")).join("")}class tq{constructor(...e){}}e.s(["BIGINT_FORMAT_RANGES",0,tZ,"Class",()=>tq,"NUMBER_FORMAT_RANGES",0,tS,"aborted",()=>tA,"allowsEval",0,tp,"assert",()=>e6,"assertEqual",()=>eQ,"assertIs",()=>e4,"assertNever",()=>e1,"assertNotEqual",()=>e0,"assignProp",()=>ti,"base64ToUint8Array",()=>tJ,"base64urlToUint8Array",()=>tB,"cached",()=>e5,"captureStackTrace",0,tm,"cleanEnum",()=>tM,"cleanRegex",()=>e8,"clone",()=>t$,"cloneDef",()=>to,"createTransparentProxy",()=>tk,"defineLazy",()=>tr,"esc",()=>td,"escapeRegex",()=>tb,"extend",()=>tj,"finalizeIssue",()=>tC,"floatSafeRemainder",()=>te,"getElementAtPath",()=>ts,"getEnumValues",()=>e9,"getLengthableOrigin",()=>tL,"getParsedType",0,e=>{let t=typeof e;switch(t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return"promise";if("undefined"!=typeof Map&&e instanceof Map)return"map";if("undefined"!=typeof Set&&e instanceof Set)return"set";if("undefined"!=typeof Date&&e instanceof Date)return"date";if("undefined"!=typeof File&&e instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${t}`)}},"getSizableOrigin",()=>tR,"hexToUint8Array",()=>tK,"isObject",()=>tf,"isPlainObject",()=>tv,"issue",()=>tF,"joinValues",()=>e2,"jsonStringifyReplacer",()=>e3,"merge",()=>tU,"mergeDefs",()=>ta,"normalizeParams",()=>tx,"nullish",()=>e7,"numKeys",()=>tg,"objectClone",()=>tn,"omit",()=>tz,"optionalKeys",()=>tI,"partial",()=>tP,"pick",()=>tO,"prefixIssues",()=>tT,"primitiveTypes",0,t_,"promiseAllObject",()=>tu,"propertyKeyTypes",0,ty,"randomString",()=>tl,"required",()=>tE,"safeExtend",()=>tN,"shallowClone",()=>th,"slugify",()=>tc,"stringifyPrimitive",()=>tw,"uint8ArrayToBase64",()=>tV,"uint8ArrayToBase64url",()=>tW,"uint8ArrayToHex",()=>tG,"unwrapMessage",()=>tD],64684);let tX=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,e3,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},tH=eK("$ZodError",tX),tY=eK("$ZodError",tX,{Parent:Error});function tQ(e,t=e=>e.message){let r={},n=[];for(let i of e.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(t(i))):n.push(t(i));return{formErrors:n,fieldErrors:r}}function t0(e,t=e=>e.message){let r={_errors:[]},n=e=>{for(let i of e.issues)if("invalid_union"===i.code&&i.errors.length)i.errors.map(e=>n({issues:e}));else if("invalid_key"===i.code)n({issues:i.issues});else if("invalid_element"===i.code)n({issues:i.issues});else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){let r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(e),r}function t4(e,t=e=>e.message){let r={errors:[]},n=(e,i=[])=>{var a,o;for(let s of e.issues)if("invalid_union"===s.code&&s.errors.length)s.errors.map(e=>n({issues:e},s.path));else if("invalid_key"===s.code)n({issues:s.issues},s.path);else if("invalid_element"===s.code)n({issues:s.issues},s.path);else{let e=[...i,...s.path];if(0===e.length){r.errors.push(t(s));continue}let n=r,u=0;for(;u<e.length;){let r=e[u],i=u===e.length-1;"string"==typeof r?(n.properties??(n.properties={}),(a=n.properties)[r]??(a[r]={errors:[]}),n=n.properties[r]):(n.items??(n.items=[]),(o=n.items)[r]??(o[r]={errors:[]}),n=n.items[r]),i&&n.errors.push(t(s)),u++}}};return n(e),r}function t1(e){let t=[];for(let r of e.map(e=>"object"==typeof e?e.key:e))"number"==typeof r?t.push(`[${r}]`):"symbol"==typeof r?t.push(`[${JSON.stringify(String(r))}]`):/[^\w$]/.test(r)?t.push(`[${JSON.stringify(r)}]`):(t.length&&t.push("."),t.push(r));return t.join("")}function t6(e){let t=[];for(let r of[...e.issues].sort((e,t)=>(e.path??[]).length-(t.path??[]).length))t.push(` ${r.message}`),r.path?.length&&t.push(`   at ${t1(r.path)}`);return t.join("\n")}e.s(["$ZodError",0,tH,"$ZodRealError",0,tY,"flattenError",()=>tQ,"formatError",()=>t0,"prettifyError",()=>t6,"toDotPath",()=>t1,"treeifyError",()=>t4],3056);let t9=e=>(t,r,n,i)=>{let a=n?Object.assign(n,{async:!1}):{async:!1},o=t._zod.run({value:r,issues:[]},a);if(o instanceof Promise)throw new eq;if(o.issues.length){let t=new(i?.Err??e)(o.issues.map(e=>tC(e,a,eY())));throw tm(t,i?.callee),t}return o.value},t2=t9(tY),t3=e=>async(t,r,n,i)=>{let a=n?Object.assign(n,{async:!0}):{async:!0},o=t._zod.run({value:r,issues:[]},a);if(o instanceof Promise&&(o=await o),o.issues.length){let t=new(i?.Err??e)(o.issues.map(e=>tC(e,a,eY())));throw tm(t,i?.callee),t}return o.value},t5=t3(tY),t7=e=>(t,r,n)=>{let i=n?{...n,async:!1}:{async:!1},a=t._zod.run({value:r,issues:[]},i);if(a instanceof Promise)throw new eq;return a.issues.length?{success:!1,error:new(e??tH)(a.issues.map(e=>tC(e,i,eY())))}:{success:!0,data:a.value}},t8=t7(tY),re=e=>async(t,r,n)=>{let i=n?Object.assign(n,{async:!0}):{async:!0},a=t._zod.run({value:r,issues:[]},i);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new e(a.issues.map(e=>tC(e,i,eY())))}:{success:!0,data:a.value}},rt=re(tY),rr=e=>(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return t9(e)(t,r,i)},rn=rr(tY),ri=e=>(t,r,n)=>t9(e)(t,r,n),ra=ri(tY),ro=e=>async(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return t3(e)(t,r,i)},rs=ro(tY),ru=e=>async(t,r,n)=>t3(e)(t,r,n),rl=ru(tY),rd=e=>(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return t7(e)(t,r,i)},rc=rd(tY),rm=e=>(t,r,n)=>t7(e)(t,r,n),rf=rm(tY),rp=e=>async(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return re(e)(t,r,i)},rv=rp(tY),rh=e=>async(t,r,n)=>re(e)(t,r,n),rg=rh(tY);e.s(["_decode",0,ri,"_decodeAsync",0,ru,"_encode",0,rr,"_encodeAsync",0,ro,"_parse",0,t9,"_parseAsync",0,t3,"_safeDecode",0,rm,"_safeDecodeAsync",0,rh,"_safeEncode",0,rd,"_safeEncodeAsync",0,rp,"_safeParse",0,t7,"_safeParseAsync",0,re,"decode",0,ra,"decodeAsync",0,rl,"encode",0,rn,"encodeAsync",0,rs,"parse",0,t2,"parseAsync",0,t5,"safeDecode",0,rf,"safeDecodeAsync",0,rg,"safeEncode",0,rc,"safeEncodeAsync",0,rv,"safeParse",0,t8,"safeParseAsync",0,rt],63733);let ry=/^[cC][^\s-]{8,}$/,r_=/^[0-9a-z]+$/,rb=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,r$=/^[0-9a-vA-V]{20}$/,rx=/^[A-Za-z0-9]{27}$/,rk=/^[a-zA-Z0-9_-]{21}$/,rw=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,rI=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,rS=e=>e?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,rZ=rS(4),rO=rS(6),rz=rS(7),rj=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,rN=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u;function rU(){return RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")}let rP=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,rE=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,rA=e=>{let t=tb(e??":");return RegExp(`^(?:[0-9A-F]{2}${t}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${t}){5}[0-9a-f]{2}$`)},rT=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,rD=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,rC=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,rR=/^[A-Za-z0-9_-]*$/,rL=/^\+(?:[0-9]){6,14}[0-9]$/,rF="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",rM=RegExp(`^${rF}$`);function rJ(e){let t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function rV(e){return RegExp(`^${rJ(e)}$`)}function rB(e){let t=rJ({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let n=`${t}(?:${r.join("|")})`;return RegExp(`^${rF}T(?:${n})$`)}let rW=e=>{let t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return RegExp(`^${t}$`)},rK=/^-?\d+n?$/,rG=/^-?\d+$/,rq=/^-?\d+(?:\.\d+)?/,rX=/^(?:true|false)$/i,rH=/^null$/i,rY=/^undefined$/i,rQ=/^[^A-Z]*$/,r0=/^[^a-z]*$/;function r4(e,t){return RegExp(`^[A-Za-z0-9+/]{${e}}${t}$`)}function r1(e){return RegExp(`^[A-Za-z0-9_-]{${e}}$`)}let r6=r4(22,"=="),r9=r1(22),r2=r4(27,"="),r3=r1(27),r5=r4(43,"="),r7=r1(43),r8=r4(64,""),ne=r1(64),nt=r4(86,"=="),nr=r1(86);e.s(["base64",0,rC,"base64url",0,rR,"bigint",0,rK,"boolean",0,rX,"browserEmail",0,/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,"cidrv4",0,rT,"cidrv6",0,rD,"cuid",0,ry,"cuid2",0,r_,"date",0,rM,"datetime",()=>rB,"domain",0,/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,"duration",0,rw,"e164",0,rL,"email",0,rj,"emoji",()=>rU,"extendedDuration",0,/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,"guid",0,rI,"hex",0,/^[0-9a-fA-F]*$/,"hostname",0,/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,"html5Email",0,/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,"idnEmail",0,rN,"integer",0,rG,"ipv4",0,rP,"ipv6",0,rE,"ksuid",0,rx,"lowercase",0,rQ,"mac",0,rA,"md5_base64",0,r6,"md5_base64url",0,r9,"md5_hex",0,/^[0-9a-fA-F]{32}$/,"nanoid",0,rk,"null",()=>rH,"number",0,rq,"rfc5322Email",0,/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,"sha1_base64",0,r2,"sha1_base64url",0,r3,"sha1_hex",0,/^[0-9a-fA-F]{40}$/,"sha256_base64",0,r5,"sha256_base64url",0,r7,"sha256_hex",0,/^[0-9a-fA-F]{64}$/,"sha384_base64",0,r8,"sha384_base64url",0,ne,"sha384_hex",0,/^[0-9a-fA-F]{96}$/,"sha512_base64",0,nt,"sha512_base64url",0,nr,"sha512_hex",0,/^[0-9a-fA-F]{128}$/,"string",0,rW,"time",()=>rV,"ulid",0,rb,"undefined",()=>rY,"unicodeEmail",0,rN,"uppercase",0,r0,"uuid",0,rS,"uuid4",0,rZ,"uuid6",0,rO,"uuid7",0,rz,"xid",0,r$],21268);let nn=eK("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),ni={number:"number",bigint:"bigint",object:"date"},na=eK("$ZodCheckLessThan",(e,t)=>{nn.init(e,t);let r=ni[typeof t.value];e._zod.onattach.push(e=>{let r=e._zod.bag,n=(t.inclusive?r.maximum:r.exclusiveMaximum)??1/0;t.value<n&&(t.inclusive?r.maximum=t.value:r.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),no=eK("$ZodCheckGreaterThan",(e,t)=>{nn.init(e,t);let r=ni[typeof t.value];e._zod.onattach.push(e=>{let r=e._zod.bag,n=(t.inclusive?r.minimum:r.exclusiveMinimum)??-1/0;t.value>n&&(t.inclusive?r.minimum=t.value:r.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),ns=eK("$ZodCheckMultipleOf",(e,t)=>{nn.init(e,t),e._zod.onattach.push(e=>{var r;(r=e._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof r.value?r.value%t.value===BigInt(0):0===te(r.value,t.value))||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),nu=eK("$ZodCheckNumberFormat",(e,t)=>{nn.init(e,t),t.format=t.format||"float64";let r=t.format?.includes("int"),n=r?"int":"number",[i,a]=tS[t.format];e._zod.onattach.push(e=>{let n=e._zod.bag;n.format=t.format,n.minimum=i,n.maximum=a,r&&(n.pattern=rG)}),e._zod.check=o=>{let s=o.value;if(r){if(!Number.isInteger(s))return void o.issues.push({expected:n,format:t.format,code:"invalid_type",continue:!1,input:s,inst:e});if(!Number.isSafeInteger(s))return void(s>0?o.issues.push({input:s,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}):o.issues.push({input:s,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}))}s<i&&o.issues.push({origin:"number",input:s,code:"too_small",minimum:i,inclusive:!0,inst:e,continue:!t.abort}),s>a&&o.issues.push({origin:"number",input:s,code:"too_big",maximum:a,inst:e})}}),nl=eK("$ZodCheckBigIntFormat",(e,t)=>{nn.init(e,t);let[r,n]=tZ[t.format];e._zod.onattach.push(e=>{let i=e._zod.bag;i.format=t.format,i.minimum=r,i.maximum=n}),e._zod.check=i=>{let a=i.value;a<r&&i.issues.push({origin:"bigint",input:a,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!t.abort}),a>n&&i.issues.push({origin:"bigint",input:a,code:"too_big",maximum:n,inst:e})}}),nd=eK("$ZodCheckMaxSize",(e,t)=>{var r;nn.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!e7(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let r=e._zod.bag.maximum??1/0;t.maximum<r&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{let n=r.value;n.size<=t.maximum||r.issues.push({origin:tR(n),code:"too_big",maximum:t.maximum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),nc=eK("$ZodCheckMinSize",(e,t)=>{var r;nn.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!e7(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let r=e._zod.bag.minimum??-1/0;t.minimum>r&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{let n=r.value;n.size>=t.minimum||r.issues.push({origin:tR(n),code:"too_small",minimum:t.minimum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),nm=eK("$ZodCheckSizeEquals",(e,t)=>{var r;nn.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!e7(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let r=e._zod.bag;r.minimum=t.size,r.maximum=t.size,r.size=t.size}),e._zod.check=r=>{let n=r.value,i=n.size;if(i===t.size)return;let a=i>t.size;r.issues.push({origin:tR(n),...a?{code:"too_big",maximum:t.size}:{code:"too_small",minimum:t.size},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),nf=eK("$ZodCheckMaxLength",(e,t)=>{var r;nn.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!e7(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag.maximum??1/0;t.maximum<r&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{let n=r.value;if(n.length<=t.maximum)return;let i=tL(n);r.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),np=eK("$ZodCheckMinLength",(e,t)=>{var r;nn.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!e7(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag.minimum??-1/0;t.minimum>r&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{let n=r.value;if(n.length>=t.minimum)return;let i=tL(n);r.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),nv=eK("$ZodCheckLengthEquals",(e,t)=>{var r;nn.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!e7(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),e._zod.check=r=>{let n=r.value,i=n.length;if(i===t.length)return;let a=tL(n),o=i>t.length;r.issues.push({origin:a,...o?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),nh=eK("$ZodCheckStringFormat",(e,t)=>{var r,n;nn.init(e,t),e._zod.onattach.push(e=>{let r=e._zod.bag;r.format=t.format,t.pattern&&(r.patterns??(r.patterns=new Set),r.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push({origin:"string",code:"invalid_format",format:t.format,input:r.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),ng=eK("$ZodCheckRegex",(e,t)=>{nh.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),ny=eK("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=rQ),nh.init(e,t)}),n_=eK("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=r0),nh.init(e,t)}),nb=eK("$ZodCheckIncludes",(e,t)=>{nn.init(e,t);let r=tb(t.includes),n=new RegExp("number"==typeof t.position?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:e,continue:!t.abort})}}),n$=eK("$ZodCheckStartsWith",(e,t)=>{nn.init(e,t);let r=RegExp(`^${tb(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),nx=eK("$ZodCheckEndsWith",(e,t)=>{nn.init(e,t);let r=RegExp(`.*${tb(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}});function nk(e,t,r){e.issues.length&&t.issues.push(...tT(r,e.issues))}let nw=eK("$ZodCheckProperty",(e,t)=>{nn.init(e,t),e._zod.check=e=>{let r=t.schema._zod.run({value:e.value[t.property],issues:[]},{});if(r instanceof Promise)return r.then(r=>nk(r,e,t.property));nk(r,e,t.property)}}),nI=eK("$ZodCheckMimeType",(e,t)=>{nn.init(e,t);let r=new Set(t.mime);e._zod.onattach.push(e=>{e._zod.bag.mime=t.mime}),e._zod.check=n=>{r.has(n.value.type)||n.issues.push({code:"invalid_value",values:t.mime,input:n.value.type,inst:e,continue:!t.abort})}}),nS=eK("$ZodCheckOverwrite",(e,t)=>{nn.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});e.s(["$ZodCheck",0,nn,"$ZodCheckBigIntFormat",0,nl,"$ZodCheckEndsWith",0,nx,"$ZodCheckGreaterThan",0,no,"$ZodCheckIncludes",0,nb,"$ZodCheckLengthEquals",0,nv,"$ZodCheckLessThan",0,na,"$ZodCheckLowerCase",0,ny,"$ZodCheckMaxLength",0,nf,"$ZodCheckMaxSize",0,nd,"$ZodCheckMimeType",0,nI,"$ZodCheckMinLength",0,np,"$ZodCheckMinSize",0,nc,"$ZodCheckMultipleOf",0,ns,"$ZodCheckNumberFormat",0,nu,"$ZodCheckOverwrite",0,nS,"$ZodCheckProperty",0,nw,"$ZodCheckRegex",0,ng,"$ZodCheckSizeEquals",0,nm,"$ZodCheckStartsWith",0,n$,"$ZodCheckStringFormat",0,nh,"$ZodCheckUpperCase",0,n_],65549);class nZ{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e){e(this,{execution:"sync"}),e(this,{execution:"async"});return}let t=e.split("\n").filter(e=>e),r=Math.min(...t.map(e=>e.length-e.trimStart().length));for(let e of t.map(e=>e.slice(r)).map(e=>" ".repeat(2*this.indent)+e))this.content.push(e)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}}e.s(["Doc",()=>nZ],15210);let nO={major:4,minor:2,patch:1};e.s(["version",0,nO],36116);let nz=eK("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=nO;let n=[...e._zod.def.checks??[]];for(let t of(e._zod.traits.has("$ZodCheck")&&n.unshift(e),n))for(let r of t._zod.onattach)r(e);if(0===n.length)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{let t=(e,t,r)=>{let n,i=tA(e);for(let a of t){if(a._zod.def.when){if(!a._zod.def.when(e))continue}else if(i)continue;let t=e.issues.length,o=a._zod.check(e);if(o instanceof Promise&&r?.async===!1)throw new eq;if(n||o instanceof Promise)n=(n??Promise.resolve()).then(async()=>{await o,e.issues.length!==t&&(i||(i=tA(e,t)))});else{if(e.issues.length===t)continue;i||(i=tA(e,t))}}return n?n.then(()=>e):e},r=(r,i,a)=>{if(tA(r))return r.aborted=!0,r;let o=t(i,n,a);if(o instanceof Promise){if(!1===a.async)throw new eq;return o.then(t=>e._zod.parse(t,a))}return e._zod.parse(o,a)};e._zod.run=(i,a)=>{if(a.skipChecks)return e._zod.parse(i,a);if("backward"===a.direction){let t=e._zod.parse({value:i.value,issues:[]},{...a,skipChecks:!0});return t instanceof Promise?t.then(e=>r(e,i,a)):r(t,i,a)}let o=e._zod.parse(i,a);if(o instanceof Promise){if(!1===a.async)throw new eq;return o.then(e=>t(e,n,a))}return t(o,n,a)}}e["~standard"]={validate:t=>{try{let r=t8(e,t);return r.success?{value:r.data}:{issues:r.error?.issues}}catch(r){return rt(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),nj=eK("$ZodString",(e,t)=>{nz.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??rW(e._zod.bag),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=String(r.value)}catch(e){}return"string"==typeof r.value||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),nN=eK("$ZodStringFormat",(e,t)=>{nh.init(e,t),nj.init(e,t)}),nU=eK("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=rI),nN.init(e,t)}),nP=eK("$ZodUUID",(e,t)=>{if(t.version){let e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=rS(e))}else t.pattern??(t.pattern=rS());nN.init(e,t)}),nE=eK("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=rj),nN.init(e,t)}),nA=eK("$ZodURL",(e,t)=>{nN.init(e,t),e._zod.check=r=>{try{let n=r.value.trim(),i=new URL(n);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(i.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=i.href:r.value=n;return}catch(n){r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),nT=eK("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=rU()),nN.init(e,t)}),nD=eK("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=rk),nN.init(e,t)}),nC=eK("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=ry),nN.init(e,t)}),nR=eK("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=r_),nN.init(e,t)}),nL=eK("$ZodULID",(e,t)=>{t.pattern??(t.pattern=rb),nN.init(e,t)}),nF=eK("$ZodXID",(e,t)=>{t.pattern??(t.pattern=r$),nN.init(e,t)}),nM=eK("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=rx),nN.init(e,t)}),nJ=eK("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=rB(t)),nN.init(e,t)}),nV=eK("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=rM),nN.init(e,t)}),nB=eK("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=rV(t)),nN.init(e,t)}),nW=eK("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=rw),nN.init(e,t)}),nK=eK("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=rP),nN.init(e,t),e._zod.bag.format="ipv4"}),nG=eK("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=rE),nN.init(e,t),e._zod.bag.format="ipv6",e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),nq=eK("$ZodMAC",(e,t)=>{t.pattern??(t.pattern=rA(t.delimiter)),nN.init(e,t),e._zod.bag.format="mac"}),nX=eK("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=rT),nN.init(e,t)}),nH=eK("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=rD),nN.init(e,t),e._zod.check=r=>{let n=r.value.split("/");try{if(2!==n.length)throw Error();let[e,t]=n;if(!t)throw Error();let r=Number(t);if(`${r}`!==t||r<0||r>128)throw Error();new URL(`http://[${e}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function nY(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}let nQ=eK("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=rC),nN.init(e,t),e._zod.bag.contentEncoding="base64",e._zod.check=r=>{nY(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function n0(e){if(!rR.test(e))return!1;let t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return nY(t.padEnd(4*Math.ceil(t.length/4),"="))}let n4=eK("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=rR),nN.init(e,t),e._zod.bag.contentEncoding="base64url",e._zod.check=r=>{n0(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),n1=eK("$ZodE164",(e,t)=>{t.pattern??(t.pattern=rL),nN.init(e,t)});function n6(e,t=null){try{let r=e.split(".");if(3!==r.length)return!1;let[n]=r;if(!n)return!1;let i=JSON.parse(atob(n));if("typ"in i&&i?.typ!=="JWT"||!i.alg||t&&(!("alg"in i)||i.alg!==t))return!1;return!0}catch{return!1}}let n9=eK("$ZodJWT",(e,t)=>{nN.init(e,t),e._zod.check=r=>{n6(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),n2=eK("$ZodCustomStringFormat",(e,t)=>{nN.init(e,t),e._zod.check=r=>{t.fn(r.value)||r.issues.push({code:"invalid_format",format:t.format,input:r.value,inst:e,continue:!t.abort})}}),n3=eK("$ZodNumber",(e,t)=>{nz.init(e,t),e._zod.pattern=e._zod.bag.pattern??rq,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch(e){}let i=r.value;if("number"==typeof i&&!Number.isNaN(i)&&Number.isFinite(i))return r;let a="number"==typeof i?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:i,inst:e,...a?{received:a}:{}}),r}}),n5=eK("$ZodNumberFormat",(e,t)=>{nu.init(e,t),n3.init(e,t)}),n7=eK("$ZodBoolean",(e,t)=>{nz.init(e,t),e._zod.pattern=rX,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=!!r.value}catch(e){}let i=r.value;return"boolean"==typeof i||r.issues.push({expected:"boolean",code:"invalid_type",input:i,inst:e}),r}}),n8=eK("$ZodBigInt",(e,t)=>{nz.init(e,t),e._zod.pattern=rK,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=BigInt(r.value)}catch(e){}return"bigint"==typeof r.value||r.issues.push({expected:"bigint",code:"invalid_type",input:r.value,inst:e}),r}}),ie=eK("$ZodBigIntFormat",(e,t)=>{nl.init(e,t),n8.init(e,t)}),it=eK("$ZodSymbol",(e,t)=>{nz.init(e,t),e._zod.parse=(t,r)=>{let n=t.value;return"symbol"==typeof n||t.issues.push({expected:"symbol",code:"invalid_type",input:n,inst:e}),t}}),ir=eK("$ZodUndefined",(e,t)=>{nz.init(e,t),e._zod.pattern=rY,e._zod.values=new Set([void 0]),e._zod.optin="optional",e._zod.optout="optional",e._zod.parse=(t,r)=>{let n=t.value;return void 0===n||t.issues.push({expected:"undefined",code:"invalid_type",input:n,inst:e}),t}}),ii=eK("$ZodNull",(e,t)=>{nz.init(e,t),e._zod.pattern=rH,e._zod.values=new Set([null]),e._zod.parse=(t,r)=>{let n=t.value;return null===n||t.issues.push({expected:"null",code:"invalid_type",input:n,inst:e}),t}}),ia=eK("$ZodAny",(e,t)=>{nz.init(e,t),e._zod.parse=e=>e}),io=eK("$ZodUnknown",(e,t)=>{nz.init(e,t),e._zod.parse=e=>e}),is=eK("$ZodNever",(e,t)=>{nz.init(e,t),e._zod.parse=(t,r)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)}),iu=eK("$ZodVoid",(e,t)=>{nz.init(e,t),e._zod.parse=(t,r)=>{let n=t.value;return void 0===n||t.issues.push({expected:"void",code:"invalid_type",input:n,inst:e}),t}}),il=eK("$ZodDate",(e,t)=>{nz.init(e,t),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=new Date(r.value)}catch(e){}let i=r.value,a=i instanceof Date;return a&&!Number.isNaN(i.getTime())||r.issues.push({expected:"date",code:"invalid_type",input:i,...a?{received:"Invalid Date"}:{},inst:e}),r}});function id(e,t,r){e.issues.length&&t.issues.push(...tT(r,e.issues)),t.value[r]=e.value}let ic=eK("$ZodArray",(e,t)=>{nz.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!Array.isArray(i))return r.issues.push({expected:"array",code:"invalid_type",input:i,inst:e}),r;r.value=Array(i.length);let a=[];for(let e=0;e<i.length;e++){let o=i[e],s=t.element._zod.run({value:o,issues:[]},n);s instanceof Promise?a.push(s.then(t=>id(t,r,e))):id(s,r,e)}return a.length?Promise.all(a).then(()=>r):r}});function im(e,t,r,n){e.issues.length&&t.issues.push(...tT(r,e.issues)),void 0===e.value?r in n&&(t.value[r]=void 0):t.value[r]=e.value}function ip(e){let t=Object.keys(e.shape);for(let r of t)if(!e.shape?.[r]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${r}": expected a Zod schema`);let r=tI(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function iv(e,t,r,n,i,a){let o=[],s=i.keySet,u=i.catchall._zod,l=u.def.type;for(let i in t){if(s.has(i))continue;if("never"===l){o.push(i);continue}let a=u.run({value:t[i],issues:[]},n);a instanceof Promise?e.push(a.then(e=>im(e,r,i,t))):im(a,r,i,t)}return(o.length&&r.issues.push({code:"unrecognized_keys",keys:o,input:t,inst:a}),e.length)?Promise.all(e).then(()=>r):r}let ih=eK("$ZodObject",(e,t)=>{let r;nz.init(e,t);let n=Object.getOwnPropertyDescriptor(t,"shape");if(!n?.get){let e=t.shape;Object.defineProperty(t,"shape",{get:()=>{let r={...e};return Object.defineProperty(t,"shape",{value:r}),r}})}let i=e5(()=>ip(t));tr(e._zod,"propValues",()=>{let e=t.shape,r={};for(let t in e){let n=e[t]._zod;if(n.values)for(let e of(r[t]??(r[t]=new Set),n.values))r[t].add(e)}return r});let a=t.catchall;e._zod.parse=(t,n)=>{r??(r=i.value);let o=t.value;if(!tf(o))return t.issues.push({expected:"object",code:"invalid_type",input:o,inst:e}),t;t.value={};let s=[],u=r.shape;for(let e of r.keys){let r=u[e]._zod.run({value:o[e],issues:[]},n);r instanceof Promise?s.push(r.then(r=>im(r,t,e,o))):im(r,t,e,o)}return a?iv(s,o,t,n,i.value,e):s.length?Promise.all(s).then(()=>t):t}}),ig=eK("$ZodObjectJIT",(e,t)=>{let r,n;ih.init(e,t);let i=e._zod.parse,a=e5(()=>ip(t)),o=!eH.jitless,s=o&&tp.value,u=t.catchall;e._zod.parse=(l,d)=>{n??(n=a.value);let c=l.value;return tf(c)?o&&s&&d?.async===!1&&!0!==d.jitless?(r||(r=(e=>{let t=new nZ(["shape","payload","ctx"]),r=a.value,n=e=>{let t=td(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");let i=Object.create(null),o=0;for(let e of r.keys)i[e]=`key_${o++}`;for(let e of(t.write("const newResult = {};"),r.keys)){let r=i[e],a=td(e);t.write(`const ${r} = ${n(e)};`),t.write(`
        if (${r}.issues.length) {
          payload.issues = payload.issues.concat(${r}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${a}, ...iss.path] : [${a}]
          })));
        }
        
        
        if (${r}.value === undefined) {
          if (${a} in input) {
            newResult[${a}] = undefined;
          }
        } else {
          newResult[${a}] = ${r}.value;
        }
        
      `)}t.write("payload.value = newResult;"),t.write("return payload;");let s=t.compile();return(t,r)=>s(e,t,r)})(t.shape)),l=r(l,d),u)?iv([],c,l,d,n,e):l:i(l,d):(l.issues.push({expected:"object",code:"invalid_type",input:c,inst:e}),l)}});function iy(e,t,r,n){for(let r of e)if(0===r.issues.length)return t.value=r.value,t;let i=e.filter(e=>!tA(e));return 1===i.length?(t.value=i[0].value,i[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(e=>e.issues.map(e=>tC(e,n,eY())))}),t)}let i_=eK("$ZodUnion",(e,t)=>{nz.init(e,t),tr(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),tr(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),tr(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),tr(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){let e=t.options.map(e=>e._zod.pattern);return RegExp(`^(${e.map(e=>e8(e.source)).join("|")})$`)}});let r=1===t.options.length,n=t.options[0]._zod.run;e._zod.parse=(i,a)=>{if(r)return n(i,a);let o=!1,s=[];for(let e of t.options){let t=e._zod.run({value:i.value,issues:[]},a);if(t instanceof Promise)s.push(t),o=!0;else{if(0===t.issues.length)return t;s.push(t)}}return o?Promise.all(s).then(t=>iy(t,i,e,a)):iy(s,i,e,a)}});function ib(e,t,r,n){let i=e.filter(e=>0===e.issues.length);return 1===i.length?t.value=i[0].value:0===i.length?t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(e=>e.issues.map(e=>tC(e,n,eY())))}):t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:[],inclusive:!1}),t}let i$=eK("$ZodXor",(e,t)=>{i_.init(e,t),t.inclusive=!1;let r=1===t.options.length,n=t.options[0]._zod.run;e._zod.parse=(i,a)=>{if(r)return n(i,a);let o=!1,s=[];for(let e of t.options){let t=e._zod.run({value:i.value,issues:[]},a);t instanceof Promise?(s.push(t),o=!0):s.push(t)}return o?Promise.all(s).then(t=>ib(t,i,e,a)):ib(s,i,e,a)}}),ix=eK("$ZodDiscriminatedUnion",(e,t)=>{t.inclusive=!1,i_.init(e,t);let r=e._zod.parse;tr(e._zod,"propValues",()=>{let e={};for(let r of t.options){let n=r._zod.propValues;if(!n||0===Object.keys(n).length)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(r)}"`);for(let[t,r]of Object.entries(n))for(let n of(e[t]||(e[t]=new Set),r))e[t].add(n)}return e});let n=e5(()=>{let e=t.options,r=new Map;for(let n of e){let e=n._zod.propValues?.[t.discriminator];if(!e||0===e.size)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(n)}"`);for(let t of e){if(r.has(t))throw Error(`Duplicate discriminator value "${String(t)}"`);r.set(t,n)}}return r});e._zod.parse=(i,a)=>{let o=i.value;if(!tf(o))return i.issues.push({code:"invalid_type",expected:"object",input:o,inst:e}),i;let s=n.value.get(o?.[t.discriminator]);return s?s._zod.run(i,a):t.unionFallback?r(i,a):(i.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:o,path:[t.discriminator],inst:e}),i)}}),ik=eK("$ZodIntersection",(e,t)=>{nz.init(e,t),e._zod.parse=(e,r)=>{let n=e.value,i=t.left._zod.run({value:n,issues:[]},r),a=t.right._zod.run({value:n,issues:[]},r);return i instanceof Promise||a instanceof Promise?Promise.all([i,a]).then(([t,r])=>iw(e,t,r)):iw(e,i,a)}});function iw(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),tA(e))return e;let n=function e(t,r){if(t===r||t instanceof Date&&r instanceof Date&&+t==+r)return{valid:!0,data:t};if(tv(t)&&tv(r)){let n=Object.keys(r),i=Object.keys(t).filter(e=>-1!==n.indexOf(e)),a={...t,...r};for(let n of i){let i=e(t[n],r[n]);if(!i.valid)return{valid:!1,mergeErrorPath:[n,...i.mergeErrorPath]};a[n]=i.data}return{valid:!0,data:a}}if(Array.isArray(t)&&Array.isArray(r)){if(t.length!==r.length)return{valid:!1,mergeErrorPath:[]};let n=[];for(let i=0;i<t.length;i++){let a=e(t[i],r[i]);if(!a.valid)return{valid:!1,mergeErrorPath:[i,...a.mergeErrorPath]};n.push(a.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}(t.value,r.value);if(!n.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}let iI=eK("$ZodTuple",(e,t)=>{nz.init(e,t);let r=t.items;e._zod.parse=(n,i)=>{let a=n.value;if(!Array.isArray(a))return n.issues.push({input:a,inst:e,expected:"tuple",code:"invalid_type"}),n;n.value=[];let o=[],s=[...r].reverse().findIndex(e=>"optional"!==e._zod.optin),u=-1===s?0:r.length-s;if(!t.rest){let t=a.length>r.length,i=a.length<u-1;if(t||i)return n.issues.push({...t?{code:"too_big",maximum:r.length}:{code:"too_small",minimum:r.length},input:a,inst:e,origin:"array"}),n}let l=-1;for(let e of r){if(++l>=a.length&&l>=u)continue;let t=e._zod.run({value:a[l],issues:[]},i);t instanceof Promise?o.push(t.then(e=>iS(e,n,l))):iS(t,n,l)}if(t.rest)for(let e of a.slice(r.length)){l++;let r=t.rest._zod.run({value:e,issues:[]},i);r instanceof Promise?o.push(r.then(e=>iS(e,n,l))):iS(r,n,l)}return o.length?Promise.all(o).then(()=>n):n}});function iS(e,t,r){e.issues.length&&t.issues.push(...tT(r,e.issues)),t.value[r]=e.value}let iZ=eK("$ZodRecord",(e,t)=>{nz.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!tv(i))return r.issues.push({expected:"record",code:"invalid_type",input:i,inst:e}),r;let a=[],o=t.keyType._zod.values;if(o){let s;r.value={};let u=new Set;for(let e of o)if("string"==typeof e||"number"==typeof e||"symbol"==typeof e){u.add("number"==typeof e?e.toString():e);let o=t.valueType._zod.run({value:i[e],issues:[]},n);o instanceof Promise?a.push(o.then(t=>{t.issues.length&&r.issues.push(...tT(e,t.issues)),r.value[e]=t.value})):(o.issues.length&&r.issues.push(...tT(e,o.issues)),r.value[e]=o.value)}for(let e in i)u.has(e)||(s=s??[]).push(e);s&&s.length>0&&r.issues.push({code:"unrecognized_keys",input:i,inst:e,keys:s})}else for(let o of(r.value={},Reflect.ownKeys(i))){if("__proto__"===o)continue;let s=t.keyType._zod.run({value:o,issues:[]},n);if(s instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(s.issues.length){"loose"===t.mode?r.value[o]=i[o]:r.issues.push({code:"invalid_key",origin:"record",issues:s.issues.map(e=>tC(e,n,eY())),input:o,path:[o],inst:e});continue}let u=t.valueType._zod.run({value:i[o],issues:[]},n);u instanceof Promise?a.push(u.then(e=>{e.issues.length&&r.issues.push(...tT(o,e.issues)),r.value[s.value]=e.value})):(u.issues.length&&r.issues.push(...tT(o,u.issues)),r.value[s.value]=u.value)}return a.length?Promise.all(a).then(()=>r):r}}),iO=eK("$ZodMap",(e,t)=>{nz.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!(i instanceof Map))return r.issues.push({expected:"map",code:"invalid_type",input:i,inst:e}),r;let a=[];for(let[o,s]of(r.value=new Map,i)){let u=t.keyType._zod.run({value:o,issues:[]},n),l=t.valueType._zod.run({value:s,issues:[]},n);u instanceof Promise||l instanceof Promise?a.push(Promise.all([u,l]).then(([t,a])=>{iz(t,a,r,o,i,e,n)})):iz(u,l,r,o,i,e,n)}return a.length?Promise.all(a).then(()=>r):r}});function iz(e,t,r,n,i,a,o){e.issues.length&&(ty.has(typeof n)?r.issues.push(...tT(n,e.issues)):r.issues.push({code:"invalid_key",origin:"map",input:i,inst:a,issues:e.issues.map(e=>tC(e,o,eY()))})),t.issues.length&&(ty.has(typeof n)?r.issues.push(...tT(n,t.issues)):r.issues.push({origin:"map",code:"invalid_element",input:i,inst:a,key:n,issues:t.issues.map(e=>tC(e,o,eY()))})),r.value.set(e.value,t.value)}let ij=eK("$ZodSet",(e,t)=>{nz.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!(i instanceof Set))return r.issues.push({input:i,inst:e,expected:"set",code:"invalid_type"}),r;let a=[];for(let e of(r.value=new Set,i)){let i=t.valueType._zod.run({value:e,issues:[]},n);i instanceof Promise?a.push(i.then(e=>iN(e,r))):iN(i,r)}return a.length?Promise.all(a).then(()=>r):r}});function iN(e,t){e.issues.length&&t.issues.push(...e.issues),t.value.add(e.value)}let iU=eK("$ZodEnum",(e,t)=>{nz.init(e,t);let r=e9(t.entries),n=new Set(r);e._zod.values=n,e._zod.pattern=RegExp(`^(${r.filter(e=>ty.has(typeof e)).map(e=>"string"==typeof e?tb(e):e.toString()).join("|")})$`),e._zod.parse=(t,i)=>{let a=t.value;return n.has(a)||t.issues.push({code:"invalid_value",values:r,input:a,inst:e}),t}}),iP=eK("$ZodLiteral",(e,t)=>{if(nz.init(e,t),0===t.values.length)throw Error("Cannot create literal schema with no valid values");let r=new Set(t.values);e._zod.values=r,e._zod.pattern=RegExp(`^(${t.values.map(e=>"string"==typeof e?tb(e):e?tb(e.toString()):String(e)).join("|")})$`),e._zod.parse=(n,i)=>{let a=n.value;return r.has(a)||n.issues.push({code:"invalid_value",values:t.values,input:a,inst:e}),n}}),iE=eK("$ZodFile",(e,t)=>{nz.init(e,t),e._zod.parse=(t,r)=>{let n=t.value;return n instanceof File||t.issues.push({expected:"file",code:"invalid_type",input:n,inst:e}),t}}),iA=eK("$ZodTransform",(e,t)=>{nz.init(e,t),e._zod.parse=(r,n)=>{if("backward"===n.direction)throw new eX(e.constructor.name);let i=t.transform(r.value,r);if(n.async)return(i instanceof Promise?i:Promise.resolve(i)).then(e=>(r.value=e,r));if(i instanceof Promise)throw new eq;return r.value=i,r}});function iT(e,t){return e.issues.length&&void 0===t?{issues:[],value:void 0}:e}let iD=eK("$ZodOptional",(e,t)=>{nz.init(e,t),e._zod.optin="optional",e._zod.optout="optional",tr(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),tr(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${e8(e.source)})?$`):void 0}),e._zod.parse=(e,r)=>{if("optional"===t.innerType._zod.optin){let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(t=>iT(t,e.value)):iT(n,e.value)}return void 0===e.value?e:t.innerType._zod.run(e,r)}}),iC=eK("$ZodNullable",(e,t)=>{nz.init(e,t),tr(e._zod,"optin",()=>t.innerType._zod.optin),tr(e._zod,"optout",()=>t.innerType._zod.optout),tr(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${e8(e.source)}|null)$`):void 0}),tr(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,r)=>null===e.value?e:t.innerType._zod.run(e,r)}),iR=eK("$ZodDefault",(e,t)=>{nz.init(e,t),e._zod.optin="optional",tr(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);if(void 0===e.value)return e.value=t.defaultValue,e;let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(e=>iL(e,t)):iL(n,t)}});function iL(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}let iF=eK("$ZodPrefault",(e,t)=>{nz.init(e,t),e._zod.optin="optional",tr(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>("backward"===r.direction||void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,r))}),iM=eK("$ZodNonOptional",(e,t)=>{nz.init(e,t),tr(e._zod,"values",()=>{let e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(r,n)=>{let i=t.innerType._zod.run(r,n);return i instanceof Promise?i.then(t=>iJ(t,e)):iJ(i,e)}});function iJ(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}let iV=eK("$ZodSuccess",(e,t)=>{nz.init(e,t),e._zod.parse=(e,r)=>{if("backward"===r.direction)throw new eX("ZodSuccess");let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(t=>(e.value=0===t.issues.length,e)):(e.value=0===n.issues.length,e)}}),iB=eK("$ZodCatch",(e,t)=>{nz.init(e,t),tr(e._zod,"optin",()=>t.innerType._zod.optin),tr(e._zod,"optout",()=>t.innerType._zod.optout),tr(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(n=>(e.value=n.value,n.issues.length&&(e.value=t.catchValue({...e,error:{issues:n.issues.map(e=>tC(e,r,eY()))},input:e.value}),e.issues=[]),e)):(e.value=n.value,n.issues.length&&(e.value=t.catchValue({...e,error:{issues:n.issues.map(e=>tC(e,r,eY()))},input:e.value}),e.issues=[]),e)}}),iW=eK("$ZodNaN",(e,t)=>{nz.init(e,t),e._zod.parse=(t,r)=>("number"==typeof t.value&&Number.isNaN(t.value)||t.issues.push({input:t.value,inst:e,expected:"nan",code:"invalid_type"}),t)}),iK=eK("$ZodPipe",(e,t)=>{nz.init(e,t),tr(e._zod,"values",()=>t.in._zod.values),tr(e._zod,"optin",()=>t.in._zod.optin),tr(e._zod,"optout",()=>t.out._zod.optout),tr(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,r)=>{if("backward"===r.direction){let n=t.out._zod.run(e,r);return n instanceof Promise?n.then(e=>iG(e,t.in,r)):iG(n,t.in,r)}let n=t.in._zod.run(e,r);return n instanceof Promise?n.then(e=>iG(e,t.out,r)):iG(n,t.out,r)}});function iG(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}let iq=eK("$ZodCodec",(e,t)=>{nz.init(e,t),tr(e._zod,"values",()=>t.in._zod.values),tr(e._zod,"optin",()=>t.in._zod.optin),tr(e._zod,"optout",()=>t.out._zod.optout),tr(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,r)=>{if("forward"===(r.direction||"forward")){let n=t.in._zod.run(e,r);return n instanceof Promise?n.then(e=>iX(e,t,r)):iX(n,t,r)}{let n=t.out._zod.run(e,r);return n instanceof Promise?n.then(e=>iX(e,t,r)):iX(n,t,r)}}});function iX(e,t,r){if(e.issues.length)return e.aborted=!0,e;if("forward"===(r.direction||"forward")){let n=t.transform(e.value,e);return n instanceof Promise?n.then(n=>iH(e,n,t.out,r)):iH(e,n,t.out,r)}{let n=t.reverseTransform(e.value,e);return n instanceof Promise?n.then(n=>iH(e,n,t.in,r)):iH(e,n,t.in,r)}}function iH(e,t,r,n){return e.issues.length?(e.aborted=!0,e):r._zod.run({value:t,issues:e.issues},n)}let iY=eK("$ZodReadonly",(e,t)=>{nz.init(e,t),tr(e._zod,"propValues",()=>t.innerType._zod.propValues),tr(e._zod,"values",()=>t.innerType._zod.values),tr(e._zod,"optin",()=>t.innerType?._zod?.optin),tr(e._zod,"optout",()=>t.innerType?._zod?.optout),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(iQ):iQ(n)}});function iQ(e){return e.value=Object.freeze(e.value),e}let i0=eK("$ZodTemplateLiteral",(e,t)=>{nz.init(e,t);let r=[];for(let e of t.parts)if("object"==typeof e&&null!==e){if(!e._zod.pattern)throw Error(`Invalid template literal part, no pattern found: ${[...e._zod.traits].shift()}`);let t=e._zod.pattern instanceof RegExp?e._zod.pattern.source:e._zod.pattern;if(!t)throw Error(`Invalid template literal part: ${e._zod.traits}`);let n=+!!t.startsWith("^"),i=t.endsWith("$")?t.length-1:t.length;r.push(t.slice(n,i))}else if(null===e||t_.has(typeof e))r.push(tb(`${e}`));else throw Error(`Invalid template literal part: ${e}`);e._zod.pattern=RegExp(`^${r.join("")}$`),e._zod.parse=(r,n)=>("string"!=typeof r.value?r.issues.push({input:r.value,inst:e,expected:"template_literal",code:"invalid_type"}):(e._zod.pattern.lastIndex=0,e._zod.pattern.test(r.value)||r.issues.push({input:r.value,inst:e,code:"invalid_format",format:t.format??"template_literal",pattern:e._zod.pattern.source})),r)}),i4=eK("$ZodFunction",(e,t)=>(nz.init(e,t),e._def=t,e._zod.def=t,e.implement=t=>{if("function"!=typeof t)throw Error("implement() must be called with a function");return function(...r){let n=Reflect.apply(t,this,e._def.input?t2(e._def.input,r):r);return e._def.output?t2(e._def.output,n):n}},e.implementAsync=t=>{if("function"!=typeof t)throw Error("implementAsync() must be called with a function");return async function(...r){let n=e._def.input?await t5(e._def.input,r):r,i=await Reflect.apply(t,this,n);return e._def.output?await t5(e._def.output,i):i}},e._zod.parse=(t,r)=>("function"!=typeof t.value?t.issues.push({code:"invalid_type",expected:"function",input:t.value,inst:e}):e._def.output&&"promise"===e._def.output._zod.def.type?t.value=e.implementAsync(t.value):t.value=e.implement(t.value),t),e.input=(...t)=>{let r=e.constructor;return new r(Array.isArray(t[0])?{type:"function",input:new iI({type:"tuple",items:t[0],rest:t[1]}),output:e._def.output}:{type:"function",input:t[0],output:e._def.output})},e.output=t=>new e.constructor({type:"function",input:e._def.input,output:t}),e)),i1=eK("$ZodPromise",(e,t)=>{nz.init(e,t),e._zod.parse=(e,r)=>Promise.resolve(e.value).then(e=>t.innerType._zod.run({value:e,issues:[]},r))}),i6=eK("$ZodLazy",(e,t)=>{nz.init(e,t),tr(e._zod,"innerType",()=>t.getter()),tr(e._zod,"pattern",()=>e._zod.innerType?._zod?.pattern),tr(e._zod,"propValues",()=>e._zod.innerType?._zod?.propValues),tr(e._zod,"optin",()=>e._zod.innerType?._zod?.optin??void 0),tr(e._zod,"optout",()=>e._zod.innerType?._zod?.optout??void 0),e._zod.parse=(t,r)=>e._zod.innerType._zod.run(t,r)}),i9=eK("$ZodCustom",(e,t)=>{nn.init(e,t),nz.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=r=>{let n=r.value,i=t.fn(n);if(i instanceof Promise)return i.then(t=>i2(t,r,n,e));i2(i,r,n,e)}});function i2(e,t,r,n){if(!e){let e={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(e.params=n._zod.def.params),t.issues.push(tF(e))}}function i3(e,t,r,n){let i=Math.abs(e),a=i%10,o=i%100;return o>=11&&o<=19?n:1===a?t:a>=2&&a<=4?r:n}function i5(){let e,t;return{localeError:(e={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}},t={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},r=>{switch(r.code){case"invalid_type":return`Invalid input: expected ${r.expected}, received ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Invalid input: expected ${tw(r.values[0])}`;return`Invalid option: expected one of ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Too big: expected ${r.origin??"value"} to have ${t}${r.maximum.toString()} ${n.unit??"elements"}`;return`Too big: expected ${r.origin??"value"} to be ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Too small: expected ${r.origin} to have ${t}${r.minimum.toString()} ${n.unit}`;return`Too small: expected ${r.origin} to be ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Invalid string: must start with "${r.prefix}"`;if("ends_with"===r.format)return`Invalid string: must end with "${r.suffix}"`;if("includes"===r.format)return`Invalid string: must include "${r.includes}"`;if("regex"===r.format)return`Invalid string: must match pattern ${r.pattern}`;return`Invalid ${t[r.format]??r.format}`;case"not_multiple_of":return`Invalid number: must be a multiple of ${r.divisor}`;case"unrecognized_keys":return`Unrecognized key${r.keys.length>1?"s":""}: ${e2(r.keys,", ")}`;case"invalid_key":return`Invalid key in ${r.origin}`;case"invalid_union":default:return"Invalid input";case"invalid_element":return`Invalid value in ${r.origin}`}})}}function i7(){let e,t;return{localeError:(e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"  ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IPv4",cidrv6:" IPv6",base64:" base64",base64url:" base64url",json_string:" JSON",e164:" E.164",jwt:"JWT",template_literal:""},r=>{switch(r.code){case"invalid_type":return`  ${r.expected}  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?" (NaN)":"";case"object":if(Array.isArray(e))return" (Array)";if(null===e)return" (null)";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`  ${tw(r.values[0])}`;return`  ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`  ${r.origin??""} ${t} ${r.maximum.toString()} ${n.unit??""}`;return`  ${r.origin??""} ${t} ${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`  ${r.origin} ${t} ${r.minimum.toString()} ${n.unit}`;return`  ${r.origin} ${t} ${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`  "${r.prefix}"`;if("ends_with"===r.format)return`  "${r.suffix}"`;if("includes"===r.format)return`  "${r.includes}"`;if("regex"===r.format)return`  ${r.pattern}`;return` ${t[r.format]??r.format}`;case"not_multiple_of":return`  ${r.divisor}`;case"unrecognized_keys":return` ${e2(r.keys,", ")}`;case"invalid_key":return` ${r.origin}`;case"invalid_union":default:return``;case"invalid_element":return` ${r.origin}`}})}}e.s(["$ZodAny",0,ia,"$ZodArray",0,ic,"$ZodBase64",0,nQ,"$ZodBase64URL",0,n4,"$ZodBigInt",0,n8,"$ZodBigIntFormat",0,ie,"$ZodBoolean",0,n7,"$ZodCIDRv4",0,nX,"$ZodCIDRv6",0,nH,"$ZodCUID",0,nC,"$ZodCUID2",0,nR,"$ZodCatch",0,iB,"$ZodCodec",0,iq,"$ZodCustom",0,i9,"$ZodCustomStringFormat",0,n2,"$ZodDate",0,il,"$ZodDefault",0,iR,"$ZodDiscriminatedUnion",0,ix,"$ZodE164",0,n1,"$ZodEmail",0,nE,"$ZodEmoji",0,nT,"$ZodEnum",0,iU,"$ZodFile",0,iE,"$ZodFunction",0,i4,"$ZodGUID",0,nU,"$ZodIPv4",0,nK,"$ZodIPv6",0,nG,"$ZodISODate",0,nV,"$ZodISODateTime",0,nJ,"$ZodISODuration",0,nW,"$ZodISOTime",0,nB,"$ZodIntersection",0,ik,"$ZodJWT",0,n9,"$ZodKSUID",0,nM,"$ZodLazy",0,i6,"$ZodLiteral",0,iP,"$ZodMAC",0,nq,"$ZodMap",0,iO,"$ZodNaN",0,iW,"$ZodNanoID",0,nD,"$ZodNever",0,is,"$ZodNonOptional",0,iM,"$ZodNull",0,ii,"$ZodNullable",0,iC,"$ZodNumber",0,n3,"$ZodNumberFormat",0,n5,"$ZodObject",0,ih,"$ZodObjectJIT",0,ig,"$ZodOptional",0,iD,"$ZodPipe",0,iK,"$ZodPrefault",0,iF,"$ZodPromise",0,i1,"$ZodReadonly",0,iY,"$ZodRecord",0,iZ,"$ZodSet",0,ij,"$ZodString",0,nj,"$ZodStringFormat",0,nN,"$ZodSuccess",0,iV,"$ZodSymbol",0,it,"$ZodTemplateLiteral",0,i0,"$ZodTransform",0,iA,"$ZodTuple",0,iI,"$ZodType",0,nz,"$ZodULID",0,nL,"$ZodURL",0,nA,"$ZodUUID",0,nP,"$ZodUndefined",0,ir,"$ZodUnion",0,i_,"$ZodUnknown",0,io,"$ZodVoid",0,iu,"$ZodXID",0,nF,"$ZodXor",0,i$,"isValidBase64",()=>nY,"isValidBase64URL",()=>n0,"isValidJWT",()=>n6],43039);let i8=(e,t)=>{switch(e){case"number":return Number.isNaN(t)?"NaN":"skaiius";case"bigint":return"sveikasis skaiius";case"string":return"eilut";case"boolean":return"login reikm";case"undefined":case"void":return"neapibrta reikm";case"function":return"funkcija";case"symbol":return"simbolis";case"object":if(void 0===t)return"neinomas objektas";if(null===t)return"nulin reikm";if(Array.isArray(t))return"masyvas";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name;return"objektas";case"null":return"nulin reikm"}return e},ae=e=>e.charAt(0).toUpperCase()+e.slice(1);function at(e){let t=Math.abs(e),r=t%10,n=t%100;return n>=11&&n<=19||0===r?"many":1===r?"one":"few"}function ar(e,t,r,n){let i=Math.abs(e),a=i%10,o=i%100;return o>=11&&o<=19?n:1===a?t:a>=2&&a<=4?r:n}function an(){let e,t;return{localeError:(e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:" ",email:"  ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IPv4",cidrv6:" IPv6",base64:"   base64",base64url:"   base64url",json_string:" JSON",e164:" E.164",jwt:"JWT",template_literal:" "},r=>{switch(r.code){case"invalid_type":return`  :  ${r.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`  :  ${tw(r.values[0])}`;return` :    ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return` : ,  ${r.origin??""} ${n.verb} ${t}${r.maximum.toString()} ${n.unit??""}`;return` : ,  ${r.origin??""}  ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return` : ,  ${r.origin} ${n.verb} ${t}${r.minimum.toString()} ${n.unit}`;return` : ,  ${r.origin}  ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return` :    "${r.prefix}"`;if("ends_with"===r.format)return` :    "${r.suffix}"`;if("includes"===r.format)return` :   "${r.includes}"`;if("regex"===r.format)return` :    ${r.pattern}`;return` ${t[r.format]??r.format}`;case"not_multiple_of":return` :    ${r.divisor}`;case"unrecognized_keys":return` ${r.keys.length>1?"":""}: ${e2(r.keys,", ")}`;case"invalid_key":return`   ${r.origin}`;case"invalid_union":return"  ";case"invalid_element":return`   ${r.origin}`;default:return`  `}})}}e.s([],40055);let ai=Symbol("ZodOutput"),aa=Symbol("ZodInput");class ao{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){let r=t[0];if(this._map.set(e,r),r&&"object"==typeof r&&"id"in r){if(this._idmap.has(r.id))throw Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){let t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){let t=e._zod.parent;if(t){let r={...this.get(t)??{}};delete r.id;let n={...r,...this._map.get(e)};return Object.keys(n).length?n:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function as(){return new ao}(P=globalThis).__zod_globalRegistry??(P.__zod_globalRegistry=as());let au=globalThis.__zod_globalRegistry;function al(e,t){return new e({type:"string",...tx(t)})}function ad(e,t){return new e({type:"string",coerce:!0,...tx(t)})}function ac(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...tx(t)})}function am(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...tx(t)})}function af(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...tx(t)})}function ap(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...tx(t)})}function av(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...tx(t)})}function ah(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...tx(t)})}function ag(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...tx(t)})}function ay(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...tx(t)})}function a_(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...tx(t)})}function ab(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...tx(t)})}function a$(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...tx(t)})}function ax(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...tx(t)})}function ak(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...tx(t)})}function aw(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...tx(t)})}function aI(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...tx(t)})}function aS(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...tx(t)})}function aZ(e,t){return new e({type:"string",format:"mac",check:"string_format",abort:!1,...tx(t)})}function aO(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...tx(t)})}function az(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...tx(t)})}function aj(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...tx(t)})}function aN(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...tx(t)})}function aU(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...tx(t)})}function aP(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...tx(t)})}e.s(["$ZodRegistry",()=>ao,"$input",0,aa,"$output",0,ai,"globalRegistry",0,au,"registry",()=>as],16661);let aE={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function aA(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...tx(t)})}function aT(e,t){return new e({type:"string",format:"date",check:"string_format",...tx(t)})}function aD(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...tx(t)})}function aC(e,t){return new e({type:"string",format:"duration",check:"string_format",...tx(t)})}function aR(e,t){return new e({type:"number",checks:[],...tx(t)})}function aL(e,t){return new e({type:"number",coerce:!0,checks:[],...tx(t)})}function aF(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...tx(t)})}function aM(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float32",...tx(t)})}function aJ(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float64",...tx(t)})}function aV(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"int32",...tx(t)})}function aB(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"uint32",...tx(t)})}function aW(e,t){return new e({type:"boolean",...tx(t)})}function aK(e,t){return new e({type:"boolean",coerce:!0,...tx(t)})}function aG(e,t){return new e({type:"bigint",...tx(t)})}function aq(e,t){return new e({type:"bigint",coerce:!0,...tx(t)})}function aX(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...tx(t)})}function aH(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...tx(t)})}function aY(e,t){return new e({type:"symbol",...tx(t)})}function aQ(e,t){return new e({type:"undefined",...tx(t)})}function a0(e,t){return new e({type:"null",...tx(t)})}function a4(e){return new e({type:"any"})}function a1(e){return new e({type:"unknown"})}function a6(e,t){return new e({type:"never",...tx(t)})}function a9(e,t){return new e({type:"void",...tx(t)})}function a2(e,t){return new e({type:"date",...tx(t)})}function a3(e,t){return new e({type:"date",coerce:!0,...tx(t)})}function a5(e,t){return new e({type:"nan",...tx(t)})}function a7(e,t){return new na({check:"less_than",...tx(t),value:e,inclusive:!1})}function a8(e,t){return new na({check:"less_than",...tx(t),value:e,inclusive:!0})}function oe(e,t){return new no({check:"greater_than",...tx(t),value:e,inclusive:!1})}function ot(e,t){return new no({check:"greater_than",...tx(t),value:e,inclusive:!0})}function or(e){return oe(0,e)}function on(e){return a7(0,e)}function oi(e){return a8(0,e)}function oa(e){return ot(0,e)}function oo(e,t){return new ns({check:"multiple_of",...tx(t),value:e})}function os(e,t){return new nd({check:"max_size",...tx(t),maximum:e})}function ou(e,t){return new nc({check:"min_size",...tx(t),minimum:e})}function ol(e,t){return new nm({check:"size_equals",...tx(t),size:e})}function od(e,t){return new nf({check:"max_length",...tx(t),maximum:e})}function oc(e,t){return new np({check:"min_length",...tx(t),minimum:e})}function om(e,t){return new nv({check:"length_equals",...tx(t),length:e})}function of(e,t){return new ng({check:"string_format",format:"regex",...tx(t),pattern:e})}function op(e){return new ny({check:"string_format",format:"lowercase",...tx(e)})}function ov(e){return new n_({check:"string_format",format:"uppercase",...tx(e)})}function oh(e,t){return new nb({check:"string_format",format:"includes",...tx(t),includes:e})}function og(e,t){return new n$({check:"string_format",format:"starts_with",...tx(t),prefix:e})}function oy(e,t){return new nx({check:"string_format",format:"ends_with",...tx(t),suffix:e})}function o_(e,t,r){return new nw({check:"property",property:e,schema:t,...tx(r)})}function ob(e,t){return new nI({check:"mime_type",mime:e,...tx(t)})}function o$(e){return new nS({check:"overwrite",tx:e})}function ox(e){return o$(t=>t.normalize(e))}function ok(){return o$(e=>e.trim())}function ow(){return o$(e=>e.toLowerCase())}function oI(){return o$(e=>e.toUpperCase())}function oS(){return o$(e=>tc(e))}function oZ(e,t,r){return new e({type:"array",element:t,...tx(r)})}function oO(e,t,r){return new e({type:"union",options:t,...tx(r)})}function oz(e,t,r){return new e({type:"union",options:t,inclusive:!1,...tx(r)})}function oj(e,t,r,n){return new e({type:"union",options:r,discriminator:t,...tx(n)})}function oN(e,t,r){return new e({type:"intersection",left:t,right:r})}function oU(e,t,r,n){let i=r instanceof nz,a=i?n:r;return new e({type:"tuple",items:t,rest:i?r:null,...tx(a)})}function oP(e,t,r,n){return new e({type:"record",keyType:t,valueType:r,...tx(n)})}function oE(e,t,r,n){return new e({type:"map",keyType:t,valueType:r,...tx(n)})}function oA(e,t,r){return new e({type:"set",valueType:t,...tx(r)})}function oT(e,t,r){return new e({type:"enum",entries:Array.isArray(t)?Object.fromEntries(t.map(e=>[e,e])):t,...tx(r)})}function oD(e,t,r){return new e({type:"enum",entries:t,...tx(r)})}function oC(e,t,r){return new e({type:"literal",values:Array.isArray(t)?t:[t],...tx(r)})}function oR(e,t){return new e({type:"file",...tx(t)})}function oL(e,t){return new e({type:"transform",transform:t})}function oF(e,t){return new e({type:"optional",innerType:t})}function oM(e,t){return new e({type:"nullable",innerType:t})}function oJ(e,t,r){return new e({type:"default",innerType:t,get defaultValue(){return"function"==typeof r?r():th(r)}})}function oV(e,t,r){return new e({type:"nonoptional",innerType:t,...tx(r)})}function oB(e,t){return new e({type:"success",innerType:t})}function oW(e,t,r){return new e({type:"catch",innerType:t,catchValue:"function"==typeof r?r:()=>r})}function oK(e,t,r){return new e({type:"pipe",in:t,out:r})}function oG(e,t){return new e({type:"readonly",innerType:t})}function oq(e,t,r){return new e({type:"template_literal",parts:t,...tx(r)})}function oX(e,t){return new e({type:"lazy",getter:t})}function oH(e,t){return new e({type:"promise",innerType:t})}function oY(e,t,r){let n=tx(r);return n.abort??(n.abort=!0),new e({type:"custom",check:"custom",fn:t,...n})}function oQ(e,t,r){return new e({type:"custom",check:"custom",fn:t,...tx(r)})}function o0(e){let t=o4(r=>(r.addIssue=e=>{"string"==typeof e?r.issues.push(tF(e,r.value,t._zod.def)):(e.fatal&&(e.continue=!1),e.code??(e.code="custom"),e.input??(e.input=r.value),e.inst??(e.inst=t),e.continue??(e.continue=!t._zod.def.abort),r.issues.push(tF(e)))},e(r.value,r)));return t}function o4(e,t){let r=new nn({check:"custom",...tx(t)});return r._zod.check=e,r}function o1(e){let t=new nn({check:"describe"});return t._zod.onattach=[t=>{let r=au.get(t)??{};au.add(t,{...r,description:e})}],t._zod.check=()=>{},t}function o6(e){let t=new nn({check:"meta"});return t._zod.onattach=[t=>{let r=au.get(t)??{};au.add(t,{...r,...e})}],t._zod.check=()=>{},t}function o9(e,t){let r=tx(t),n=r.truthy??["true","1","yes","on","y","enabled"],i=r.falsy??["false","0","no","off","n","disabled"];"sensitive"!==r.case&&(n=n.map(e=>"string"==typeof e?e.toLowerCase():e),i=i.map(e=>"string"==typeof e?e.toLowerCase():e));let a=new Set(n),o=new Set(i),s=e.Codec??iq,u=e.Boolean??n7,l=new s({type:"pipe",in:new(e.String??nj)({type:"string",error:r.error}),out:new u({type:"boolean",error:r.error}),transform:(e,t)=>{let n=e;return"sensitive"!==r.case&&(n=n.toLowerCase()),!!a.has(n)||!o.has(n)&&(t.issues.push({code:"invalid_value",expected:"stringbool",values:[...a,...o],input:t.value,inst:l,continue:!1}),{})},reverseTransform:(e,t)=>!0===e?n[0]||"true":i[0]||"false",error:r.error});return l}function o2(e,t,r,n={}){let i=tx(n),a={...tx(n),check:"string_format",type:"string",format:t,fn:"function"==typeof r?r:e=>r.test(e),...i};return r instanceof RegExp&&(a.pattern=r),new e(a)}function o3(e){let t=e?.target??"draft-2020-12";return"draft-4"===t&&(t="draft-04"),"draft-7"===t&&(t="draft-07"),{processors:e.processors??{},metadataRegistry:e?.metadata??au,target:t,unrepresentable:e?.unrepresentable??"throw",override:e?.override??(()=>{}),io:e?.io??"output",counter:0,seen:new Map,cycles:e?.cycles??"ref",reused:e?.reused??"inline",external:e?.external??void 0}}function o5(e,t,r={path:[],schemaPath:[]}){var n;let i=e._zod.def,a=t.seen.get(e);if(a)return a.count++,r.schemaPath.includes(e)&&(a.cycle=r.path),a.schema;let o={schema:{},count:1,cycle:void 0,path:r.path};t.seen.set(e,o);let s=e._zod.toJSONSchema?.();if(s)o.schema=s;else{let n={...r,schemaPath:[...r.schemaPath,e],path:r.path},a=e._zod.parent;if(a)o.ref=a,o5(a,t,n),t.seen.get(a).isParent=!0;else if(e._zod.processJSONSchema)e._zod.processJSONSchema(t,o.schema,n);else{let r=o.schema,a=t.processors[i.type];if(!a)throw Error(`[toJSONSchema]: Non-representable type encountered: ${i.type}`);a(e,t,r,n)}}let u=t.metadataRegistry.get(e);return u&&Object.assign(o.schema,u),"input"===t.io&&function e(t,r){let n=r??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);let i=t._zod.def;if("transform"===i.type)return!0;if("array"===i.type)return e(i.element,n);if("set"===i.type)return e(i.valueType,n);if("lazy"===i.type)return e(i.getter(),n);if("promise"===i.type||"optional"===i.type||"nonoptional"===i.type||"nullable"===i.type||"readonly"===i.type||"default"===i.type||"prefault"===i.type)return e(i.innerType,n);if("intersection"===i.type)return e(i.left,n)||e(i.right,n);if("record"===i.type||"map"===i.type)return e(i.keyType,n)||e(i.valueType,n);if("pipe"===i.type)return e(i.in,n)||e(i.out,n);if("object"===i.type){for(let t in i.shape)if(e(i.shape[t],n))return!0;return!1}if("union"===i.type){for(let t of i.options)if(e(t,n))return!0;return!1}if("tuple"===i.type){for(let t of i.items)if(e(t,n))return!0;if(i.rest&&e(i.rest,n))return!0}return!1}(e)&&(delete o.schema.examples,delete o.schema.default),"input"===t.io&&o.schema._prefault&&((n=o.schema).default??(n.default=o.schema._prefault)),delete o.schema._prefault,t.seen.get(e).schema}function o7(e,t){let r=e.seen.get(t);if(!r)throw Error("Unprocessed schema. This is a bug in Zod.");let n=t=>{if(t[1].schema.$ref)return;let n=t[1],{ref:i,defId:a}=(t=>{let n="draft-2020-12"===e.target?"$defs":"definitions";if(e.external){let r=e.external.registry.get(t[0])?.id,i=e.external.uri??(e=>e);if(r)return{ref:i(r)};let a=t[1].defId??t[1].schema.id??`schema${e.counter++}`;return t[1].defId=a,{defId:a,ref:`${i("__shared")}#/${n}/${a}`}}if(t[1]===r)return{ref:"#"};let i=`#/${n}/`,a=t[1].schema.id??`__schema${e.counter++}`;return{defId:a,ref:i+a}})(t);n.def={...n.schema},a&&(n.defId=a);let o=n.schema;for(let e in o)delete o[e];o.$ref=i};if("throw"===e.cycles)for(let t of e.seen.entries()){let e=t[1];if(e.cycle)throw Error(`Cycle detected: #/${e.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let r of e.seen.entries()){let i=r[1];if(t===r[0]){n(r);continue}if(e.external){let i=e.external.registry.get(r[0])?.id;if(t!==r[0]&&i){n(r);continue}}if(e.metadataRegistry.get(r[0])?.id||i.cycle||i.count>1&&"ref"===e.reused){n(r);continue}}}function o8(e,t){let r=e.seen.get(t);if(!r)throw Error("Unprocessed schema. This is a bug in Zod.");let n=t=>{let r=e.seen.get(t),i=r.def??r.schema,a={...i};if(null===r.ref)return;let o=r.ref;if(r.ref=null,o){n(o);let t=e.seen.get(o).schema;t.$ref&&("draft-07"===e.target||"draft-04"===e.target||"openapi-3.0"===e.target)?(i.allOf=i.allOf??[],i.allOf.push(t)):(Object.assign(i,t),Object.assign(i,a))}r.isParent||e.override({zodSchema:t,jsonSchema:i,path:r.path??[]})};for(let t of[...e.seen.entries()].reverse())n(t[0]);let i={};if("draft-2020-12"===e.target?i.$schema="https://json-schema.org/draft/2020-12/schema":"draft-07"===e.target?i.$schema="http://json-schema.org/draft-07/schema#":"draft-04"===e.target?i.$schema="http://json-schema.org/draft-04/schema#":e.target,e.external?.uri){let r=e.external.registry.get(t)?.id;if(!r)throw Error("Schema is missing an `id` property");i.$id=e.external.uri(r)}Object.assign(i,r.def??r.schema);let a=e.external?.defs??{};for(let t of e.seen.entries()){let e=t[1];e.def&&e.defId&&(a[e.defId]=e.def)}e.external||Object.keys(a).length>0&&("draft-2020-12"===e.target?i.$defs=a:i.definitions=a);try{let e=JSON.parse(JSON.stringify(i));return Object.defineProperty(e,"~standard",{value:{...t["~standard"],jsonSchema:{input:st(t,"input"),output:st(t,"output")}},enumerable:!1,writable:!1}),e}catch(e){throw Error("Error converting schema to JSON.")}}e.s(["TimePrecision",0,aE,"_any",()=>a4,"_array",()=>oZ,"_base64",()=>aj,"_base64url",()=>aN,"_bigint",()=>aG,"_boolean",()=>aW,"_catch",()=>oW,"_check",()=>o4,"_cidrv4",()=>aO,"_cidrv6",()=>az,"_coercedBigint",()=>aq,"_coercedBoolean",()=>aK,"_coercedDate",()=>a3,"_coercedNumber",()=>aL,"_coercedString",()=>ad,"_cuid",()=>ab,"_cuid2",()=>a$,"_custom",()=>oY,"_date",()=>a2,"_default",()=>oJ,"_discriminatedUnion",()=>oj,"_e164",()=>aU,"_email",()=>ac,"_emoji",()=>ay,"_endsWith",()=>oy,"_enum",()=>oT,"_file",()=>oR,"_float32",()=>aM,"_float64",()=>aJ,"_gt",()=>oe,"_gte",()=>ot,"_guid",()=>am,"_includes",()=>oh,"_int",()=>aF,"_int32",()=>aV,"_int64",()=>aX,"_intersection",()=>oN,"_ipv4",()=>aI,"_ipv6",()=>aS,"_isoDate",()=>aT,"_isoDateTime",()=>aA,"_isoDuration",()=>aC,"_isoTime",()=>aD,"_jwt",()=>aP,"_ksuid",()=>aw,"_lazy",()=>oX,"_length",()=>om,"_literal",()=>oC,"_lowercase",()=>op,"_lt",()=>a7,"_lte",()=>a8,"_mac",()=>aZ,"_map",()=>oE,"_max",()=>a8,"_maxLength",()=>od,"_maxSize",()=>os,"_mime",()=>ob,"_min",()=>ot,"_minLength",()=>oc,"_minSize",()=>ou,"_multipleOf",()=>oo,"_nan",()=>a5,"_nanoid",()=>a_,"_nativeEnum",()=>oD,"_negative",()=>on,"_never",()=>a6,"_nonnegative",()=>oa,"_nonoptional",()=>oV,"_nonpositive",()=>oi,"_normalize",()=>ox,"_null",()=>a0,"_nullable",()=>oM,"_number",()=>aR,"_optional",()=>oF,"_overwrite",()=>o$,"_pipe",()=>oK,"_positive",()=>or,"_promise",()=>oH,"_property",()=>o_,"_readonly",()=>oG,"_record",()=>oP,"_refine",()=>oQ,"_regex",()=>of,"_set",()=>oA,"_size",()=>ol,"_slugify",()=>oS,"_startsWith",()=>og,"_string",()=>al,"_stringFormat",()=>o2,"_stringbool",()=>o9,"_success",()=>oB,"_superRefine",()=>o0,"_symbol",()=>aY,"_templateLiteral",()=>oq,"_toLowerCase",()=>ow,"_toUpperCase",()=>oI,"_transform",()=>oL,"_trim",()=>ok,"_tuple",()=>oU,"_uint32",()=>aB,"_uint64",()=>aH,"_ulid",()=>ax,"_undefined",()=>aQ,"_union",()=>oO,"_unknown",()=>a1,"_uppercase",()=>ov,"_url",()=>ag,"_uuid",()=>af,"_uuidv4",()=>ap,"_uuidv6",()=>av,"_uuidv7",()=>ah,"_void",()=>a9,"_xid",()=>ak,"_xor",()=>oz,"describe",()=>o1,"meta",()=>o6],91721);let se=(e,t={})=>r=>{let n=o3({...r,processors:t});return o5(e,n),o7(n,e),o8(n,e)},st=(e,t)=>r=>{let{libraryOptions:n,target:i}=r??{},a=o3({...n??{},target:i,io:t,processors:{}});return o5(e,a),o7(a,e),o8(a,e)};e.s(["createStandardJSONSchemaMethod",0,st,"createToJSONSchemaMethod",0,se,"extractDefs",()=>o7,"finalize",()=>o8,"initializeContext",()=>o3,"process",()=>o5],58214);let sr={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},sn=(e,t,r,n)=>{r.type="string";let{minimum:i,maximum:a,format:o,patterns:s,contentEncoding:u}=e._zod.bag;if("number"==typeof i&&(r.minLength=i),"number"==typeof a&&(r.maxLength=a),o&&(r.format=sr[o]??o,""===r.format&&delete r.format),u&&(r.contentEncoding=u),s&&s.size>0){let e=[...s];1===e.length?r.pattern=e[0].source:e.length>1&&(r.allOf=[...e.map(e=>({..."draft-07"===t.target||"draft-04"===t.target||"openapi-3.0"===t.target?{type:"string"}:{},pattern:e.source}))])}},si=(e,t,r,n)=>{let{minimum:i,maximum:a,format:o,multipleOf:s,exclusiveMaximum:u,exclusiveMinimum:l}=e._zod.bag;"string"==typeof o&&o.includes("int")?r.type="integer":r.type="number","number"==typeof l&&("draft-04"===t.target||"openapi-3.0"===t.target?(r.minimum=l,r.exclusiveMinimum=!0):r.exclusiveMinimum=l),"number"==typeof i&&(r.minimum=i,"number"==typeof l&&"draft-04"!==t.target&&(l>=i?delete r.minimum:delete r.exclusiveMinimum)),"number"==typeof u&&("draft-04"===t.target||"openapi-3.0"===t.target?(r.maximum=u,r.exclusiveMaximum=!0):r.exclusiveMaximum=u),"number"==typeof a&&(r.maximum=a,"number"==typeof u&&"draft-04"!==t.target&&(u<=a?delete r.maximum:delete r.exclusiveMaximum)),"number"==typeof s&&(r.multipleOf=s)},sa=(e,t,r,n)=>{r.type="boolean"},so=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("BigInt cannot be represented in JSON Schema")},ss=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Symbols cannot be represented in JSON Schema")},su=(e,t,r,n)=>{"openapi-3.0"===t.target?(r.type="string",r.nullable=!0,r.enum=[null]):r.type="null"},sl=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Undefined cannot be represented in JSON Schema")},sd=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Void cannot be represented in JSON Schema")},sc=(e,t,r,n)=>{r.not={}},sm=(e,t,r,n)=>{},sf=(e,t,r,n)=>{},sp=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Date cannot be represented in JSON Schema")},sv=(e,t,r,n)=>{let i=e9(e._zod.def.entries);i.every(e=>"number"==typeof e)&&(r.type="number"),i.every(e=>"string"==typeof e)&&(r.type="string"),r.enum=i},sh=(e,t,r,n)=>{let i=e._zod.def,a=[];for(let e of i.values)if(void 0===e){if("throw"===t.unrepresentable)throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if("bigint"==typeof e)if("throw"===t.unrepresentable)throw Error("BigInt literals cannot be represented in JSON Schema");else a.push(Number(e));else a.push(e);if(0===a.length);else if(1===a.length){let e=a[0];r.type=null===e?"null":typeof e,"draft-04"===t.target||"openapi-3.0"===t.target?r.enum=[e]:r.const=e}else a.every(e=>"number"==typeof e)&&(r.type="number"),a.every(e=>"string"==typeof e)&&(r.type="string"),a.every(e=>"boolean"==typeof e)&&(r.type="boolean"),a.every(e=>null===e)&&(r.type="null"),r.enum=a},sg=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("NaN cannot be represented in JSON Schema")},sy=(e,t,r,n)=>{let i=e._zod.pattern;if(!i)throw Error("Pattern not found in template literal");r.type="string",r.pattern=i.source},s_=(e,t,r,n)=>{let i={type:"string",format:"binary",contentEncoding:"binary"},{minimum:a,maximum:o,mime:s}=e._zod.bag;void 0!==a&&(i.minLength=a),void 0!==o&&(i.maxLength=o),s?1===s.length?(i.contentMediaType=s[0],Object.assign(r,i)):r.anyOf=s.map(e=>({...i,contentMediaType:e})):Object.assign(r,i)},sb=(e,t,r,n)=>{r.type="boolean"},s$=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Custom types cannot be represented in JSON Schema")},sx=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Function types cannot be represented in JSON Schema")},sk=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Transforms cannot be represented in JSON Schema")},sw=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Map cannot be represented in JSON Schema")},sI=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Set cannot be represented in JSON Schema")},sS=(e,t,r,n)=>{let i=e._zod.def,{minimum:a,maximum:o}=e._zod.bag;"number"==typeof a&&(r.minItems=a),"number"==typeof o&&(r.maxItems=o),r.type="array",r.items=o5(i.element,t,{...n,path:[...n.path,"items"]})},sZ=(e,t,r,n)=>{let i=e._zod.def;r.type="object",r.properties={};let a=i.shape;for(let e in a)r.properties[e]=o5(a[e],t,{...n,path:[...n.path,"properties",e]});let o=new Set([...new Set(Object.keys(a))].filter(e=>{let r=i.shape[e]._zod;return"input"===t.io?void 0===r.optin:void 0===r.optout}));o.size>0&&(r.required=Array.from(o)),i.catchall?._zod.def.type==="never"?r.additionalProperties=!1:i.catchall?i.catchall&&(r.additionalProperties=o5(i.catchall,t,{...n,path:[...n.path,"additionalProperties"]})):"output"===t.io&&(r.additionalProperties=!1)},sO=(e,t,r,n)=>{let i=e._zod.def,a=!1===i.inclusive,o=i.options.map((e,r)=>o5(e,t,{...n,path:[...n.path,a?"oneOf":"anyOf",r]}));a?r.oneOf=o:r.anyOf=o},sz=(e,t,r,n)=>{let i=e._zod.def,a=o5(i.left,t,{...n,path:[...n.path,"allOf",0]}),o=o5(i.right,t,{...n,path:[...n.path,"allOf",1]}),s=e=>"allOf"in e&&1===Object.keys(e).length;r.allOf=[...s(a)?a.allOf:[a],...s(o)?o.allOf:[o]]},sj=(e,t,r,n)=>{let i=e._zod.def;r.type="array";let a="draft-2020-12"===t.target?"prefixItems":"items",o="draft-2020-12"===t.target||"openapi-3.0"===t.target?"items":"additionalItems",s=i.items.map((e,r)=>o5(e,t,{...n,path:[...n.path,a,r]})),u=i.rest?o5(i.rest,t,{...n,path:[...n.path,o,..."openapi-3.0"===t.target?[i.items.length]:[]]}):null;"draft-2020-12"===t.target?(r.prefixItems=s,u&&(r.items=u)):"openapi-3.0"===t.target?(r.items={anyOf:s},u&&r.items.anyOf.push(u),r.minItems=s.length,u||(r.maxItems=s.length)):(r.items=s,u&&(r.additionalItems=u));let{minimum:l,maximum:d}=e._zod.bag;"number"==typeof l&&(r.minItems=l),"number"==typeof d&&(r.maxItems=d)},sN=(e,t,r,n)=>{let i=e._zod.def;r.type="object",("draft-07"===t.target||"draft-2020-12"===t.target)&&(r.propertyNames=o5(i.keyType,t,{...n,path:[...n.path,"propertyNames"]})),r.additionalProperties=o5(i.valueType,t,{...n,path:[...n.path,"additionalProperties"]})},sU=(e,t,r,n)=>{let i=e._zod.def,a=o5(i.innerType,t,n),o=t.seen.get(e);"openapi-3.0"===t.target?(o.ref=i.innerType,r.nullable=!0):r.anyOf=[a,{type:"null"}]},sP=(e,t,r,n)=>{let i=e._zod.def;o5(i.innerType,t,n),t.seen.get(e).ref=i.innerType},sE=(e,t,r,n)=>{let i=e._zod.def;o5(i.innerType,t,n),t.seen.get(e).ref=i.innerType,r.default=JSON.parse(JSON.stringify(i.defaultValue))},sA=(e,t,r,n)=>{let i=e._zod.def;o5(i.innerType,t,n),t.seen.get(e).ref=i.innerType,"input"===t.io&&(r._prefault=JSON.parse(JSON.stringify(i.defaultValue)))},sT=(e,t,r,n)=>{let i,a=e._zod.def;o5(a.innerType,t,n),t.seen.get(e).ref=a.innerType;try{i=a.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}r.default=i},sD=(e,t,r,n)=>{let i=e._zod.def,a="input"===t.io?"transform"===i.in._zod.def.type?i.out:i.in:i.out;o5(a,t,n),t.seen.get(e).ref=a},sC=(e,t,r,n)=>{let i=e._zod.def;o5(i.innerType,t,n),t.seen.get(e).ref=i.innerType,r.readOnly=!0},sR=(e,t,r,n)=>{let i=e._zod.def;o5(i.innerType,t,n),t.seen.get(e).ref=i.innerType},sL=(e,t,r,n)=>{let i=e._zod.def;o5(i.innerType,t,n),t.seen.get(e).ref=i.innerType},sF=(e,t,r,n)=>{let i=e._zod.innerType;o5(i,t,n),t.seen.get(e).ref=i},sM={string:sn,number:si,boolean:sa,bigint:so,symbol:ss,null:su,undefined:sl,void:sd,never:sc,any:sm,unknown:sf,date:sp,enum:sv,literal:sh,nan:sg,template_literal:sy,file:s_,success:sb,custom:s$,function:sx,transform:sk,map:sw,set:sI,array:sS,object:sZ,union:sO,intersection:sz,tuple:sj,record:sN,nullable:sU,nonoptional:sP,default:sE,prefault:sA,catch:sT,pipe:sD,readonly:sC,promise:sR,optional:sL,lazy:sF};function sJ(e,t){if("_idmap"in e){let r=o3({...t,processors:sM}),n={};for(let t of e._idmap.entries()){let[e,n]=t;o5(n,r)}let i={};for(let a of(r.external={registry:e,uri:t?.uri,defs:n},e._idmap.entries())){let[e,t]=a;o7(r,t),i[e]=o8(r,t)}return Object.keys(n).length>0&&(i.__shared={["draft-2020-12"===r.target?"$defs":"definitions"]:n}),{schemas:i}}let r=o3({...t,processors:sM});return o5(e,r),o7(r,e),o8(r,e)}class sV{get metadataRegistry(){return this.ctx.metadataRegistry}get target(){return this.ctx.target}get unrepresentable(){return this.ctx.unrepresentable}get override(){return this.ctx.override}get io(){return this.ctx.io}get counter(){return this.ctx.counter}set counter(e){this.ctx.counter=e}get seen(){return this.ctx.seen}constructor(e){let t=e?.target??"draft-2020-12";"draft-4"===t&&(t="draft-04"),"draft-7"===t&&(t="draft-07"),this.ctx=o3({processors:sM,target:t,...e?.metadata&&{metadata:e.metadata},...e?.unrepresentable&&{unrepresentable:e.unrepresentable},...e?.override&&{override:e.override},...e?.io&&{io:e.io}})}process(e,t={path:[],schemaPath:[]}){return o5(e,this.ctx,t)}emit(e,t){t&&(t.cycles&&(this.ctx.cycles=t.cycles),t.reused&&(this.ctx.reused=t.reused),t.external&&(this.ctx.external=t.external)),o7(this.ctx,e);let{"~standard":r,...n}=o8(this.ctx,e);return n}}e.s([],28740),e.s([],61616),e.s(["ZodAny",()=>lg,"ZodArray",()=>lZ,"ZodBase64",()=>uK,"ZodBase64URL",()=>uq,"ZodBigInt",()=>lo,"ZodBigIntFormat",()=>lu,"ZodBoolean",()=>li,"ZodCIDRv4",()=>uJ,"ZodCIDRv6",()=>uB,"ZodCUID",()=>uZ,"ZodCUID2",()=>uz,"ZodCatch",()=>dc,"ZodCodec",()=>dg,"ZodCustom",()=>dz,"ZodCustomStringFormat",()=>u4,"ZodDate",()=>lI,"ZodDefault",()=>dr,"ZodDiscriminatedUnion",()=>lC,"ZodE164",()=>uH,"ZodEmail",()=>uc,"ZodEmoji",()=>uk,"ZodEnum",()=>lY,"ZodFile",()=>l6,"ZodFunction",()=>dZ,"ZodGUID",()=>uf,"ZodIPv4",()=>uD,"ZodIPv6",()=>uF,"ZodIntersection",()=>lL,"ZodJWT",()=>uQ,"ZodKSUID",()=>uA,"ZodLazy",()=>dk,"ZodLiteral",()=>l4,"ZodMAC",()=>uR,"ZodMap",()=>lG,"ZodNaN",()=>df,"ZodNanoID",()=>uI,"ZodNever",()=>l$,"ZodNonOptional",()=>ds,"ZodNull",()=>lv,"ZodNullable",()=>l8,"ZodNumber",()=>u3,"ZodNumberFormat",()=>u7,"ZodObject",()=>lj,"ZodOptional",()=>l5,"ZodPipe",()=>dv,"ZodPrefault",()=>di,"ZodPromise",()=>dI,"ZodReadonly",()=>d_,"ZodRecord",()=>lV,"ZodSet",()=>lX,"ZodString",()=>uu,"ZodStringFormat",()=>ud,"ZodSuccess",()=>dl,"ZodSymbol",()=>lc,"ZodTemplateLiteral",()=>d$,"ZodTransform",()=>l2,"ZodTuple",()=>lM,"ZodType",()=>uo,"ZodULID",()=>uN,"ZodURL",()=>ub,"ZodUUID",()=>uv,"ZodUndefined",()=>lf,"ZodUnion",()=>lE,"ZodUnknown",()=>l_,"ZodVoid",()=>lk,"ZodXID",()=>uP,"ZodXor",()=>lT,"_ZodString",()=>us,"_default",()=>dn,"_function",()=>dO,"any",()=>ly,"array",()=>lO,"base64",()=>uG,"base64url",()=>uX,"bigint",()=>ls,"boolean",()=>la,"catch",()=>dm,"check",()=>dj,"cidrv4",()=>uV,"cidrv6",()=>uW,"codec",()=>dy,"cuid",()=>uO,"cuid2",()=>uj,"custom",()=>dN,"date",()=>lS,"describe",()=>dE,"discriminatedUnion",()=>lR,"e164",()=>uY,"email",()=>um,"emoji",()=>uw,"enum",()=>lQ,"file",()=>l9,"float32",()=>le,"float64",()=>lt,"function",()=>dO,"guid",()=>up,"hash",()=>u2,"hex",()=>u9,"hostname",()=>u6,"httpUrl",()=>ux,"instanceof",()=>dT,"int",()=>u8,"int32",()=>lr,"int64",()=>ll,"intersection",()=>lF,"ipv4",()=>uC,"ipv6",()=>uM,"json",()=>dC,"jwt",()=>u0,"keyof",()=>lz,"ksuid",()=>uT,"lazy",()=>dw,"literal",()=>l1,"looseObject",()=>lP,"looseRecord",()=>lK,"mac",()=>uL,"map",()=>lq,"meta",()=>dA,"nan",()=>dp,"nanoid",()=>uS,"nativeEnum",()=>l0,"never",()=>lx,"nonoptional",()=>du,"null",()=>lh,"nullable",()=>de,"nullish",()=>dt,"number",()=>u5,"object",()=>lN,"optional",()=>l7,"partialRecord",()=>lW,"pipe",()=>dh,"prefault",()=>da,"preprocess",()=>dR,"promise",()=>dS,"readonly",()=>db,"record",()=>lB,"refine",()=>dU,"set",()=>lH,"strictObject",()=>lU,"string",()=>ul,"stringFormat",()=>u1,"stringbool",()=>dD,"success",()=>dd,"superRefine",()=>dP,"symbol",()=>lm,"templateLiteral",()=>dx,"transform",()=>l3,"tuple",()=>lJ,"uint32",()=>ln,"uint64",()=>ld,"ulid",()=>uU,"undefined",()=>lp,"union",()=>lA,"unknown",()=>lb,"url",()=>u$,"uuid",()=>uh,"uuidv4",()=>ug,"uuidv6",()=>uy,"uuidv7",()=>u_,"void",()=>lw,"xid",()=>uE,"xor",()=>lD],37082),e.i(43039),e.s(["$ZodAny",0,ia,"$ZodArray",0,ic,"$ZodBase64",0,nQ,"$ZodBase64URL",0,n4,"$ZodBigInt",0,n8,"$ZodBigIntFormat",0,ie,"$ZodBoolean",0,n7,"$ZodCIDRv4",0,nX,"$ZodCIDRv6",0,nH,"$ZodCUID",0,nC,"$ZodCUID2",0,nR,"$ZodCatch",0,iB,"$ZodCodec",0,iq,"$ZodCustom",0,i9,"$ZodCustomStringFormat",0,n2,"$ZodDate",0,il,"$ZodDefault",0,iR,"$ZodDiscriminatedUnion",0,ix,"$ZodE164",0,n1,"$ZodEmail",0,nE,"$ZodEmoji",0,nT,"$ZodEnum",0,iU,"$ZodFile",0,iE,"$ZodFunction",0,i4,"$ZodGUID",0,nU,"$ZodIPv4",0,nK,"$ZodIPv6",0,nG,"$ZodISODate",0,nV,"$ZodISODateTime",0,nJ,"$ZodISODuration",0,nW,"$ZodISOTime",0,nB,"$ZodIntersection",0,ik,"$ZodJWT",0,n9,"$ZodKSUID",0,nM,"$ZodLazy",0,i6,"$ZodLiteral",0,iP,"$ZodMAC",0,nq,"$ZodMap",0,iO,"$ZodNaN",0,iW,"$ZodNanoID",0,nD,"$ZodNever",0,is,"$ZodNonOptional",0,iM,"$ZodNull",0,ii,"$ZodNullable",0,iC,"$ZodNumber",0,n3,"$ZodNumberFormat",0,n5,"$ZodObject",0,ih,"$ZodObjectJIT",0,ig,"$ZodOptional",0,iD,"$ZodPipe",0,iK,"$ZodPrefault",0,iF,"$ZodPromise",0,i1,"$ZodReadonly",0,iY,"$ZodRecord",0,iZ,"$ZodSet",0,ij,"$ZodString",0,nj,"$ZodStringFormat",0,nN,"$ZodSuccess",0,iV,"$ZodSymbol",0,it,"$ZodTemplateLiteral",0,i0,"$ZodTransform",0,iA,"$ZodTuple",0,iI,"$ZodType",0,nz,"$ZodULID",0,nL,"$ZodURL",0,nA,"$ZodUUID",0,nP,"$ZodUndefined",0,ir,"$ZodUnion",0,i_,"$ZodUnknown",0,io,"$ZodVoid",0,iu,"$ZodXID",0,nF,"$ZodXor",0,i$,"clone",()=>t$,"isValidBase64",()=>nY,"isValidBase64URL",()=>n0,"isValidJWT",()=>n6],48757);var sB=e.i(21268),sB=sB,sW=e.i(64684),sW=sW;e.s([],80729),e.s(["ZodISODate",()=>sq,"ZodISODateTime",()=>sK,"ZodISODuration",()=>sQ,"ZodISOTime",()=>sH,"date",()=>sX,"datetime",()=>sG,"duration",()=>s0,"time",()=>sY],35713);let sK=eK("ZodISODateTime",(e,t)=>{nJ.init(e,t),ud.init(e,t)});function sG(e){return aA(sK,e)}let sq=eK("ZodISODate",(e,t)=>{nV.init(e,t),ud.init(e,t)});function sX(e){return aT(sq,e)}let sH=eK("ZodISOTime",(e,t)=>{nB.init(e,t),ud.init(e,t)});function sY(e){return aD(sH,e)}let sQ=eK("ZodISODuration",(e,t)=>{nW.init(e,t),ud.init(e,t)});function s0(e){return aC(sQ,e)}let s4=(e,t)=>{tH.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>t0(e,t)},flatten:{value:t=>tQ(e,t)},addIssue:{value:t=>{e.issues.push(t),e.message=JSON.stringify(e.issues,e3,2)}},addIssues:{value:t=>{e.issues.push(...t),e.message=JSON.stringify(e.issues,e3,2)}},isEmpty:{get:()=>0===e.issues.length}})},s1=eK("ZodError",s4),s6=eK("ZodError",s4,{Parent:Error});e.s(["ZodError",0,s1,"ZodRealError",0,s6],10419);let s9=t9(s6),s2=t3(s6),s3=t7(s6),s5=re(s6),s7=rr(s6),s8=ri(s6),ue=ro(s6),ut=ru(s6),ur=rd(s6),un=rm(s6),ui=rp(s6),ua=rh(s6);e.s(["decode",0,s8,"decodeAsync",0,ut,"encode",0,s7,"encodeAsync",0,ue,"parse",0,s9,"parseAsync",0,s2,"safeDecode",0,un,"safeDecodeAsync",0,ua,"safeEncode",0,ur,"safeEncodeAsync",0,ui,"safeParse",0,s3,"safeParseAsync",0,s5],27632);let uo=eK("ZodType",(e,t)=>(nz.init(e,t),Object.assign(e["~standard"],{jsonSchema:{input:st(e,"input"),output:st(e,"output")}}),e.toJSONSchema=se(e,{}),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone(sW.mergeDefs(t,{checks:[...t.checks??[],...r.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]})),e.clone=(t,r)=>t$(e,t,r),e.brand=()=>e,e.register=(t,r)=>(t.add(e,r),e),e.parse=(t,r)=>s9(e,t,r,{callee:e.parse}),e.safeParse=(t,r)=>s3(e,t,r),e.parseAsync=async(t,r)=>s2(e,t,r,{callee:e.parseAsync}),e.safeParseAsync=async(t,r)=>s5(e,t,r),e.spa=e.safeParseAsync,e.encode=(t,r)=>s7(e,t,r),e.decode=(t,r)=>s8(e,t,r),e.encodeAsync=async(t,r)=>ue(e,t,r),e.decodeAsync=async(t,r)=>ut(e,t,r),e.safeEncode=(t,r)=>ur(e,t,r),e.safeDecode=(t,r)=>un(e,t,r),e.safeEncodeAsync=async(t,r)=>ui(e,t,r),e.safeDecodeAsync=async(t,r)=>ua(e,t,r),e.refine=(t,r)=>e.check(dU(t,r)),e.superRefine=t=>e.check(o0(t)),e.overwrite=t=>e.check(o$(t)),e.optional=()=>l7(e),e.nullable=()=>de(e),e.nullish=()=>l7(de(e)),e.nonoptional=t=>du(e,t),e.array=()=>lO(e),e.or=t=>lA([e,t]),e.and=t=>lF(e,t),e.transform=t=>dh(e,l3(t)),e.default=t=>dn(e,t),e.prefault=t=>da(e,t),e.catch=t=>dm(e,t),e.pipe=t=>dh(e,t),e.readonly=()=>db(e),e.describe=t=>{let r=e.clone();return au.add(r,{description:t}),r},Object.defineProperty(e,"description",{get:()=>au.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return au.get(e);let r=e.clone();return au.add(r,t[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),us=eK("_ZodString",(e,t)=>{nj.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sn(e,t,r,n);let r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...t)=>e.check(of(...t)),e.includes=(...t)=>e.check(oh(...t)),e.startsWith=(...t)=>e.check(og(...t)),e.endsWith=(...t)=>e.check(oy(...t)),e.min=(...t)=>e.check(oc(...t)),e.max=(...t)=>e.check(od(...t)),e.length=(...t)=>e.check(om(...t)),e.nonempty=(...t)=>e.check(oc(1,...t)),e.lowercase=t=>e.check(op(t)),e.uppercase=t=>e.check(ov(t)),e.trim=()=>e.check(ok()),e.normalize=(...t)=>e.check(ox(...t)),e.toLowerCase=()=>e.check(ow()),e.toUpperCase=()=>e.check(oI()),e.slugify=()=>e.check(oS())}),uu=eK("ZodString",(e,t)=>{nj.init(e,t),us.init(e,t),e.email=t=>e.check(ac(uc,t)),e.url=t=>e.check(ag(ub,t)),e.jwt=t=>e.check(aP(uQ,t)),e.emoji=t=>e.check(ay(uk,t)),e.guid=t=>e.check(am(uf,t)),e.uuid=t=>e.check(af(uv,t)),e.uuidv4=t=>e.check(ap(uv,t)),e.uuidv6=t=>e.check(av(uv,t)),e.uuidv7=t=>e.check(ah(uv,t)),e.nanoid=t=>e.check(a_(uI,t)),e.guid=t=>e.check(am(uf,t)),e.cuid=t=>e.check(ab(uZ,t)),e.cuid2=t=>e.check(a$(uz,t)),e.ulid=t=>e.check(ax(uN,t)),e.base64=t=>e.check(aj(uK,t)),e.base64url=t=>e.check(aN(uq,t)),e.xid=t=>e.check(ak(uP,t)),e.ksuid=t=>e.check(aw(uA,t)),e.ipv4=t=>e.check(aI(uD,t)),e.ipv6=t=>e.check(aS(uF,t)),e.cidrv4=t=>e.check(aO(uJ,t)),e.cidrv6=t=>e.check(az(uB,t)),e.e164=t=>e.check(aU(uH,t)),e.datetime=t=>e.check(sG(t)),e.date=t=>e.check(sX(t)),e.time=t=>e.check(sY(t)),e.duration=t=>e.check(s0(t))});function ul(e){return al(uu,e)}let ud=eK("ZodStringFormat",(e,t)=>{nN.init(e,t),us.init(e,t)}),uc=eK("ZodEmail",(e,t)=>{nE.init(e,t),ud.init(e,t)});function um(e){return ac(uc,e)}let uf=eK("ZodGUID",(e,t)=>{nU.init(e,t),ud.init(e,t)});function up(e){return am(uf,e)}let uv=eK("ZodUUID",(e,t)=>{nP.init(e,t),ud.init(e,t)});function uh(e){return af(uv,e)}function ug(e){return ap(uv,e)}function uy(e){return av(uv,e)}function u_(e){return ah(uv,e)}let ub=eK("ZodURL",(e,t)=>{nA.init(e,t),ud.init(e,t)});function u$(e){return ag(ub,e)}function ux(e){return ag(ub,{protocol:/^https?$/,hostname:sB.domain,...sW.normalizeParams(e)})}let uk=eK("ZodEmoji",(e,t)=>{nT.init(e,t),ud.init(e,t)});function uw(e){return ay(uk,e)}let uI=eK("ZodNanoID",(e,t)=>{nD.init(e,t),ud.init(e,t)});function uS(e){return a_(uI,e)}let uZ=eK("ZodCUID",(e,t)=>{nC.init(e,t),ud.init(e,t)});function uO(e){return ab(uZ,e)}let uz=eK("ZodCUID2",(e,t)=>{nR.init(e,t),ud.init(e,t)});function uj(e){return a$(uz,e)}let uN=eK("ZodULID",(e,t)=>{nL.init(e,t),ud.init(e,t)});function uU(e){return ax(uN,e)}let uP=eK("ZodXID",(e,t)=>{nF.init(e,t),ud.init(e,t)});function uE(e){return ak(uP,e)}let uA=eK("ZodKSUID",(e,t)=>{nM.init(e,t),ud.init(e,t)});function uT(e){return aw(uA,e)}let uD=eK("ZodIPv4",(e,t)=>{nK.init(e,t),ud.init(e,t)});function uC(e){return aI(uD,e)}let uR=eK("ZodMAC",(e,t)=>{nq.init(e,t),ud.init(e,t)});function uL(e){return aZ(uR,e)}let uF=eK("ZodIPv6",(e,t)=>{nG.init(e,t),ud.init(e,t)});function uM(e){return aS(uF,e)}let uJ=eK("ZodCIDRv4",(e,t)=>{nX.init(e,t),ud.init(e,t)});function uV(e){return aO(uJ,e)}let uB=eK("ZodCIDRv6",(e,t)=>{nH.init(e,t),ud.init(e,t)});function uW(e){return az(uB,e)}let uK=eK("ZodBase64",(e,t)=>{nQ.init(e,t),ud.init(e,t)});function uG(e){return aj(uK,e)}let uq=eK("ZodBase64URL",(e,t)=>{n4.init(e,t),ud.init(e,t)});function uX(e){return aN(uq,e)}let uH=eK("ZodE164",(e,t)=>{n1.init(e,t),ud.init(e,t)});function uY(e){return aU(uH,e)}let uQ=eK("ZodJWT",(e,t)=>{n9.init(e,t),ud.init(e,t)});function u0(e){return aP(uQ,e)}let u4=eK("ZodCustomStringFormat",(e,t)=>{n2.init(e,t),ud.init(e,t)});function u1(e,t,r={}){return o2(u4,e,t,r)}function u6(e){return o2(u4,"hostname",sB.hostname,e)}function u9(e){return o2(u4,"hex",sB.hex,e)}function u2(e,t){let r=t?.enc??"hex",n=`${e}_${r}`,i=sB[n];if(!i)throw Error(`Unrecognized hash format: ${n}`);return o2(u4,n,i,t)}let u3=eK("ZodNumber",(e,t)=>{n3.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>si(e,t,r,n),e.gt=(t,r)=>e.check(oe(t,r)),e.gte=(t,r)=>e.check(ot(t,r)),e.min=(t,r)=>e.check(ot(t,r)),e.lt=(t,r)=>e.check(a7(t,r)),e.lte=(t,r)=>e.check(a8(t,r)),e.max=(t,r)=>e.check(a8(t,r)),e.int=t=>e.check(u8(t)),e.safe=t=>e.check(u8(t)),e.positive=t=>e.check(oe(0,t)),e.nonnegative=t=>e.check(ot(0,t)),e.negative=t=>e.check(a7(0,t)),e.nonpositive=t=>e.check(a8(0,t)),e.multipleOf=(t,r)=>e.check(oo(t,r)),e.step=(t,r)=>e.check(oo(t,r)),e.finite=()=>e;let r=e._zod.bag;e.minValue=Math.max(r.minimum??-1/0,r.exclusiveMinimum??-1/0)??null,e.maxValue=Math.min(r.maximum??1/0,r.exclusiveMaximum??1/0)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function u5(e){return aR(u3,e)}let u7=eK("ZodNumberFormat",(e,t)=>{n5.init(e,t),u3.init(e,t)});function u8(e){return aF(u7,e)}function le(e){return aM(u7,e)}function lt(e){return aJ(u7,e)}function lr(e){return aV(u7,e)}function ln(e){return aB(u7,e)}let li=eK("ZodBoolean",(e,t)=>{n7.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sa(e,t,r,n)});function la(e){return aW(li,e)}let lo=eK("ZodBigInt",(e,t)=>{n8.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>so(e,t,r,n),e.gte=(t,r)=>e.check(ot(t,r)),e.min=(t,r)=>e.check(ot(t,r)),e.gt=(t,r)=>e.check(oe(t,r)),e.gte=(t,r)=>e.check(ot(t,r)),e.min=(t,r)=>e.check(ot(t,r)),e.lt=(t,r)=>e.check(a7(t,r)),e.lte=(t,r)=>e.check(a8(t,r)),e.max=(t,r)=>e.check(a8(t,r)),e.positive=t=>e.check(oe(BigInt(0),t)),e.negative=t=>e.check(a7(BigInt(0),t)),e.nonpositive=t=>e.check(a8(BigInt(0),t)),e.nonnegative=t=>e.check(ot(BigInt(0),t)),e.multipleOf=(t,r)=>e.check(oo(t,r));let r=e._zod.bag;e.minValue=r.minimum??null,e.maxValue=r.maximum??null,e.format=r.format??null});function ls(e){return aG(lo,e)}let lu=eK("ZodBigIntFormat",(e,t)=>{ie.init(e,t),lo.init(e,t)});function ll(e){return aX(lu,e)}function ld(e){return aH(lu,e)}let lc=eK("ZodSymbol",(e,t)=>{it.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>ss(e,t,r,n)});function lm(e){return aY(lc,e)}let lf=eK("ZodUndefined",(e,t)=>{ir.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sl(e,t,r,n)});function lp(e){return aQ(lf,e)}let lv=eK("ZodNull",(e,t)=>{ii.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>su(e,t,r,n)});function lh(e){return a0(lv,e)}let lg=eK("ZodAny",(e,t)=>{ia.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sm(e,t,r,n)});function ly(){return a4(lg)}let l_=eK("ZodUnknown",(e,t)=>{io.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sf(e,t,r,n)});function lb(){return a1(l_)}let l$=eK("ZodNever",(e,t)=>{is.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sc(e,t,r,n)});function lx(e){return a6(l$,e)}let lk=eK("ZodVoid",(e,t)=>{iu.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sd(e,t,r,n)});function lw(e){return a9(lk,e)}let lI=eK("ZodDate",(e,t)=>{il.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sp(e,t,r,n),e.min=(t,r)=>e.check(ot(t,r)),e.max=(t,r)=>e.check(a8(t,r));let r=e._zod.bag;e.minDate=r.minimum?new Date(r.minimum):null,e.maxDate=r.maximum?new Date(r.maximum):null});function lS(e){return a2(lI,e)}let lZ=eK("ZodArray",(e,t)=>{ic.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sS(e,t,r,n),e.element=t.element,e.min=(t,r)=>e.check(oc(t,r)),e.nonempty=t=>e.check(oc(1,t)),e.max=(t,r)=>e.check(od(t,r)),e.length=(t,r)=>e.check(om(t,r)),e.unwrap=()=>e.element});function lO(e,t){return oZ(lZ,e,t)}function lz(e){return lQ(Object.keys(e._zod.def.shape))}let lj=eK("ZodObject",(e,t)=>{ig.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sZ(e,t,r,n),sW.defineLazy(e,"shape",()=>t.shape),e.keyof=()=>lQ(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:lb()}),e.loose=()=>e.clone({...e._zod.def,catchall:lb()}),e.strict=()=>e.clone({...e._zod.def,catchall:lx()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>sW.extend(e,t),e.safeExtend=t=>sW.safeExtend(e,t),e.merge=t=>sW.merge(e,t),e.pick=t=>sW.pick(e,t),e.omit=t=>sW.omit(e,t),e.partial=(...t)=>sW.partial(l5,e,t[0]),e.required=(...t)=>sW.required(ds,e,t[0])});function lN(e,t){return new lj({type:"object",shape:e??{},...sW.normalizeParams(t)})}function lU(e,t){return new lj({type:"object",shape:e,catchall:lx(),...sW.normalizeParams(t)})}function lP(e,t){return new lj({type:"object",shape:e,catchall:lb(),...sW.normalizeParams(t)})}let lE=eK("ZodUnion",(e,t)=>{i_.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sO(e,t,r,n),e.options=t.options});function lA(e,t){return new lE({type:"union",options:e,...sW.normalizeParams(t)})}let lT=eK("ZodXor",(e,t)=>{lE.init(e,t),i$.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sO(e,t,r,n),e.options=t.options});function lD(e,t){return new lT({type:"union",options:e,inclusive:!1,...sW.normalizeParams(t)})}let lC=eK("ZodDiscriminatedUnion",(e,t)=>{lE.init(e,t),ix.init(e,t)});function lR(e,t,r){return new lC({type:"union",options:t,discriminator:e,...sW.normalizeParams(r)})}let lL=eK("ZodIntersection",(e,t)=>{ik.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sz(e,t,r,n)});function lF(e,t){return new lL({type:"intersection",left:e,right:t})}let lM=eK("ZodTuple",(e,t)=>{iI.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sj(e,t,r,n),e.rest=t=>e.clone({...e._zod.def,rest:t})});function lJ(e,t,r){let n=t instanceof nz,i=n?r:t;return new lM({type:"tuple",items:e,rest:n?t:null,...sW.normalizeParams(i)})}let lV=eK("ZodRecord",(e,t)=>{iZ.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sN(e,t,r,n),e.keyType=t.keyType,e.valueType=t.valueType});function lB(e,t,r){return new lV({type:"record",keyType:e,valueType:t,...sW.normalizeParams(r)})}function lW(e,t,r){let n=t$(e);return n._zod.values=void 0,new lV({type:"record",keyType:n,valueType:t,...sW.normalizeParams(r)})}function lK(e,t,r){return new lV({type:"record",keyType:e,valueType:t,mode:"loose",...sW.normalizeParams(r)})}let lG=eK("ZodMap",(e,t)=>{iO.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sw(e,t,r,n),e.keyType=t.keyType,e.valueType=t.valueType});function lq(e,t,r){return new lG({type:"map",keyType:e,valueType:t,...sW.normalizeParams(r)})}let lX=eK("ZodSet",(e,t)=>{ij.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sI(e,t,r,n),e.min=(...t)=>e.check(ou(...t)),e.nonempty=t=>e.check(ou(1,t)),e.max=(...t)=>e.check(os(...t)),e.size=(...t)=>e.check(ol(...t))});function lH(e,t){return new lX({type:"set",valueType:e,...sW.normalizeParams(t)})}let lY=eK("ZodEnum",(e,t)=>{iU.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sv(e,t,r,n),e.enum=t.entries,e.options=Object.values(t.entries);let r=new Set(Object.keys(t.entries));e.extract=(e,n)=>{let i={};for(let n of e)if(r.has(n))i[n]=t.entries[n];else throw Error(`Key ${n} not found in enum`);return new lY({...t,checks:[],...sW.normalizeParams(n),entries:i})},e.exclude=(e,n)=>{let i={...t.entries};for(let t of e)if(r.has(t))delete i[t];else throw Error(`Key ${t} not found in enum`);return new lY({...t,checks:[],...sW.normalizeParams(n),entries:i})}});function lQ(e,t){return new lY({type:"enum",entries:Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e,...sW.normalizeParams(t)})}function l0(e,t){return new lY({type:"enum",entries:e,...sW.normalizeParams(t)})}let l4=eK("ZodLiteral",(e,t)=>{iP.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sh(e,t,r,n),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function l1(e,t){return new l4({type:"literal",values:Array.isArray(e)?e:[e],...sW.normalizeParams(t)})}let l6=eK("ZodFile",(e,t)=>{iE.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>s_(e,t,r,n),e.min=(t,r)=>e.check(ou(t,r)),e.max=(t,r)=>e.check(os(t,r)),e.mime=(t,r)=>e.check(ob(Array.isArray(t)?t:[t],r))});function l9(e){return oR(l6,e)}let l2=eK("ZodTransform",(e,t)=>{iA.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sk(e,t,r,n),e._zod.parse=(r,n)=>{if("backward"===n.direction)throw new eX(e.constructor.name);r.addIssue=n=>{"string"==typeof n?r.issues.push(sW.issue(n,r.value,t)):(n.fatal&&(n.continue=!1),n.code??(n.code="custom"),n.input??(n.input=r.value),n.inst??(n.inst=e),r.issues.push(sW.issue(n)))};let i=t.transform(r.value,r);return i instanceof Promise?i.then(e=>(r.value=e,r)):(r.value=i,r)}});function l3(e){return new l2({type:"transform",transform:e})}let l5=eK("ZodOptional",(e,t)=>{iD.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sL(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function l7(e){return new l5({type:"optional",innerType:e})}let l8=eK("ZodNullable",(e,t)=>{iC.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sU(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function de(e){return new l8({type:"nullable",innerType:e})}function dt(e){return l7(de(e))}let dr=eK("ZodDefault",(e,t)=>{iR.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sE(e,t,r,n),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function dn(e,t){return new dr({type:"default",innerType:e,get defaultValue(){return"function"==typeof t?t():sW.shallowClone(t)}})}let di=eK("ZodPrefault",(e,t)=>{iF.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sA(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function da(e,t){return new di({type:"prefault",innerType:e,get defaultValue(){return"function"==typeof t?t():sW.shallowClone(t)}})}let ds=eK("ZodNonOptional",(e,t)=>{iM.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sP(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function du(e,t){return new ds({type:"nonoptional",innerType:e,...sW.normalizeParams(t)})}let dl=eK("ZodSuccess",(e,t)=>{iV.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sb(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function dd(e){return new dl({type:"success",innerType:e})}let dc=eK("ZodCatch",(e,t)=>{iB.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sT(e,t,r,n),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function dm(e,t){return new dc({type:"catch",innerType:e,catchValue:"function"==typeof t?t:()=>t})}let df=eK("ZodNaN",(e,t)=>{iW.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sg(e,t,r,n)});function dp(e){return a5(df,e)}let dv=eK("ZodPipe",(e,t)=>{iK.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sD(e,t,r,n),e.in=t.in,e.out=t.out});function dh(e,t){return new dv({type:"pipe",in:e,out:t})}let dg=eK("ZodCodec",(e,t)=>{dv.init(e,t),iq.init(e,t)});function dy(e,t,r){return new dg({type:"pipe",in:e,out:t,transform:r.decode,reverseTransform:r.encode})}let d_=eK("ZodReadonly",(e,t)=>{iY.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sC(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function db(e){return new d_({type:"readonly",innerType:e})}let d$=eK("ZodTemplateLiteral",(e,t)=>{i0.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sy(e,t,r,n)});function dx(e,t){return new d$({type:"template_literal",parts:e,...sW.normalizeParams(t)})}let dk=eK("ZodLazy",(e,t)=>{i6.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sF(e,t,r,n),e.unwrap=()=>e._zod.def.getter()});function dw(e){return new dk({type:"lazy",getter:e})}let dI=eK("ZodPromise",(e,t)=>{i1.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sR(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function dS(e){return new dI({type:"promise",innerType:e})}let dZ=eK("ZodFunction",(e,t)=>{i4.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>sx(e,t,r,n)});function dO(e){return new dZ({type:"function",input:Array.isArray(e?.input)?lJ(e?.input):e?.input??lO(lb()),output:e?.output??lb()})}let dz=eK("ZodCustom",(e,t)=>{i9.init(e,t),uo.init(e,t),e._zod.processJSONSchema=(t,r,n)=>s$(e,t,r,n)});function dj(e){let t=new nn({check:"custom"});return t._zod.check=e,t}function dN(e,t){return oY(dz,e??(()=>!0),t)}function dU(e,t={}){return oQ(dz,e,t)}function dP(e){return o0(e)}let dE=o1,dA=o6;function dT(e,t={error:`Input not instance of ${e.name}`}){let r=new dz({type:"custom",check:"custom",fn:t=>t instanceof e,abort:!0,...sW.normalizeParams(t)});return r._zod.bag.Class=e,r}let dD=(...e)=>o9({Codec:dg,Boolean:li,String:uu},...e);function dC(e){let t=dw(()=>lA([ul(e),u5(),la(),lh(),lO(t),lB(ul(),t)]));return t}function dR(e,t){return dh(l3(e),t)}let dL={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function dF(e){eY({customError:e})}function dM(){return eY().customError}E||(E={}),e.s(["ZodFirstPartyTypeKind",()=>E,"ZodIssueCode",0,dL,"getErrorMap",()=>dM,"setErrorMap",()=>dF],1583),e.i(80729),e.s(["endsWith",()=>oy,"gt",()=>oe,"gte",()=>ot,"includes",()=>oh,"length",()=>om,"lowercase",()=>op,"lt",()=>a7,"lte",()=>a8,"maxLength",()=>od,"maxSize",()=>os,"mime",()=>ob,"minLength",()=>oc,"minSize",()=>ou,"multipleOf",()=>oo,"negative",()=>on,"nonnegative",()=>oa,"nonpositive",()=>oi,"normalize",()=>ox,"overwrite",()=>o$,"positive",()=>or,"property",()=>o_,"regex",()=>of,"size",()=>ol,"slugify",()=>oS,"startsWith",()=>og,"toLowerCase",()=>ow,"toUpperCase",()=>oI,"trim",()=>ok,"uppercase",()=>ov],9875);var dJ=e.i(9875),dV=e.i(35713);let dB={...e.i(37082),...dJ,iso:dV};function dW(e,t){var r;let n;if("boolean"==typeof e)return e?dB.any():dB.never();let i={version:(r=t?.defaultTarget,"https://json-schema.org/draft/2020-12/schema"===(n=e.$schema)?"draft-2020-12":"http://json-schema.org/draft-07/schema#"===n?"draft-7":"http://json-schema.org/draft-04/schema#"===n?"draft-4":r??"draft-2020-12"),defs:e.$defs||e.definitions||{},refs:new Map,processing:new Set,rootSchema:e};return function e(t,r){if("boolean"==typeof t)return t?dB.any():dB.never();let n=function t(r,n){let i;if(void 0!==r.not){if("object"==typeof r.not&&0===Object.keys(r.not).length)return dB.never();throw Error("not is not supported in Zod (except { not: {} } for never)")}if(void 0!==r.unevaluatedItems)throw Error("unevaluatedItems is not supported");if(void 0!==r.unevaluatedProperties)throw Error("unevaluatedProperties is not supported");if(void 0!==r.if||void 0!==r.then||void 0!==r.else)throw Error("Conditional schemas (if/then/else) are not supported");if(void 0!==r.dependentSchemas||void 0!==r.dependentRequired)throw Error("dependentSchemas and dependentRequired are not supported");if(r.$ref){let t=r.$ref;if(n.refs.has(t))return n.refs.get(t);if(n.processing.has(t))return dB.lazy(()=>{if(!n.refs.has(t))throw Error(`Circular reference not resolved: ${t}`);return n.refs.get(t)});n.processing.add(t);let i=e(function(e,t){if(!e.startsWith("#"))throw Error("External $ref is not supported, only local refs (#/...) are allowed");let r=e.slice(1).split("/").filter(Boolean);if(0===r.length)return t.rootSchema;let n="draft-2020-12"===t.version?"$defs":"definitions";if(r[0]===n){let n=r[1];if(!n||!t.defs[n])throw Error(`Reference not found: ${e}`);return t.defs[n]}throw Error(`Reference not found: ${e}`)}(t,n),n);return n.refs.set(t,i),n.processing.delete(t),i}if(void 0!==r.enum){let e=r.enum;if("openapi-3.0"===n.version&&!0===r.nullable&&1===e.length&&null===e[0])return dB.null();if(0===e.length)return dB.never();if(1===e.length)return dB.literal(e[0]);if(e.every(e=>"string"==typeof e))return dB.enum(e);let t=e.map(e=>dB.literal(e));return t.length<2?t[0]:dB.union([t[0],t[1],...t.slice(2)])}if(void 0!==r.const)return dB.literal(r.const);let a=r.type;if(Array.isArray(a)){let e=a.map(e=>t({...r,type:e},n));return 0===e.length?dB.never():1===e.length?e[0]:dB.union(e)}if(!a)return dB.any();switch(a){case"string":{let e=dB.string();if(r.format){let t=r.format;"email"===t?e=e.check(dB.email()):"uri"===t||"uri-reference"===t?e=e.check(dB.url()):"uuid"===t||"guid"===t?e=e.check(dB.uuid()):"date-time"===t?e=e.check(dB.iso.datetime()):"date"===t?e=e.check(dB.iso.date()):"time"===t?e=e.check(dB.iso.time()):"duration"===t?e=e.check(dB.iso.duration()):"ipv4"===t?e=e.check(dB.ipv4()):"ipv6"===t?e=e.check(dB.ipv6()):"mac"===t?e=e.check(dB.mac()):"cidr"===t?e=e.check(dB.cidrv4()):"cidr-v6"===t?e=e.check(dB.cidrv6()):"base64"===t?e=e.check(dB.base64()):"base64url"===t?e=e.check(dB.base64url()):"e164"===t?e=e.check(dB.e164()):"jwt"===t?e=e.check(dB.jwt()):"emoji"===t?e=e.check(dB.emoji()):"nanoid"===t?e=e.check(dB.nanoid()):"cuid"===t?e=e.check(dB.cuid()):"cuid2"===t?e=e.check(dB.cuid2()):"ulid"===t?e=e.check(dB.ulid()):"xid"===t?e=e.check(dB.xid()):"ksuid"===t&&(e=e.check(dB.ksuid()))}"number"==typeof r.minLength&&(e=e.min(r.minLength)),"number"==typeof r.maxLength&&(e=e.max(r.maxLength)),r.pattern&&(e=e.regex(new RegExp(r.pattern))),i=e;break}case"number":case"integer":{let e="integer"===a?dB.number().int():dB.number();"number"==typeof r.minimum&&(e=e.min(r.minimum)),"number"==typeof r.maximum&&(e=e.max(r.maximum)),"number"==typeof r.exclusiveMinimum?e=e.gt(r.exclusiveMinimum):!0===r.exclusiveMinimum&&"number"==typeof r.minimum&&(e=e.gt(r.minimum)),"number"==typeof r.exclusiveMaximum?e=e.lt(r.exclusiveMaximum):!0===r.exclusiveMaximum&&"number"==typeof r.maximum&&(e=e.lt(r.maximum)),"number"==typeof r.multipleOf&&(e=e.multipleOf(r.multipleOf)),i=e;break}case"boolean":i=dB.boolean();break;case"null":i=dB.null();break;case"object":{let t={},a=r.properties||{},o=new Set(r.required||[]);for(let[r,i]of Object.entries(a)){let a=e(i,n);t[r]=o.has(r)?a:a.optional()}if(r.propertyNames){let a=e(r.propertyNames,n),o=r.additionalProperties&&"object"==typeof r.additionalProperties?e(r.additionalProperties,n):dB.any();if(0===Object.keys(t).length){i=dB.record(a,o);break}let s=dB.object(t).passthrough(),u=dB.looseRecord(a,o);i=dB.intersection(s,u);break}if(r.patternProperties){let a=r.patternProperties,o=Object.keys(a),s=[];for(let t of o){let r=e(a[t],n),i=dB.string().regex(new RegExp(t));s.push(dB.looseRecord(i,r))}let u=[];if(Object.keys(t).length>0&&u.push(dB.object(t).passthrough()),u.push(...s),0===u.length)i=dB.object({}).passthrough();else if(1===u.length)i=u[0];else{let e=dB.intersection(u[0],u[1]);for(let t=2;t<u.length;t++)e=dB.intersection(e,u[t]);i=e}break}let s=dB.object(t);i=!1===r.additionalProperties?s.strict():"object"==typeof r.additionalProperties?s.catchall(e(r.additionalProperties,n)):s.passthrough();break}case"array":{let t=r.prefixItems,a=r.items;if(t&&Array.isArray(t)){let o=t.map(t=>e(t,n)),s=a&&"object"==typeof a&&!Array.isArray(a)?e(a,n):void 0;i=s?dB.tuple(o).rest(s):dB.tuple(o),"number"==typeof r.minItems&&(i=i.check(dB.minLength(r.minItems))),"number"==typeof r.maxItems&&(i=i.check(dB.maxLength(r.maxItems)))}else if(Array.isArray(a)){let t=a.map(t=>e(t,n)),o=r.additionalItems&&"object"==typeof r.additionalItems?e(r.additionalItems,n):void 0;i=o?dB.tuple(t).rest(o):dB.tuple(t),"number"==typeof r.minItems&&(i=i.check(dB.minLength(r.minItems))),"number"==typeof r.maxItems&&(i=i.check(dB.maxLength(r.maxItems)))}else if(void 0!==a){let t=e(a,n),o=dB.array(t);"number"==typeof r.minItems&&(o=o.min(r.minItems)),"number"==typeof r.maxItems&&(o=o.max(r.maxItems)),i=o}else i=dB.array(dB.any());break}default:throw Error(`Unsupported type: ${a}`)}return r.description&&(i=i.describe(r.description)),void 0!==r.default&&(i=i.default(r.default)),i}(t,r),i=t.type||void 0!==t.enum||void 0!==t.const;if(t.anyOf&&Array.isArray(t.anyOf)){let a=t.anyOf.map(t=>e(t,r)),o=dB.union(a);n=i?dB.intersection(n,o):o}if(t.oneOf&&Array.isArray(t.oneOf)){let a=t.oneOf.map(t=>e(t,r)),o=dB.xor(a);n=i?dB.intersection(n,o):o}if(t.allOf&&Array.isArray(t.allOf))if(0===t.allOf.length)n=i?n:dB.any();else{let a=i?n:e(t.allOf[0],r),o=+!i;for(let n=o;n<t.allOf.length;n++)a=dB.intersection(a,e(t.allOf[n],r));n=a}return!0===t.nullable&&"openapi-3.0"===r.version&&(n=dB.nullable(n)),!0===t.readOnly&&(n=dB.readonly(n)),n}(e,i)}function dK(e){return ad(uu,e)}function dG(e){return aL(u3,e)}function dq(e){return aK(li,e)}function dX(e){return aq(lo,e)}function dH(e){return a3(lI,e)}e.s(["bigint",()=>dX,"boolean",()=>dq,"date",()=>dH,"number",()=>dG,"string",()=>dK],52591),eY(i5()),e.s([],80099),e.i(80099),e.i(61616),e.i(44214),e.i(63733),e.i(3056),e.i(48757),e.i(65549),e.i(36116);var dY=sW,dQ=sB;e.i(40055),e.s(["ar",0,function(){let e,t;return{localeError:(e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},t={regex:"",email:" ",url:"",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ISO",date:"  ISO",time:"  ISO",duration:"  ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:"   IPv4",cidrv6:"   IPv6",base64:"  base64-encoded",base64url:"  base64url-encoded",json_string:"   JSON",e164:"   E.164",jwt:"JWT",template_literal:""},r=>{switch(r.code){case"invalid_type":return`  :   ${r.expected}    ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`  :   ${tw(r.values[0])}`;return`  :     : ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`   :    ${r.origin??""} ${t} ${r.maximum.toString()} ${n.unit??""}`;return`  :    ${r.origin??""} ${t} ${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`  :   ${r.origin}   ${t} ${r.minimum.toString()} ${n.unit}`;return`  :   ${r.origin}   ${t} ${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`  :     "${r.prefix}"`;if("ends_with"===r.format)return`  :     "${r.suffix}"`;if("includes"===r.format)return`  :    "${r.includes}"`;if("regex"===r.format)return`  :     ${r.pattern}`;return`${t[r.format]??r.format}  `;case"not_multiple_of":return`  :      ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"":""} ${r.keys.length>1?"":""}: ${e2(r.keys," ")}`;case"invalid_key":return`    ${r.origin}`;case"invalid_union":default:return"  ";case"invalid_element":return`    ${r.origin}`}})}},"az",0,function(){let e,t;return{localeError:(e={string:{unit:"simvol",verb:"olmaldr"},file:{unit:"bayt",verb:"olmaldr"},array:{unit:"element",verb:"olmaldr"},set:{unit:"element",verb:"olmaldr"}},t={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},r=>{switch(r.code){case"invalid_type":return`Yanl dyr: g\xf6zlniln ${r.expected}, daxil olan ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Yanl dyr: g\xf6zlniln ${tw(r.values[0])}`;return`Yanl se\xe7im: aadaklardan biri olmaldr: ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`\xc7ox b\xf6y\xfck: g\xf6zlniln ${r.origin??"dyr"} ${t}${r.maximum.toString()} ${n.unit??"element"}`;return`\xc7ox b\xf6y\xfck: g\xf6zlniln ${r.origin??"dyr"} ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`\xc7ox ki\xe7ik: g\xf6zlniln ${r.origin} ${t}${r.minimum.toString()} ${n.unit}`;return`\xc7ox ki\xe7ik: g\xf6zlniln ${r.origin} ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Yanl mtn: "${r.prefix}" il balamaldr`;if("ends_with"===r.format)return`Yanl mtn: "${r.suffix}" il bitmlidir`;if("includes"===r.format)return`Yanl mtn: "${r.includes}" daxil olmaldr`;if("regex"===r.format)return`Yanl mtn: ${r.pattern} ablonuna uyun olmaldr`;return`Yanl ${t[r.format]??r.format}`;case"not_multiple_of":return`Yanl dd: ${r.divisor} il b\xf6l\xfcn biln olmaldr`;case"unrecognized_keys":return`Tannmayan a\xe7ar${r.keys.length>1?"lar":""}: ${e2(r.keys,", ")}`;case"invalid_key":return`${r.origin} daxilind yanl a\xe7ar`;case"invalid_union":return"Yanl dyr";case"invalid_element":return`${r.origin} daxilind yanl dyr`;default:return`Yanl dyr`}})}},"be",0,function(){let e,t;return{localeError:(e={string:{unit:{one:"",few:"",many:""},verb:""},array:{unit:{one:"",few:"",many:""},verb:""},set:{unit:{one:"",few:"",many:""},verb:""},file:{unit:{one:"",few:"",many:""},verb:""}},t={regex:"",email:"email ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"   base64",base64url:"   base64url",json_string:"JSON ",e164:" E.164",jwt:"JWT",template_literal:""},r=>{switch(r.code){case"invalid_type":return` :  ${r.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return` :  ${tw(r.values[0])}`;return` :    ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n){let e=i3(Number(r.maximum),n.unit.one,n.unit.few,n.unit.many);return` : ,  ${r.origin??""}  ${n.verb} ${t}${r.maximum.toString()} ${e}`}return` : ,  ${r.origin??""}   ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n){let e=i3(Number(r.minimum),n.unit.one,n.unit.few,n.unit.many);return` : ,  ${r.origin}  ${n.verb} ${t}${r.minimum.toString()} ${e}`}return` : ,  ${r.origin}   ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return` :    "${r.prefix}"`;if("ends_with"===r.format)return` :    "${r.suffix}"`;if("includes"===r.format)return` :   "${r.includes}"`;if("regex"===r.format)return` :    ${r.pattern}`;return` ${t[r.format]??r.format}`;case"not_multiple_of":return` :    ${r.divisor}`;case"unrecognized_keys":return` ${r.keys.length>1?"":""}: ${e2(r.keys,", ")}`;case"invalid_key":return`   ${r.origin}`;case"invalid_union":return" ";case"invalid_element":return`   ${r.origin}`;default:return` `}})}},"bg",0,function(){let e,t;return{localeError:(e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},t={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},r=>{switch(r.code){case"invalid_type":return` :  ${r.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return` :  ${tw(r.values[0])}`;return` :    ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return` :   ${r.origin??""}   ${t}${r.maximum.toString()} ${n.unit??""}`;return` :   ${r.origin??""}   ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return` :   ${r.origin}   ${t}${r.minimum.toString()} ${n.unit}`;return` :   ${r.origin}   ${t}${r.minimum.toString()}`}case"invalid_format":{if("starts_with"===r.format)return` :     "${r.prefix}"`;if("ends_with"===r.format)return` :     "${r.suffix}"`;if("includes"===r.format)return` :    "${r.includes}"`;if("regex"===r.format)return` :     ${r.pattern}`;let e="";return"emoji"===r.format&&(e=""),"datetime"===r.format&&(e=""),"date"===r.format&&(e=""),"time"===r.format&&(e=""),"duration"===r.format&&(e=""),`${e} ${t[r.format]??r.format}`}case"not_multiple_of":return` :      ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"":""} ${r.keys.length>1?"":""}: ${e2(r.keys,", ")}`;case"invalid_key":return`   ${r.origin}`;case"invalid_union":return" ";case"invalid_element":return`   ${r.origin}`;default:return` `}})}},"ca",0,function(){let e,t;return{localeError:(e={string:{unit:"carcters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}},t={regex:"entrada",email:"adrea electrnica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adrea IPv4",ipv6:"adrea IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"nmero E.164",jwt:"JWT",template_literal:"entrada"},r=>{switch(r.code){case"invalid_type":return`Tipus inv\xe0lid: s'esperava ${r.expected}, s'ha rebut ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Valor inv\xe0lid: s'esperava ${tw(r.values[0])}`;return`Opci\xf3 inv\xe0lida: s'esperava una de ${e2(r.values," o ")}`;case"too_big":{let t=r.inclusive?"com a mxim":"menys de",n=e[r.origin]??null;if(n)return`Massa gran: s'esperava que ${r.origin??"el valor"} contingu\xe9s ${t} ${r.maximum.toString()} ${n.unit??"elements"}`;return`Massa gran: s'esperava que ${r.origin??"el valor"} fos ${t} ${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?"com a mnim":"ms de",n=e[r.origin]??null;if(n)return`Massa petit: s'esperava que ${r.origin} contingu\xe9s ${t} ${r.minimum.toString()} ${n.unit}`;return`Massa petit: s'esperava que ${r.origin} fos ${t} ${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Format inv\xe0lid: ha de comen\xe7ar amb "${r.prefix}"`;if("ends_with"===r.format)return`Format inv\xe0lid: ha d'acabar amb "${r.suffix}"`;if("includes"===r.format)return`Format inv\xe0lid: ha d'incloure "${r.includes}"`;if("regex"===r.format)return`Format inv\xe0lid: ha de coincidir amb el patr\xf3 ${r.pattern}`;return`Format inv\xe0lid per a ${t[r.format]??r.format}`;case"not_multiple_of":return`N\xfamero inv\xe0lid: ha de ser m\xfaltiple de ${r.divisor}`;case"unrecognized_keys":return`Clau${r.keys.length>1?"s":""} no reconeguda${r.keys.length>1?"s":""}: ${e2(r.keys,", ")}`;case"invalid_key":return`Clau inv\xe0lida a ${r.origin}`;case"invalid_union":return"Entrada invlida";case"invalid_element":return`Element inv\xe0lid a ${r.origin}`;default:return`Entrada inv\xe0lida`}})}},"cs",0,function(){let e,t;return{localeError:(e={string:{unit:"znak",verb:"mt"},file:{unit:"bajt",verb:"mt"},array:{unit:"prvk",verb:"mt"},set:{unit:"prvk",verb:"mt"}},t={regex:"regulrn vraz",email:"e-mailov adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a as ve formtu ISO",date:"datum ve formtu ISO",time:"as ve formtu ISO",duration:"doba trvn ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"etzec zakdovan ve formtu base64",base64url:"etzec zakdovan ve formtu base64url",json_string:"etzec ve formtu JSON",e164:"slo E.164",jwt:"JWT",template_literal:"vstup"},r=>{switch(r.code){case"invalid_type":return`Neplatn\xfd vstup: oek\xe1v\xe1no ${r.expected}, obdreno ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"slo";case"string":return"etzec";case"boolean":return"boolean";case"bigint":return"bigint";case"function":return"funkce";case"symbol":return"symbol";case"undefined":return"undefined";case"object":if(Array.isArray(e))return"pole";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Neplatn\xfd vstup: oek\xe1v\xe1no ${tw(r.values[0])}`;return`Neplatn\xe1 monost: oek\xe1v\xe1na jedna z hodnot ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Hodnota je p\xedli velk\xe1: ${r.origin??"hodnota"} mus\xed m\xedt ${t}${r.maximum.toString()} ${n.unit??"prvk"}`;return`Hodnota je p\xedli velk\xe1: ${r.origin??"hodnota"} mus\xed b\xfdt ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Hodnota je p\xedli mal\xe1: ${r.origin??"hodnota"} mus\xed m\xedt ${t}${r.minimum.toString()} ${n.unit??"prvk"}`;return`Hodnota je p\xedli mal\xe1: ${r.origin??"hodnota"} mus\xed b\xfdt ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Neplatn\xfd etzec: mus\xed za\xednat na "${r.prefix}"`;if("ends_with"===r.format)return`Neplatn\xfd etzec: mus\xed konit na "${r.suffix}"`;if("includes"===r.format)return`Neplatn\xfd etzec: mus\xed obsahovat "${r.includes}"`;if("regex"===r.format)return`Neplatn\xfd etzec: mus\xed odpov\xeddat vzoru ${r.pattern}`;return`Neplatn\xfd form\xe1t ${t[r.format]??r.format}`;case"not_multiple_of":return`Neplatn\xe9 \xedslo: mus\xed b\xfdt n\xe1sobkem ${r.divisor}`;case"unrecognized_keys":return`Nezn\xe1m\xe9 kl\xede: ${e2(r.keys,", ")}`;case"invalid_key":return`Neplatn\xfd kl\xed v ${r.origin}`;case"invalid_union":return"Neplatn vstup";case"invalid_element":return`Neplatn\xe1 hodnota v ${r.origin}`;default:return`Neplatn\xfd vstup`}})}},"da",0,function(){let e,t,r;return{localeError:(e={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}},t={string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"st",file:"fil"},r={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslt",date:"ISO-dato",time:"ISO-klokkeslt",duration:"ISO-varighed",ipv4:"IPv4-omrde",ipv6:"IPv6-omrde",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},n=>{var i,a,o,s;switch(n.code){case"invalid_type":return`Ugyldigt input: forventede ${t[i=n.expected]??i}, fik ${t[a=(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"tal";case"object":if(Array.isArray(e))return"liste";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name;return"objekt"}return t})(n.input)]??a}`;case"invalid_value":if(1===n.values.length)return`Ugyldig v\xe6rdi: forventede ${tw(n.values[0])}`;return`Ugyldigt valg: forventede en af f\xf8lgende ${e2(n.values,"|")}`;case"too_big":{let r=n.inclusive?"<=":"<",i=e[n.origin]??null,a=t[o=n.origin]??o;if(i)return`For stor: forventede ${a??"value"} ${i.verb} ${r} ${n.maximum.toString()} ${i.unit??"elementer"}`;return`For stor: forventede ${a??"value"} havde ${r} ${n.maximum.toString()}`}case"too_small":{let r=n.inclusive?">=":">",i=e[n.origin]??null,a=t[s=n.origin]??s;if(i)return`For lille: forventede ${a} ${i.verb} ${r} ${n.minimum.toString()} ${i.unit}`;return`For lille: forventede ${a} havde ${r} ${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`Ugyldig streng: skal starte med "${n.prefix}"`;if("ends_with"===n.format)return`Ugyldig streng: skal ende med "${n.suffix}"`;if("includes"===n.format)return`Ugyldig streng: skal indeholde "${n.includes}"`;if("regex"===n.format)return`Ugyldig streng: skal matche m\xf8nsteret ${n.pattern}`;return`Ugyldig ${r[n.format]??n.format}`;case"not_multiple_of":return`Ugyldigt tal: skal v\xe6re deleligt med ${n.divisor}`;case"unrecognized_keys":return`${n.keys.length>1?"Ukendte ngler":"Ukendt ngle"}: ${e2(n.keys,", ")}`;case"invalid_key":return`Ugyldig n\xf8gle i ${n.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\xe6rdi i ${n.origin}`;default:return"Ugyldigt input"}})}},"de",0,function(){let e,t;return{localeError:(e={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}},t={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"},r=>{switch(r.code){case"invalid_type":return`Ung\xfcltige Eingabe: erwartet ${r.expected}, erhalten ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"Zahl";case"object":if(Array.isArray(e))return"Array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Ung\xfcltige Eingabe: erwartet ${tw(r.values[0])}`;return`Ung\xfcltige Option: erwartet eine von ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Zu gro\xdf: erwartet, dass ${r.origin??"Wert"} ${t}${r.maximum.toString()} ${n.unit??"Elemente"} hat`;return`Zu gro\xdf: erwartet, dass ${r.origin??"Wert"} ${t}${r.maximum.toString()} ist`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Zu klein: erwartet, dass ${r.origin} ${t}${r.minimum.toString()} ${n.unit} hat`;return`Zu klein: erwartet, dass ${r.origin} ${t}${r.minimum.toString()} ist`}case"invalid_format":if("starts_with"===r.format)return`Ung\xfcltiger String: muss mit "${r.prefix}" beginnen`;if("ends_with"===r.format)return`Ung\xfcltiger String: muss mit "${r.suffix}" enden`;if("includes"===r.format)return`Ung\xfcltiger String: muss "${r.includes}" enthalten`;if("regex"===r.format)return`Ung\xfcltiger String: muss dem Muster ${r.pattern} entsprechen`;return`Ung\xfcltig: ${t[r.format]??r.format}`;case"not_multiple_of":return`Ung\xfcltige Zahl: muss ein Vielfaches von ${r.divisor} sein`;case"unrecognized_keys":return`${r.keys.length>1?"Unbekannte Schlssel":"Unbekannter Schlssel"}: ${e2(r.keys,", ")}`;case"invalid_key":return`Ung\xfcltiger Schl\xfcssel in ${r.origin}`;case"invalid_union":return"Ungltige Eingabe";case"invalid_element":return`Ung\xfcltiger Wert in ${r.origin}`;default:return`Ung\xfcltige Eingabe`}})}},"en",0,i5,"eo",0,function(){let e,t;return{localeError:(e={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}},t={regex:"enigo",email:"retadreso",url:"URL",emoji:"emoio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-daro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"},r=>{switch(r.code){case"invalid_type":return`Nevalida enigo: atendiis ${r.expected}, riceviis ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nombro";case"object":if(Array.isArray(e))return"tabelo";if(null===e)return"senvalora";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Nevalida enigo: atendiis ${tw(r.values[0])}`;return`Nevalida opcio: atendiis unu el ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Tro granda: atendiis ke ${r.origin??"valoro"} havu ${t}${r.maximum.toString()} ${n.unit??"elementojn"}`;return`Tro granda: atendiis ke ${r.origin??"valoro"} havu ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Tro malgranda: atendiis ke ${r.origin} havu ${t}${r.minimum.toString()} ${n.unit}`;return`Tro malgranda: atendiis ke ${r.origin} estu ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Nevalida karaktraro: devas komencii per "${r.prefix}"`;if("ends_with"===r.format)return`Nevalida karaktraro: devas finii per "${r.suffix}"`;if("includes"===r.format)return`Nevalida karaktraro: devas inkluzivi "${r.includes}"`;if("regex"===r.format)return`Nevalida karaktraro: devas kongrui kun la modelo ${r.pattern}`;return`Nevalida ${t[r.format]??r.format}`;case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${r.divisor}`;case"unrecognized_keys":return`Nekonata${r.keys.length>1?"j":""} losilo${r.keys.length>1?"j":""}: ${e2(r.keys,", ")}`;case"invalid_key":return`Nevalida losilo en ${r.origin}`;case"invalid_union":default:return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${r.origin}`}})}},"es",0,function(){return{localeError:(()=>{let e={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}},t={string:"texto",number:"nmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"nmero grande",symbol:"smbolo",undefined:"indefinido",null:"nulo",function:"funcin",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeracin",union:"unin",literal:"literal",promise:"promesa",void:"vaco",never:"nunca",unknown:"desconocido",any:"cualquiera"};function r(e){return t[e]??e}let n={regex:"entrada",email:"direccin de correo electrnico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duracin ISO",ipv4:"direccin IPv4",ipv6:"direccin IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"nmero E.164",jwt:"JWT",template_literal:"entrada"};return t=>{switch(t.code){case"invalid_type":return`Entrada inv\xe1lida: se esperaba ${r(t.expected)}, recibido ${r((e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype)return e.constructor.name;return"object"}return t})(t.input))}`;case"invalid_value":if(1===t.values.length)return`Entrada inv\xe1lida: se esperaba ${tw(t.values[0])}`;return`Opci\xf3n inv\xe1lida: se esperaba una de ${e2(t.values,"|")}`;case"too_big":{let n=t.inclusive?"<=":"<",i=e[t.origin]??null,a=r(t.origin);if(i)return`Demasiado grande: se esperaba que ${a??"valor"} tuviera ${n}${t.maximum.toString()} ${i.unit??"elementos"}`;return`Demasiado grande: se esperaba que ${a??"valor"} fuera ${n}${t.maximum.toString()}`}case"too_small":{let n=t.inclusive?">=":">",i=e[t.origin]??null,a=r(t.origin);if(i)return`Demasiado peque\xf1o: se esperaba que ${a} tuviera ${n}${t.minimum.toString()} ${i.unit}`;return`Demasiado peque\xf1o: se esperaba que ${a} fuera ${n}${t.minimum.toString()}`}case"invalid_format":if("starts_with"===t.format)return`Cadena inv\xe1lida: debe comenzar con "${t.prefix}"`;if("ends_with"===t.format)return`Cadena inv\xe1lida: debe terminar en "${t.suffix}"`;if("includes"===t.format)return`Cadena inv\xe1lida: debe incluir "${t.includes}"`;if("regex"===t.format)return`Cadena inv\xe1lida: debe coincidir con el patr\xf3n ${t.pattern}`;return`Inv\xe1lido ${n[t.format]??t.format}`;case"not_multiple_of":return`N\xfamero inv\xe1lido: debe ser m\xfaltiplo de ${t.divisor}`;case"unrecognized_keys":return`Llave${t.keys.length>1?"s":""} desconocida${t.keys.length>1?"s":""}: ${e2(t.keys,", ")}`;case"invalid_key":return`Llave inv\xe1lida en ${r(t.origin)}`;case"invalid_union":return"Entrada invlida";case"invalid_element":return`Valor inv\xe1lido en ${r(t.origin)}`;default:return`Entrada inv\xe1lida`}}})()}},"fa",0,function(){let e,t;return{localeError:(e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},t={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ",date:" ",time:" ",duration:"  ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},r=>{switch(r.code){case"invalid_type":return` :  ${r.expected}  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}  `;case"invalid_value":if(1===r.values.length)return` :  ${tw(r.values[0])} `;return` :    ${e2(r.values,"|")} `;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return` : ${r.origin??""}  ${t}${r.maximum.toString()} ${n.unit??""} `;return` : ${r.origin??""}  ${t}${r.maximum.toString()} `}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return` : ${r.origin}  ${t}${r.minimum.toString()} ${n.unit} `;return` : ${r.origin}  ${t}${r.minimum.toString()} `}case"invalid_format":if("starts_with"===r.format)return` :   "${r.prefix}"  `;if("ends_with"===r.format)return` :   "${r.suffix}"  `;if("includes"===r.format)return` :   "${r.includes}" `;if("regex"===r.format)return` :    ${r.pattern}   `;return`${t[r.format]??r.format} `;case"not_multiple_of":return` :   ${r.divisor} `;case"unrecognized_keys":return`${r.keys.length>1?"":""} : ${e2(r.keys,", ")}`;case"invalid_key":return`   ${r.origin}`;case"invalid_union":default:return` `;case"invalid_element":return`   ${r.origin}`}})}},"fi",0,function(){let e,t;return{localeError:(e={string:{unit:"merkki",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"pivmrn"}},t={regex:"snnllinen lauseke",email:"shkpostiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-pivmr",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"},r=>{switch(r.code){case"invalid_type":return`Virheellinen tyyppi: odotettiin ${r.expected}, oli ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Virheellinen sy\xf6te: t\xe4ytyy olla ${tw(r.values[0])}`;return`Virheellinen valinta: t\xe4ytyy olla yksi seuraavista: ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Liian suuri: ${n.subject} t\xe4ytyy olla ${t}${r.maximum.toString()} ${n.unit}`.trim();return`Liian suuri: arvon t\xe4ytyy olla ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Liian pieni: ${n.subject} t\xe4ytyy olla ${t}${r.minimum.toString()} ${n.unit}`.trim();return`Liian pieni: arvon t\xe4ytyy olla ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Virheellinen sy\xf6te: t\xe4ytyy alkaa "${r.prefix}"`;if("ends_with"===r.format)return`Virheellinen sy\xf6te: t\xe4ytyy loppua "${r.suffix}"`;if("includes"===r.format)return`Virheellinen sy\xf6te: t\xe4ytyy sis\xe4lt\xe4\xe4 "${r.includes}"`;if("regex"===r.format)return`Virheellinen sy\xf6te: t\xe4ytyy vastata s\xe4\xe4nn\xf6llist\xe4 lauseketta ${r.pattern}`;return`Virheellinen ${t[r.format]??r.format}`;case"not_multiple_of":return`Virheellinen luku: t\xe4ytyy olla luvun ${r.divisor} monikerta`;case"unrecognized_keys":return`${r.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${e2(r.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return`Virheellinen sy\xf6te`}})}},"fr",0,function(){let e,t;return{localeError:(e={string:{unit:"caractres",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"lments",verb:"avoir"},set:{unit:"lments",verb:"avoir"}},t={regex:"entre",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dure ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chane encode en base64",base64url:"chane encode en base64url",json_string:"chane JSON",e164:"numro E.164",jwt:"JWT",template_literal:"entre"},r=>{switch(r.code){case"invalid_type":return`Entr\xe9e invalide : ${r.expected} attendu, ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nombre";case"object":if(Array.isArray(e))return"tableau";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)} re\xe7u`;case"invalid_value":if(1===r.values.length)return`Entr\xe9e invalide : ${tw(r.values[0])} attendu`;return`Option invalide : une valeur parmi ${e2(r.values,"|")} attendue`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Trop grand : ${r.origin??"valeur"} doit ${n.verb} ${t}${r.maximum.toString()} ${n.unit??"lment(s)"}`;return`Trop grand : ${r.origin??"valeur"} doit \xeatre ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Trop petit : ${r.origin} doit ${n.verb} ${t}${r.minimum.toString()} ${n.unit}`;return`Trop petit : ${r.origin} doit \xeatre ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Cha\xeene invalide : doit commencer par "${r.prefix}"`;if("ends_with"===r.format)return`Cha\xeene invalide : doit se terminer par "${r.suffix}"`;if("includes"===r.format)return`Cha\xeene invalide : doit inclure "${r.includes}"`;if("regex"===r.format)return`Cha\xeene invalide : doit correspondre au mod\xe8le ${r.pattern}`;return`${t[r.format]??r.format} invalide`;case"not_multiple_of":return`Nombre invalide : doit \xeatre un multiple de ${r.divisor}`;case"unrecognized_keys":return`Cl\xe9${r.keys.length>1?"s":""} non reconnue${r.keys.length>1?"s":""} : ${e2(r.keys,", ")}`;case"invalid_key":return`Cl\xe9 invalide dans ${r.origin}`;case"invalid_union":return"Entre invalide";case"invalid_element":return`Valeur invalide dans ${r.origin}`;default:return`Entr\xe9e invalide`}})}},"frCA",0,function(){let e,t;return{localeError:(e={string:{unit:"caractres",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"lments",verb:"avoir"},set:{unit:"lments",verb:"avoir"}},t={regex:"entre",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dure ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chane encode en base64",base64url:"chane encode en base64url",json_string:"chane JSON",e164:"numro E.164",jwt:"JWT",template_literal:"entre"},r=>{switch(r.code){case"invalid_type":return`Entr\xe9e invalide : attendu ${r.expected}, re\xe7u ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Entr\xe9e invalide : attendu ${tw(r.values[0])}`;return`Option invalide : attendu l'une des valeurs suivantes ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"":"<",n=e[r.origin]??null;if(n)return`Trop grand : attendu que ${r.origin??"la valeur"} ait ${t}${r.maximum.toString()} ${n.unit}`;return`Trop grand : attendu que ${r.origin??"la valeur"} soit ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?"":">",n=e[r.origin]??null;if(n)return`Trop petit : attendu que ${r.origin} ait ${t}${r.minimum.toString()} ${n.unit}`;return`Trop petit : attendu que ${r.origin} soit ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Cha\xeene invalide : doit commencer par "${r.prefix}"`;if("ends_with"===r.format)return`Cha\xeene invalide : doit se terminer par "${r.suffix}"`;if("includes"===r.format)return`Cha\xeene invalide : doit inclure "${r.includes}"`;if("regex"===r.format)return`Cha\xeene invalide : doit correspondre au motif ${r.pattern}`;return`${t[r.format]??r.format} invalide`;case"not_multiple_of":return`Nombre invalide : doit \xeatre un multiple de ${r.divisor}`;case"unrecognized_keys":return`Cl\xe9${r.keys.length>1?"s":""} non reconnue${r.keys.length>1?"s":""} : ${e2(r.keys,", ")}`;case"invalid_key":return`Cl\xe9 invalide dans ${r.origin}`;case"invalid_union":return"Entre invalide";case"invalid_element":return`Valeur invalide dans ${r.origin}`;default:return`Entr\xe9e invalide`}})}},"he",0,function(){let e,t,r,n,i,a,o,s;return{localeError:(e={string:{label:"",gender:"f"},number:{label:"",gender:"m"},boolean:{label:" ",gender:"m"},bigint:{label:"BigInt",gender:"m"},date:{label:"",gender:"m"},array:{label:"",gender:"m"},object:{label:"",gender:"m"},null:{label:"  (null)",gender:"m"},undefined:{label:"   (undefined)",gender:"m"},symbol:{label:" (Symbol)",gender:"m"},function:{label:"",gender:"f"},map:{label:" (Map)",gender:"f"},set:{label:" (Set)",gender:"f"},file:{label:"",gender:"m"},promise:{label:"Promise",gender:"m"},NaN:{label:"NaN",gender:"m"},unknown:{label:"  ",gender:"m"},value:{label:"",gender:"m"}},t={string:{unit:"",shortLabel:"",longLabel:""},file:{unit:"",shortLabel:"",longLabel:""},array:{unit:"",shortLabel:"",longLabel:""},set:{unit:"",shortLabel:"",longLabel:""},number:{unit:"",shortLabel:"",longLabel:""}},r=t=>t?e[t]:void 0,n=t=>{let n=r(t);return n?n.label:t??e.unknown.label},i=e=>`${n(e)}`,a=e=>{let t=r(e);return"f"===(t?.gender??"m")?" ":" "},o=e=>e?t[e]??null:null,s={regex:{label:"",gender:"m"},email:{label:" ",gender:"f"},url:{label:" ",gender:"f"},emoji:{label:"'",gender:"m"},uuid:{label:"UUID",gender:"m"},nanoid:{label:"nanoid",gender:"m"},guid:{label:"GUID",gender:"m"},cuid:{label:"cuid",gender:"m"},cuid2:{label:"cuid2",gender:"m"},ulid:{label:"ULID",gender:"m"},xid:{label:"XID",gender:"m"},ksuid:{label:"KSUID",gender:"m"},datetime:{label:"  ISO",gender:"m"},date:{label:" ISO",gender:"m"},time:{label:" ISO",gender:"m"},duration:{label:"  ISO",gender:"m"},ipv4:{label:" IPv4",gender:"f"},ipv6:{label:" IPv6",gender:"f"},cidrv4:{label:" IPv4",gender:"m"},cidrv6:{label:" IPv6",gender:"m"},base64:{label:"  64",gender:"f"},base64url:{label:"  64  ",gender:"f"},json_string:{label:" JSON",gender:"f"},e164:{label:" E.164",gender:"m"},jwt:{label:"JWT",gender:"m"},ends_with:{label:"",gender:"m"},includes:{label:"",gender:"m"},lowercase:{label:"",gender:"m"},starts_with:{label:"",gender:"m"},uppercase:{label:"",gender:"m"}},t=>{switch(t.code){case"invalid_type":{let r=n(t.expected),i=(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name;return"object";default:return t}})(t.input),a=e[i]?.label??i;return`  :   ${r},  ${a}`}case"invalid_value":{if(1===t.values.length)return`  :    ${tw(t.values[0])}`;let e=t.values.map(e=>tw(e));if(2===t.values.length)return`  :    ${e[0]}  ${e[1]}`;let r=e[e.length-1],n=e.slice(0,-1).join(", ");return`  :    ${n}  ${r}`}case"too_big":{let e=o(t.origin),r=i(t.origin??"value");if("string"===t.origin)return`${e?.longLabel??""} : ${r}   ${t.maximum.toString()} ${e?.unit??""} ${t.inclusive?" ":" "}`.trim();if("number"===t.origin){let e=t.inclusive?`   -${t.maximum}`:` -${t.maximum}`;return` : ${r}   ${e}`}if("array"===t.origin||"set"===t.origin){let n="set"===t.origin?"":"",i=t.inclusive?`${t.maximum} ${e?.unit??""}  `:` -${t.maximum} ${e?.unit??""}`;return` : ${r} ${n}  ${i}`.trim()}let n=t.inclusive?"<=":"<",s=a(t.origin??"value");if(e?.unit)return`${e.longLabel} : ${r} ${s} ${n}${t.maximum.toString()} ${e.unit}`;return`${e?.longLabel??""} : ${r} ${s} ${n}${t.maximum.toString()}`}case"too_small":{let e=o(t.origin),r=i(t.origin??"value");if("string"===t.origin)return`${e?.shortLabel??""} : ${r}   ${t.minimum.toString()} ${e?.unit??""} ${t.inclusive?" ":""}`.trim();if("number"===t.origin){let e=t.inclusive?`   -${t.minimum}`:` -${t.minimum}`;return` : ${r}   ${e}`}if("array"===t.origin||"set"===t.origin){let n="set"===t.origin?"":"";if(1===t.minimum&&t.inclusive){let e=(t.origin,"  ");return` : ${r} ${n}  ${e}`}let i=t.inclusive?`${t.minimum} ${e?.unit??""}  `:` -${t.minimum} ${e?.unit??""}`;return` : ${r} ${n}  ${i}`.trim()}let n=t.inclusive?">=":">",s=a(t.origin??"value");if(e?.unit)return`${e.shortLabel} : ${r} ${s} ${n}${t.minimum.toString()} ${e.unit}`;return`${e?.shortLabel??""} : ${r} ${s} ${n}${t.minimum.toString()}`}case"invalid_format":{if("starts_with"===t.format)return`    "${t.prefix}"`;if("ends_with"===t.format)return`    "${t.suffix}"`;if("includes"===t.format)return`   "${t.includes}"`;if("regex"===t.format)return`    ${t.pattern}`;let e=s[t.format],r=e?.label??t.format,n=e?.gender??"m";return`${r}  ${"f"===n?"":""}`}case"not_multiple_of":return`  :     ${t.divisor}`;case"unrecognized_keys":return`${t.keys.length>1?"":""}  ${t.keys.length>1?"":""}: ${e2(t.keys,", ")}`;case"invalid_key":return`   `;case"invalid_union":return"  ";case"invalid_element":{let e=i(t.origin??"array");return`   ${e}`}default:return`  `}})}},"hu",0,function(){let e,t;return{localeError:(e={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}},t={regex:"bemenet",email:"email cm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO idblyeg",date:"ISO dtum",time:"ISO id",duration:"ISO idintervallum",ipv4:"IPv4 cm",ipv6:"IPv6 cm",cidrv4:"IPv4 tartomny",cidrv6:"IPv6 tartomny",base64:"base64-kdolt string",base64url:"base64url-kdolt string",json_string:"JSON string",e164:"E.164 szm",jwt:"JWT",template_literal:"bemenet"},r=>{switch(r.code){case"invalid_type":return`\xc9rv\xe9nytelen bemenet: a v\xe1rt \xe9rt\xe9k ${r.expected}, a kapott \xe9rt\xe9k ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"szm";case"object":if(Array.isArray(e))return"tmb";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`\xc9rv\xe9nytelen bemenet: a v\xe1rt \xe9rt\xe9k ${tw(r.values[0])}`;return`\xc9rv\xe9nytelen opci\xf3: valamelyik \xe9rt\xe9k v\xe1rt ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`T\xfal nagy: ${r.origin??"rtk"} m\xe9rete t\xfal nagy ${t}${r.maximum.toString()} ${n.unit??"elem"}`;return`T\xfal nagy: a bemeneti \xe9rt\xe9k ${r.origin??"rtk"} t\xfal nagy: ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`T\xfal kicsi: a bemeneti \xe9rt\xe9k ${r.origin} m\xe9rete t\xfal kicsi ${t}${r.minimum.toString()} ${n.unit}`;return`T\xfal kicsi: a bemeneti \xe9rt\xe9k ${r.origin} t\xfal kicsi ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`\xc9rv\xe9nytelen string: "${r.prefix}" \xe9rt\xe9kkel kell kezddnie`;if("ends_with"===r.format)return`\xc9rv\xe9nytelen string: "${r.suffix}" \xe9rt\xe9kkel kell v\xe9gzdnie`;if("includes"===r.format)return`\xc9rv\xe9nytelen string: "${r.includes}" \xe9rt\xe9ket kell tartalmaznia`;if("regex"===r.format)return`\xc9rv\xe9nytelen string: ${r.pattern} mint\xe1nak kell megfelelnie`;return`\xc9rv\xe9nytelen ${t[r.format]??r.format}`;case"not_multiple_of":return`\xc9rv\xe9nytelen sz\xe1m: ${r.divisor} t\xf6bbsz\xf6r\xf6s\xe9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${r.keys.length>1?"s":""}: ${e2(r.keys,", ")}`;case"invalid_key":return`\xc9rv\xe9nytelen kulcs ${r.origin}`;case"invalid_union":return"rvnytelen bemenet";case"invalid_element":return`\xc9rv\xe9nytelen \xe9rt\xe9k: ${r.origin}`;default:return`\xc9rv\xe9nytelen bemenet`}})}},"id",0,function(){let e,t;return{localeError:(e={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}},t={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"},r=>{switch(r.code){case"invalid_type":return`Input tidak valid: diharapkan ${r.expected}, diterima ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Input tidak valid: diharapkan ${tw(r.values[0])}`;return`Pilihan tidak valid: diharapkan salah satu dari ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Terlalu besar: diharapkan ${r.origin??"value"} memiliki ${t}${r.maximum.toString()} ${n.unit??"elemen"}`;return`Terlalu besar: diharapkan ${r.origin??"value"} menjadi ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Terlalu kecil: diharapkan ${r.origin} memiliki ${t}${r.minimum.toString()} ${n.unit}`;return`Terlalu kecil: diharapkan ${r.origin} menjadi ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`String tidak valid: harus dimulai dengan "${r.prefix}"`;if("ends_with"===r.format)return`String tidak valid: harus berakhir dengan "${r.suffix}"`;if("includes"===r.format)return`String tidak valid: harus menyertakan "${r.includes}"`;if("regex"===r.format)return`String tidak valid: harus sesuai pola ${r.pattern}`;return`${t[r.format]??r.format} tidak valid`;case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${r.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${r.keys.length>1?"s":""}: ${e2(r.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${r.origin}`;case"invalid_union":default:return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${r.origin}`}})}},"is",0,function(){let e,t;return{localeError:(e={string:{unit:"stafi",verb:"a hafa"},file:{unit:"bti",verb:"a hafa"},array:{unit:"hluti",verb:"a hafa"},set:{unit:"hluti",verb:"a hafa"}},t={regex:"gildi",email:"netfang",url:"vefsl",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og tmi",date:"ISO dagsetning",time:"ISO tmi",duration:"ISO tmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 tlugildi",jwt:"JWT",template_literal:"gildi"},r=>{switch(r.code){case"invalid_type":return`Rangt gildi: \xde\xfa sl\xf3st inn ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nmer";case"object":if(Array.isArray(e))return"fylki";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)} \xfear sem \xe1 a\xf0 vera ${r.expected}`;case"invalid_value":if(1===r.values.length)return`Rangt gildi: gert r\xe1\xf0 fyrir ${tw(r.values[0])}`;return`\xd3gilt val: m\xe1 vera eitt af eftirfarandi ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Of st\xf3rt: gert er r\xe1\xf0 fyrir a\xf0 ${r.origin??"gildi"} hafi ${t}${r.maximum.toString()} ${n.unit??"hluti"}`;return`Of st\xf3rt: gert er r\xe1\xf0 fyrir a\xf0 ${r.origin??"gildi"} s\xe9 ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Of l\xedti\xf0: gert er r\xe1\xf0 fyrir a\xf0 ${r.origin} hafi ${t}${r.minimum.toString()} ${n.unit}`;return`Of l\xedti\xf0: gert er r\xe1\xf0 fyrir a\xf0 ${r.origin} s\xe9 ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 byrja \xe1 "${r.prefix}"`;if("ends_with"===r.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 enda \xe1 "${r.suffix}"`;if("includes"===r.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 innihalda "${r.includes}"`;if("regex"===r.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 fylgja mynstri ${r.pattern}`;return`Rangt ${t[r.format]??r.format}`;case"not_multiple_of":return`R\xf6ng tala: ver\xf0ur a\xf0 vera margfeldi af ${r.divisor}`;case"unrecognized_keys":return`\xd3\xfeekkt ${r.keys.length>1?"ir lyklar":"ur lykill"}: ${e2(r.keys,", ")}`;case"invalid_key":return`Rangur lykill \xed ${r.origin}`;case"invalid_union":default:return"Rangt gildi";case"invalid_element":return`Rangt gildi \xed ${r.origin}`}})}},"it",0,function(){let e,t;return{localeError:(e={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}},t={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"},r=>{switch(r.code){case"invalid_type":return`Input non valido: atteso ${r.expected}, ricevuto ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"numero";case"object":if(Array.isArray(e))return"vettore";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Input non valido: atteso ${tw(r.values[0])}`;return`Opzione non valida: atteso uno tra ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Troppo grande: ${r.origin??"valore"} deve avere ${t}${r.maximum.toString()} ${n.unit??"elementi"}`;return`Troppo grande: ${r.origin??"valore"} deve essere ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Troppo piccolo: ${r.origin} deve avere ${t}${r.minimum.toString()} ${n.unit}`;return`Troppo piccolo: ${r.origin} deve essere ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Stringa non valida: deve iniziare con "${r.prefix}"`;if("ends_with"===r.format)return`Stringa non valida: deve terminare con "${r.suffix}"`;if("includes"===r.format)return`Stringa non valida: deve includere "${r.includes}"`;if("regex"===r.format)return`Stringa non valida: deve corrispondere al pattern ${r.pattern}`;return`Invalid ${t[r.format]??r.format}`;case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${r.divisor}`;case"unrecognized_keys":return`Chiav${r.keys.length>1?"i":"e"} non riconosciut${r.keys.length>1?"e":"a"}: ${e2(r.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${r.origin}`;case"invalid_union":default:return"Input non valido";case"invalid_element":return`Valore non valido in ${r.origin}`}})}},"ja",0,function(){let e,t;return{localeError:(e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO",date:"ISO",time:"ISO",duration:"ISO",ipv4:"IPv4",ipv6:"IPv6",cidrv4:"IPv4",cidrv6:"IPv6",base64:"base64",base64url:"base64url",json_string:"JSON",e164:"E.164",jwt:"JWT",template_literal:""},r=>{switch(r.code){case"invalid_type":return`: ${r.expected}${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`: ${tw(r.values[0])}`;return`: ${e2(r.values,"")}`;case"too_big":{let t=r.inclusive?"":"",n=e[r.origin]??null;if(n)return`: ${r.origin??""}${r.maximum.toString()}${n.unit??""}${t}`;return`: ${r.origin??""}${r.maximum.toString()}${t}`}case"too_small":{let t=r.inclusive?"":"",n=e[r.origin]??null;if(n)return`: ${r.origin}${r.minimum.toString()}${n.unit}${t}`;return`: ${r.origin}${r.minimum.toString()}${t}`}case"invalid_format":if("starts_with"===r.format)return`: "${r.prefix}"`;if("ends_with"===r.format)return`: "${r.suffix}"`;if("includes"===r.format)return`: "${r.includes}"`;if("regex"===r.format)return`: ${r.pattern}`;return`${t[r.format]??r.format}`;case"not_multiple_of":return`: ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"":""}: ${e2(r.keys,"")}`;case"invalid_key":return`${r.origin}`;case"invalid_union":return"";case"invalid_element":return`${r.origin}`;default:return``}})}},"ka",0,function(){let e,t;return{localeError:(e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},t={regex:"",email:"- ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"-",date:"",time:"",duration:"",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},r=>{switch(r.code){case"invalid_type":return` :  ${r.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return({string:"",boolean:"",undefined:"undefined",bigint:"bigint",symbol:"symbol",function:""})[t]??t})(r.input)}`;case"invalid_value":if(1===r.values.length)return` :  ${tw(r.values[0])}`;return` :  - ${e2(r.values,"|")}-`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return` :  ${r.origin??""} ${n.verb} ${t}${r.maximum.toString()} ${n.unit}`;return` :  ${r.origin??""}  ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return` :  ${r.origin} ${n.verb} ${t}${r.minimum.toString()} ${n.unit}`;return` :  ${r.origin}  ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return` :   "${r.prefix}"-`;if("ends_with"===r.format)return` :   "${r.suffix}"-`;if("includes"===r.format)return` :   "${r.includes}"-`;if("regex"===r.format)return` :    ${r.pattern}`;return` ${t[r.format]??r.format}`;case"not_multiple_of":return` :   ${r.divisor}- `;case"unrecognized_keys":return` ${r.keys.length>1?"":""}: ${e2(r.keys,", ")}`;case"invalid_key":return`  ${r.origin}-`;case"invalid_union":return" ";case"invalid_element":return`  ${r.origin}-`;default:return` `}})}},"kh",0,function(){return i7()},"km",0,i7,"ko",0,function(){let e,t;return{localeError:(e={string:{unit:"",verb:"to have"},file:{unit:"",verb:"to have"},array:{unit:"",verb:"to have"},set:{unit:"",verb:"to have"}},t={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64  ",base64url:"base64url  ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},r=>{switch(r.code){case"invalid_type":return` :   ${r.expected},   ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return` :  ${tw(r.values[0])}  `;return` : ${e2(r.values," ")}   `;case"too_big":{let t=r.inclusive?"":"",n=""===t?" ":" ",i=e[r.origin]??null,a=i?.unit??"";if(i)return`${r.origin??""}  : ${r.maximum.toString()}${a} ${t}${n}`;return`${r.origin??""}  : ${r.maximum.toString()} ${t}${n}`}case"too_small":{let t=r.inclusive?"":"",n=""===t?" ":" ",i=e[r.origin]??null,a=i?.unit??"";if(i)return`${r.origin??""}  : ${r.minimum.toString()}${a} ${t}${n}`;return`${r.origin??""}  : ${r.minimum.toString()} ${t}${n}`}case"invalid_format":if("starts_with"===r.format)return` : "${r.prefix}"()  `;if("ends_with"===r.format)return` : "${r.suffix}"()  `;if("includes"===r.format)return` : "${r.includes}"()  `;if("regex"===r.format)return` :  ${r.pattern}   `;return` ${t[r.format]??r.format}`;case"not_multiple_of":return` : ${r.divisor}  `;case"unrecognized_keys":return`   : ${e2(r.keys,", ")}`;case"invalid_key":return` : ${r.origin}`;case"invalid_union":default:return` `;case"invalid_element":return` : ${r.origin}`}})}},"lt",0,function(){return{localeError:(()=>{let e={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli"},verb:{smaller:{inclusive:"turi bti ne ilgesn kaip",notInclusive:"turi bti trumpesn kaip"},bigger:{inclusive:"turi bti ne trumpesn kaip",notInclusive:"turi bti ilgesn kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait"},verb:{smaller:{inclusive:"turi bti ne didesnis kaip",notInclusive:"turi bti maesnis kaip"},bigger:{inclusive:"turi bti ne maesnis kaip",notInclusive:"turi bti didesnis kaip"}}},array:{unit:{one:"element",few:"elementus",many:"element"},verb:{smaller:{inclusive:"turi turti ne daugiau kaip",notInclusive:"turi turti maiau kaip"},bigger:{inclusive:"turi turti ne maiau kaip",notInclusive:"turi turti daugiau kaip"}}},set:{unit:{one:"element",few:"elementus",many:"element"},verb:{smaller:{inclusive:"turi turti ne daugiau kaip",notInclusive:"turi turti maiau kaip"},bigger:{inclusive:"turi turti ne maiau kaip",notInclusive:"turi turti daugiau kaip"}}}};function t(t,r,n,i){let a=e[t]??null;return null===a?a:{unit:a.unit[r],verb:a.verb[i][n?"inclusive":"notInclusive"]}}let r={regex:"vestis",email:"el. pato adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 ukoduota eilut",base64url:"base64url ukoduota eilut",json_string:"JSON eilut",e164:"E.164 numeris",jwt:"JWT",template_literal:"vestis"};return e=>{switch(e.code){case"invalid_type":var n;return`Gautas tipas ${i8(typeof(n=e.input),n)}, o tiktasi - ${i8(e.expected)}`;case"invalid_value":if(1===e.values.length)return`Privalo bti ${tw(e.values[0])}`;return`Privalo bti vienas i ${e2(e.values,"|")} pasirinkim`;case"too_big":{let r=i8(e.origin),n=t(e.origin,at(Number(e.maximum)),e.inclusive??!1,"smaller");if(n?.verb)return`${ae(r??e.origin??"reikm")} ${n.verb} ${e.maximum.toString()} ${n.unit??"element"}`;let i=e.inclusive?"ne didesnis kaip":"maesnis kaip";return`${ae(r??e.origin??"reikm")} turi bti ${i} ${e.maximum.toString()} ${n?.unit}`}case"too_small":{let r=i8(e.origin),n=t(e.origin,at(Number(e.minimum)),e.inclusive??!1,"bigger");if(n?.verb)return`${ae(r??e.origin??"reikm")} ${n.verb} ${e.minimum.toString()} ${n.unit??"element"}`;let i=e.inclusive?"ne maesnis kaip":"didesnis kaip";return`${ae(r??e.origin??"reikm")} turi bti ${i} ${e.minimum.toString()} ${n?.unit}`}case"invalid_format":if("starts_with"===e.format)return`Eilut privalo prasidti "${e.prefix}"`;if("ends_with"===e.format)return`Eilut privalo pasibaigti "${e.suffix}"`;if("includes"===e.format)return`Eilut privalo traukti "${e.includes}"`;if("regex"===e.format)return`Eilut privalo atitikti ${e.pattern}`;return`Neteisingas ${r[e.format]??e.format}`;case"not_multiple_of":return`Skaiius privalo bti ${e.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpaint${e.keys.length>1?"i":"as"} rakt${e.keys.length>1?"ai":"as"}: ${e2(e.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":default:return"Klaidinga vestis";case"invalid_element":{let t=i8(e.origin);return`${ae(t??e.origin??"reikm")} turi klaiding vest`}}}})()}},"mk",0,function(){let e,t;return{localeError:(e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},t={regex:"",email:"  -",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},r=>{switch(r.code){case"invalid_type":return` :   ${r.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Invalid input: expected ${tw(r.values[0])}`;return` :    ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return` :   ${r.origin??""}   ${t}${r.maximum.toString()} ${n.unit??""}`;return` :   ${r.origin??""}   ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return` :   ${r.origin}   ${t}${r.minimum.toString()} ${n.unit}`;return` :   ${r.origin}   ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return` :     "${r.prefix}"`;if("ends_with"===r.format)return` :     "${r.suffix}"`;if("includes"===r.format)return` :    "${r.includes}"`;if("regex"===r.format)return` :      ${r.pattern}`;return`Invalid ${t[r.format]??r.format}`;case"not_multiple_of":return` :      ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?" ":" "}: ${e2(r.keys,", ")}`;case"invalid_key":return`   ${r.origin}`;case"invalid_union":return" ";case"invalid_element":return`   ${r.origin}`;default:return` `}})}},"ms",0,function(){let e,t;return{localeError:(e={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}},t={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"},r=>{switch(r.code){case"invalid_type":return`Input tidak sah: dijangka ${r.expected}, diterima ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nombor";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Input tidak sah: dijangka ${tw(r.values[0])}`;return`Pilihan tidak sah: dijangka salah satu daripada ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Terlalu besar: dijangka ${r.origin??"nilai"} ${n.verb} ${t}${r.maximum.toString()} ${n.unit??"elemen"}`;return`Terlalu besar: dijangka ${r.origin??"nilai"} adalah ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Terlalu kecil: dijangka ${r.origin} ${n.verb} ${t}${r.minimum.toString()} ${n.unit}`;return`Terlalu kecil: dijangka ${r.origin} adalah ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`String tidak sah: mesti bermula dengan "${r.prefix}"`;if("ends_with"===r.format)return`String tidak sah: mesti berakhir dengan "${r.suffix}"`;if("includes"===r.format)return`String tidak sah: mesti mengandungi "${r.includes}"`;if("regex"===r.format)return`String tidak sah: mesti sepadan dengan corak ${r.pattern}`;return`${t[r.format]??r.format} tidak sah`;case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${r.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${e2(r.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${r.origin}`;case"invalid_union":default:return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${r.origin}`}})}},"nl",0,function(){let e,t;return{localeError:(e={string:{unit:"tekens",verb:"te hebben"},file:{unit:"bytes",verb:"te hebben"},array:{unit:"elementen",verb:"te hebben"},set:{unit:"elementen",verb:"te hebben"}},t={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"},r=>{switch(r.code){case"invalid_type":return`Ongeldige invoer: verwacht ${r.expected}, ontving ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"getal";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Ongeldige invoer: verwacht ${tw(r.values[0])}`;return`Ongeldige optie: verwacht \xe9\xe9n van ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Te groot: verwacht dat ${r.origin??"waarde"} ${n.verb} ${t}${r.maximum.toString()} ${n.unit??"elementen"}`;return`Te groot: verwacht dat ${r.origin??"waarde"} ${t}${r.maximum.toString()} is`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Te klein: verwacht dat ${r.origin} ${n.verb} ${t}${r.minimum.toString()} ${n.unit}`;return`Te klein: verwacht dat ${r.origin} ${t}${r.minimum.toString()} is`}case"invalid_format":if("starts_with"===r.format)return`Ongeldige tekst: moet met "${r.prefix}" beginnen`;if("ends_with"===r.format)return`Ongeldige tekst: moet op "${r.suffix}" eindigen`;if("includes"===r.format)return`Ongeldige tekst: moet "${r.includes}" bevatten`;if("regex"===r.format)return`Ongeldige tekst: moet overeenkomen met patroon ${r.pattern}`;return`Ongeldig: ${t[r.format]??r.format}`;case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${r.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${r.keys.length>1?"s":""}: ${e2(r.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${r.origin}`;case"invalid_union":default:return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${r.origin}`}})}},"no",0,function(){let e,t;return{localeError:(e={string:{unit:"tegn",verb:" ha"},file:{unit:"bytes",verb:" ha"},array:{unit:"elementer",verb:" inneholde"},set:{unit:"elementer",verb:" inneholde"}},t={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omrde",ipv6:"IPv6-omrde",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},r=>{switch(r.code){case"invalid_type":return`Ugyldig input: forventet ${r.expected}, fikk ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"tall";case"object":if(Array.isArray(e))return"liste";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Ugyldig verdi: forventet ${tw(r.values[0])}`;return`Ugyldig valg: forventet en av ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`For stor(t): forventet ${r.origin??"value"} til \xe5 ha ${t}${r.maximum.toString()} ${n.unit??"elementer"}`;return`For stor(t): forventet ${r.origin??"value"} til \xe5 ha ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`For lite(n): forventet ${r.origin} til \xe5 ha ${t}${r.minimum.toString()} ${n.unit}`;return`For lite(n): forventet ${r.origin} til \xe5 ha ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Ugyldig streng: m\xe5 starte med "${r.prefix}"`;if("ends_with"===r.format)return`Ugyldig streng: m\xe5 ende med "${r.suffix}"`;if("includes"===r.format)return`Ugyldig streng: m\xe5 inneholde "${r.includes}"`;if("regex"===r.format)return`Ugyldig streng: m\xe5 matche m\xf8nsteret ${r.pattern}`;return`Ugyldig ${t[r.format]??r.format}`;case"not_multiple_of":return`Ugyldig tall: m\xe5 v\xe6re et multiplum av ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"Ukjente nkler":"Ukjent nkkel"}: ${e2(r.keys,", ")}`;case"invalid_key":return`Ugyldig n\xf8kkel i ${r.origin}`;case"invalid_union":default:return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${r.origin}`}})}},"ota",0,function(){let e,t;return{localeError:(e={string:{unit:"harf",verb:"olmaldr"},file:{unit:"bayt",verb:"olmaldr"},array:{unit:"unsur",verb:"olmaldr"},set:{unit:"unsur",verb:"olmaldr"}},t={regex:"giren",email:"epostagh",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO hengm",date:"ISO tarihi",time:"ISO zaman",duration:"ISO mddeti",ipv4:"IPv4 nin",ipv6:"IPv6 nin",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-ifreli metin",base64url:"base64url-ifreli metin",json_string:"JSON metin",e164:"E.164 says",jwt:"JWT",template_literal:"giren"},r=>{switch(r.code){case"invalid_type":return`F\xe2sit giren: umulan ${r.expected}, alnan ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"numara";case"object":if(Array.isArray(e))return"saf";if(null===e)return"gayb";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`F\xe2sit giren: umulan ${tw(r.values[0])}`;return`F\xe2sit tercih: m\xfbteberler ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Fazla b\xfcy\xfck: ${r.origin??"value"}, ${t}${r.maximum.toString()} ${n.unit??"elements"} sahip olmalyd.`;return`Fazla b\xfcy\xfck: ${r.origin??"value"}, ${t}${r.maximum.toString()} olmalyd.`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Fazla k\xfc\xe7\xfck: ${r.origin}, ${t}${r.minimum.toString()} ${n.unit} sahip olmalyd.`;return`Fazla k\xfc\xe7\xfck: ${r.origin}, ${t}${r.minimum.toString()} olmalyd.`}case"invalid_format":if("starts_with"===r.format)return`F\xe2sit metin: "${r.prefix}" ile balamal.`;if("ends_with"===r.format)return`F\xe2sit metin: "${r.suffix}" ile bitmeli.`;if("includes"===r.format)return`F\xe2sit metin: "${r.includes}" ihtiv\xe2 etmeli.`;if("regex"===r.format)return`F\xe2sit metin: ${r.pattern} nakna uymal.`;return`F\xe2sit ${t[r.format]??r.format}`;case"not_multiple_of":return`F\xe2sit say: ${r.divisor} kat olmalyd.`;case"unrecognized_keys":return`Tannmayan anahtar ${r.keys.length>1?"s":""}: ${e2(r.keys,", ")}`;case"invalid_key":return`${r.origin} i\xe7in tannmayan anahtar var.`;case"invalid_union":return"Giren tannamad.";case"invalid_element":return`${r.origin} i\xe7in tannmayan kymet var.`;default:return`Kymet tannamad.`}})}},"pl",0,function(){let e,t;return{localeError:(e={string:{unit:"znakw",verb:"mie"},file:{unit:"bajtw",verb:"mie"},array:{unit:"elementw",verb:"mie"},set:{unit:"elementw",verb:"mie"}},t={regex:"wyraenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"cig znakw zakodowany w formacie base64",base64url:"cig znakw zakodowany w formacie base64url",json_string:"cig znakw w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wejcie"},r=>{switch(r.code){case"invalid_type":return`Nieprawidowe dane wejciowe: oczekiwano ${r.expected}, otrzymano ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"liczba";case"object":if(Array.isArray(e))return"tablica";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Nieprawidowe dane wejciowe: oczekiwano ${tw(r.values[0])}`;return`Nieprawidowa opcja: oczekiwano jednej z wartoci ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Za dua warto: oczekiwano, e ${r.origin??"warto"} bdzie mie ${t}${r.maximum.toString()} ${n.unit??"elementw"}`;return`Zbyt du(y/a/e): oczekiwano, e ${r.origin??"warto"} bdzie wynosi ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Za maa warto: oczekiwano, e ${r.origin??"warto"} bdzie mie ${t}${r.minimum.toString()} ${n.unit??"elementw"}`;return`Zbyt ma(y/a/e): oczekiwano, e ${r.origin??"warto"} bdzie wynosi ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Nieprawidowy cig znak\xf3w: musi zaczyna si od "${r.prefix}"`;if("ends_with"===r.format)return`Nieprawidowy cig znak\xf3w: musi koczy si na "${r.suffix}"`;if("includes"===r.format)return`Nieprawidowy cig znak\xf3w: musi zawiera "${r.includes}"`;if("regex"===r.format)return`Nieprawidowy cig znak\xf3w: musi odpowiada wzorcowi ${r.pattern}`;return`Nieprawidow(y/a/e) ${t[r.format]??r.format}`;case"not_multiple_of":return`Nieprawidowa liczba: musi by wielokrotnoci ${r.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${r.keys.length>1?"s":""}: ${e2(r.keys,", ")}`;case"invalid_key":return`Nieprawidowy klucz w ${r.origin}`;case"invalid_union":return"Nieprawidowe dane wejciowe";case"invalid_element":return`Nieprawidowa warto w ${r.origin}`;default:return`Nieprawidowe dane wejciowe`}})}},"ps",0,function(){let e,t;return{localeError:(e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:"",email:"",url:"  ",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"  ",date:"",time:"",duration:"",ipv4:" IPv4 ",ipv6:" IPv6 ",cidrv4:" IPv4 ",cidrv6:" IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:" E.164 ",jwt:"JWT",template_literal:""},r=>{switch(r.code){case"invalid_type":return` :  ${r.expected} ,  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}  `;case"invalid_value":if(1===r.values.length)return` :  ${tw(r.values[0])} `;return` :    ${e2(r.values,"|")}  `;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return` : ${r.origin??""}  ${t}${r.maximum.toString()} ${n.unit??""} `;return` : ${r.origin??""}  ${t}${r.maximum.toString()} `}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return` : ${r.origin}  ${t}${r.minimum.toString()} ${n.unit} `;return` : ${r.origin}  ${t}${r.minimum.toString()} `}case"invalid_format":if("starts_with"===r.format)return` :   "${r.prefix}"   `;if("ends_with"===r.format)return` :   "${r.suffix}"    `;if("includes"===r.format)return` :  "${r.includes}" `;if("regex"===r.format)return` :   ${r.pattern}   `;return`${t[r.format]??r.format}  `;case"not_multiple_of":return` :   ${r.divisor}  `;case"unrecognized_keys":return` ${r.keys.length>1?"":""}: ${e2(r.keys,", ")}`;case"invalid_key":return`   ${r.origin} `;case"invalid_union":default:return` `;case"invalid_element":return`   ${r.origin} `}})}},"pt",0,function(){let e,t;return{localeError:(e={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}},t={regex:"padro",email:"endereo de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"durao ISO",ipv4:"endereo IPv4",ipv6:"endereo IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"nmero E.164",jwt:"JWT",template_literal:"entrada"},r=>{switch(r.code){case"invalid_type":return`Tipo inv\xe1lido: esperado ${r.expected}, recebido ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nmero";case"object":if(Array.isArray(e))return"array";if(null===e)return"nulo";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Entrada inv\xe1lida: esperado ${tw(r.values[0])}`;return`Op\xe7\xe3o inv\xe1lida: esperada uma das ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Muito grande: esperado que ${r.origin??"valor"} tivesse ${t}${r.maximum.toString()} ${n.unit??"elementos"}`;return`Muito grande: esperado que ${r.origin??"valor"} fosse ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Muito pequeno: esperado que ${r.origin} tivesse ${t}${r.minimum.toString()} ${n.unit}`;return`Muito pequeno: esperado que ${r.origin} fosse ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Texto inv\xe1lido: deve come\xe7ar com "${r.prefix}"`;if("ends_with"===r.format)return`Texto inv\xe1lido: deve terminar com "${r.suffix}"`;if("includes"===r.format)return`Texto inv\xe1lido: deve incluir "${r.includes}"`;if("regex"===r.format)return`Texto inv\xe1lido: deve corresponder ao padr\xe3o ${r.pattern}`;return`${t[r.format]??r.format} inv\xe1lido`;case"not_multiple_of":return`N\xfamero inv\xe1lido: deve ser m\xfaltiplo de ${r.divisor}`;case"unrecognized_keys":return`Chave${r.keys.length>1?"s":""} desconhecida${r.keys.length>1?"s":""}: ${e2(r.keys,", ")}`;case"invalid_key":return`Chave inv\xe1lida em ${r.origin}`;case"invalid_union":return"Entrada invlida";case"invalid_element":return`Valor inv\xe1lido em ${r.origin}`;default:return`Campo inv\xe1lido`}})}},"ru",0,function(){let e,t;return{localeError:(e={string:{unit:{one:"",few:"",many:""},verb:""},file:{unit:{one:"",few:"",many:""},verb:""},array:{unit:{one:"",few:"",many:""},verb:""},set:{unit:{one:"",few:"",many:""},verb:""}},t={regex:"",email:"email ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"   base64",base64url:"   base64url",json_string:"JSON ",e164:" E.164",jwt:"JWT",template_literal:""},r=>{switch(r.code){case"invalid_type":return` :  ${r.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return` :  ${tw(r.values[0])}`;return` :    ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n){let e=ar(Number(r.maximum),n.unit.one,n.unit.few,n.unit.many);return`  : ,  ${r.origin??""}   ${t}${r.maximum.toString()} ${e}`}return`  : ,  ${r.origin??""}  ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n){let e=ar(Number(r.minimum),n.unit.one,n.unit.few,n.unit.many);return`  : ,  ${r.origin}   ${t}${r.minimum.toString()} ${e}`}return`  : ,  ${r.origin}  ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return` :    "${r.prefix}"`;if("ends_with"===r.format)return` :    "${r.suffix}"`;if("includes"===r.format)return` :   "${r.includes}"`;if("regex"===r.format)return` :    ${r.pattern}`;return` ${t[r.format]??r.format}`;case"not_multiple_of":return` :    ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"":""} ${r.keys.length>1?"":""}: ${e2(r.keys,", ")}`;case"invalid_key":return`   ${r.origin}`;case"invalid_union":return"  ";case"invalid_element":return`   ${r.origin}`;default:return`  `}})}},"sl",0,function(){let e,t;return{localeError:(e={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}},t={regex:"vnos",email:"e-potni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in as",date:"ISO datum",time:"ISO as",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 tevilka",jwt:"JWT",template_literal:"vnos"},r=>{switch(r.code){case"invalid_type":return`Neveljaven vnos: priakovano ${r.expected}, prejeto ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"tevilo";case"object":if(Array.isArray(e))return"tabela";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Neveljaven vnos: priakovano ${tw(r.values[0])}`;return`Neveljavna monost: priakovano eno izmed ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Preveliko: priakovano, da bo ${r.origin??"vrednost"} imelo ${t}${r.maximum.toString()} ${n.unit??"elementov"}`;return`Preveliko: priakovano, da bo ${r.origin??"vrednost"} ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Premajhno: priakovano, da bo ${r.origin} imelo ${t}${r.minimum.toString()} ${n.unit}`;return`Premajhno: priakovano, da bo ${r.origin} ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Neveljaven niz: mora se zaeti z "${r.prefix}"`;if("ends_with"===r.format)return`Neveljaven niz: mora se konati z "${r.suffix}"`;if("includes"===r.format)return`Neveljaven niz: mora vsebovati "${r.includes}"`;if("regex"===r.format)return`Neveljaven niz: mora ustrezati vzorcu ${r.pattern}`;return`Neveljaven ${t[r.format]??r.format}`;case"not_multiple_of":return`Neveljavno tevilo: mora biti vekratnik ${r.divisor}`;case"unrecognized_keys":return`Neprepoznan${r.keys.length>1?"i kljui":" klju"}: ${e2(r.keys,", ")}`;case"invalid_key":return`Neveljaven klju v ${r.origin}`;case"invalid_union":default:return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${r.origin}`}})}},"sv",0,function(){let e,t;return{localeError:(e={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att innehlla"},set:{unit:"objekt",verb:"att innehlla"}},t={regex:"reguljrt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad strng",base64url:"base64url-kodad strng",json_string:"JSON-strng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"},r=>{switch(r.code){case"invalid_type":return`Ogiltig inmatning: f\xf6rv\xe4ntat ${r.expected}, fick ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"antal";case"object":if(Array.isArray(e))return"lista";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Ogiltig inmatning: f\xf6rv\xe4ntat ${tw(r.values[0])}`;return`Ogiltigt val: f\xf6rv\xe4ntade en av ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`F\xf6r stor(t): f\xf6rv\xe4ntade ${r.origin??"vrdet"} att ha ${t}${r.maximum.toString()} ${n.unit??"element"}`;return`F\xf6r stor(t): f\xf6rv\xe4ntat ${r.origin??"vrdet"} att ha ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`F\xf6r lite(t): f\xf6rv\xe4ntade ${r.origin??"vrdet"} att ha ${t}${r.minimum.toString()} ${n.unit}`;return`F\xf6r lite(t): f\xf6rv\xe4ntade ${r.origin??"vrdet"} att ha ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Ogiltig str\xe4ng: m\xe5ste b\xf6rja med "${r.prefix}"`;if("ends_with"===r.format)return`Ogiltig str\xe4ng: m\xe5ste sluta med "${r.suffix}"`;if("includes"===r.format)return`Ogiltig str\xe4ng: m\xe5ste inneh\xe5lla "${r.includes}"`;if("regex"===r.format)return`Ogiltig str\xe4ng: m\xe5ste matcha m\xf6nstret "${r.pattern}"`;return`Ogiltig(t) ${t[r.format]??r.format}`;case"not_multiple_of":return`Ogiltigt tal: m\xe5ste vara en multipel av ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"Oknda nycklar":"Oknd nyckel"}: ${e2(r.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${r.origin??"vrdet"}`;case"invalid_union":default:return"Ogiltig input";case"invalid_element":return`Ogiltigt v\xe4rde i ${r.origin??"vrdet"}`}})}},"ta",0,function(){let e,t;return{localeError:(e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},t={regex:"",email:" ",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO  ",date:"ISO ",time:"ISO ",duration:"ISO  ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:"input"},r=>{switch(r.code){case"invalid_type":return` :  ${r.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?" ":"";case"object":if(Array.isArray(e))return"";if(null===e)return"";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return` :  ${tw(r.values[0])}`;return` :  ${e2(r.values,"|")}  `;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return` :  ${r.origin??""} ${t}${r.maximum.toString()} ${n.unit??""}   `;return` :  ${r.origin??""} ${t}${r.maximum.toString()}   `}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return` :  ${r.origin} ${t}${r.minimum.toString()} ${n.unit}   `;return` :  ${r.origin} ${t}${r.minimum.toString()}   `}case"invalid_format":if("starts_with"===r.format)return` : "${r.prefix}"   `;if("ends_with"===r.format)return` : "${r.suffix}"   `;if("includes"===r.format)return` : "${r.includes}"   `;if("regex"===r.format)return` : ${r.pattern}   `;return` ${t[r.format]??r.format}`;case"not_multiple_of":return` : ${r.divisor}    `;case"unrecognized_keys":return`  ${r.keys.length>1?"":""}: ${e2(r.keys,", ")}`;case"invalid_key":return`${r.origin}   `;case"invalid_union":return" ";case"invalid_element":return`${r.origin}   `;default:return` `}})}},"th",0,function(){let e,t;return{localeError:(e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:" ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IP  IPv4",cidrv6:" IP  IPv6",base64:" Base64",base64url:" Base64  URL",json_string:" JSON",e164:" (E.164)",jwt:" JWT",template_literal:""},r=>{switch(r.code){case"invalid_type":return`:  ${r.expected}  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?" (NaN)":"";case"object":if(Array.isArray(e))return" (Array)";if(null===e)return" (null)";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`:  ${tw(r.values[0])}`;return`:  ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"":"",n=e[r.origin]??null;if(n)return`: ${r.origin??""} ${t} ${r.maximum.toString()} ${n.unit??""}`;return`: ${r.origin??""} ${t} ${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?"":"",n=e[r.origin]??null;if(n)return`: ${r.origin} ${t} ${r.minimum.toString()} ${n.unit}`;return`: ${r.origin} ${t} ${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`:  "${r.prefix}"`;if("ends_with"===r.format)return`:  "${r.suffix}"`;if("includes"===r.format)return`:  "${r.includes}" `;if("regex"===r.format)return`:  ${r.pattern}`;return`: ${t[r.format]??r.format}`;case"not_multiple_of":return`:  ${r.divisor} `;case"unrecognized_keys":return`: ${e2(r.keys,", ")}`;case"invalid_key":return` ${r.origin}`;case"invalid_union":return": ";case"invalid_element":return` ${r.origin}`;default:return``}})}},"tr",0,function(){let e,t;return{localeError:(e={string:{unit:"karakter",verb:"olmal"},file:{unit:"bayt",verb:"olmal"},array:{unit:"e",verb:"olmal"},set:{unit:"e",verb:"olmal"}},t={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO sre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral",cidrv6:"IPv6 aral",base64:"base64 ile ifrelenmi metin",base64url:"base64url ile ifrelenmi metin",json_string:"JSON dizesi",e164:"E.164 says",jwt:"JWT",template_literal:"ablon dizesi"},r=>{switch(r.code){case"invalid_type":return`Ge\xe7ersiz deer: beklenen ${r.expected}, alnan ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Ge\xe7ersiz deer: beklenen ${tw(r.values[0])}`;return`Ge\xe7ersiz se\xe7enek: aadakilerden biri olmal: ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`\xc7ok b\xfcy\xfck: beklenen ${r.origin??"deer"} ${t}${r.maximum.toString()} ${n.unit??"e"}`;return`\xc7ok b\xfcy\xfck: beklenen ${r.origin??"deer"} ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`\xc7ok k\xfc\xe7\xfck: beklenen ${r.origin} ${t}${r.minimum.toString()} ${n.unit}`;return`\xc7ok k\xfc\xe7\xfck: beklenen ${r.origin} ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Ge\xe7ersiz metin: "${r.prefix}" ile balamal`;if("ends_with"===r.format)return`Ge\xe7ersiz metin: "${r.suffix}" ile bitmeli`;if("includes"===r.format)return`Ge\xe7ersiz metin: "${r.includes}" i\xe7ermeli`;if("regex"===r.format)return`Ge\xe7ersiz metin: ${r.pattern} desenine uymal`;return`Ge\xe7ersiz ${t[r.format]??r.format}`;case"not_multiple_of":return`Ge\xe7ersiz say: ${r.divisor} ile tam b\xf6l\xfcnebilmeli`;case"unrecognized_keys":return`Tannmayan anahtar${r.keys.length>1?"lar":""}: ${e2(r.keys,", ")}`;case"invalid_key":return`${r.origin} i\xe7inde ge\xe7ersiz anahtar`;case"invalid_union":return"Geersiz deer";case"invalid_element":return`${r.origin} i\xe7inde ge\xe7ersiz deer`;default:return`Ge\xe7ersiz deer`}})}},"ua",0,function(){return an()},"uk",0,an,"ur",0,function(){let e,t;return{localeError:(e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:" ",email:"  ",url:"  ",emoji:"",uuid:"   ",uuidv4:"     4",uuidv6:"     6",nanoid:"  ",guid:"   ",cuid:"   ",cuid2:"    2",ulid:"   ",xid:"  ",ksuid:"    ",datetime:"    ",date:"   ",time:"   ",duration:"   ",ipv4:"   4 ",ipv6:"   6 ",cidrv4:"   4 ",cidrv6:"   6 ",base64:" 64   ",base64url:" 64      ",json_string:"    ",e164:" 164 ",jwt:"  ",template_literal:" "},r=>{switch(r.code){case"invalid_type":return`  : ${r.expected}   ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}  `;case"invalid_value":if(1===r.values.length)return`  : ${tw(r.values[0])}  `;return` : ${e2(r.values,"|")}     `;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return` : ${r.origin??""}  ${t}${r.maximum.toString()} ${n.unit??""}   `;return` : ${r.origin??""}  ${t}${r.maximum.toString()}   `}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return` : ${r.origin}  ${t}${r.minimum.toString()} ${n.unit}   `;return` : ${r.origin}  ${t}${r.minimum.toString()}   `}case"invalid_format":if("starts_with"===r.format)return` : "${r.prefix}"    `;if("ends_with"===r.format)return` : "${r.suffix}"    `;if("includes"===r.format)return` : "${r.includes}"   `;if("regex"===r.format)return` :  ${r.pattern}    `;return` ${t[r.format]??r.format}`;case"not_multiple_of":return` : ${r.divisor}    `;case"unrecognized_keys":return`   ${r.keys.length>1?"":""}: ${e2(r.keys," ")}`;case"invalid_key":return`${r.origin}   `;case"invalid_union":return"  ";case"invalid_element":return`${r.origin}   `;default:return`  `}})}},"vi",0,function(){let e,t;return{localeError:(e={string:{unit:"k t",verb:"c"},file:{unit:"byte",verb:"c"},array:{unit:"phn t",verb:"c"},set:{unit:"phn t",verb:"c"}},t={regex:"u vo",email:"a ch email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ngy gi ISO",date:"ngy ISO",time:"gi ISO",duration:"khong thi gian ISO",ipv4:"a ch IPv4",ipv6:"a ch IPv6",cidrv4:"di IPv4",cidrv6:"di IPv6",base64:"chui m ha base64",base64url:"chui m ha base64url",json_string:"chui JSON",e164:"s E.164",jwt:"JWT",template_literal:"u vo"},r=>{switch(r.code){case"invalid_type":return`u v\xe0o kh\xf4ng hp l: mong i ${r.expected}, nhn c ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"s";case"object":if(Array.isArray(e))return"mng";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`u v\xe0o kh\xf4ng hp l: mong i ${tw(r.values[0])}`;return`T\xf9y chn kh\xf4ng hp l: mong i mt trong c\xe1c gi\xe1 tr ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Qu\xe1 ln: mong i ${r.origin??"gi tr"} ${n.verb} ${t}${r.maximum.toString()} ${n.unit??"phn t"}`;return`Qu\xe1 ln: mong i ${r.origin??"gi tr"} ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Qu\xe1 nh: mong i ${r.origin} ${n.verb} ${t}${r.minimum.toString()} ${n.unit}`;return`Qu\xe1 nh: mong i ${r.origin} ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Chui kh\xf4ng hp l: phi bt u bng "${r.prefix}"`;if("ends_with"===r.format)return`Chui kh\xf4ng hp l: phi kt th\xfac bng "${r.suffix}"`;if("includes"===r.format)return`Chui kh\xf4ng hp l: phi bao gm "${r.includes}"`;if("regex"===r.format)return`Chui kh\xf4ng hp l: phi khp vi mu ${r.pattern}`;return`${t[r.format]??r.format} kh\xf4ng hp l`;case"not_multiple_of":return`S kh\xf4ng hp l: phi l\xe0 bi s ca ${r.divisor}`;case"unrecognized_keys":return`Kh\xf3a kh\xf4ng c nhn dng: ${e2(r.keys,", ")}`;case"invalid_key":return`Kh\xf3a kh\xf4ng hp l trong ${r.origin}`;case"invalid_union":return"u vo khng hp l";case"invalid_element":return`Gi\xe1 tr kh\xf4ng hp l trong ${r.origin}`;default:return`u v\xe0o kh\xf4ng hp l`}})}},"yo",0,function(){let e,t;return{localeError:(e={string:{unit:"mi",verb:"n"},file:{unit:"bytes",verb:"n"},array:{unit:"nkan",verb:"n"},set:{unit:"nkan",verb:"n"}},t={regex:"r bwl",email:"drs ml",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"kk ISO",date:"j ISO",time:"kk ISO",duration:"kk t p ISO",ipv4:"drs IPv4",ipv6:"drs IPv6",cidrv4:"gbgb IPv4",cidrv6:"gbgb IPv6",base64:"r t a k n base64",base64url:"r base64url",json_string:"r JSON",e164:"nmb E.164",jwt:"JWT",template_literal:"r bwl"},r=>{switch(r.code){case"invalid_type":return`\xccb\xe1wl\xe9 a\xece: a n\xed l\xe1ti fi ${r.expected}, \xe0m a r\xed ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nmb";case"object":if(Array.isArray(e))return"akop";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`\xccb\xe1wl\xe9 a\xece: a n\xed l\xe1ti fi ${tw(r.values[0])}`;return`\xc0\xe0y\xe0n a\xece: yan kan l\xe1ra ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`T\xf3 p j\xf9: a n\xed l\xe1ti j p\xe9 ${r.origin??"iye"} ${n.verb} ${t}${r.maximum} ${n.unit}`;return`T\xf3 p j\xf9: a n\xed l\xe1ti j ${t}${r.maximum}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`K\xe9r\xe9 ju: a n\xed l\xe1ti j p\xe9 ${r.origin} ${n.verb} ${t}${r.minimum} ${n.unit}`;return`K\xe9r\xe9 ju: a n\xed l\xe1ti j ${t}${r.minimum}`}case"invalid_format":if("starts_with"===r.format)return`r a\xece: gbd br pl\xfa "${r.prefix}"`;if("ends_with"===r.format)return`r a\xece: gbd par\xed pl\xfa "${r.suffix}"`;if("includes"===r.format)return`r a\xece: gbd n\xed "${r.includes}"`;if("regex"===r.format)return`r a\xece: gbd b\xe1 \xe0pr mu ${r.pattern}`;return`A\xece: ${t[r.format]??r.format}`;case"not_multiple_of":return`Nmb\xe0 a\xece: gbd j \xe8y\xe0 p\xedp\xedn ti ${r.divisor}`;case"unrecognized_keys":return`Bt\xecn\xec \xe0\xecm: ${e2(r.keys,", ")}`;case"invalid_key":return`Bt\xecn\xec a\xece n\xedn\xfa ${r.origin}`;case"invalid_union":default:return"bwl ae";case"invalid_element":return`Iye a\xece n\xedn\xfa ${r.origin}`}})}},"zhCN",0,function(){let e,t;return{localeError:(e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO",date:"ISO",time:"ISO",duration:"ISO",ipv4:"IPv4",ipv6:"IPv6",cidrv4:"IPv4",cidrv6:"IPv6",base64:"base64",base64url:"base64url",json_string:"JSON",e164:"E.164",jwt:"JWT",template_literal:""},r=>{switch(r.code){case"invalid_type":return` ${r.expected} ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"(NaN)":"";case"object":if(Array.isArray(e))return"";if(null===e)return"(null)";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return` ${tw(r.values[0])}`;return` ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return` ${r.origin??""} ${t}${r.maximum.toString()} ${n.unit??""}`;return` ${r.origin??""} ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return` ${r.origin} ${t}${r.minimum.toString()} ${n.unit}`;return` ${r.origin} ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return` "${r.prefix}" `;if("ends_with"===r.format)return` "${r.suffix}" `;if("includes"===r.format)return` "${r.includes}"`;if("regex"===r.format)return` ${r.pattern}`;return`${t[r.format]??r.format}`;case"not_multiple_of":return` ${r.divisor} `;case"unrecognized_keys":return`(key): ${e2(r.keys,", ")}`;case"invalid_key":return`${r.origin} (key)`;case"invalid_union":return"";case"invalid_element":return`${r.origin} (value)`;default:return``}})}},"zhTW",0,function(){let e,t;return{localeError:(e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:"",email:"",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64 ",base64url:"base64url ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},r=>{switch(r.code){case"invalid_type":return` ${r.expected} ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return` ${tw(r.values[0])}`;return` ${e2(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return` ${r.origin??""}  ${t}${r.maximum.toString()} ${n.unit??""}`;return` ${r.origin??""}  ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return` ${r.origin}  ${t}${r.minimum.toString()} ${n.unit}`;return` ${r.origin}  ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return` "${r.prefix}" `;if("ends_with"===r.format)return` "${r.suffix}" `;if("includes"===r.format)return` "${r.includes}"`;if("regex"===r.format)return` ${r.pattern}`;return` ${t[r.format]??r.format}`;case"not_multiple_of":return` ${r.divisor} `;case"unrecognized_keys":return`${r.keys.length>1?"":""}${e2(r.keys,"")}`;case"invalid_key":return`${r.origin} `;case"invalid_union":return"";case"invalid_element":return`${r.origin} `;default:return``}})}}],37208);var d0=e.i(37208);e.i(16661),e.i(15210),e.i(91721),e.i(58214);var d4=e.i(28740);e.s(["$ZodAny",0,ia,"$ZodArray",0,ic,"$ZodAsyncError",()=>eq,"$ZodBase64",0,nQ,"$ZodBase64URL",0,n4,"$ZodBigInt",0,n8,"$ZodBigIntFormat",0,ie,"$ZodBoolean",0,n7,"$ZodCIDRv4",0,nX,"$ZodCIDRv6",0,nH,"$ZodCUID",0,nC,"$ZodCUID2",0,nR,"$ZodCatch",0,iB,"$ZodCheck",0,nn,"$ZodCheckBigIntFormat",0,nl,"$ZodCheckEndsWith",0,nx,"$ZodCheckGreaterThan",0,no,"$ZodCheckIncludes",0,nb,"$ZodCheckLengthEquals",0,nv,"$ZodCheckLessThan",0,na,"$ZodCheckLowerCase",0,ny,"$ZodCheckMaxLength",0,nf,"$ZodCheckMaxSize",0,nd,"$ZodCheckMimeType",0,nI,"$ZodCheckMinLength",0,np,"$ZodCheckMinSize",0,nc,"$ZodCheckMultipleOf",0,ns,"$ZodCheckNumberFormat",0,nu,"$ZodCheckOverwrite",0,nS,"$ZodCheckProperty",0,nw,"$ZodCheckRegex",0,ng,"$ZodCheckSizeEquals",0,nm,"$ZodCheckStartsWith",0,n$,"$ZodCheckStringFormat",0,nh,"$ZodCheckUpperCase",0,n_,"$ZodCodec",0,iq,"$ZodCustom",0,i9,"$ZodCustomStringFormat",0,n2,"$ZodDate",0,il,"$ZodDefault",0,iR,"$ZodDiscriminatedUnion",0,ix,"$ZodE164",0,n1,"$ZodEmail",0,nE,"$ZodEmoji",0,nT,"$ZodEncodeError",()=>eX,"$ZodEnum",0,iU,"$ZodError",0,tH,"$ZodFile",0,iE,"$ZodFunction",0,i4,"$ZodGUID",0,nU,"$ZodIPv4",0,nK,"$ZodIPv6",0,nG,"$ZodISODate",0,nV,"$ZodISODateTime",0,nJ,"$ZodISODuration",0,nW,"$ZodISOTime",0,nB,"$ZodIntersection",0,ik,"$ZodJWT",0,n9,"$ZodKSUID",0,nM,"$ZodLazy",0,i6,"$ZodLiteral",0,iP,"$ZodMAC",0,nq,"$ZodMap",0,iO,"$ZodNaN",0,iW,"$ZodNanoID",0,nD,"$ZodNever",0,is,"$ZodNonOptional",0,iM,"$ZodNull",0,ii,"$ZodNullable",0,iC,"$ZodNumber",0,n3,"$ZodNumberFormat",0,n5,"$ZodObject",0,ih,"$ZodObjectJIT",0,ig,"$ZodOptional",0,iD,"$ZodPipe",0,iK,"$ZodPrefault",0,iF,"$ZodPromise",0,i1,"$ZodReadonly",0,iY,"$ZodRealError",0,tY,"$ZodRecord",0,iZ,"$ZodRegistry",()=>ao,"$ZodSet",0,ij,"$ZodString",0,nj,"$ZodStringFormat",0,nN,"$ZodSuccess",0,iV,"$ZodSymbol",0,it,"$ZodTemplateLiteral",0,i0,"$ZodTransform",0,iA,"$ZodTuple",0,iI,"$ZodType",0,nz,"$ZodULID",0,nL,"$ZodURL",0,nA,"$ZodUUID",0,nP,"$ZodUndefined",0,ir,"$ZodUnion",0,i_,"$ZodUnknown",0,io,"$ZodVoid",0,iu,"$ZodXID",0,nF,"$ZodXor",0,i$,"$brand",0,eG,"$constructor",()=>eK,"$input",0,aa,"$output",0,ai,"Doc",()=>nZ,"JSONSchema",0,d4,"JSONSchemaGenerator",()=>sV,"NEVER",0,eW,"TimePrecision",0,aE,"_any",()=>a4,"_array",()=>oZ,"_base64",()=>aj,"_base64url",()=>aN,"_bigint",()=>aG,"_boolean",()=>aW,"_catch",()=>oW,"_check",()=>o4,"_cidrv4",()=>aO,"_cidrv6",()=>az,"_coercedBigint",()=>aq,"_coercedBoolean",()=>aK,"_coercedDate",()=>a3,"_coercedNumber",()=>aL,"_coercedString",()=>ad,"_cuid",()=>ab,"_cuid2",()=>a$,"_custom",()=>oY,"_date",()=>a2,"_decode",0,ri,"_decodeAsync",0,ru,"_default",()=>oJ,"_discriminatedUnion",()=>oj,"_e164",()=>aU,"_email",()=>ac,"_emoji",()=>ay,"_encode",0,rr,"_encodeAsync",0,ro,"_endsWith",()=>oy,"_enum",()=>oT,"_file",()=>oR,"_float32",()=>aM,"_float64",()=>aJ,"_gt",()=>oe,"_gte",()=>ot,"_guid",()=>am,"_includes",()=>oh,"_int",()=>aF,"_int32",()=>aV,"_int64",()=>aX,"_intersection",()=>oN,"_ipv4",()=>aI,"_ipv6",()=>aS,"_isoDate",()=>aT,"_isoDateTime",()=>aA,"_isoDuration",()=>aC,"_isoTime",()=>aD,"_jwt",()=>aP,"_ksuid",()=>aw,"_lazy",()=>oX,"_length",()=>om,"_literal",()=>oC,"_lowercase",()=>op,"_lt",()=>a7,"_lte",()=>a8,"_mac",()=>aZ,"_map",()=>oE,"_max",()=>a8,"_maxLength",()=>od,"_maxSize",()=>os,"_mime",()=>ob,"_min",()=>ot,"_minLength",()=>oc,"_minSize",()=>ou,"_multipleOf",()=>oo,"_nan",()=>a5,"_nanoid",()=>a_,"_nativeEnum",()=>oD,"_negative",()=>on,"_never",()=>a6,"_nonnegative",()=>oa,"_nonoptional",()=>oV,"_nonpositive",()=>oi,"_normalize",()=>ox,"_null",()=>a0,"_nullable",()=>oM,"_number",()=>aR,"_optional",()=>oF,"_overwrite",()=>o$,"_parse",0,t9,"_parseAsync",0,t3,"_pipe",()=>oK,"_positive",()=>or,"_promise",()=>oH,"_property",()=>o_,"_readonly",()=>oG,"_record",()=>oP,"_refine",()=>oQ,"_regex",()=>of,"_safeDecode",0,rm,"_safeDecodeAsync",0,rh,"_safeEncode",0,rd,"_safeEncodeAsync",0,rp,"_safeParse",0,t7,"_safeParseAsync",0,re,"_set",()=>oA,"_size",()=>ol,"_slugify",()=>oS,"_startsWith",()=>og,"_string",()=>al,"_stringFormat",()=>o2,"_stringbool",()=>o9,"_success",()=>oB,"_superRefine",()=>o0,"_symbol",()=>aY,"_templateLiteral",()=>oq,"_toLowerCase",()=>ow,"_toUpperCase",()=>oI,"_transform",()=>oL,"_trim",()=>ok,"_tuple",()=>oU,"_uint32",()=>aB,"_uint64",()=>aH,"_ulid",()=>ax,"_undefined",()=>aQ,"_union",()=>oO,"_unknown",()=>a1,"_uppercase",()=>ov,"_url",()=>ag,"_uuid",()=>af,"_uuidv4",()=>ap,"_uuidv6",()=>av,"_uuidv7",()=>ah,"_void",()=>a9,"_xid",()=>ak,"_xor",()=>oz,"clone",()=>t$,"config",()=>eY,"createStandardJSONSchemaMethod",0,st,"createToJSONSchemaMethod",0,se,"decode",0,ra,"decodeAsync",0,rl,"describe",()=>o1,"encode",0,rn,"encodeAsync",0,rs,"extractDefs",()=>o7,"finalize",()=>o8,"flattenError",()=>tQ,"formatError",()=>t0,"globalConfig",0,eH,"globalRegistry",0,au,"initializeContext",()=>o3,"isValidBase64",()=>nY,"isValidBase64URL",()=>n0,"isValidJWT",()=>n6,"locales",0,d0,"meta",()=>o6,"parse",0,t2,"parseAsync",0,t5,"prettifyError",()=>t6,"process",()=>o5,"regexes",0,dQ,"registry",()=>as,"safeDecode",0,rf,"safeDecodeAsync",0,rg,"safeEncode",0,rc,"safeEncodeAsync",0,rv,"safeParse",0,t8,"safeParseAsync",0,rt,"toDotPath",()=>t1,"toJSONSchema",()=>sJ,"treeifyError",()=>t4,"util",0,dY,"version",0,nO],20168);var d1=e.i(20168);e.i(10419),e.i(27632),e.i(1583),e.s(["$brand",0,eG,"ZodFirstPartyTypeKind",()=>E,"ZodIssueCode",0,dL,"config",()=>eY,"getErrorMap",()=>dM,"setErrorMap",()=>dF],2102),e.i(2102);var sB=sB,sW=sW,d6=e.i(52591);e.s(["$brand",0,eG,"$input",0,aa,"$output",0,ai,"NEVER",0,eW,"TimePrecision",0,aE,"ZodAny",0,lg,"ZodArray",0,lZ,"ZodBase64",0,uK,"ZodBase64URL",0,uq,"ZodBigInt",0,lo,"ZodBigIntFormat",0,lu,"ZodBoolean",0,li,"ZodCIDRv4",0,uJ,"ZodCIDRv6",0,uB,"ZodCUID",0,uZ,"ZodCUID2",0,uz,"ZodCatch",0,dc,"ZodCodec",0,dg,"ZodCustom",0,dz,"ZodCustomStringFormat",0,u4,"ZodDate",0,lI,"ZodDefault",0,dr,"ZodDiscriminatedUnion",0,lC,"ZodE164",0,uH,"ZodEmail",0,uc,"ZodEmoji",0,uk,"ZodEnum",0,lY,"ZodError",0,s1,"ZodFile",0,l6,"ZodFirstPartyTypeKind",()=>E,"ZodFunction",0,dZ,"ZodGUID",0,uf,"ZodIPv4",0,uD,"ZodIPv6",0,uF,"ZodISODate",0,sq,"ZodISODateTime",0,sK,"ZodISODuration",0,sQ,"ZodISOTime",0,sH,"ZodIntersection",0,lL,"ZodIssueCode",0,dL,"ZodJWT",0,uQ,"ZodKSUID",0,uA,"ZodLazy",0,dk,"ZodLiteral",0,l4,"ZodMAC",0,uR,"ZodMap",0,lG,"ZodNaN",0,df,"ZodNanoID",0,uI,"ZodNever",0,l$,"ZodNonOptional",0,ds,"ZodNull",0,lv,"ZodNullable",0,l8,"ZodNumber",0,u3,"ZodNumberFormat",0,u7,"ZodObject",0,lj,"ZodOptional",0,l5,"ZodPipe",0,dv,"ZodPrefault",0,di,"ZodPromise",0,dI,"ZodReadonly",0,d_,"ZodRealError",0,s6,"ZodRecord",0,lV,"ZodSet",0,lX,"ZodString",0,uu,"ZodStringFormat",0,ud,"ZodSuccess",0,dl,"ZodSymbol",0,lc,"ZodTemplateLiteral",0,d$,"ZodTransform",0,l2,"ZodTuple",0,lM,"ZodType",0,uo,"ZodULID",0,uN,"ZodURL",0,ub,"ZodUUID",0,uv,"ZodUndefined",0,lf,"ZodUnion",0,lE,"ZodUnknown",0,l_,"ZodVoid",0,lk,"ZodXID",0,uP,"ZodXor",0,lT,"_ZodString",0,us,"_default",()=>dn,"_function",()=>dO,"any",()=>ly,"array",()=>lO,"base64",()=>uG,"base64url",()=>uX,"bigint",()=>ls,"boolean",()=>la,"catch",()=>dm,"check",()=>dj,"cidrv4",()=>uV,"cidrv6",()=>uW,"clone",()=>t$,"codec",()=>dy,"coerce",0,d6,"config",()=>eY,"core",0,d1,"cuid",()=>uO,"cuid2",()=>uj,"custom",()=>dN,"date",()=>lS,"decode",0,s8,"decodeAsync",0,ut,"describe",0,dE,"discriminatedUnion",()=>lR,"e164",()=>uY,"email",()=>um,"emoji",()=>uw,"encode",0,s7,"encodeAsync",0,ue,"endsWith",()=>oy,"enum",()=>lQ,"file",()=>l9,"flattenError",()=>tQ,"float32",()=>le,"float64",()=>lt,"formatError",()=>t0,"fromJSONSchema",()=>dW,"function",()=>dO,"getErrorMap",()=>dM,"globalRegistry",0,au,"gt",()=>oe,"gte",()=>ot,"guid",()=>up,"hash",()=>u2,"hex",()=>u9,"hostname",()=>u6,"httpUrl",()=>ux,"includes",()=>oh,"instanceof",()=>dT,"int",()=>u8,"int32",()=>lr,"int64",()=>ll,"intersection",()=>lF,"ipv4",()=>uC,"ipv6",()=>uM,"iso",0,dV,"json",()=>dC,"jwt",()=>u0,"keyof",()=>lz,"ksuid",()=>uT,"lazy",()=>dw,"length",()=>om,"literal",()=>l1,"locales",0,d0,"looseObject",()=>lP,"looseRecord",()=>lK,"lowercase",()=>op,"lt",()=>a7,"lte",()=>a8,"mac",()=>uL,"map",()=>lq,"maxLength",()=>od,"maxSize",()=>os,"meta",0,dA,"mime",()=>ob,"minLength",()=>oc,"minSize",()=>ou,"multipleOf",()=>oo,"nan",()=>dp,"nanoid",()=>uS,"nativeEnum",()=>l0,"negative",()=>on,"never",()=>lx,"nonnegative",()=>oa,"nonoptional",()=>du,"nonpositive",()=>oi,"normalize",()=>ox,"null",()=>lh,"nullable",()=>de,"nullish",()=>dt,"number",()=>u5,"object",()=>lN,"optional",()=>l7,"overwrite",()=>o$,"parse",0,s9,"parseAsync",0,s2,"partialRecord",()=>lW,"pipe",()=>dh,"positive",()=>or,"prefault",()=>da,"preprocess",()=>dR,"prettifyError",()=>t6,"promise",()=>dS,"property",()=>o_,"readonly",()=>db,"record",()=>lB,"refine",()=>dU,"regex",()=>of,"regexes",()=>sB,"registry",()=>as,"safeDecode",0,un,"safeDecodeAsync",0,ua,"safeEncode",0,ur,"safeEncodeAsync",0,ui,"safeParse",0,s3,"safeParseAsync",0,s5,"set",()=>lH,"setErrorMap",()=>dF,"size",()=>ol,"slugify",()=>oS,"startsWith",()=>og,"strictObject",()=>lU,"string",()=>ul,"stringFormat",()=>u1,"stringbool",0,dD,"success",()=>dd,"superRefine",()=>dP,"symbol",()=>lm,"templateLiteral",()=>dx,"toJSONSchema",()=>sJ,"toLowerCase",()=>ow,"toUpperCase",()=>oI,"transform",()=>l3,"treeifyError",()=>t4,"trim",()=>ok,"tuple",()=>lJ,"uint32",()=>ln,"uint64",()=>ld,"ulid",()=>uU,"undefined",()=>lp,"union",()=>lA,"unknown",()=>lb,"uppercase",()=>ov,"url",()=>u$,"util",()=>sW,"uuid",()=>uh,"uuidv4",()=>ug,"uuidv6",()=>uy,"uuidv7",()=>u_,"void",()=>lw,"xid",()=>uE,"xor",()=>lD],8891);var d9=e.i(8891);e.s(["default",0,d9],35079),e.s([],6508),(r=A||(A={})).assertEqual=e=>{},r.assertIs=function(e){},r.assertNever=function(e){throw Error()},r.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},r.getValidEnumValues=e=>{let t=r.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),n={};for(let r of t)n[r]=e[r];return r.objectValues(n)},r.objectValues=e=>r.objectKeys(e).map(function(t){return e[t]}),r.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},r.find=(e,t)=>{for(let r of e)if(t(r))return r},r.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,r.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},r.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(T||(T={})).mergeShapes=(e,t)=>({...e,...t});let d2=A.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),d3=e=>{switch(typeof e){case"undefined":return d2.undefined;case"string":return d2.string;case"number":return Number.isNaN(e)?d2.nan:d2.number;case"boolean":return d2.boolean;case"function":return d2.function;case"bigint":return d2.bigint;case"symbol":return d2.symbol;case"object":if(Array.isArray(e))return d2.array;if(null===e)return d2.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return d2.promise;if("undefined"!=typeof Map&&e instanceof Map)return d2.map;if("undefined"!=typeof Set&&e instanceof Set)return d2.set;if("undefined"!=typeof Date&&e instanceof Date)return d2.date;return d2.object;default:return d2.unknown}};e.s(["ZodParsedType",0,d2,"getParsedType",0,d3,"objectUtil",()=>T,"util",()=>A],4760);let d5=A.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),d7=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class d8 extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(let i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){let r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof d8))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,A.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t=Object.create(null),r=[];for(let n of this.issues)if(n.path.length>0){let r=n.path[0];t[r]=t[r]||[],t[r].push(e(n))}else r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}d8.create=e=>new d8(e),e.s(["ZodError",()=>d8,"ZodIssueCode",0,d5,"quotelessJson",0,d7],13458);let ce=(e,t)=>{let r;switch(e.code){case d5.invalid_type:r=e.received===d2.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case d5.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,A.jsonStringifyReplacer)}`;break;case d5.unrecognized_keys:r=`Unrecognized key(s) in object: ${A.joinValues(e.keys,", ")}`;break;case d5.invalid_union:r="Invalid input";break;case d5.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${A.joinValues(e.options)}`;break;case d5.invalid_enum_value:r=`Invalid enum value. Expected ${A.joinValues(e.options)}, received '${e.received}'`;break;case d5.invalid_arguments:r="Invalid function arguments";break;case d5.invalid_return_type:r="Invalid function return type";break;case d5.invalid_date:r="Invalid date";break;case d5.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:A.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case d5.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case d5.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case d5.custom:r="Invalid input";break;case d5.invalid_intersection_types:r="Intersection results could not be merged";break;case d5.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case d5.not_finite:r="Number must be finite";break;default:r=t.defaultError,A.assertNever(e)}return{message:r}},ct=ce;function cr(e){ct=e}function cn(){return ct}e.s(["getErrorMap",()=>cn,"setErrorMap",()=>cr],3536);let ci=e=>{let{data:t,path:r,errorMaps:n,issueData:i}=e,a=[...r,...i.path||[]],o={...i,path:a};if(void 0!==i.message)return{...i,path:a,message:i.message};let s="";for(let e of n.filter(e=>!!e).slice().reverse())s=e(o,{data:t,defaultError:s}).message;return{...i,path:a,message:s}},ca=[];function co(e,t){let r=ct,n=ci({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===ce?void 0:ce].filter(e=>!!e)});e.common.issues.push(n)}class cs{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let n of t){if("aborted"===n.status)return cu;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,n=await e.value;r.push({key:t,value:n})}return cs.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let n of t){let{key:t,value:i}=n;if("aborted"===t.status||"aborted"===i.status)return cu;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==i.value||n.alwaysSet)&&(r[t.value]=i.value)}return{status:e.value,value:r}}}let cu=Object.freeze({status:"aborted"}),cl=e=>({status:"dirty",value:e}),cd=e=>({status:"valid",value:e}),cc=e=>"aborted"===e.status,cm=e=>"dirty"===e.status,cf=e=>"valid"===e.status,cp=e=>"undefined"!=typeof Promise&&e instanceof Promise;e.s(["DIRTY",0,cl,"EMPTY_PATH",0,ca,"INVALID",0,cu,"OK",0,cd,"ParseStatus",()=>cs,"addIssueToContext",()=>co,"isAborted",0,cc,"isAsync",0,cp,"isDirty",0,cm,"isValid",0,cf,"makeIssue",0,ci],63922),e.s([],89402),(n=D||(D={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},n.toString=e=>"string"==typeof e?e:e?.message;class cv{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let ch=(e,t)=>{if(cf(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new d8(e.common.issues);return this._error=t,this._error}}};function cg(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(t,i)=>{let{message:a}=e;return"invalid_enum_value"===t.code?{message:a??i.defaultError}:void 0===i.data?{message:a??n??i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:a??r??i.defaultError}},description:i}}class cy{get description(){return this._def.description}_getType(e){return d3(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:d3(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new cs,ctx:{common:e.parent.common,data:e.data,parsedType:d3(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(cp(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){let r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:d3(e)},n=this._parseSync({data:e,path:r.path,parent:r});return ch(r,n)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:d3(e)};if(!this["~standard"].async)try{let r=this._parseSync({data:e,path:[],parent:t});return cf(r)?{value:r.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>cf(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:d3(e)},n=this._parse({data:e,path:r.path,parent:r});return ch(r,await (cp(n)?n:Promise.resolve(n)))}refine(e,t){return this._refinement((r,n)=>{let i=e(r),a=()=>n.addIssue({code:d5.custom,..."string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(r):t});return"undefined"!=typeof Promise&&i instanceof Promise?i.then(e=>!!e||(a(),!1)):!!i||(a(),!1)})}refinement(e,t){return this._refinement((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1))}_refinement(e){return new mr({schema:this,typeName:C.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return mn.create(this,this._def)}nullable(){return mi.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return cq.create(this)}promise(){return mt.create(this,this._def)}or(e){return cH.create([this,e],this._def)}and(e){return c0.create(this,e,this._def)}transform(e){return new mr({...cg(this._def),schema:this,typeName:C.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new ma({...cg(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:C.ZodDefault})}brand(){return new ml({typeName:C.ZodBranded,type:this,...cg(this._def)})}catch(e){return new mo({...cg(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:C.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return md.create(this,e)}readonly(){return mc.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let c_=/^c[^\s-]{8,}$/i,cb=/^[0-9a-z]+$/,c$=/^[0-9A-HJKMNP-TV-Z]{26}$/i,cx=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ck=/^[a-z0-9_-]{21}$/i,cw=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,cI=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,cS=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,cZ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,cO=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,cz=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,cj=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,cN=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,cU=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,cP="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",cE=RegExp(`^${cP}$`);function cA(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);let r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function cT(e){let t=`${cP}T${cA(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)}class cD extends cy{_parse(e){var r,n,i,a;let o;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==d2.string){let t=this._getOrReturnCtx(e);return co(t,{code:d5.invalid_type,expected:d2.string,received:t.parsedType}),cu}let s=new cs;for(let u of this._def.checks)if("min"===u.kind)e.data.length<u.value&&(co(o=this._getOrReturnCtx(e,o),{code:d5.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),s.dirty());else if("max"===u.kind)e.data.length>u.value&&(co(o=this._getOrReturnCtx(e,o),{code:d5.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),s.dirty());else if("length"===u.kind){let t=e.data.length>u.value,r=e.data.length<u.value;(t||r)&&(o=this._getOrReturnCtx(e,o),t?co(o,{code:d5.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}):r&&co(o,{code:d5.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}),s.dirty())}else if("email"===u.kind)cS.test(e.data)||(co(o=this._getOrReturnCtx(e,o),{validation:"email",code:d5.invalid_string,message:u.message}),s.dirty());else if("emoji"===u.kind)t||(t=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),t.test(e.data)||(co(o=this._getOrReturnCtx(e,o),{validation:"emoji",code:d5.invalid_string,message:u.message}),s.dirty());else if("uuid"===u.kind)cx.test(e.data)||(co(o=this._getOrReturnCtx(e,o),{validation:"uuid",code:d5.invalid_string,message:u.message}),s.dirty());else if("nanoid"===u.kind)ck.test(e.data)||(co(o=this._getOrReturnCtx(e,o),{validation:"nanoid",code:d5.invalid_string,message:u.message}),s.dirty());else if("cuid"===u.kind)c_.test(e.data)||(co(o=this._getOrReturnCtx(e,o),{validation:"cuid",code:d5.invalid_string,message:u.message}),s.dirty());else if("cuid2"===u.kind)cb.test(e.data)||(co(o=this._getOrReturnCtx(e,o),{validation:"cuid2",code:d5.invalid_string,message:u.message}),s.dirty());else if("ulid"===u.kind)c$.test(e.data)||(co(o=this._getOrReturnCtx(e,o),{validation:"ulid",code:d5.invalid_string,message:u.message}),s.dirty());else if("url"===u.kind)try{new URL(e.data)}catch{co(o=this._getOrReturnCtx(e,o),{validation:"url",code:d5.invalid_string,message:u.message}),s.dirty()}else"regex"===u.kind?(u.regex.lastIndex=0,u.regex.test(e.data)||(co(o=this._getOrReturnCtx(e,o),{validation:"regex",code:d5.invalid_string,message:u.message}),s.dirty())):"trim"===u.kind?e.data=e.data.trim():"includes"===u.kind?e.data.includes(u.value,u.position)||(co(o=this._getOrReturnCtx(e,o),{code:d5.invalid_string,validation:{includes:u.value,position:u.position},message:u.message}),s.dirty()):"toLowerCase"===u.kind?e.data=e.data.toLowerCase():"toUpperCase"===u.kind?e.data=e.data.toUpperCase():"startsWith"===u.kind?e.data.startsWith(u.value)||(co(o=this._getOrReturnCtx(e,o),{code:d5.invalid_string,validation:{startsWith:u.value},message:u.message}),s.dirty()):"endsWith"===u.kind?e.data.endsWith(u.value)||(co(o=this._getOrReturnCtx(e,o),{code:d5.invalid_string,validation:{endsWith:u.value},message:u.message}),s.dirty()):"datetime"===u.kind?cT(u).test(e.data)||(co(o=this._getOrReturnCtx(e,o),{code:d5.invalid_string,validation:"datetime",message:u.message}),s.dirty()):"date"===u.kind?cE.test(e.data)||(co(o=this._getOrReturnCtx(e,o),{code:d5.invalid_string,validation:"date",message:u.message}),s.dirty()):"time"===u.kind?RegExp(`^${cA(u)}$`).test(e.data)||(co(o=this._getOrReturnCtx(e,o),{code:d5.invalid_string,validation:"time",message:u.message}),s.dirty()):"duration"===u.kind?cI.test(e.data)||(co(o=this._getOrReturnCtx(e,o),{validation:"duration",code:d5.invalid_string,message:u.message}),s.dirty()):"ip"===u.kind?(r=e.data,!(("v4"===(n=u.version)||!n)&&cZ.test(r)||("v6"===n||!n)&&cz.test(r))&&1&&(co(o=this._getOrReturnCtx(e,o),{validation:"ip",code:d5.invalid_string,message:u.message}),s.dirty())):"jwt"===u.kind?!function(e,t){if(!cw.test(e))return!1;try{let[r]=e.split(".");if(!r)return!1;let n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));if("object"!=typeof i||null===i||"typ"in i&&i?.typ!=="JWT"||!i.alg||t&&i.alg!==t)return!1;return!0}catch{return!1}}(e.data,u.alg)&&(co(o=this._getOrReturnCtx(e,o),{validation:"jwt",code:d5.invalid_string,message:u.message}),s.dirty()):"cidr"===u.kind?(i=e.data,!(("v4"===(a=u.version)||!a)&&cO.test(i)||("v6"===a||!a)&&cj.test(i))&&1&&(co(o=this._getOrReturnCtx(e,o),{validation:"cidr",code:d5.invalid_string,message:u.message}),s.dirty())):"base64"===u.kind?cN.test(e.data)||(co(o=this._getOrReturnCtx(e,o),{validation:"base64",code:d5.invalid_string,message:u.message}),s.dirty()):"base64url"===u.kind?cU.test(e.data)||(co(o=this._getOrReturnCtx(e,o),{validation:"base64url",code:d5.invalid_string,message:u.message}),s.dirty()):A.assertNever(u);return{status:s.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:d5.invalid_string,...D.errToObj(r)})}_addCheck(e){return new cD({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...D.errToObj(e)})}url(e){return this._addCheck({kind:"url",...D.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...D.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...D.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...D.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...D.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...D.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...D.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...D.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...D.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...D.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...D.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...D.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...D.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...D.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...D.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...D.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...D.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...D.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...D.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...D.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...D.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...D.errToObj(t)})}nonempty(e){return this.min(1,D.errToObj(e))}trim(){return new cD({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new cD({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new cD({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}cD.create=e=>new cD({checks:[],typeName:C.ZodString,coerce:e?.coerce??!1,...cg(e)});class cC extends cy{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==d2.number){let t=this._getOrReturnCtx(e);return co(t,{code:d5.invalid_type,expected:d2.number,received:t.parsedType}),cu}let r=new cs;for(let n of this._def.checks)"int"===n.kind?A.isInteger(e.data)||(co(t=this._getOrReturnCtx(e,t),{code:d5.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(co(t=this._getOrReturnCtx(e,t),{code:d5.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(co(t=this._getOrReturnCtx(e,t),{code:d5.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/10**i}(e.data,n.value)&&(co(t=this._getOrReturnCtx(e,t),{code:d5.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(co(t=this._getOrReturnCtx(e,t),{code:d5.not_finite,message:n.message}),r.dirty()):A.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,D.toString(t))}gt(e,t){return this.setLimit("min",e,!1,D.toString(t))}lte(e,t){return this.setLimit("max",e,!0,D.toString(t))}lt(e,t){return this.setLimit("max",e,!1,D.toString(t))}setLimit(e,t,r,n){return new cC({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:D.toString(n)}]})}_addCheck(e){return new cC({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:D.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:D.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:D.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:D.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:D.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:D.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:D.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:D.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:D.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&A.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks)if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;else"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value);return Number.isFinite(t)&&Number.isFinite(e)}}cC.create=e=>new cC({checks:[],typeName:C.ZodNumber,coerce:e?.coerce||!1,...cg(e)});class cR extends cy{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==d2.bigint)return this._getInvalidInput(e);let r=new cs;for(let n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(co(t=this._getOrReturnCtx(e,t),{code:d5.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(co(t=this._getOrReturnCtx(e,t),{code:d5.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(co(t=this._getOrReturnCtx(e,t),{code:d5.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):A.assertNever(n);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return co(t,{code:d5.invalid_type,expected:d2.bigint,received:t.parsedType}),cu}gte(e,t){return this.setLimit("min",e,!0,D.toString(t))}gt(e,t){return this.setLimit("min",e,!1,D.toString(t))}lte(e,t){return this.setLimit("max",e,!0,D.toString(t))}lt(e,t){return this.setLimit("max",e,!1,D.toString(t))}setLimit(e,t,r,n){return new cR({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:D.toString(n)}]})}_addCheck(e){return new cR({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:D.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:D.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:D.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:D.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:D.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}cR.create=e=>new cR({checks:[],typeName:C.ZodBigInt,coerce:e?.coerce??!1,...cg(e)});class cL extends cy{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==d2.boolean){let t=this._getOrReturnCtx(e);return co(t,{code:d5.invalid_type,expected:d2.boolean,received:t.parsedType}),cu}return cd(e.data)}}cL.create=e=>new cL({typeName:C.ZodBoolean,coerce:e?.coerce||!1,...cg(e)});class cF extends cy{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==d2.date){let t=this._getOrReturnCtx(e);return co(t,{code:d5.invalid_type,expected:d2.date,received:t.parsedType}),cu}if(Number.isNaN(e.data.getTime()))return co(this._getOrReturnCtx(e),{code:d5.invalid_date}),cu;let r=new cs;for(let n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(co(t=this._getOrReturnCtx(e,t),{code:d5.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),r.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(co(t=this._getOrReturnCtx(e,t),{code:d5.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),r.dirty()):A.assertNever(n);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new cF({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:D.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:D.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}cF.create=e=>new cF({checks:[],coerce:e?.coerce||!1,typeName:C.ZodDate,...cg(e)});class cM extends cy{_parse(e){if(this._getType(e)!==d2.symbol){let t=this._getOrReturnCtx(e);return co(t,{code:d5.invalid_type,expected:d2.symbol,received:t.parsedType}),cu}return cd(e.data)}}cM.create=e=>new cM({typeName:C.ZodSymbol,...cg(e)});class cJ extends cy{_parse(e){if(this._getType(e)!==d2.undefined){let t=this._getOrReturnCtx(e);return co(t,{code:d5.invalid_type,expected:d2.undefined,received:t.parsedType}),cu}return cd(e.data)}}cJ.create=e=>new cJ({typeName:C.ZodUndefined,...cg(e)});class cV extends cy{_parse(e){if(this._getType(e)!==d2.null){let t=this._getOrReturnCtx(e);return co(t,{code:d5.invalid_type,expected:d2.null,received:t.parsedType}),cu}return cd(e.data)}}cV.create=e=>new cV({typeName:C.ZodNull,...cg(e)});class cB extends cy{constructor(){super(...arguments),this._any=!0}_parse(e){return cd(e.data)}}cB.create=e=>new cB({typeName:C.ZodAny,...cg(e)});class cW extends cy{constructor(){super(...arguments),this._unknown=!0}_parse(e){return cd(e.data)}}cW.create=e=>new cW({typeName:C.ZodUnknown,...cg(e)});class cK extends cy{_parse(e){let t=this._getOrReturnCtx(e);return co(t,{code:d5.invalid_type,expected:d2.never,received:t.parsedType}),cu}}cK.create=e=>new cK({typeName:C.ZodNever,...cg(e)});class cG extends cy{_parse(e){if(this._getType(e)!==d2.undefined){let t=this._getOrReturnCtx(e);return co(t,{code:d5.invalid_type,expected:d2.void,received:t.parsedType}),cu}return cd(e.data)}}cG.create=e=>new cG({typeName:C.ZodVoid,...cg(e)});class cq extends cy{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==d2.array)return co(t,{code:d5.invalid_type,expected:d2.array,received:t.parsedType}),cu;if(null!==n.exactLength){let e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&(co(t,{code:e?d5.too_big:d5.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(co(t,{code:d5.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(co(t,{code:d5.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>n.type._parseAsync(new cv(t,e,t.path,r)))).then(e=>cs.mergeArray(r,e));let i=[...t.data].map((e,r)=>n.type._parseSync(new cv(t,e,t.path,r)));return cs.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new cq({...this._def,minLength:{value:e,message:D.toString(t)}})}max(e,t){return new cq({...this._def,maxLength:{value:e,message:D.toString(t)}})}length(e,t){return new cq({...this._def,exactLength:{value:e,message:D.toString(t)}})}nonempty(e){return this.min(1,e)}}cq.create=(e,t)=>new cq({type:e,minLength:null,maxLength:null,exactLength:null,typeName:C.ZodArray,...cg(t)});class cX extends cy{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=A.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==d2.object){let t=this._getOrReturnCtx(e);return co(t,{code:d5.invalid_type,expected:d2.object,received:t.parsedType}),cu}let{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),a=[];if(!(this._def.catchall instanceof cK&&"strip"===this._def.unknownKeys))for(let e in r.data)i.includes(e)||a.push(e);let o=[];for(let e of i){let t=n[e],i=r.data[e];o.push({key:{status:"valid",value:e},value:t._parse(new cv(r,i,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof cK){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of a)o.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)a.length>0&&(co(r,{code:d5.unrecognized_keys,keys:a}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of a){let n=r.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new cv(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of o){let r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>cs.mergeObjectSync(t,e)):cs.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(e){return D.errToObj,new cX({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{let n=this._def.errorMap?.(t,r).message??r.defaultError;return"unrecognized_keys"===t.code?{message:D.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new cX({...this._def,unknownKeys:"strip"})}passthrough(){return new cX({...this._def,unknownKeys:"passthrough"})}extend(e){return new cX({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new cX({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:C.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new cX({...this._def,catchall:e})}pick(e){let t={};for(let r of A.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new cX({...this._def,shape:()=>t})}omit(e){let t={};for(let r of A.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new cX({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof cX){let r={};for(let n in t.shape){let i=t.shape[n];r[n]=mn.create(e(i))}return new cX({...t._def,shape:()=>r})}if(t instanceof cq)return new cq({...t._def,type:e(t.element)});if(t instanceof mn)return mn.create(e(t.unwrap()));if(t instanceof mi)return mi.create(e(t.unwrap()));if(t instanceof c4)return c4.create(t.items.map(t=>e(t)));else return t}(this)}partial(e){let t={};for(let r of A.objectKeys(this.shape)){let n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}return new cX({...this._def,shape:()=>t})}required(e){let t={};for(let r of A.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof mn;)e=e._def.innerType;t[r]=e}return new cX({...this._def,shape:()=>t})}keyof(){return c7(A.objectKeys(this.shape))}}cX.create=(e,t)=>new cX({shape:()=>e,unknownKeys:"strip",catchall:cK.create(),typeName:C.ZodObject,...cg(t)}),cX.strictCreate=(e,t)=>new cX({shape:()=>e,unknownKeys:"strict",catchall:cK.create(),typeName:C.ZodObject,...cg(t)}),cX.lazycreate=(e,t)=>new cX({shape:e,unknownKeys:"strip",catchall:cK.create(),typeName:C.ZodObject,...cg(t)});class cH extends cy{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new d8(e.ctx.common.issues));return co(t,{code:d5.invalid_union,unionErrors:r}),cu});{let e,n=[];for(let i of r){let r={...t,common:{...t.common,issues:[]},parent:null},a=i._parseSync({data:t.data,path:t.path,parent:r});if("valid"===a.status)return a;"dirty"!==a.status||e||(e={result:a,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let i=n.map(e=>new d8(e));return co(t,{code:d5.invalid_union,unionErrors:i}),cu}}get options(){return this._def.options}}cH.create=(e,t)=>new cH({options:e,typeName:C.ZodUnion,...cg(t)});let cY=e=>{if(e instanceof c3)return cY(e.schema);if(e instanceof mr)return cY(e.innerType());if(e instanceof c5)return[e.value];if(e instanceof c8)return e.options;if(e instanceof me)return A.objectValues(e.enum);else if(e instanceof ma)return cY(e._def.innerType);else if(e instanceof cJ)return[void 0];else if(e instanceof cV)return[null];else if(e instanceof mn)return[void 0,...cY(e.unwrap())];else if(e instanceof mi)return[null,...cY(e.unwrap())];else if(e instanceof ml)return cY(e.unwrap());else if(e instanceof mc)return cY(e.unwrap());else if(e instanceof mo)return cY(e._def.innerType);else return[]};class cQ extends cy{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==d2.object)return co(t,{code:d5.invalid_type,expected:d2.object,received:t.parsedType}),cu;let r=this.discriminator,n=t.data[r],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(co(t,{code:d5.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),cu)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let n=new Map;for(let r of t){let t=cY(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let i of t){if(n.has(i))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);n.set(i,r)}}return new cQ({typeName:C.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...cg(r)})}}class c0 extends cy{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(cc(e)||cc(n))return cu;let i=function e(t,r){let n=d3(t),i=d3(r);if(t===r)return{valid:!0,data:t};if(n===d2.object&&i===d2.object){let n=A.objectKeys(r),i=A.objectKeys(t).filter(e=>-1!==n.indexOf(e)),a={...t,...r};for(let n of i){let i=e(t[n],r[n]);if(!i.valid)return{valid:!1};a[n]=i.data}return{valid:!0,data:a}}if(n===d2.array&&i===d2.array){if(t.length!==r.length)return{valid:!1};let n=[];for(let i=0;i<t.length;i++){let a=e(t[i],r[i]);if(!a.valid)return{valid:!1};n.push(a.data)}return{valid:!0,data:n}}if(n===d2.date&&i===d2.date&&+t==+r)return{valid:!0,data:t};return{valid:!1}}(e.value,n.value);return i.valid?((cm(e)||cm(n))&&t.dirty(),{status:t.value,value:i.data}):(co(r,{code:d5.invalid_intersection_types}),cu)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}c0.create=(e,t,r)=>new c0({left:e,right:t,typeName:C.ZodIntersection,...cg(r)});class c4 extends cy{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==d2.array)return co(r,{code:d5.invalid_type,expected:d2.array,received:r.parsedType}),cu;if(r.data.length<this._def.items.length)return co(r,{code:d5.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),cu;!this._def.rest&&r.data.length>this._def.items.length&&(co(r,{code:d5.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let n=[...r.data].map((e,t)=>{let n=this._def.items[t]||this._def.rest;return n?n._parse(new cv(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(n).then(e=>cs.mergeArray(t,e)):cs.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new c4({...this._def,rest:e})}}c4.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new c4({items:e,typeName:C.ZodTuple,rest:null,...cg(t)})};class c1 extends cy{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==d2.object)return co(r,{code:d5.invalid_type,expected:d2.object,received:r.parsedType}),cu;let n=[],i=this._def.keyType,a=this._def.valueType;for(let e in r.data)n.push({key:i._parse(new cv(r,e,r.path,e)),value:a._parse(new cv(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?cs.mergeObjectAsync(t,n):cs.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new c1(t instanceof cy?{keyType:e,valueType:t,typeName:C.ZodRecord,...cg(r)}:{keyType:cD.create(),valueType:e,typeName:C.ZodRecord,...cg(t)})}}class c6 extends cy{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==d2.map)return co(r,{code:d5.invalid_type,expected:d2.map,received:r.parsedType}),cu;let n=this._def.keyType,i=this._def.valueType,a=[...r.data.entries()].map(([e,t],a)=>({key:n._parse(new cv(r,e,r.path,[a,"key"])),value:i._parse(new cv(r,t,r.path,[a,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of a){let n=await r.key,i=await r.value;if("aborted"===n.status||"aborted"===i.status)return cu;("dirty"===n.status||"dirty"===i.status)&&t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of a){let n=r.key,i=r.value;if("aborted"===n.status||"aborted"===i.status)return cu;("dirty"===n.status||"dirty"===i.status)&&t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}}c6.create=(e,t,r)=>new c6({valueType:t,keyType:e,typeName:C.ZodMap,...cg(r)});class c9 extends cy{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==d2.set)return co(r,{code:d5.invalid_type,expected:d2.set,received:r.parsedType}),cu;let n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(co(r,{code:d5.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(co(r,{code:d5.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());let i=this._def.valueType;function a(e){let r=new Set;for(let n of e){if("aborted"===n.status)return cu;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}let o=[...r.data.values()].map((e,t)=>i._parse(new cv(r,e,r.path,t)));return r.common.async?Promise.all(o).then(e=>a(e)):a(o)}min(e,t){return new c9({...this._def,minSize:{value:e,message:D.toString(t)}})}max(e,t){return new c9({...this._def,maxSize:{value:e,message:D.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}c9.create=(e,t)=>new c9({valueType:e,minSize:null,maxSize:null,typeName:C.ZodSet,...cg(t)});class c2 extends cy{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==d2.function)return co(t,{code:d5.invalid_type,expected:d2.function,received:t.parsedType}),cu;function r(e,r){return ci({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ct,ce].filter(e=>!!e),issueData:{code:d5.invalid_arguments,argumentsError:r}})}function n(e,r){return ci({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ct,ce].filter(e=>!!e),issueData:{code:d5.invalid_return_type,returnTypeError:r}})}let i={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof mt){let e=this;return cd(async function(...t){let o=new d8([]),s=await e._def.args.parseAsync(t,i).catch(e=>{throw o.addIssue(r(t,e)),o}),u=await Reflect.apply(a,this,s);return await e._def.returns._def.type.parseAsync(u,i).catch(e=>{throw o.addIssue(n(u,e)),o})})}{let e=this;return cd(function(...t){let o=e._def.args.safeParse(t,i);if(!o.success)throw new d8([r(t,o.error)]);let s=Reflect.apply(a,this,o.data),u=e._def.returns.safeParse(s,i);if(!u.success)throw new d8([n(s,u.error)]);return u.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new c2({...this._def,args:c4.create(e).rest(cW.create())})}returns(e){return new c2({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new c2({args:e||c4.create([]).rest(cW.create()),returns:t||cW.create(),typeName:C.ZodFunction,...cg(r)})}}class c3 extends cy{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}c3.create=(e,t)=>new c3({getter:e,typeName:C.ZodLazy,...cg(t)});class c5 extends cy{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return co(t,{received:t.data,code:d5.invalid_literal,expected:this._def.value}),cu}return{status:"valid",value:e.data}}get value(){return this._def.value}}function c7(e,t){return new c8({values:e,typeName:C.ZodEnum,...cg(t)})}c5.create=(e,t)=>new c5({value:e,typeName:C.ZodLiteral,...cg(t)});class c8 extends cy{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return co(t,{expected:A.joinValues(r),received:t.parsedType,code:d5.invalid_type}),cu}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return co(t,{received:t.data,code:d5.invalid_enum_value,options:r}),cu}return cd(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return c8.create(e,{...this._def,...t})}exclude(e,t=this._def){return c8.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}c8.create=c7;class me extends cy{_parse(e){let t=A.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==d2.string&&r.parsedType!==d2.number){let e=A.objectValues(t);return co(r,{expected:A.joinValues(e),received:r.parsedType,code:d5.invalid_type}),cu}if(this._cache||(this._cache=new Set(A.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let e=A.objectValues(t);return co(r,{received:r.data,code:d5.invalid_enum_value,options:e}),cu}return cd(e.data)}get enum(){return this._def.values}}me.create=(e,t)=>new me({values:e,typeName:C.ZodNativeEnum,...cg(t)});class mt extends cy{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==d2.promise&&!1===t.common.async?(co(t,{code:d5.invalid_type,expected:d2.promise,received:t.parsedType}),cu):cd((t.parsedType===d2.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}mt.create=(e,t)=>new mt({type:e,typeName:C.ZodPromise,...cg(t)});class mr extends cy{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===C.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:e=>{co(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===n.type){let e=n.transform(r.data,i);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return cu;let n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?cu:"dirty"===n.status||"dirty"===t.value?cl(n.value):n});{if("aborted"===t.value)return cu;let n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?cu:"dirty"===n.status||"dirty"===t.value?cl(n.value):n}}if("refinement"===n.type){let e=e=>{let t=n.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?cu:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?cu:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}}if("transform"===n.type)if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>cf(e)?Promise.resolve(n.transform(e.value,i)).then(e=>({status:t.value,value:e})):cu);else{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!cf(e))return cu;let a=n.transform(e.value,i);if(a instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}A.assertNever(n)}}mr.create=(e,t,r)=>new mr({schema:e,typeName:C.ZodEffects,effect:t,...cg(r)}),mr.createWithPreprocess=(e,t,r)=>new mr({schema:t,effect:{type:"preprocess",transform:e},typeName:C.ZodEffects,...cg(r)});class mn extends cy{_parse(e){return this._getType(e)===d2.undefined?cd(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}mn.create=(e,t)=>new mn({innerType:e,typeName:C.ZodOptional,...cg(t)});class mi extends cy{_parse(e){return this._getType(e)===d2.null?cd(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}mi.create=(e,t)=>new mi({innerType:e,typeName:C.ZodNullable,...cg(t)});class ma extends cy{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===d2.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ma.create=(e,t)=>new ma({innerType:e,typeName:C.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...cg(t)});class mo extends cy{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return cp(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new d8(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new d8(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}mo.create=(e,t)=>new mo({innerType:e,typeName:C.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...cg(t)});class ms extends cy{_parse(e){if(this._getType(e)!==d2.nan){let t=this._getOrReturnCtx(e);return co(t,{code:d5.invalid_type,expected:d2.nan,received:t.parsedType}),cu}return{status:"valid",value:e.data}}}ms.create=e=>new ms({typeName:C.ZodNaN,...cg(e)});let mu=Symbol("zod_brand");class ml extends cy{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class md extends cy{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?cu:"dirty"===e.status?(t.dirty(),cl(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?cu:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new md({in:e,out:t,typeName:C.ZodPipeline})}}class mc extends cy{_parse(e){let t=this._def.innerType._parse(e),r=e=>(cf(e)&&(e.value=Object.freeze(e.value)),e);return cp(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function mm(e,t){let r="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}function mf(e,t={},r){return e?cB.create().superRefine((n,i)=>{let a=e(n);if(a instanceof Promise)return a.then(e=>{if(!e){let e=mm(t,n),a=e.fatal??r??!0;i.addIssue({code:"custom",...e,fatal:a})}});if(!a){let e=mm(t,n),a=e.fatal??r??!0;i.addIssue({code:"custom",...e,fatal:a})}}):cB.create()}mc.create=(e,t)=>new mc({innerType:e,typeName:C.ZodReadonly,...cg(t)});let mp={object:cX.lazycreate};(i=C||(C={})).ZodString="ZodString",i.ZodNumber="ZodNumber",i.ZodNaN="ZodNaN",i.ZodBigInt="ZodBigInt",i.ZodBoolean="ZodBoolean",i.ZodDate="ZodDate",i.ZodSymbol="ZodSymbol",i.ZodUndefined="ZodUndefined",i.ZodNull="ZodNull",i.ZodAny="ZodAny",i.ZodUnknown="ZodUnknown",i.ZodNever="ZodNever",i.ZodVoid="ZodVoid",i.ZodArray="ZodArray",i.ZodObject="ZodObject",i.ZodUnion="ZodUnion",i.ZodDiscriminatedUnion="ZodDiscriminatedUnion",i.ZodIntersection="ZodIntersection",i.ZodTuple="ZodTuple",i.ZodRecord="ZodRecord",i.ZodMap="ZodMap",i.ZodSet="ZodSet",i.ZodFunction="ZodFunction",i.ZodLazy="ZodLazy",i.ZodLiteral="ZodLiteral",i.ZodEnum="ZodEnum",i.ZodEffects="ZodEffects",i.ZodNativeEnum="ZodNativeEnum",i.ZodOptional="ZodOptional",i.ZodNullable="ZodNullable",i.ZodDefault="ZodDefault",i.ZodCatch="ZodCatch",i.ZodPromise="ZodPromise",i.ZodBranded="ZodBranded",i.ZodPipeline="ZodPipeline",i.ZodReadonly="ZodReadonly";let mv=(e,t={message:`Input not instance of ${e.name}`})=>mf(t=>t instanceof e,t),mh=cD.create,mg=cC.create,my=ms.create,m_=cR.create,mb=cL.create,m$=cF.create,mx=cM.create,mk=cJ.create,mw=cV.create,mI=cB.create,mS=cW.create,mZ=cK.create,mO=cG.create,mz=cq.create,mj=cX.create,mN=cX.strictCreate,mU=cH.create,mP=cQ.create,mE=c0.create,mA=c4.create,mT=c1.create,mD=c6.create,mC=c9.create,mR=c2.create,mL=c3.create,mF=c5.create,mM=c8.create,mJ=me.create,mV=mt.create,mB=mr.create,mW=mn.create,mK=mi.create,mG=mr.createWithPreprocess,mq=md.create,mX=()=>mh().optional(),mH=()=>mg().optional(),mY=()=>mb().optional(),mQ={string:e=>cD.create({...e,coerce:!0}),number:e=>cC.create({...e,coerce:!0}),boolean:e=>cL.create({...e,coerce:!0}),bigint:e=>cR.create({...e,coerce:!0}),date:e=>cF.create({...e,coerce:!0})};e.s(["BRAND",0,mu,"NEVER",0,cu,"Schema",()=>cy,"ZodAny",()=>cB,"ZodArray",()=>cq,"ZodBigInt",()=>cR,"ZodBoolean",()=>cL,"ZodBranded",()=>ml,"ZodCatch",()=>mo,"ZodDate",()=>cF,"ZodDefault",()=>ma,"ZodDiscriminatedUnion",()=>cQ,"ZodEffects",()=>mr,"ZodEnum",()=>c8,"ZodFirstPartyTypeKind",()=>C,"ZodFunction",()=>c2,"ZodIntersection",()=>c0,"ZodLazy",()=>c3,"ZodLiteral",()=>c5,"ZodMap",()=>c6,"ZodNaN",()=>ms,"ZodNativeEnum",()=>me,"ZodNever",()=>cK,"ZodNull",()=>cV,"ZodNullable",()=>mi,"ZodNumber",()=>cC,"ZodObject",()=>cX,"ZodOptional",()=>mn,"ZodPipeline",()=>md,"ZodPromise",()=>mt,"ZodReadonly",()=>mc,"ZodRecord",()=>c1,"ZodSchema",()=>cy,"ZodSet",()=>c9,"ZodString",()=>cD,"ZodSymbol",()=>cM,"ZodTransformer",()=>mr,"ZodTuple",()=>c4,"ZodType",()=>cy,"ZodUndefined",()=>cJ,"ZodUnion",()=>cH,"ZodUnknown",()=>cW,"ZodVoid",()=>cG,"any",()=>mI,"array",()=>mz,"bigint",()=>m_,"boolean",()=>mb,"coerce",0,mQ,"custom",()=>mf,"date",()=>m$,"datetimeRegex",()=>cT,"discriminatedUnion",()=>mP,"effect",()=>mB,"enum",()=>mM,"function",()=>mR,"instanceof",()=>mv,"intersection",()=>mE,"late",0,mp,"lazy",()=>mL,"literal",()=>mF,"map",()=>mD,"nan",()=>my,"nativeEnum",()=>mJ,"never",()=>mZ,"null",()=>mw,"nullable",()=>mK,"number",()=>mg,"object",()=>mj,"oboolean",()=>mY,"onumber",()=>mH,"optional",()=>mW,"ostring",()=>mX,"pipeline",()=>mq,"preprocess",()=>mG,"promise",()=>mV,"record",()=>mT,"set",()=>mC,"strictObject",()=>mN,"string",()=>mh,"symbol",()=>mx,"transformer",()=>mB,"tuple",()=>mA,"undefined",()=>mk,"union",()=>mU,"unknown",()=>mS,"void",()=>mO],69418),e.s([],3505),e.i(3505),e.i(3536),e.s(["defaultErrorMap",0,ce,"getErrorMap",()=>cn,"setErrorMap",()=>cr],58844),e.i(58844),e.i(63922),e.i(89402),e.i(4760),e.i(69418),e.i(13458),e.s(["BRAND",0,mu,"DIRTY",0,cl,"EMPTY_PATH",0,ca,"INVALID",0,cu,"NEVER",0,cu,"OK",0,cd,"ParseStatus",()=>cs,"Schema",()=>cy,"ZodAny",()=>cB,"ZodArray",()=>cq,"ZodBigInt",()=>cR,"ZodBoolean",()=>cL,"ZodBranded",()=>ml,"ZodCatch",()=>mo,"ZodDate",()=>cF,"ZodDefault",()=>ma,"ZodDiscriminatedUnion",()=>cQ,"ZodEffects",()=>mr,"ZodEnum",()=>c8,"ZodError",()=>d8,"ZodFirstPartyTypeKind",()=>C,"ZodFunction",()=>c2,"ZodIntersection",()=>c0,"ZodIssueCode",0,d5,"ZodLazy",()=>c3,"ZodLiteral",()=>c5,"ZodMap",()=>c6,"ZodNaN",()=>ms,"ZodNativeEnum",()=>me,"ZodNever",()=>cK,"ZodNull",()=>cV,"ZodNullable",()=>mi,"ZodNumber",()=>cC,"ZodObject",()=>cX,"ZodOptional",()=>mn,"ZodParsedType",0,d2,"ZodPipeline",()=>md,"ZodPromise",()=>mt,"ZodReadonly",()=>mc,"ZodRecord",()=>c1,"ZodSchema",()=>cy,"ZodSet",()=>c9,"ZodString",()=>cD,"ZodSymbol",()=>cM,"ZodTransformer",()=>mr,"ZodTuple",()=>c4,"ZodType",()=>cy,"ZodUndefined",()=>cJ,"ZodUnion",()=>cH,"ZodUnknown",()=>cW,"ZodVoid",()=>cG,"addIssueToContext",()=>co,"any",()=>mI,"array",()=>mz,"bigint",()=>m_,"boolean",()=>mb,"coerce",0,mQ,"custom",()=>mf,"date",()=>m$,"datetimeRegex",()=>cT,"defaultErrorMap",0,ce,"discriminatedUnion",()=>mP,"effect",()=>mB,"enum",()=>mM,"function",()=>mR,"getErrorMap",()=>cn,"getParsedType",0,d3,"instanceof",()=>mv,"intersection",()=>mE,"isAborted",0,cc,"isAsync",0,cp,"isDirty",0,cm,"isValid",0,cf,"late",0,mp,"lazy",()=>mL,"literal",()=>mF,"makeIssue",0,ci,"map",()=>mD,"nan",()=>my,"nativeEnum",()=>mJ,"never",()=>mZ,"null",()=>mw,"nullable",()=>mK,"number",()=>mg,"object",()=>mj,"objectUtil",()=>T,"oboolean",()=>mY,"onumber",()=>mH,"optional",()=>mW,"ostring",()=>mX,"pipeline",()=>mq,"preprocess",()=>mG,"promise",()=>mV,"quotelessJson",0,d7,"record",()=>mT,"set",()=>mC,"setErrorMap",()=>cr,"strictObject",()=>mN,"string",()=>mh,"symbol",()=>mx,"transformer",()=>mB,"tuple",()=>mA,"undefined",()=>mk,"union",()=>mU,"unknown",()=>mS,"util",()=>A,"void",()=>mO],23033),e.i(23033);class m0 extends Error{constructor(e,t){super(e),this.name="ParseError",this.type=t.type,this.field=t.field,this.value=t.value,this.line=t.line}}function m4(e){}class m1 extends TransformStream{constructor({onError:e,onRetry:t,onComment:r}={}){let n;super({start(i){n=function(e){if("function"==typeof e)throw TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:t=m4,onError:r=m4,onRetry:n=m4,onComment:i}=e,a="",o=!0,s,u="",l="";function d(e){if(""===e)return void(u.length>0&&t({id:s,event:l||void 0,data:u.endsWith(`
`)?u.slice(0,-1):u}),s=void 0,u="",l="");if(e.startsWith(":")){i&&i(e.slice(e.startsWith(": ")?2:1));return}let r=e.indexOf(":");if(-1!==r){let t=e.slice(0,r),n=" "===e[r+1]?2:1;c(t,e.slice(r+n),e);return}c(e,"",e)}function c(e,t,i){switch(e){case"event":l=t;break;case"data":u=`${u}${t}
`;break;case"id":s=t.includes("\0")?void 0:t;break;case"retry":/^\d+$/.test(t)?n(parseInt(t,10)):r(new m0(`Invalid \`retry\` value: "${t}"`,{type:"invalid-retry",value:t,line:i}));break;default:r(new m0(`Unknown field "${e.length>20?`${e.slice(0,20)}\u2026`:e}"`,{type:"unknown-field",field:e,value:t,line:i}))}}return{feed:function(e){let t=o?e.replace(/^\xEF\xBB\xBF/,""):e,[r,n]=function(e){let t=[],r="",n=0;for(;n<e.length;){let i=e.indexOf("\r",n),a=e.indexOf(`
`,n),o=-1;if(-1!==i&&-1!==a?o=Math.min(i,a):-1!==i?o=i===e.length-1?-1:i:-1!==a&&(o=a),-1===o){r=e.slice(n);break}{let r=e.slice(n,o);t.push(r),"\r"===e[(n=o+1)-1]&&e[n]===`
`&&n++}}return[t,r]}(`${a}${t}`);for(let e of r)d(e);a=n,o=!1},reset:function(e={}){a&&e.consume&&d(a),o=!0,s=void 0,u="",l="",a=""}}}({onEvent:e=>{i.enqueue(e)},onError(t){"terminate"===e?i.error(t):"function"==typeof e&&e(t)},onRetry:t,onComment:r})},transform(e){n.feed(e)}})}}function m6(...e){return e.reduce((e,t)=>({...e,...null!=t?t:{}}),{})}function m9({tools:e=[],providerToolNames:t}){let r={},n={};for(let i of e)if("provider"===i.type&&i.id in t){let e=t[i.id];r[i.name]=e,n[e]=i.name}return{toProviderToolName:e=>{var t;return null!=(t=r[e])?t:e},toCustomToolName:e=>{var t;return null!=(t=n[e])?t:e}}}async function m2(e,t){if(null==e)return Promise.resolve();let r=null==t?void 0:t.abortSignal;return new Promise((t,n)=>{if(null==r?void 0:r.aborted)return void n(m3());let i=setTimeout(()=>{a(),t()},e),a=()=>{clearTimeout(i),null==r||r.removeEventListener("abort",o)},o=()=>{a(),n(m3())};null==r||r.addEventListener("abort",o)})}function m3(){return new DOMException("Delay was aborted","AbortError")}var m5=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get promise(){return this._promise||(this._promise=new Promise((e,t)=>{"resolved"===this.status.type?e(this.status.value):"rejected"===this.status.type&&t(this.status.error),this._resolve=e,this._reject=t})),this._promise}resolve(e){var t;this.status={type:"resolved",value:e},this._promise&&(null==(t=this._resolve)||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this._promise&&(null==(t=this._reject)||t.call(this,e))}isResolved(){return"resolved"===this.status.type}isRejected(){return"rejected"===this.status.type}isPending(){return"pending"===this.status.type}};function m7(e){return Object.fromEntries([...e.headers])}var{btoa:m8,atob:fe}=globalThis;function ft(e){let t=fe(e.replace(/-/g,"+").replace(/_/g,"/"));return Uint8Array.from(t,e=>e.codePointAt(0))}function fr(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return m8(t)}function fn(e){return e instanceof Uint8Array?fr(e):e}function fi(e,t={}){let{useArrayBrackets:r=!0}=t,n=new FormData;for(let[t,i]of Object.entries(e))if(null!=i){if(Array.isArray(i)){if(1===i.length){n.append(t,i[0]);continue}let e=r?`${t}[]`:t;for(let t of i)n.append(e,t);continue}n.append(t,i)}return n}var fa="AI_DownloadError",fo=`vercel.ai.error.${fa}`,fs=Symbol.for(fo),fu=class extends(L=J,R=fs,L){constructor({url:e,statusCode:t,statusText:r,cause:n,message:i=null==n?`Failed to download ${e}: ${t} ${r}`:`Failed to download ${e}: ${n}`}){super({name:fa,message:i,cause:n}),this[R]=!0,this.url=e,this.statusCode=t,this.statusText=r}static isInstance(e){return J.hasMarker(e,fo)}};async function fl(e){try{let t=await fetch(e);if(!t.ok)throw new fu({url:e,statusCode:t.status,statusText:t.statusText});return await t.blob()}catch(t){if(fu.isInstance(t))throw t;throw new fu({url:e,cause:t})}}var fd=({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let i=()=>{let e=r.length,n=Array(t);for(let i=0;i<t;i++)n[i]=r[Math.random()*e|0];return n.join("")};if(null==e)return i;if(r.includes(n))throw new er({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return()=>`${e}${n}${i()}`},fc=fd();function fm(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}function ff(e){return(e instanceof Error||e instanceof DOMException)&&("AbortError"===e.name||"ResponseAborted"===e.name||"TimeoutError"===e.name)}var fp=["fetch failed","failed to fetch"];function fv({error:e,url:t,requestBodyValues:r}){if(ff(e))return e;if(e instanceof TypeError&&fp.includes(e.message.toLowerCase())){let n=e.cause;if(null!=n)return new K({message:`Cannot connect to API: ${n.message}`,cause:n,url:t,requestBodyValues:r,isRetryable:!0})}return e}function fh(e=globalThis){var t,r,n;return e.window?"runtime/browser":(null==(t=e.navigator)?void 0:t.userAgent)?`runtime/${e.navigator.userAgent.toLowerCase()}`:(null==(n=null==(r=e.process)?void 0:r.versions)?void 0:n.node)?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function fg(e){if(null==e)return{};let t={};if(e instanceof Headers)e.forEach((e,r)=>{t[r.toLowerCase()]=e});else for(let[r,n]of(Array.isArray(e)||(e=Object.entries(e)),e))null!=n&&(t[r.toLowerCase()]=n);return t}function fy(e,...t){let r=new Headers(fg(e)),n=r.get("user-agent")||"";return r.set("user-agent",[n,...t].filter(Boolean).join(" ")),Object.fromEntries(r.entries())}var f_="4.0.1",fb=()=>globalThis.fetch,f$=async({url:e,headers:t={},successfulResponseHandler:r,failedResponseHandler:n,abortSignal:i,fetch:a=fb()})=>{try{let o=await a(e,{method:"GET",headers:fy(t,`ai-sdk/provider-utils/${f_}`,fh()),signal:i}),s=m7(o);if(!o.ok){let t;try{t=await n({response:o,url:e,requestBodyValues:{}})}catch(t){if(ff(t)||K.isInstance(t))throw t;throw new K({message:"Failed to process error response",cause:t,statusCode:o.status,url:e,responseHeaders:s,requestBodyValues:{}})}throw t.value}try{return await r({response:o,url:e,requestBodyValues:{}})}catch(t){if(t instanceof Error&&(ff(t)||K.isInstance(t)))throw t;throw new K({message:"Failed to process successful response",cause:t,statusCode:o.status,url:e,responseHeaders:s,requestBodyValues:{}})}}catch(t){throw fv({error:t,url:e,requestBodyValues:{}})}};function fx(e){return null!=e}function fk({mediaType:e,url:t,supportedUrls:r}){return t=t.toLowerCase(),e=e.toLowerCase(),Object.entries(r).map(([e,t])=>{let r=e.toLowerCase();return"*"===r||"*/*"===r?{mediaTypePrefix:"",regexes:t}:{mediaTypePrefix:r.replace(/\*/,""),regexes:t}}).filter(({mediaTypePrefix:t})=>e.startsWith(t)).flatMap(({regexes:e})=>e).some(e=>e.test(t))}function fw({apiKey:e,environmentVariableName:t,apiKeyParameterName:r="apiKey",description:n}){if("string"==typeof e)return e;if(null!=e)throw new ey({message:`${n} API key must be a string.`});if("undefined"==typeof process)throw new ey({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(null==(e=process.env[t]))throw new ey({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if("string"!=typeof e)throw new ey({message:`${n} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}function fI({settingValue:e,environmentVariableName:t}){return"string"==typeof e?e:null!=e||"undefined"==typeof process?void 0:null!=(e=process.env[t])&&"string"==typeof e?e:void 0}function fS(e){var t;let[r,n=""]=e.toLowerCase().split("/");return null!=(t=({mpeg:"mp3","x-wav":"wav",opus:"ogg",mp4:"m4a","x-m4a":"m4a"})[n])?t:n}var fZ=/"__proto__"\s*:/,fO=/"constructor"\s*:/;function fz(e){let t=JSON.parse(e);return null===t||"object"!=typeof t||!1===fZ.test(e)&&!1===fO.test(e)?t:function(e){let t=[e];for(;t.length;){let e=t;for(let r of(t=[],e)){if(Object.prototype.hasOwnProperty.call(r,"__proto__")||Object.prototype.hasOwnProperty.call(r,"constructor")&&Object.prototype.hasOwnProperty.call(r.constructor,"prototype"))throw SyntaxError("Object contains forbidden prototype property");for(let e in r){let n=r[e];n&&"object"==typeof n&&t.push(n)}}}return e}(t)}function fj(e){let{stackTraceLimit:t}=Error;try{Error.stackTraceLimit=0}catch(t){return fz(e)}try{return fz(e)}finally{Error.stackTraceLimit=t}}var fN=Symbol("Let zodToJsonSchema decide on which parser to use"),fU={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"};function fP(e,t){return f0(e.type._def,t)}var fE=void 0,fA=/^[cC][^\s-]{8,}$/,fT=/^[0-9a-z]+$/,fD=/^[0-9A-HJKMNP-TV-Z]{26}$/,fC=/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,fR=()=>(void 0===fE&&(fE=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),fE),fL=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,fF=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,fM=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,fJ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,fV=/^[a-zA-Z0-9_-]{21}$/,fB=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/;function fW(e,t){let r={type:"string"};if(e.checks)for(let n of e.checks)switch(n.kind){case"min":r.minLength="number"==typeof r.minLength?Math.max(r.minLength,n.value):n.value;break;case"max":r.maxLength="number"==typeof r.maxLength?Math.min(r.maxLength,n.value):n.value;break;case"email":switch(t.emailStrategy){case"format:email":fq(r,"email",n.message,t);break;case"format:idn-email":fq(r,"idn-email",n.message,t);break;case"pattern:zod":fX(r,fC,n.message,t)}break;case"url":fq(r,"uri",n.message,t);break;case"uuid":fq(r,"uuid",n.message,t);break;case"regex":fX(r,n.regex,n.message,t);break;case"cuid":fX(r,fA,n.message,t);break;case"cuid2":fX(r,fT,n.message,t);break;case"startsWith":fX(r,RegExp(`^${fK(n.value,t)}`),n.message,t);break;case"endsWith":fX(r,RegExp(`${fK(n.value,t)}$`),n.message,t);break;case"datetime":fq(r,"date-time",n.message,t);break;case"date":fq(r,"date",n.message,t);break;case"time":fq(r,"time",n.message,t);break;case"duration":fq(r,"duration",n.message,t);break;case"length":r.minLength="number"==typeof r.minLength?Math.max(r.minLength,n.value):n.value,r.maxLength="number"==typeof r.maxLength?Math.min(r.maxLength,n.value):n.value;break;case"includes":fX(r,RegExp(fK(n.value,t)),n.message,t);break;case"ip":"v6"!==n.version&&fq(r,"ipv4",n.message,t),"v4"!==n.version&&fq(r,"ipv6",n.message,t);break;case"base64url":fX(r,fJ,n.message,t);break;case"jwt":fX(r,fB,n.message,t);break;case"cidr":"v6"!==n.version&&fX(r,fL,n.message,t),"v4"!==n.version&&fX(r,fF,n.message,t);break;case"emoji":fX(r,fR(),n.message,t);break;case"ulid":fX(r,fD,n.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":fq(r,"binary",n.message,t);break;case"contentEncoding:base64":r.contentEncoding="base64";break;case"pattern:zod":fX(r,fM,n.message,t)}break;case"nanoid":fX(r,fV,n.message,t)}return r}function fK(e,t){return"escape"===t.patternStrategy?function(e){let t="";for(let r=0;r<e.length;r++)fG.has(e[r])||(t+="\\"),t+=e[r];return t}(e):e}var fG=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function fq(e,t,r,n){var i;e.format||(null==(i=e.anyOf)?void 0:i.some(e=>e.format))?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...r&&n.errorMessages&&{errorMessage:{format:r}}})):e.format=t}function fX(e,t,r,n){var i;e.pattern||(null==(i=e.allOf)?void 0:i.some(e=>e.pattern))?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:fH(t,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):e.pattern=fH(t,n)}function fH(e,t){var r;if(!t.applyRegexFlags||!e.flags)return e.source;let n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},i=n.i?e.source.toLowerCase():e.source,a="",o=!1,s=!1,u=!1;for(let e=0;e<i.length;e++){if(o){a+=i[e],o=!1;continue}if(n.i){if(s){if(i[e].match(/[a-z]/)){u?(a+=i[e],a+=`${i[e-2]}-${i[e]}`.toUpperCase(),u=!1):"-"===i[e+1]&&(null==(r=i[e+2])?void 0:r.match(/[a-z]/))?(a+=i[e],u=!0):a+=`${i[e]}${i[e].toUpperCase()}`;continue}}else if(i[e].match(/[a-z]/)){a+=`[${i[e]}${i[e].toUpperCase()}]`;continue}}if(n.m){if("^"===i[e]){a+=`(^|(?<=[\r
]))`;continue}else if("$"===i[e]){a+=`($|(?=[\r
]))`;continue}}if(n.s&&"."===i[e]){a+=s?`${i[e]}\r
`:`[${i[e]}\r
]`;continue}a+=i[e],"\\"===i[e]?o=!0:s&&"]"===i[e]?s=!1:s||"["!==i[e]||(s=!0)}try{new RegExp(a)}catch(r){return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return a}function fY(e,t){var r,n,i,a,o,s;let u={type:"object",additionalProperties:null!=(r=f0(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))?r:t.allowedAdditionalProperties};if((null==(n=e.keyType)?void 0:n._def.typeName)===C.ZodString&&(null==(i=e.keyType._def.checks)?void 0:i.length)){let{type:r,...n}=fW(e.keyType._def,t);return{...u,propertyNames:n}}if((null==(a=e.keyType)?void 0:a._def.typeName)===C.ZodEnum)return{...u,propertyNames:{enum:e.keyType._def.values}};if((null==(o=e.keyType)?void 0:o._def.typeName)===C.ZodBranded&&e.keyType._def.type._def.typeName===C.ZodString&&(null==(s=e.keyType._def.type._def.checks)?void 0:s.length)){let{type:r,...n}=fP(e.keyType._def,t);return{...u,propertyNames:n}}return u}var fQ={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function f0(e,t,r=!1){var n;let i=t.seen.get(e);if(t.override){let a=null==(n=t.override)?void 0:n.call(t,e,t,i,r);if(a!==fN)return a}if(i&&!r){let e=f4(i,t);if(void 0!==e)return e}let a={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,a);let o=((e,t,r)=>{var n,i,a,o,s,u;switch(t){case C.ZodString:return fW(e,r);case C.ZodNumber:let l={type:"number"};if(!e.checks)return l;for(let t of e.checks)switch(t.kind){case"int":l.type="integer";break;case"min":t.inclusive?l.minimum=t.value:l.exclusiveMinimum=t.value;break;case"max":t.inclusive?l.maximum=t.value:l.exclusiveMaximum=t.value;break;case"multipleOf":l.multipleOf=t.value}return l;case C.ZodObject:return function(e,t){let r={type:"object",properties:{}},n=[],i=e.shape();for(let e in i){let a=i[e];if(void 0===a||void 0===a._def)continue;let o=function(e){try{return e.isOptional()}catch(e){return!0}}(a),s=f0(a._def,{...t,currentPath:[...t.currentPath,"properties",e],propertyPath:[...t.currentPath,"properties",e]});void 0!==s&&(r.properties[e]=s,o||n.push(e))}n.length&&(r.required=n);let a=function(e,t){if("ZodNever"!==e.catchall._def.typeName)return f0(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return"strict"===t.removeAdditionalStrategy?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}(e,t);return void 0!==a&&(r.additionalProperties=a),r}(e,r);case C.ZodBigInt:let d={type:"integer",format:"int64"};if(!e.checks)return d;for(let t of e.checks)switch(t.kind){case"min":t.inclusive?d.minimum=t.value:d.exclusiveMinimum=t.value;break;case"max":t.inclusive?d.maximum=t.value:d.exclusiveMaximum=t.value;break;case"multipleOf":d.multipleOf=t.value}return d;case C.ZodBoolean:return{type:"boolean"};case C.ZodDate:return function e(t,r,n){let i=null!=n?n:r.dateStrategy;if(Array.isArray(i))return{anyOf:i.map((n,i)=>e(t,r,n))};switch(i){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":var a=t;let o={type:"integer",format:"unix-time"};for(let e of a.checks)switch(e.kind){case"min":o.minimum=e.value;break;case"max":o.maximum=e.value}return o}}(e,r);case C.ZodUndefined:return{not:{}};case C.ZodNull:return{type:"null"};case C.ZodArray:let c;return c={type:"array"},(null==(a=e.type)?void 0:a._def)&&(null==(s=null==(o=e.type)?void 0:o._def)?void 0:s.typeName)!==C.ZodAny&&(c.items=f0(e.type._def,{...r,currentPath:[...r.currentPath,"items"]})),e.minLength&&(c.minItems=e.minLength.value),e.maxLength&&(c.maxItems=e.maxLength.value),e.exactLength&&(c.minItems=e.exactLength.value,c.maxItems=e.exactLength.value),c;case C.ZodUnion:case C.ZodDiscriminatedUnion:let m,f=e.options instanceof Map?Array.from(e.options.values()):e.options;if(f.every(e=>e._def.typeName in fQ&&(!e._def.checks||!e._def.checks.length))){let e=f.reduce((e,t)=>{let r=fQ[t._def.typeName];return r&&!e.includes(r)?[...e,r]:e},[]);return{type:e.length>1?e:e[0]}}if(f.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){let e=f.reduce((e,t)=>{let r=typeof t._def.value;switch(r){case"string":case"number":case"boolean":return[...e,r];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===f.length){let t=e.filter((e,t,r)=>r.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:f.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(f.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:f.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return n=e,i=r,(m=(n.options instanceof Map?Array.from(n.options.values()):n.options).map((e,t)=>f0(e._def,{...i,currentPath:[...i.currentPath,"anyOf",`${t}`]})).filter(e=>!!e&&(!i.strictUnions||"object"==typeof e&&Object.keys(e).length>0))).length?{anyOf:m}:void 0;case C.ZodIntersection:let p,v;return p=[f0(e.left._def,{...r,currentPath:[...r.currentPath,"allOf","0"]}),f0(e.right._def,{...r,currentPath:[...r.currentPath,"allOf","1"]})].filter(e=>!!e),v=[],p.forEach(e=>{if((!("type"in e)||"string"!==e.type)&&"allOf"in e)v.push(...e.allOf);else{let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){let{additionalProperties:r,...n}=e;t=n}v.push(t)}}),v.length?{allOf:v}:void 0;case C.ZodTuple:return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,t)=>f0(e._def,{...r,currentPath:[...r.currentPath,"items",`${t}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:f0(e.rest._def,{...r,currentPath:[...r.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,t)=>f0(e._def,{...r,currentPath:[...r.currentPath,"items",`${t}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])};case C.ZodRecord:return fY(e,r);case C.ZodLiteral:let h;return"bigint"!=(h=typeof e.value)&&"number"!==h&&"boolean"!==h&&"string"!==h?{type:Array.isArray(e.value)?"array":"object"}:{type:"bigint"===h?"integer":h,const:e.value};case C.ZodEnum:return{type:"string",enum:Array.from(e.values)};case C.ZodNativeEnum:let g,y,_;return g=e.values,{type:1===(_=Array.from(new Set((y=Object.keys(e.values).filter(e=>"number"!=typeof g[g[e]]).map(e=>g[e])).map(e=>typeof e)))).length?"string"===_[0]?"string":"number":["string","number"],enum:y};case C.ZodNullable:if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[fQ[e.innerType._def.typeName],"null"]};let b=f0(e.innerType._def,{...r,currentPath:[...r.currentPath,"anyOf","0"]});return b&&{anyOf:[b,{type:"null"}]};case C.ZodOptional:if(r.currentPath.toString()===(null==(u=r.propertyPath)?void 0:u.toString()))return f0(e.innerType._def,r);let $=f0(e.innerType._def,{...r,currentPath:[...r.currentPath,"anyOf","1"]});return $?{anyOf:[{not:{}},$]}:{};case C.ZodMap:if("record"===r.mapStrategy)return fY(e,r);return{type:"array",maxItems:125,items:{type:"array",items:[f0(e.keyType._def,{...r,currentPath:[...r.currentPath,"items","items","0"]})||{},f0(e.valueType._def,{...r,currentPath:[...r.currentPath,"items","items","1"]})||{}],minItems:2,maxItems:2}};case C.ZodSet:let x;return x={type:"array",uniqueItems:!0,items:f0(e.valueType._def,{...r,currentPath:[...r.currentPath,"items"]})},e.minSize&&(x.minItems=e.minSize.value),e.maxSize&&(x.maxItems=e.maxSize.value),x;case C.ZodLazy:return()=>e.getter()._def;case C.ZodPromise:return f0(e.type._def,r);case C.ZodNaN:case C.ZodNever:return{not:{}};case C.ZodEffects:return"input"===r.effectStrategy?f0(e.schema._def,r):{};case C.ZodAny:case C.ZodUnknown:return{};case C.ZodDefault:return{...f0(e.innerType._def,r),default:e.defaultValue()};case C.ZodBranded:return fP(e,r);case C.ZodReadonly:case C.ZodCatch:return f0(e.innerType._def,r);case C.ZodPipeline:if("input"===r.pipeStrategy)return f0(e.in._def,r);if("output"===r.pipeStrategy)return f0(e.out._def,r);let k=f0(e.in._def,{...r,currentPath:[...r.currentPath,"allOf","0"]}),w=f0(e.out._def,{...r,currentPath:[...r.currentPath,"allOf",k?"1":"0"]});return{allOf:[k,w].filter(e=>void 0!==e)};case C.ZodFunction:case C.ZodVoid:case C.ZodSymbol:default:return}})(e,e.typeName,t),s="function"==typeof o?f0(o(),t):o;if(s&&f1(e,t,s),t.postProcess){let r=t.postProcess(s,e,t);return a.jsonSchema=s,r}return a.jsonSchema=s,s}var f4=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:((e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")})(t.currentPath,e.path)};case"none":case"seen":if(e.path.length<t.currentPath.length&&e.path.every((e,r)=>t.currentPath[r]===e))return console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{};return"seen"===t.$refStrategy?{}:void 0}},f1=(e,t,r)=>(e.description&&(r.description=e.description),r),f6=Symbol.for("vercel.ai.schema");function f9(e){let t;return()=>(null==t&&(t=e()),t)}function f2(e,{validate:t}={}){return{[f6]:!0,_type:void 0,get jsonSchema(){return"function"==typeof e&&(e=e()),e},validate:t}}function f3(e){var t;return null==e?f2({properties:{},additionalProperties:!1}):"object"==typeof e&&null!==e&&f6 in e&&!0===e[f6]&&"jsonSchema"in e&&"validate"in e?e:"~standard"in e?"zod"===e["~standard"].vendor?f5(e):(t=e,f2(()=>t["~standard"].jsonSchema.input({target:"draft-07"}),{validate:async e=>{let r=await t["~standard"].validate(e);return"value"in r?{success:!0,value:r.value}:{success:!1,error:new eC({value:e,cause:r.issues})}}})):e()}function f5(e,t){var r,n;let i;if("_zod"in e){let n;return n=null!=(r=null==t?void 0:t.useReferences)&&r,f2(()=>(function e(t){if("object"===t.type){t.additionalProperties=!1;let r=t.properties;if(null!=r)for(let t in r)r[t]=e(r[t])}return"array"===t.type&&null!=t.items&&(Array.isArray(t.items)?t.items=t.items.map(t=>e(t)):t.items=e(t.items)),t})(sJ(e,{target:"draft-7",io:"input",reused:n?"ref":"inline"})),{validate:async t=>{let r=await s5(e,t);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}})}return i=null!=(n=null==t?void 0:t.useReferences)&&n,f2(()=>((e,t)=>{var r;let n,i,a=(i=void 0!==(n="string"==typeof t?{...fU,name:t}:{...fU,...t}).name?[...n.basePath,n.definitionPath,n.name]:n.basePath,{...n,currentPath:i,propertyPath:void 0,seen:new Map(Object.entries(n.definitions).map(([e,t])=>[t._def,{def:t._def,path:[...n.basePath,n.definitionPath,e],jsonSchema:void 0}]))}),o="object"==typeof t&&t.definitions?Object.entries(t.definitions).reduce((e,[t,r])=>{var n;return{...e,[t]:null!=(n=f0(r._def,{...a,currentPath:[...a.basePath,a.definitionPath,t]},!0))?n:{}}},{}):void 0,s="string"==typeof t?t:(null==t?void 0:t.nameStrategy)==="title"||null==t?void 0:t.name,u=null!=(r=f0(e._def,void 0===s?a:{...a,currentPath:[...a.basePath,a.definitionPath,s]},!1))?r:{},l="object"==typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==l&&(u.title=l);let d=void 0===s?o?{...u,[a.definitionPath]:o}:u:{$ref:[..."relative"===a.$refStrategy?[]:a.basePath,a.definitionPath,s].join("/"),[a.definitionPath]:{...o,[s]:u}};return d.$schema="http://json-schema.org/draft-07/schema#",d})(e,{$refStrategy:i?"root":"none"}),{validate:async t=>{let r=await e.safeParseAsync(t);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}})}async function f7({value:e,schema:t}){let r=await f8({value:e,schema:t});if(!r.success)throw eC.wrap({value:e,cause:r.error});return r.value}async function f8({value:e,schema:t}){let r=f3(t);try{if(null==r.validate)return{success:!0,value:e,rawValue:e};let t=await r.validate(e);if(t.success)return{success:!0,value:t.value,rawValue:e};return{success:!1,error:eC.wrap({value:e,cause:t.error}),rawValue:e}}catch(t){return{success:!1,error:eC.wrap({value:e,cause:t}),rawValue:e}}}async function pe({text:e,schema:t}){try{let r=fj(e);if(null==t)return r;return f7({value:r,schema:t})}catch(t){if(ep.isInstance(t)||eC.isInstance(t))throw t;throw new ep({text:e,cause:t})}}async function pt({text:e,schema:t}){try{let r=fj(e);if(null==t)return{success:!0,value:r,rawValue:r};return await f8({value:r,schema:t})}catch(t){return{success:!1,error:ep.isInstance(t)?t:new ep({text:e,cause:t}),rawValue:void 0}}}function pr(e){try{return fj(e),!0}catch(e){return!1}}function pn({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new m1).pipeThrough(new TransformStream({async transform({data:e},r){"[DONE]"!==e&&r.enqueue(await pt({text:e,schema:t}))}}))}async function pi({provider:e,providerOptions:t,schema:r}){if((null==t?void 0:t[e])==null)return;let n=await f8({value:t[e],schema:r});if(!n.success)throw new er({argument:"providerOptions",message:`invalid ${e} provider options`,cause:n.error});return n.value}var pa=()=>globalThis.fetch,po=async({url:e,headers:t,body:r,failedResponseHandler:n,successfulResponseHandler:i,abortSignal:a,fetch:o})=>pu({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:i,abortSignal:a,fetch:o}),ps=async({url:e,headers:t,formData:r,failedResponseHandler:n,successfulResponseHandler:i,abortSignal:a,fetch:o})=>pu({url:e,headers:t,body:{content:r,values:Object.fromEntries(r.entries())},failedResponseHandler:n,successfulResponseHandler:i,abortSignal:a,fetch:o}),pu=async({url:e,headers:t={},body:r,successfulResponseHandler:n,failedResponseHandler:i,abortSignal:a,fetch:o=pa()})=>{try{let s=await o(e,{method:"POST",headers:fy(t,`ai-sdk/provider-utils/${f_}`,fh()),body:r.content,signal:a}),u=m7(s);if(!s.ok){let t;try{t=await i({response:s,url:e,requestBodyValues:r.values})}catch(t){if(ff(t)||K.isInstance(t))throw t;throw new K({message:"Failed to process error response",cause:t,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:r.values})}throw t.value}try{return await n({response:s,url:e,requestBodyValues:r.values})}catch(t){if(t instanceof Error&&(ff(t)||K.isInstance(t)))throw t;throw new K({message:"Failed to process successful response",cause:t,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:r.values})}}catch(t){throw fv({error:t,url:e,requestBodyValues:r.values})}};function pl(e){return e}function pd(e){return{...e,type:"dynamic"}}function pc({id:e,inputSchema:t}){return({execute:r,outputSchema:n,needsApproval:i,toModelOutput:a,onInputStart:o,onInputDelta:s,onInputAvailable:u,...l})=>({type:"provider",id:e,args:l,inputSchema:t,outputSchema:n,execute:r,needsApproval:i,toModelOutput:a,onInputStart:o,onInputDelta:s,onInputAvailable:u})}function pm({id:e,inputSchema:t,outputSchema:r,supportsDeferredResults:n}){return({execute:i,needsApproval:a,toModelOutput:o,onInputStart:s,onInputDelta:u,onInputAvailable:l,...d})=>({type:"provider",id:e,args:d,inputSchema:t,outputSchema:r,execute:i,needsApproval:a,toModelOutput:o,onInputStart:s,onInputDelta:u,onInputAvailable:l,supportsDeferredResults:n})}async function pf(e){return"function"==typeof e&&(e=e()),Promise.resolve(e)}var pp=({errorSchema:e,errorToMessage:t,isRetryable:r})=>async({response:n,url:i,requestBodyValues:a})=>{let o=await n.text(),s=m7(n);if(""===o.trim())return{responseHeaders:s,value:new K({message:n.statusText,url:i,requestBodyValues:a,statusCode:n.status,responseHeaders:s,responseBody:o,isRetryable:null==r?void 0:r(n)})};try{let u=await pe({text:o,schema:e});return{responseHeaders:s,value:new K({message:t(u),url:i,requestBodyValues:a,statusCode:n.status,responseHeaders:s,responseBody:o,data:u,isRetryable:null==r?void 0:r(n,u)})}}catch(e){return{responseHeaders:s,value:new K({message:n.statusText,url:i,requestBodyValues:a,statusCode:n.status,responseHeaders:s,responseBody:o,isRetryable:null==r?void 0:r(n)})}}},pv=e=>async({response:t})=>{let r=m7(t);if(null==t.body)throw new H({});return{responseHeaders:r,value:pn({stream:t.body,schema:e})}},ph=e=>async({response:t,url:r,requestBodyValues:n})=>{let i=await t.text(),a=await pt({text:i,schema:e}),o=m7(t);if(!a.success)throw new K({message:"Invalid JSON response",cause:a.error,statusCode:t.status,responseHeaders:o,responseBody:i,url:r,requestBodyValues:n});return{responseHeaders:o,value:a.value,rawValue:a.rawValue}},pg=()=>async({response:e,url:t,requestBodyValues:r})=>{let n=m7(e);if(!e.body)throw new K({message:"Response body is empty",url:t,requestBodyValues:r,statusCode:e.status,responseHeaders:n,responseBody:void 0});try{let t=await e.arrayBuffer();return{responseHeaders:n,value:new Uint8Array(t)}}catch(i){throw new K({message:"Failed to read response as array buffer",url:t,requestBodyValues:r,statusCode:e.status,responseHeaders:n,responseBody:void 0,cause:i})}};function py(e){return null==e?void 0:e.replace(/\/$/,"")}async function*p_({execute:e,input:t,options:r}){let n=e(t,r);if(null!=n&&"function"==typeof n[Symbol.asyncIterator]){let e;for await(let t of n)e=t,yield{type:"preliminary",output:t};yield{type:"final",output:e}}else yield{type:"final",output:await n}}e.s(["DelayedPromise",()=>m5,"DownloadError",()=>fu,"asSchema",()=>f3,"combineHeaders",()=>m6,"convertBase64ToUint8Array",()=>ft,"convertToBase64",()=>fn,"convertToFormData",()=>fi,"convertUint8ArrayToBase64",()=>fr,"createBinaryResponseHandler",()=>pg,"createEventSourceResponseHandler",()=>pv,"createIdGenerator",()=>fd,"createJsonErrorResponseHandler",()=>pp,"createJsonResponseHandler",()=>ph,"createProviderToolFactory",()=>pc,"createProviderToolFactoryWithOutputSchema",()=>pm,"createToolNameMapping",()=>m9,"delay",()=>m2,"downloadBlob",()=>fl,"dynamicTool",()=>pd,"executeTool",()=>p_,"generateId",()=>fc,"getErrorMessage",()=>fm,"getFromApi",()=>f$,"getRuntimeEnvironmentUserAgent",()=>fh,"isAbortError",()=>ff,"isNonNullable",()=>fx,"isParsableJson",()=>pr,"isUrlSupported",()=>fk,"jsonSchema",()=>f2,"lazySchema",()=>f9,"loadApiKey",()=>fw,"loadOptionalSetting",()=>fI,"mediaTypeToExtension",()=>fS,"normalizeHeaders",()=>fg,"parseJsonEventStream",()=>pn,"parseProviderOptions",()=>pi,"postFormDataToApi",()=>ps,"postJsonToApi",()=>po,"resolve",()=>pf,"safeParseJSON",()=>pt,"safeValidateTypes",()=>f8,"tool",()=>pl,"validateTypes",()=>f7,"withUserAgentSuffix",()=>fy,"withoutTrailingSlash",()=>py,"zodSchema",()=>f5],66125),e.i(35079),e.s(["z",0,d9],39017)}]);

//# sourceMappingURL=node_modules_%40ai-sdk_provider-utils_dist_index_mjs_995f32ad._.js.map
/**/;(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["chunks/src_services_ai-providers_ts_f30e308f._.js",87633,e=>{"use strict";var t=e.i(66125),o=e.i(8715);e.i(6508);var n=e.i(39017),i=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({error:n.z.object({code:n.z.number().nullable(),message:n.z.string(),status:n.z.string()})}))),r=(0,t.createJsonErrorResponseHandler)({errorSchema:i,errorToMessage:e=>e.error.message}),a=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({outputDimensionality:n.z.number().optional(),taskType:n.z.enum(["SEMANTIC_SIMILARITY","CLASSIFICATION","CLUSTERING","RETRIEVAL_DOCUMENT","RETRIEVAL_QUERY","QUESTION_ANSWERING","FACT_VERIFICATION","CODE_RETRIEVAL_QUERY"]).optional()}))),l=class{constructor(e,t){this.specificationVersion="v3",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=e,this.config=t}get provider(){return this.config.provider}async doEmbed({values:e,headers:n,abortSignal:i,providerOptions:l}){let d=await (0,t.parseProviderOptions)({provider:"google",providerOptions:l,schema:a});if(e.length>this.maxEmbeddingsPerCall)throw new o.TooManyEmbeddingValuesForCallError({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});let p=(0,t.combineHeaders)(await (0,t.resolve)(this.config.headers),n);if(1===e.length){let{responseHeaders:o,value:n,rawValue:a}=await (0,t.postJsonToApi)({url:`${this.config.baseURL}/models/${this.modelId}:embedContent`,headers:p,body:{model:`models/${this.modelId}`,content:{parts:[{text:e[0]}]},outputDimensionality:null==d?void 0:d.outputDimensionality,taskType:null==d?void 0:d.taskType},failedResponseHandler:r,successfulResponseHandler:(0,t.createJsonResponseHandler)(u),abortSignal:i,fetch:this.config.fetch});return{warnings:[],embeddings:[n.embedding.values],usage:void 0,response:{headers:o,body:a}}}let{responseHeaders:c,value:m,rawValue:h}=await (0,t.postJsonToApi)({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:p,body:{requests:e.map(e=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:e}]},outputDimensionality:null==d?void 0:d.outputDimensionality,taskType:null==d?void 0:d.taskType}))},failedResponseHandler:r,successfulResponseHandler:(0,t.createJsonResponseHandler)(s),abortSignal:i,fetch:this.config.fetch});return{warnings:[],embeddings:m.embeddings.map(e=>e.values),usage:void 0,response:{headers:c,body:h}}}},s=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({embeddings:n.z.array(n.z.object({values:n.z.array(n.z.number())}))}))),u=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({embedding:n.z.object({values:n.z.array(n.z.number())})})));function d(e){var t,o,n,i;if(null==e)return{inputTokens:{total:void 0,noCache:void 0,cacheRead:void 0,cacheWrite:void 0},outputTokens:{total:void 0,text:void 0,reasoning:void 0},raw:void 0};let r=null!=(t=e.promptTokenCount)?t:0,a=null!=(o=e.candidatesTokenCount)?o:0,l=null!=(n=e.cachedContentTokenCount)?n:0,s=null!=(i=e.thoughtsTokenCount)?i:0;return{inputTokens:{total:r,noCache:r-l,cacheRead:l,cacheWrite:void 0},outputTokens:{total:a+s,text:a,reasoning:s},raw:e}}function p(e,t=!0){var o;if(null==e)return;if(null!=(o=e)&&"object"==typeof o&&"object"===o.type&&(null==o.properties||0===Object.keys(o.properties).length)&&!o.additionalProperties)return t?void 0:"object"==typeof e&&e.description?{type:"object",description:e.description}:{type:"object"};if("boolean"==typeof e)return{type:"boolean",properties:{}};let{type:n,description:i,required:r,properties:a,items:l,allOf:s,anyOf:u,oneOf:d,format:c,const:m,minLength:h,enum:g}=e,_={};if(i&&(_.description=i),r&&(_.required=r),c&&(_.format=c),void 0!==m&&(_.enum=[m]),n)if(Array.isArray(n)){let e=n.includes("null"),t=n.filter(e=>"null"!==e);0===t.length?_.type="null":(_.anyOf=t.map(e=>({type:e})),e&&(_.nullable=!0))}else _.type=n;if(void 0!==g&&(_.enum=g),null!=a&&(_.properties=Object.entries(a).reduce((e,[t,o])=>(e[t]=p(o,!1),e),{})),l&&(_.items=Array.isArray(l)?l.map(e=>p(e,!1)):p(l,!1)),s&&(_.allOf=s.map(e=>p(e,!1))),u)if(u.some(e=>"object"==typeof e&&(null==e?void 0:e.type)==="null")){let e=u.filter(e=>"object"!=typeof e||(null==e?void 0:e.type)!=="null");if(1===e.length){let t=p(e[0],!1);"object"==typeof t&&(_.nullable=!0,Object.assign(_,t))}else _.anyOf=e.map(e=>p(e,!1)),_.nullable=!0}else _.anyOf=u.map(e=>p(e,!1));return d&&(_.oneOf=d.map(e=>p(e,!1))),void 0!==h&&(_.minLength=h),_}function c(e){return e.includes("/")?e:`models/${e}`}var m=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({responseModalities:n.z.array(n.z.enum(["TEXT","IMAGE"])).optional(),thinkingConfig:n.z.object({thinkingBudget:n.z.number().optional(),includeThoughts:n.z.boolean().optional(),thinkingLevel:n.z.enum(["minimal","low","medium","high"]).optional()}).optional(),cachedContent:n.z.string().optional(),structuredOutputs:n.z.boolean().optional(),safetySettings:n.z.array(n.z.object({category:n.z.enum(["HARM_CATEGORY_UNSPECIFIED","HARM_CATEGORY_HATE_SPEECH","HARM_CATEGORY_DANGEROUS_CONTENT","HARM_CATEGORY_HARASSMENT","HARM_CATEGORY_SEXUALLY_EXPLICIT","HARM_CATEGORY_CIVIC_INTEGRITY"]),threshold:n.z.enum(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"])})).optional(),threshold:n.z.enum(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"]).optional(),audioTimestamp:n.z.boolean().optional(),labels:n.z.record(n.z.string(),n.z.string()).optional(),mediaResolution:n.z.enum(["MEDIA_RESOLUTION_UNSPECIFIED","MEDIA_RESOLUTION_LOW","MEDIA_RESOLUTION_MEDIUM","MEDIA_RESOLUTION_HIGH"]).optional(),imageConfig:n.z.object({aspectRatio:n.z.enum(["1:1","2:3","3:2","3:4","4:3","4:5","5:4","9:16","16:9","21:9"]).optional(),imageSize:n.z.enum(["1K","2K","4K"]).optional()}).optional(),retrievalConfig:n.z.object({latLng:n.z.object({latitude:n.z.number(),longitude:n.z.number()}).optional()}).optional()})));function h({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"MALFORMED_FUNCTION_CALL":return"error";default:return"other"}}var g=class{constructor(e,o){var n;this.specificationVersion="v3",this.modelId=e,this.config=o,this.generateId=null!=(n=o.generateId)?n:t.generateId}get provider(){return this.config.provider}get supportedUrls(){var e,t,o;return null!=(o=null==(t=(e=this.config).supportedUrls)?void 0:t.call(e))?o:{}}async getArgs({prompt:e,maxOutputTokens:n,temperature:i,topP:r,topK:a,frequencyPenalty:l,presencePenalty:s,stopSequences:u,responseFormat:d,seed:c,tools:h,toolChoice:g,providerOptions:_}){var z;let y=[],f=this.config.provider.includes("vertex")?"vertex":"google",b=await (0,t.parseProviderOptions)({provider:f,providerOptions:_,schema:m});null==b&&"google"!==f&&(b=await (0,t.parseProviderOptions)({provider:"google",providerOptions:_,schema:m})),(null==h?void 0:h.some(e=>"provider"===e.type&&"google.vertex_rag_store"===e.id))&&!this.config.provider.startsWith("google.vertex.")&&y.push({type:"other",message:`The 'vertex_rag_store' tool is only supported with the Google Vertex provider and might not be supported or could behave unexpectedly with the current Google provider (${this.config.provider}).`});let v=this.modelId.toLowerCase().startsWith("gemma-"),{contents:x,systemInstruction:w}=function(e,n){var i,r,a;let l=[],s=[],u=!0,d=null!=(i=null==n?void 0:n.isGemmaModel)&&i,p=null!=(r=null==n?void 0:n.providerOptionsName)?r:"google";for(let{role:n,content:i}of e)switch(n){case"system":if(!u)throw new o.UnsupportedFunctionalityError({functionality:"system messages are only supported at the beginning of the conversation"});l.push({text:i});break;case"user":{u=!1;let e=[];for(let o of i)switch(o.type){case"text":e.push({text:o.text});break;case"file":{let n="image/*"===o.mediaType?"image/jpeg":o.mediaType;e.push(o.data instanceof URL?{fileData:{mimeType:n,fileUri:o.data.toString()}}:{inlineData:{mimeType:n,data:(0,t.convertToBase64)(o.data)}})}}s.push({role:"user",parts:e});break}case"assistant":u=!1,s.push({role:"model",parts:i.map(e=>{var n;let i=null==(n=e.providerOptions)?void 0:n[p],r=(null==i?void 0:i.thoughtSignature)!=null?String(i.thoughtSignature):void 0;switch(e.type){case"text":return 0===e.text.length?void 0:{text:e.text,thoughtSignature:r};case"reasoning":return 0===e.text.length?void 0:{text:e.text,thought:!0,thoughtSignature:r};case"file":if(e.data instanceof URL)throw new o.UnsupportedFunctionalityError({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:e.mediaType,data:(0,t.convertToBase64)(e.data)},thoughtSignature:r};case"tool-call":return{functionCall:{name:e.toolName,args:e.input},thoughtSignature:r}}}).filter(e=>void 0!==e)});break;case"tool":{u=!1;let e=[];for(let t of i){if("tool-approval-response"===t.type)continue;let o=t.output;if("content"===o.type)for(let n of o.value)switch(n.type){case"text":e.push({functionResponse:{name:t.toolName,response:{name:t.toolName,content:n.text}}});break;case"image-data":e.push({inlineData:{mimeType:n.mediaType,data:n.data}},{text:"Tool executed successfully and returned this image as a response"});break;default:e.push({text:JSON.stringify(n)})}else e.push({functionResponse:{name:t.toolName,response:{name:t.toolName,content:"execution-denied"===o.type?null!=(a=o.reason)?a:"Tool execution denied.":o.value}}})}s.push({role:"user",parts:e})}}if(d&&l.length>0&&s.length>0&&"user"===s[0].role){let e=l.map(e=>e.text).join("\n\n");s[0].parts.unshift({text:e+"\n\n"})}return{systemInstruction:l.length>0&&!d?{parts:l}:void 0,contents:s}}(e,{isGemmaModel:v,providerOptionsName:f}),{tools:k,toolConfig:j,toolWarnings:S}=function({tools:e,toolChoice:t,modelId:n}){var i;e=(null==e?void 0:e.length)?e:void 0;let r=[],a=["gemini-flash-latest","gemini-flash-lite-latest","gemini-pro-latest"].some(e=>e===n),l=n.includes("gemini-2")||n.includes("gemini-3")||a,s=n.includes("gemini-1.5-flash")&&!n.includes("-8b"),u=n.includes("gemini-2.5");if(null==e)return{tools:void 0,toolConfig:void 0,toolWarnings:r};let d=e.some(e=>"function"===e.type),c=e.some(e=>"provider"===e.type);if(d&&c&&r.push({type:"unsupported",feature:"combination of function and provider-defined tools"}),c){let t=[];return e.filter(e=>"provider"===e.type).forEach(e=>{switch(e.id){case"google.google_search":l?t.push({googleSearch:{}}):s?t.push({googleSearchRetrieval:{dynamicRetrievalConfig:{mode:e.args.mode,dynamicThreshold:e.args.dynamicThreshold}}}):t.push({googleSearchRetrieval:{}});break;case"google.enterprise_web_search":l?t.push({enterpriseWebSearch:{}}):r.push({type:"unsupported",feature:`provider-defined tool ${e.id}`,details:"Enterprise Web Search requires Gemini 2.0 or newer."});break;case"google.url_context":l?t.push({urlContext:{}}):r.push({type:"unsupported",feature:`provider-defined tool ${e.id}`,details:"The URL context tool is not supported with other Gemini models than Gemini 2."});break;case"google.code_execution":l?t.push({codeExecution:{}}):r.push({type:"unsupported",feature:`provider-defined tool ${e.id}`,details:"The code execution tools is not supported with other Gemini models than Gemini 2."});break;case"google.file_search":u?t.push({fileSearch:{...e.args}}):r.push({type:"unsupported",feature:`provider-defined tool ${e.id}`,details:"The file search tool is only supported with Gemini 2.5 models."});break;case"google.vertex_rag_store":l?t.push({retrieval:{vertex_rag_store:{rag_resources:{rag_corpus:e.args.ragCorpus},similarity_top_k:e.args.topK}}}):r.push({type:"unsupported",feature:`provider-defined tool ${e.id}`,details:"The RAG store tool is not supported with other Gemini models than Gemini 2."});break;case"google.google_maps":l?t.push({googleMaps:{}}):r.push({type:"unsupported",feature:`provider-defined tool ${e.id}`,details:"The Google Maps grounding tool is not supported with Gemini models other than Gemini 2 or newer."});break;default:r.push({type:"unsupported",feature:`provider-defined tool ${e.id}`})}}),{tools:t.length>0?t:void 0,toolConfig:void 0,toolWarnings:r}}let m=[];for(let t of e)"function"===t.type?m.push({name:t.name,description:null!=(i=t.description)?i:"",parameters:p(t.inputSchema)}):r.push({type:"unsupported",feature:`function tool ${t.name}`});if(null==t)return{tools:[{functionDeclarations:m}],toolConfig:void 0,toolWarnings:r};let h=t.type;switch(h){case"auto":return{tools:[{functionDeclarations:m}],toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:r};case"none":return{tools:[{functionDeclarations:m}],toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:r};case"required":return{tools:[{functionDeclarations:m}],toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:r};case"tool":return{tools:[{functionDeclarations:m}],toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[t.toolName]}},toolWarnings:r};default:throw new o.UnsupportedFunctionalityError({functionality:`tool choice type: ${h}`})}}({tools:h,toolChoice:g,modelId:this.modelId});return{args:{generationConfig:{maxOutputTokens:n,temperature:i,topK:a,topP:r,frequencyPenalty:l,presencePenalty:s,stopSequences:u,seed:c,responseMimeType:(null==d?void 0:d.type)==="json"?"application/json":void 0,responseSchema:(null==d?void 0:d.type)==="json"&&null!=d.schema&&(null==(z=null==b?void 0:b.structuredOutputs)||z)?p(d.schema):void 0,...(null==b?void 0:b.audioTimestamp)&&{audioTimestamp:b.audioTimestamp},responseModalities:null==b?void 0:b.responseModalities,thinkingConfig:null==b?void 0:b.thinkingConfig,...(null==b?void 0:b.mediaResolution)&&{mediaResolution:b.mediaResolution},...(null==b?void 0:b.imageConfig)&&{imageConfig:b.imageConfig}},contents:x,systemInstruction:v?void 0:w,safetySettings:null==b?void 0:b.safetySettings,tools:k,toolConfig:(null==b?void 0:b.retrievalConfig)?{...j,retrievalConfig:b.retrievalConfig}:j,cachedContent:null==b?void 0:b.cachedContent,labels:null==b?void 0:b.labels},warnings:[...y,...S],providerOptionsName:f}}async doGenerate(e){var o,n,i,a,l,s,u,p,m;let g,{args:z,warnings:y,providerOptionsName:f}=await this.getArgs(e),b=(0,t.combineHeaders)(await (0,t.resolve)(this.config.headers),e.headers),{responseHeaders:v,value:w,rawValue:k}=await (0,t.postJsonToApi)({url:`${this.config.baseURL}/${c(this.modelId)}:generateContent`,headers:b,body:z,failedResponseHandler:r,successfulResponseHandler:(0,t.createJsonResponseHandler)(x),abortSignal:e.abortSignal,fetch:this.config.fetch}),j=w.candidates[0],S=[],I=null!=(n=null==(o=j.content)?void 0:o.parts)?n:[],C=w.usageMetadata;for(let e of I)if("executableCode"in e&&(null==(i=e.executableCode)?void 0:i.code)){let t=this.config.generateId();g=t,S.push({type:"tool-call",toolCallId:t,toolName:"code_execution",input:JSON.stringify(e.executableCode),providerExecuted:!0})}else"codeExecutionResult"in e&&e.codeExecutionResult?(S.push({type:"tool-result",toolCallId:g,toolName:"code_execution",result:{outcome:e.codeExecutionResult.outcome,output:e.codeExecutionResult.output}}),g=void 0):"text"in e&&null!=e.text&&e.text.length>0?S.push({type:!0===e.thought?"reasoning":"text",text:e.text,providerMetadata:e.thoughtSignature?{[f]:{thoughtSignature:e.thoughtSignature}}:void 0}):"functionCall"in e?S.push({type:"tool-call",toolCallId:this.config.generateId(),toolName:e.functionCall.name,input:JSON.stringify(e.functionCall.args),providerMetadata:e.thoughtSignature?{[f]:{thoughtSignature:e.thoughtSignature}}:void 0}):"inlineData"in e&&S.push({type:"file",data:e.inlineData.data,mediaType:e.inlineData.mimeType,providerMetadata:e.thoughtSignature?{[f]:{thoughtSignature:e.thoughtSignature}}:void 0});for(let e of null!=(a=_({groundingMetadata:j.groundingMetadata,generateId:this.config.generateId}))?a:[])S.push(e);return{content:S,finishReason:{unified:h({finishReason:j.finishReason,hasToolCalls:S.some(e=>"tool-call"===e.type)}),raw:null!=(l=j.finishReason)?l:void 0},usage:d(C),warnings:y,providerMetadata:{[f]:{promptFeedback:null!=(s=w.promptFeedback)?s:null,groundingMetadata:null!=(u=j.groundingMetadata)?u:null,urlContextMetadata:null!=(p=j.urlContextMetadata)?p:null,safetyRatings:null!=(m=j.safetyRatings)?m:null,usageMetadata:null!=C?C:null}},request:{body:z},response:{headers:v,body:k}}}async doStream(e){let o,n,i,{args:a,warnings:l,providerOptionsName:s}=await this.getArgs(e),u=(0,t.combineHeaders)(await (0,t.resolve)(this.config.headers),e.headers),{responseHeaders:p,value:m}=await (0,t.postJsonToApi)({url:`${this.config.baseURL}/${c(this.modelId)}:streamGenerateContent?alt=sse`,headers:u,body:a,failedResponseHandler:r,successfulResponseHandler:(0,t.createEventSourceResponseHandler)(w),abortSignal:e.abortSignal,fetch:this.config.fetch}),g={unified:"other",raw:void 0},z=this.config.generateId,y=!1,f=null,b=null,v=0,x=new Set;return{stream:m.pipeThrough(new TransformStream({start(e){e.enqueue({type:"stream-start",warnings:l})},transform(t,r){var a,l,u,d,p,c,m;if(e.includeRawChunks&&r.enqueue({type:"raw",rawValue:t.rawValue}),!t.success)return void r.enqueue({type:"error",error:t.error});let w=t.value,k=w.usageMetadata;null!=k&&(n=k);let j=null==(a=w.candidates)?void 0:a[0];if(null==j)return;let S=j.content,I=_({groundingMetadata:j.groundingMetadata,generateId:z});if(null!=I)for(let e of I)"url"!==e.sourceType||x.has(e.url)||(x.add(e.url),r.enqueue(e));if(null!=S){for(let e of null!=(l=S.parts)?l:[])if("executableCode"in e&&(null==(u=e.executableCode)?void 0:u.code)){let t=z();o=t,r.enqueue({type:"tool-call",toolCallId:t,toolName:"code_execution",input:JSON.stringify(e.executableCode),providerExecuted:!0}),y=!0}else if("codeExecutionResult"in e&&e.codeExecutionResult){let t=o;t&&(r.enqueue({type:"tool-result",toolCallId:t,toolName:"code_execution",result:{outcome:e.codeExecutionResult.outcome,output:e.codeExecutionResult.output}}),o=void 0)}else"text"in e&&null!=e.text&&e.text.length>0?!0===e.thought?(null!==f&&(r.enqueue({type:"text-end",id:f}),f=null),null===b&&(b=String(v++),r.enqueue({type:"reasoning-start",id:b,providerMetadata:e.thoughtSignature?{[s]:{thoughtSignature:e.thoughtSignature}}:void 0})),r.enqueue({type:"reasoning-delta",id:b,delta:e.text,providerMetadata:e.thoughtSignature?{[s]:{thoughtSignature:e.thoughtSignature}}:void 0})):(null!==b&&(r.enqueue({type:"reasoning-end",id:b}),b=null),null===f&&(f=String(v++),r.enqueue({type:"text-start",id:f,providerMetadata:e.thoughtSignature?{[s]:{thoughtSignature:e.thoughtSignature}}:void 0})),r.enqueue({type:"text-delta",id:f,delta:e.text,providerMetadata:e.thoughtSignature?{[s]:{thoughtSignature:e.thoughtSignature}}:void 0})):"inlineData"in e&&r.enqueue({type:"file",mediaType:e.inlineData.mimeType,data:e.inlineData.data});let e=function({parts:e,generateId:t,providerOptionsName:o}){let n=null==e?void 0:e.filter(e=>"functionCall"in e);return null==n||0===n.length?void 0:n.map(e=>({type:"tool-call",toolCallId:t(),toolName:e.functionCall.name,args:JSON.stringify(e.functionCall.args),providerMetadata:e.thoughtSignature?{[o]:{thoughtSignature:e.thoughtSignature}}:void 0}))}({parts:S.parts,generateId:z,providerOptionsName:s});if(null!=e)for(let t of e)r.enqueue({type:"tool-input-start",id:t.toolCallId,toolName:t.toolName,providerMetadata:t.providerMetadata}),r.enqueue({type:"tool-input-delta",id:t.toolCallId,delta:t.args,providerMetadata:t.providerMetadata}),r.enqueue({type:"tool-input-end",id:t.toolCallId,providerMetadata:t.providerMetadata}),r.enqueue({type:"tool-call",toolCallId:t.toolCallId,toolName:t.toolName,input:t.args,providerMetadata:t.providerMetadata}),y=!0}null!=j.finishReason&&(g={unified:h({finishReason:j.finishReason,hasToolCalls:y}),raw:j.finishReason},i={[s]:{promptFeedback:null!=(d=w.promptFeedback)?d:null,groundingMetadata:null!=(p=j.groundingMetadata)?p:null,urlContextMetadata:null!=(c=j.urlContextMetadata)?c:null,safetyRatings:null!=(m=j.safetyRatings)?m:null}},null!=k&&(i[s].usageMetadata=k))},flush(e){null!==f&&e.enqueue({type:"text-end",id:f}),null!==b&&e.enqueue({type:"reasoning-end",id:b}),e.enqueue({type:"finish",finishReason:g,usage:d(n),providerMetadata:i})}})),response:{headers:p},request:{body:a}}}};function _({groundingMetadata:e,generateId:t}){var o,n,i,r,a;if(!(null==e?void 0:e.groundingChunks))return;let l=[];for(let s of e.groundingChunks)if(null!=s.web)l.push({type:"source",sourceType:"url",id:t(),url:s.web.uri,title:null!=(o=s.web.title)?o:void 0});else if(null!=s.retrievedContext){let e=s.retrievedContext.uri,o=s.retrievedContext.fileSearchStore;if(e&&(e.startsWith("http://")||e.startsWith("https://")))l.push({type:"source",sourceType:"url",id:t(),url:e,title:null!=(n=s.retrievedContext.title)?n:void 0});else if(e){let o,n=null!=(i=s.retrievedContext.title)?i:"Unknown Document",r="application/octet-stream";e.endsWith(".pdf")?r="application/pdf":e.endsWith(".txt")?r="text/plain":e.endsWith(".docx")?r="application/vnd.openxmlformats-officedocument.wordprocessingml.document":e.endsWith(".doc")?r="application/msword":e.match(/\.(md|markdown)$/)&&(r="text/markdown"),o=e.split("/").pop(),l.push({type:"source",sourceType:"document",id:t(),mediaType:r,title:n,filename:o})}else if(o){let e=null!=(r=s.retrievedContext.title)?r:"Unknown Document";l.push({type:"source",sourceType:"document",id:t(),mediaType:"application/octet-stream",title:e,filename:o.split("/").pop()})}}else null!=s.maps&&s.maps.uri&&l.push({type:"source",sourceType:"url",id:t(),url:s.maps.uri,title:null!=(a=s.maps.title)?a:void 0});return l.length>0?l:void 0}var z=()=>n.z.object({webSearchQueries:n.z.array(n.z.string()).nullish(),retrievalQueries:n.z.array(n.z.string()).nullish(),searchEntryPoint:n.z.object({renderedContent:n.z.string()}).nullish(),groundingChunks:n.z.array(n.z.object({web:n.z.object({uri:n.z.string(),title:n.z.string().nullish()}).nullish(),retrievedContext:n.z.object({uri:n.z.string().nullish(),title:n.z.string().nullish(),text:n.z.string().nullish(),fileSearchStore:n.z.string().nullish()}).nullish(),maps:n.z.object({uri:n.z.string().nullish(),title:n.z.string().nullish(),text:n.z.string().nullish(),placeId:n.z.string().nullish()}).nullish()})).nullish(),groundingSupports:n.z.array(n.z.object({segment:n.z.object({startIndex:n.z.number().nullish(),endIndex:n.z.number().nullish(),text:n.z.string().nullish()}),segment_text:n.z.string().nullish(),groundingChunkIndices:n.z.array(n.z.number()).nullish(),supportChunkIndices:n.z.array(n.z.number()).nullish(),confidenceScores:n.z.array(n.z.number()).nullish(),confidenceScore:n.z.array(n.z.number()).nullish()})).nullish(),retrievalMetadata:n.z.union([n.z.object({webDynamicRetrievalScore:n.z.number()}),n.z.object({})]).nullish()}),y=()=>n.z.object({parts:n.z.array(n.z.union([n.z.object({functionCall:n.z.object({name:n.z.string(),args:n.z.unknown()}),thoughtSignature:n.z.string().nullish()}),n.z.object({inlineData:n.z.object({mimeType:n.z.string(),data:n.z.string()}),thoughtSignature:n.z.string().nullish()}),n.z.object({executableCode:n.z.object({language:n.z.string(),code:n.z.string()}).nullish(),codeExecutionResult:n.z.object({outcome:n.z.string(),output:n.z.string()}).nullish(),text:n.z.string().nullish(),thought:n.z.boolean().nullish(),thoughtSignature:n.z.string().nullish()})])).nullish()}),f=()=>n.z.object({category:n.z.string().nullish(),probability:n.z.string().nullish(),probabilityScore:n.z.number().nullish(),severity:n.z.string().nullish(),severityScore:n.z.number().nullish(),blocked:n.z.boolean().nullish()}),b=n.z.object({cachedContentTokenCount:n.z.number().nullish(),thoughtsTokenCount:n.z.number().nullish(),promptTokenCount:n.z.number().nullish(),candidatesTokenCount:n.z.number().nullish(),totalTokenCount:n.z.number().nullish(),trafficType:n.z.string().nullish()}),v=()=>n.z.object({urlMetadata:n.z.array(n.z.object({retrievedUrl:n.z.string(),urlRetrievalStatus:n.z.string()}))}),x=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({candidates:n.z.array(n.z.object({content:y().nullish().or(n.z.object({}).strict()),finishReason:n.z.string().nullish(),safetyRatings:n.z.array(f()).nullish(),groundingMetadata:z().nullish(),urlContextMetadata:v().nullish()})),usageMetadata:b.nullish(),promptFeedback:n.z.object({blockReason:n.z.string().nullish(),safetyRatings:n.z.array(f()).nullish()}).nullish()}))),w=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({candidates:n.z.array(n.z.object({content:y().nullish(),finishReason:n.z.string().nullish(),safetyRatings:n.z.array(f()).nullish(),groundingMetadata:z().nullish(),urlContextMetadata:v().nullish()})).nullish(),usageMetadata:b.nullish(),promptFeedback:n.z.object({blockReason:n.z.string().nullish(),safetyRatings:n.z.array(f()).nullish()}).nullish()}))),k=(0,t.createProviderToolFactoryWithOutputSchema)({id:"google.code_execution",inputSchema:n.z.object({language:n.z.string().describe("The programming language of the code."),code:n.z.string().describe("The code to be executed.")}),outputSchema:n.z.object({outcome:n.z.string().describe('The outcome of the execution (e.g., "OUTCOME_OK").'),output:n.z.string().describe("The output from the code execution.")})}),j=(0,t.createProviderToolFactory)({id:"google.enterprise_web_search",inputSchema:(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({})))}),S=n.z.object({fileSearchStoreNames:n.z.array(n.z.string()).describe("The names of the file_search_stores to retrieve from. Example: `fileSearchStores/my-file-search-store-123`"),topK:n.z.number().int().positive().describe("The number of file search retrieval chunks to retrieve.").optional(),metadataFilter:n.z.string().describe("Metadata filter to apply to the file search retrieval documents. See https://google.aip.dev/160 for the syntax of the filter expression.").optional()}).passthrough(),I=(0,t.lazySchema)(()=>(0,t.zodSchema)(S)),C=(0,t.createProviderToolFactory)({id:"google.file_search",inputSchema:I}),T=(0,t.createProviderToolFactory)({id:"google.google_maps",inputSchema:(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({})))}),N=(0,t.createProviderToolFactory)({id:"google.google_search",inputSchema:(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({mode:n.z.enum(["MODE_DYNAMIC","MODE_UNSPECIFIED"]).default("MODE_UNSPECIFIED"),dynamicThreshold:n.z.number().default(1)})))}),q={googleSearch:N,enterpriseWebSearch:j,googleMaps:T,urlContext:(0,t.createProviderToolFactory)({id:"google.url_context",inputSchema:(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({})))}),fileSearch:C,codeExecution:k,vertexRagStore:(0,t.createProviderToolFactory)({id:"google.vertex_rag_store",inputSchema:n.z.object({ragCorpus:n.z.string(),topK:n.z.number().optional()})})},R=class{constructor(e,t,o){this.modelId=e,this.settings=t,this.config=o,this.specificationVersion="v3"}get maxImagesPerCall(){var e;return null!=(e=this.settings.maxImagesPerCall)?e:4}get provider(){return this.config.provider}async doGenerate(e){var o,n,i;let{prompt:a,n:l=1,size:s,aspectRatio:u="1:1",seed:d,providerOptions:p,headers:c,abortSignal:m,files:h,mask:g}=e,_=[];if(null!=h&&h.length>0)throw Error("Google Generative AI does not support image editing. Use Google Vertex AI (@ai-sdk/google-vertex) for image editing capabilities.");if(null!=g)throw Error("Google Generative AI does not support image editing with masks. Use Google Vertex AI (@ai-sdk/google-vertex) for image editing capabilities.");null!=s&&_.push({type:"unsupported",feature:"size",details:"This model does not support the `size` option. Use `aspectRatio` instead."}),null!=d&&_.push({type:"unsupported",feature:"seed",details:"This model does not support the `seed` option through this provider."});let z=await (0,t.parseProviderOptions)({provider:"google",providerOptions:p,schema:O}),y=null!=(i=null==(n=null==(o=this.config._internal)?void 0:o.currentDate)?void 0:n.call(o))?i:new Date,f={sampleCount:l};null!=u&&(f.aspectRatio=u),z&&Object.assign(f,z);let{responseHeaders:b,value:v}=await (0,t.postJsonToApi)({url:`${this.config.baseURL}/models/${this.modelId}:predict`,headers:(0,t.combineHeaders)(await (0,t.resolve)(this.config.headers),c),body:{instances:[{prompt:a}],parameters:f},failedResponseHandler:r,successfulResponseHandler:(0,t.createJsonResponseHandler)(E),abortSignal:m,fetch:this.config.fetch});return{images:v.predictions.map(e=>e.bytesBase64Encoded),warnings:null!=_?_:[],providerMetadata:{google:{images:v.predictions.map(e=>({}))}},response:{timestamp:y,modelId:this.modelId,headers:b}}}},E=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({predictions:n.z.array(n.z.object({bytesBase64Encoded:n.z.string()})).default([])}))),O=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({personGeneration:n.z.enum(["dont_allow","allow_adult","allow_all"]).nullish(),aspectRatio:n.z.enum(["1:1","3:4","4:3","9:16","16:9"]).nullish()})));function M(e={}){var o,n;let i=null!=(o=(0,t.withoutTrailingSlash)(e.baseURL))?o:"https://generativelanguage.googleapis.com/v1beta",r=null!=(n=e.name)?n:"google.generative-ai",a=()=>(0,t.withUserAgentSuffix)({"x-goog-api-key":(0,t.loadApiKey)({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers},"ai-sdk/google/3.0.1"),s=o=>{var n;return new g(o,{provider:r,baseURL:i,headers:a,generateId:null!=(n=e.generateId)?n:t.generateId,supportedUrls:()=>({"*":[RegExp(`^${i}/files/.*$`),RegExp("^https://(?:www\\.)?youtube\\.com/watch\\?v=[\\w-]+(?:&[\\w=&.-]*)?$"),RegExp("^https://youtu\\.be/[\\w-]+(?:\\?[\\w=&.-]*)?$")]}),fetch:e.fetch})},u=t=>new l(t,{provider:r,baseURL:i,headers:a,fetch:e.fetch}),d=(t,o={})=>new R(t,o,{provider:r,baseURL:i,headers:a,fetch:e.fetch}),p=function(e){if(new.target)throw Error("The Google Generative AI model function cannot be called with the new keyword.");return s(e)};return p.specificationVersion="v3",p.languageModel=s,p.chat=s,p.generativeAI=s,p.embedding=u,p.embeddingModel=u,p.textEmbedding=u,p.textEmbeddingModel=u,p.image=d,p.imageModel=d,p.tools=q,p}M();var U=n.z.object({error:n.z.object({message:n.z.string(),type:n.z.string().nullish(),param:n.z.any().nullish(),code:n.z.union([n.z.string(),n.z.number()]).nullish()})}),A=(0,t.createJsonErrorResponseHandler)({errorSchema:U,errorToMessage:e=>e.error.message});function P(e){let t=e.startsWith("o3")||e.startsWith("o4-mini")||e.startsWith("gpt-5")&&!e.startsWith("gpt-5-chat"),o=e.startsWith("gpt-4")||e.startsWith("gpt-5-mini")||e.startsWith("gpt-5")&&!e.startsWith("gpt-5-nano")&&!e.startsWith("gpt-5-chat")||e.startsWith("o3")||e.startsWith("o4-mini"),n=e.startsWith("o1")||e.startsWith("o3")||e.startsWith("o4-mini")||e.startsWith("codex-mini")||e.startsWith("computer-use-preview")||e.startsWith("gpt-5")&&!e.startsWith("gpt-5-chat");return{supportsFlexProcessing:t,supportsPriorityProcessing:o,isReasoningModel:n,systemMessageMode:n?"developer":"system",supportsNonReasoningParameters:e.startsWith("gpt-5.1")||e.startsWith("gpt-5.2")}}function $(e){var t,o,n,i,r,a;if(null==e)return{inputTokens:{total:void 0,noCache:void 0,cacheRead:void 0,cacheWrite:void 0},outputTokens:{total:void 0,text:void 0,reasoning:void 0},raw:void 0};let l=null!=(t=e.prompt_tokens)?t:0,s=null!=(o=e.completion_tokens)?o:0,u=null!=(i=null==(n=e.prompt_tokens_details)?void 0:n.cached_tokens)?i:0,d=null!=(a=null==(r=e.completion_tokens_details)?void 0:r.reasoning_tokens)?a:0;return{inputTokens:{total:l,noCache:l-u,cacheRead:u,cacheWrite:void 0},outputTokens:{total:s,text:s-d,reasoning:d},raw:e}}function H({id:e,model:t,created:o}){return{id:null!=e?e:void 0,modelId:null!=t?t:void 0,timestamp:o?new Date(1e3*o):void 0}}function D(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"other"}}var F=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({id:n.z.string().nullish(),created:n.z.number().nullish(),model:n.z.string().nullish(),choices:n.z.array(n.z.object({message:n.z.object({role:n.z.literal("assistant").nullish(),content:n.z.string().nullish(),tool_calls:n.z.array(n.z.object({id:n.z.string().nullish(),type:n.z.literal("function"),function:n.z.object({name:n.z.string(),arguments:n.z.string()})})).nullish(),annotations:n.z.array(n.z.object({type:n.z.literal("url_citation"),url_citation:n.z.object({start_index:n.z.number(),end_index:n.z.number(),url:n.z.string(),title:n.z.string()})})).nullish()}),index:n.z.number(),logprobs:n.z.object({content:n.z.array(n.z.object({token:n.z.string(),logprob:n.z.number(),top_logprobs:n.z.array(n.z.object({token:n.z.string(),logprob:n.z.number()}))})).nullish()}).nullish(),finish_reason:n.z.string().nullish()})),usage:n.z.object({prompt_tokens:n.z.number().nullish(),completion_tokens:n.z.number().nullish(),total_tokens:n.z.number().nullish(),prompt_tokens_details:n.z.object({cached_tokens:n.z.number().nullish()}).nullish(),completion_tokens_details:n.z.object({reasoning_tokens:n.z.number().nullish(),accepted_prediction_tokens:n.z.number().nullish(),rejected_prediction_tokens:n.z.number().nullish()}).nullish()}).nullish()}))),J=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.union([n.z.object({id:n.z.string().nullish(),created:n.z.number().nullish(),model:n.z.string().nullish(),choices:n.z.array(n.z.object({delta:n.z.object({role:n.z.enum(["assistant"]).nullish(),content:n.z.string().nullish(),tool_calls:n.z.array(n.z.object({index:n.z.number(),id:n.z.string().nullish(),type:n.z.literal("function").nullish(),function:n.z.object({name:n.z.string().nullish(),arguments:n.z.string().nullish()})})).nullish(),annotations:n.z.array(n.z.object({type:n.z.literal("url_citation"),url_citation:n.z.object({start_index:n.z.number(),end_index:n.z.number(),url:n.z.string(),title:n.z.string()})})).nullish()}).nullish(),logprobs:n.z.object({content:n.z.array(n.z.object({token:n.z.string(),logprob:n.z.number(),top_logprobs:n.z.array(n.z.object({token:n.z.string(),logprob:n.z.number()}))})).nullish()}).nullish(),finish_reason:n.z.string().nullish(),index:n.z.number()})),usage:n.z.object({prompt_tokens:n.z.number().nullish(),completion_tokens:n.z.number().nullish(),total_tokens:n.z.number().nullish(),prompt_tokens_details:n.z.object({cached_tokens:n.z.number().nullish()}).nullish(),completion_tokens_details:n.z.object({reasoning_tokens:n.z.number().nullish(),accepted_prediction_tokens:n.z.number().nullish(),rejected_prediction_tokens:n.z.number().nullish()}).nullish()}).nullish()}),U]))),L=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({logitBias:n.z.record(n.z.coerce.number(),n.z.number()).optional(),logprobs:n.z.union([n.z.boolean(),n.z.number()]).optional(),parallelToolCalls:n.z.boolean().optional(),user:n.z.string().optional(),reasoningEffort:n.z.enum(["none","minimal","low","medium","high","xhigh"]).optional(),maxCompletionTokens:n.z.number().optional(),store:n.z.boolean().optional(),metadata:n.z.record(n.z.string().max(64),n.z.string().max(512)).optional(),prediction:n.z.record(n.z.string(),n.z.any()).optional(),serviceTier:n.z.enum(["auto","flex","priority","default"]).optional(),strictJsonSchema:n.z.boolean().optional(),textVerbosity:n.z.enum(["low","medium","high"]).optional(),promptCacheKey:n.z.string().optional(),promptCacheRetention:n.z.enum(["in_memory","24h"]).optional(),safetyIdentifier:n.z.string().optional(),systemMessageMode:n.z.enum(["system","developer","remove"]).optional(),forceReasoning:n.z.boolean().optional()}))),B=class{constructor(e,t){this.specificationVersion="v3",this.supportedUrls={"image/*":[/^https?:\/\/.*$/]},this.modelId=e,this.config=t}get provider(){return this.config.provider}async getArgs({prompt:e,maxOutputTokens:n,temperature:i,topP:r,topK:a,frequencyPenalty:l,presencePenalty:s,stopSequences:u,responseFormat:d,seed:p,tools:c,toolChoice:m,providerOptions:h}){var g,_,z,y,f;let b=[],v=null!=(g=await (0,t.parseProviderOptions)({provider:"openai",providerOptions:h,schema:L}))?g:{},x=P(this.modelId),w=null!=(_=v.forceReasoning)?_:x.isReasoningModel;null!=a&&b.push({type:"unsupported",feature:"topK"});let{messages:k,warnings:j}=function({prompt:e,systemMessageMode:n="system"}){var i;let r=[],a=[];for(let{role:l,content:s}of e)switch(l){case"system":switch(n){case"system":r.push({role:"system",content:s});break;case"developer":r.push({role:"developer",content:s});break;case"remove":a.push({type:"other",message:"system messages are removed for this model"});break;default:throw Error(`Unsupported system message mode: ${n}`)}break;case"user":if(1===s.length&&"text"===s[0].type){r.push({role:"user",content:s[0].text});break}r.push({role:"user",content:s.map((e,n)=>{var i,r,a;switch(e.type){case"text":return{type:"text",text:e.text};case"file":if(e.mediaType.startsWith("image/")){let o="image/*"===e.mediaType?"image/jpeg":e.mediaType;return{type:"image_url",image_url:{url:e.data instanceof URL?e.data.toString():`data:${o};base64,${(0,t.convertToBase64)(e.data)}`,detail:null==(r=null==(i=e.providerOptions)?void 0:i.openai)?void 0:r.imageDetail}}}if(e.mediaType.startsWith("audio/")){if(e.data instanceof URL)throw new o.UnsupportedFunctionalityError({functionality:"audio file parts with URLs"});switch(e.mediaType){case"audio/wav":return{type:"input_audio",input_audio:{data:(0,t.convertToBase64)(e.data),format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:(0,t.convertToBase64)(e.data),format:"mp3"}};default:throw new o.UnsupportedFunctionalityError({functionality:`audio content parts with media type ${e.mediaType}`})}}if("application/pdf"===e.mediaType){if(e.data instanceof URL)throw new o.UnsupportedFunctionalityError({functionality:"PDF file parts with URLs"});return{type:"file",file:"string"==typeof e.data&&e.data.startsWith("file-")?{file_id:e.data}:{filename:null!=(a=e.filename)?a:`part-${n}.pdf`,file_data:`data:application/pdf;base64,${(0,t.convertToBase64)(e.data)}`}}}else throw new o.UnsupportedFunctionalityError({functionality:`file part media type ${e.mediaType}`})}})});break;case"assistant":{let e="",t=[];for(let o of s)switch(o.type){case"text":e+=o.text;break;case"tool-call":t.push({id:o.toolCallId,type:"function",function:{name:o.toolName,arguments:JSON.stringify(o.input)}})}r.push({role:"assistant",content:e,tool_calls:t.length>0?t:void 0});break}case"tool":for(let e of s){let t;if("tool-approval-response"===e.type)continue;let o=e.output;switch(o.type){case"text":case"error-text":t=o.value;break;case"execution-denied":t=null!=(i=o.reason)?i:"Tool execution denied.";break;case"content":case"json":case"error-json":t=JSON.stringify(o.value)}r.push({role:"tool",tool_call_id:e.toolCallId,content:t})}break;default:throw Error(`Unsupported role: ${l}`)}return{messages:r,warnings:a}}({prompt:e,systemMessageMode:null!=(z=v.systemMessageMode)?z:w?"developer":x.systemMessageMode});b.push(...j);let S=null==(y=v.strictJsonSchema)||y,I={model:this.modelId,logit_bias:v.logitBias,logprobs:!0===v.logprobs||"number"==typeof v.logprobs||void 0,top_logprobs:"number"==typeof v.logprobs?v.logprobs:"boolean"==typeof v.logprobs&&v.logprobs?0:void 0,user:v.user,parallel_tool_calls:v.parallelToolCalls,max_tokens:n,temperature:i,top_p:r,frequency_penalty:l,presence_penalty:s,response_format:(null==d?void 0:d.type)==="json"?null!=d.schema?{type:"json_schema",json_schema:{schema:d.schema,strict:S,name:null!=(f=d.name)?f:"response",description:d.description}}:{type:"json_object"}:void 0,stop:u,seed:p,verbosity:v.textVerbosity,max_completion_tokens:v.maxCompletionTokens,store:v.store,metadata:v.metadata,prediction:v.prediction,reasoning_effort:v.reasoningEffort,service_tier:v.serviceTier,prompt_cache_key:v.promptCacheKey,prompt_cache_retention:v.promptCacheRetention,safety_identifier:v.safetyIdentifier,messages:k};w?("none"===v.reasoningEffort&&x.supportsNonReasoningParameters||(null!=I.temperature&&(I.temperature=void 0,b.push({type:"unsupported",feature:"temperature",details:"temperature is not supported for reasoning models"})),null!=I.top_p&&(I.top_p=void 0,b.push({type:"unsupported",feature:"topP",details:"topP is not supported for reasoning models"})),null!=I.logprobs&&(I.logprobs=void 0,b.push({type:"other",message:"logprobs is not supported for reasoning models"}))),null!=I.frequency_penalty&&(I.frequency_penalty=void 0,b.push({type:"unsupported",feature:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),null!=I.presence_penalty&&(I.presence_penalty=void 0,b.push({type:"unsupported",feature:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),null!=I.logit_bias&&(I.logit_bias=void 0,b.push({type:"other",message:"logitBias is not supported for reasoning models"})),null!=I.top_logprobs&&(I.top_logprobs=void 0,b.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),null!=I.max_tokens&&(null==I.max_completion_tokens&&(I.max_completion_tokens=I.max_tokens),I.max_tokens=void 0)):(this.modelId.startsWith("gpt-4o-search-preview")||this.modelId.startsWith("gpt-4o-mini-search-preview"))&&null!=I.temperature&&(I.temperature=void 0,b.push({type:"unsupported",feature:"temperature",details:"temperature is not supported for the search preview models and has been removed."})),"flex"!==v.serviceTier||x.supportsFlexProcessing||(b.push({type:"unsupported",feature:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"}),I.service_tier=void 0),"priority"!==v.serviceTier||x.supportsPriorityProcessing||(b.push({type:"unsupported",feature:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"}),I.service_tier=void 0);let{tools:C,toolChoice:T,toolWarnings:N}=function({tools:e,toolChoice:t}){e=(null==e?void 0:e.length)?e:void 0;let n=[];if(null==e)return{tools:void 0,toolChoice:void 0,toolWarnings:n};let i=[];for(let t of e)"function"===t.type?i.push({type:"function",function:{name:t.name,description:t.description,parameters:t.inputSchema,...null!=t.strict?{strict:t.strict}:{}}}):n.push({type:"unsupported",feature:`tool type: ${t.type}`});if(null==t)return{tools:i,toolChoice:void 0,toolWarnings:n};let r=t.type;switch(r){case"auto":case"none":case"required":return{tools:i,toolChoice:r,toolWarnings:n};case"tool":return{tools:i,toolChoice:{type:"function",function:{name:t.toolName}},toolWarnings:n};default:throw new o.UnsupportedFunctionalityError({functionality:`tool choice type: ${r}`})}}({tools:c,toolChoice:m});return{args:{...I,tools:C,tool_choice:T},warnings:[...b,...N]}}async doGenerate(e){var o,n,i,r,a,l,s;let{args:u,warnings:d}=await this.getArgs(e),{responseHeaders:p,value:c,rawValue:m}=await (0,t.postJsonToApi)({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:(0,t.combineHeaders)(this.config.headers(),e.headers),body:u,failedResponseHandler:A,successfulResponseHandler:(0,t.createJsonResponseHandler)(F),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=c.choices[0],g=[],_=h.message.content;for(let e of(null!=_&&_.length>0&&g.push({type:"text",text:_}),null!=(o=h.message.tool_calls)?o:[]))g.push({type:"tool-call",toolCallId:null!=(n=e.id)?n:(0,t.generateId)(),toolName:e.function.name,input:e.function.arguments});for(let e of null!=(i=h.message.annotations)?i:[])g.push({type:"source",sourceType:"url",id:(0,t.generateId)(),url:e.url_citation.url,title:e.url_citation.title});let z=null==(r=c.usage)?void 0:r.completion_tokens_details;null==(a=c.usage)||a.prompt_tokens_details;let y={openai:{}};return(null==z?void 0:z.accepted_prediction_tokens)!=null&&(y.openai.acceptedPredictionTokens=null==z?void 0:z.accepted_prediction_tokens),(null==z?void 0:z.rejected_prediction_tokens)!=null&&(y.openai.rejectedPredictionTokens=null==z?void 0:z.rejected_prediction_tokens),(null==(l=h.logprobs)?void 0:l.content)!=null&&(y.openai.logprobs=h.logprobs.content),{content:g,finishReason:{unified:D(h.finish_reason),raw:null!=(s=h.finish_reason)?s:void 0},usage:$(c.usage),request:{body:u},response:{...H(c),headers:p,body:m},warnings:d,providerMetadata:y}}async doStream(e){let n,{args:i,warnings:r}=await this.getArgs(e),a={...i,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:l,value:s}=await (0,t.postJsonToApi)({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:(0,t.combineHeaders)(this.config.headers(),e.headers),body:a,failedResponseHandler:A,successfulResponseHandler:(0,t.createEventSourceResponseHandler)(J),abortSignal:e.abortSignal,fetch:this.config.fetch}),u=[],d={unified:"other",raw:void 0},p=!1,c=!1,m={openai:{}};return{stream:s.pipeThrough(new TransformStream({start(e){e.enqueue({type:"stream-start",warnings:r})},transform(i,r){var a,l,s,h,g,_,z,y,f,b,v,x,w,k,j,S,I;if(e.includeRawChunks&&r.enqueue({type:"raw",rawValue:i.rawValue}),!i.success){d={unified:"error",raw:void 0},r.enqueue({type:"error",error:i.error});return}let C=i.value;if("error"in C){d={unified:"error",raw:void 0},r.enqueue({type:"error",error:C.error});return}!p&&Object.values(H(C)).some(Boolean)&&(p=!0,r.enqueue({type:"response-metadata",...H(C)})),null!=C.usage&&(n=C.usage,(null==(a=C.usage.completion_tokens_details)?void 0:a.accepted_prediction_tokens)!=null&&(m.openai.acceptedPredictionTokens=null==(l=C.usage.completion_tokens_details)?void 0:l.accepted_prediction_tokens),(null==(s=C.usage.completion_tokens_details)?void 0:s.rejected_prediction_tokens)!=null&&(m.openai.rejectedPredictionTokens=null==(h=C.usage.completion_tokens_details)?void 0:h.rejected_prediction_tokens));let T=C.choices[0];if((null==T?void 0:T.finish_reason)!=null&&(d={unified:D(T.finish_reason),raw:T.finish_reason}),(null==(g=null==T?void 0:T.logprobs)?void 0:g.content)!=null&&(m.openai.logprobs=T.logprobs.content),(null==T?void 0:T.delta)==null)return;let N=T.delta;if(null!=N.content&&(c||(r.enqueue({type:"text-start",id:"0"}),c=!0),r.enqueue({type:"text-delta",id:"0",delta:N.content})),null!=N.tool_calls)for(let e of N.tool_calls){let n=e.index;if(null==u[n]){if("function"!==e.type)throw new o.InvalidResponseDataError({data:e,message:"Expected 'function' type."});if(null==e.id)throw new o.InvalidResponseDataError({data:e,message:"Expected 'id' to be a string."});if((null==(_=e.function)?void 0:_.name)==null)throw new o.InvalidResponseDataError({data:e,message:"Expected 'function.name' to be a string."});r.enqueue({type:"tool-input-start",id:e.id,toolName:e.function.name}),u[n]={id:e.id,type:"function",function:{name:e.function.name,arguments:null!=(z=e.function.arguments)?z:""},hasFinished:!1};let i=u[n];(null==(y=i.function)?void 0:y.name)!=null&&(null==(f=i.function)?void 0:f.arguments)!=null&&(i.function.arguments.length>0&&r.enqueue({type:"tool-input-delta",id:i.id,delta:i.function.arguments}),(0,t.isParsableJson)(i.function.arguments)&&(r.enqueue({type:"tool-input-end",id:i.id}),r.enqueue({type:"tool-call",toolCallId:null!=(b=i.id)?b:(0,t.generateId)(),toolName:i.function.name,input:i.function.arguments}),i.hasFinished=!0));continue}let i=u[n];!i.hasFinished&&((null==(v=e.function)?void 0:v.arguments)!=null&&(i.function.arguments+=null!=(w=null==(x=e.function)?void 0:x.arguments)?w:""),r.enqueue({type:"tool-input-delta",id:i.id,delta:null!=(k=e.function.arguments)?k:""}),(null==(j=i.function)?void 0:j.name)!=null&&(null==(S=i.function)?void 0:S.arguments)!=null&&(0,t.isParsableJson)(i.function.arguments)&&(r.enqueue({type:"tool-input-end",id:i.id}),r.enqueue({type:"tool-call",toolCallId:null!=(I=i.id)?I:(0,t.generateId)(),toolName:i.function.name,input:i.function.arguments}),i.hasFinished=!0))}if(null!=N.annotations)for(let e of N.annotations)r.enqueue({type:"source",sourceType:"url",id:(0,t.generateId)(),url:e.url_citation.url,title:e.url_citation.title})},flush(e){c&&e.enqueue({type:"text-end",id:"0"}),e.enqueue({type:"finish",finishReason:d,usage:$(n),...null!=m?{providerMetadata:m}:{}})}})),request:{body:a},response:{headers:l}}}};function V(e){var t,o,n,i;if(null==e)return{inputTokens:{total:void 0,noCache:void 0,cacheRead:void 0,cacheWrite:void 0},outputTokens:{total:void 0,text:void 0,reasoning:void 0},raw:void 0};let r=null!=(t=e.prompt_tokens)?t:0,a=null!=(o=e.completion_tokens)?o:0;return{inputTokens:{total:null!=(n=e.prompt_tokens)?n:void 0,noCache:r,cacheRead:void 0,cacheWrite:void 0},outputTokens:{total:null!=(i=e.completion_tokens)?i:void 0,text:a,reasoning:void 0},raw:e}}function W({id:e,model:t,created:o}){return{id:null!=e?e:void 0,modelId:null!=t?t:void 0,timestamp:null!=o?new Date(1e3*o):void 0}}function G(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"other"}}var K=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({id:n.z.string().nullish(),created:n.z.number().nullish(),model:n.z.string().nullish(),choices:n.z.array(n.z.object({text:n.z.string(),finish_reason:n.z.string(),logprobs:n.z.object({tokens:n.z.array(n.z.string()),token_logprobs:n.z.array(n.z.number()),top_logprobs:n.z.array(n.z.record(n.z.string(),n.z.number())).nullish()}).nullish()})),usage:n.z.object({prompt_tokens:n.z.number(),completion_tokens:n.z.number(),total_tokens:n.z.number()}).nullish()}))),Y=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.union([n.z.object({id:n.z.string().nullish(),created:n.z.number().nullish(),model:n.z.string().nullish(),choices:n.z.array(n.z.object({text:n.z.string(),finish_reason:n.z.string().nullish(),index:n.z.number(),logprobs:n.z.object({tokens:n.z.array(n.z.string()),token_logprobs:n.z.array(n.z.number()),top_logprobs:n.z.array(n.z.record(n.z.string(),n.z.number())).nullish()}).nullish()})),usage:n.z.object({prompt_tokens:n.z.number(),completion_tokens:n.z.number(),total_tokens:n.z.number()}).nullish()}),U]))),Q=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({echo:n.z.boolean().optional(),logitBias:n.z.record(n.z.string(),n.z.number()).optional(),suffix:n.z.string().optional(),user:n.z.string().optional(),logprobs:n.z.union([n.z.boolean(),n.z.number()]).optional()}))),X=class{constructor(e,t){this.specificationVersion="v3",this.supportedUrls={},this.modelId=e,this.config=t}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}get provider(){return this.config.provider}async getArgs({prompt:e,maxOutputTokens:n,temperature:i,topP:r,topK:a,frequencyPenalty:l,presencePenalty:s,stopSequences:u,responseFormat:d,tools:p,toolChoice:c,seed:m,providerOptions:h}){let g=[],_={...await (0,t.parseProviderOptions)({provider:"openai",providerOptions:h,schema:Q}),...await (0,t.parseProviderOptions)({provider:this.providerOptionsName,providerOptions:h,schema:Q})};null!=a&&g.push({type:"unsupported",feature:"topK"}),(null==p?void 0:p.length)&&g.push({type:"unsupported",feature:"tools"}),null!=c&&g.push({type:"unsupported",feature:"toolChoice"}),null!=d&&"text"!==d.type&&g.push({type:"unsupported",feature:"responseFormat",details:"JSON response format is not supported."});let{prompt:z,stopSequences:y}=function({prompt:e,user:t="user",assistant:n="assistant"}){let i="";for(let{role:r,content:a}of("system"===e[0].role&&(i+=`${e[0].content}

`,e=e.slice(1)),e))switch(r){case"system":throw new o.InvalidPromptError({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{let e=a.map(e=>{if("text"===e.type)return e.text}).filter(Boolean).join("");i+=`${t}:
${e}

`;break}case"assistant":{let e=a.map(e=>{switch(e.type){case"text":return e.text;case"tool-call":throw new o.UnsupportedFunctionalityError({functionality:"tool-call messages"})}}).join("");i+=`${n}:
${e}

`;break}case"tool":throw new o.UnsupportedFunctionalityError({functionality:"tool messages"});default:throw Error(`Unsupported role: ${r}`)}return{prompt:i+=`${n}:
`,stopSequences:[`
${t}:`]}}({prompt:e}),f=[...null!=y?y:[],...null!=u?u:[]];return{args:{model:this.modelId,echo:_.echo,logit_bias:_.logitBias,logprobs:(null==_?void 0:_.logprobs)===!0?0:(null==_?void 0:_.logprobs)===!1||null==_?void 0:_.logprobs,suffix:_.suffix,user:_.user,max_tokens:n,temperature:i,top_p:r,frequency_penalty:l,presence_penalty:s,seed:m,prompt:z,stop:f.length>0?f:void 0},warnings:g}}async doGenerate(e){var o;let{args:n,warnings:i}=await this.getArgs(e),{responseHeaders:r,value:a,rawValue:l}=await (0,t.postJsonToApi)({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:(0,t.combineHeaders)(this.config.headers(),e.headers),body:n,failedResponseHandler:A,successfulResponseHandler:(0,t.createJsonResponseHandler)(K),abortSignal:e.abortSignal,fetch:this.config.fetch}),s=a.choices[0],u={openai:{}};return null!=s.logprobs&&(u.openai.logprobs=s.logprobs),{content:[{type:"text",text:s.text}],usage:V(a.usage),finishReason:{unified:G(s.finish_reason),raw:null!=(o=s.finish_reason)?o:void 0},request:{body:n},response:{...W(a),headers:r,body:l},providerMetadata:u,warnings:i}}async doStream(e){let o,{args:n,warnings:i}=await this.getArgs(e),r={...n,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:a,value:l}=await (0,t.postJsonToApi)({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:(0,t.combineHeaders)(this.config.headers(),e.headers),body:r,failedResponseHandler:A,successfulResponseHandler:(0,t.createEventSourceResponseHandler)(Y),abortSignal:e.abortSignal,fetch:this.config.fetch}),s={unified:"other",raw:void 0},u={openai:{}},d=!0;return{stream:l.pipeThrough(new TransformStream({start(e){e.enqueue({type:"stream-start",warnings:i})},transform(t,n){if(e.includeRawChunks&&n.enqueue({type:"raw",rawValue:t.rawValue}),!t.success){s={unified:"error",raw:void 0},n.enqueue({type:"error",error:t.error});return}let i=t.value;if("error"in i){s={unified:"error",raw:void 0},n.enqueue({type:"error",error:i.error});return}d&&(d=!1,n.enqueue({type:"response-metadata",...W(i)}),n.enqueue({type:"text-start",id:"0"})),null!=i.usage&&(o=i.usage);let r=i.choices[0];(null==r?void 0:r.finish_reason)!=null&&(s={unified:G(r.finish_reason),raw:r.finish_reason}),(null==r?void 0:r.logprobs)!=null&&(u.openai.logprobs=r.logprobs),(null==r?void 0:r.text)!=null&&r.text.length>0&&n.enqueue({type:"text-delta",id:"0",delta:r.text})},flush(e){d||e.enqueue({type:"text-end",id:"0"}),e.enqueue({type:"finish",finishReason:s,providerMetadata:u,usage:V(o)})}})),request:{body:r},response:{headers:a}}}},Z=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({dimensions:n.z.number().optional(),user:n.z.string().optional()}))),ee=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({data:n.z.array(n.z.object({embedding:n.z.array(n.z.number())})),usage:n.z.object({prompt_tokens:n.z.number()}).nullish()}))),et=class{constructor(e,t){this.specificationVersion="v3",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=e,this.config=t}get provider(){return this.config.provider}async doEmbed({values:e,headers:n,abortSignal:i,providerOptions:r}){var a;if(e.length>this.maxEmbeddingsPerCall)throw new o.TooManyEmbeddingValuesForCallError({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});let l=null!=(a=await (0,t.parseProviderOptions)({provider:"openai",providerOptions:r,schema:Z}))?a:{},{responseHeaders:s,value:u,rawValue:d}=await (0,t.postJsonToApi)({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:(0,t.combineHeaders)(this.config.headers(),n),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:l.dimensions,user:l.user},failedResponseHandler:A,successfulResponseHandler:(0,t.createJsonResponseHandler)(ee),abortSignal:i,fetch:this.config.fetch});return{warnings:[],embeddings:u.data.map(e=>e.embedding),usage:u.usage?{tokens:u.usage.prompt_tokens}:void 0,response:{headers:s,body:d}}}},eo=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({created:n.z.number().nullish(),data:n.z.array(n.z.object({b64_json:n.z.string(),revised_prompt:n.z.string().nullish()})),background:n.z.string().nullish(),output_format:n.z.string().nullish(),size:n.z.string().nullish(),quality:n.z.string().nullish(),usage:n.z.object({input_tokens:n.z.number().nullish(),output_tokens:n.z.number().nullish(),total_tokens:n.z.number().nullish(),input_tokens_details:n.z.object({image_tokens:n.z.number().nullish(),text_tokens:n.z.number().nullish()}).nullish()}).nullish()}))),en={"dall-e-3":1,"dall-e-2":10,"gpt-image-1":10,"gpt-image-1-mini":10,"gpt-image-1.5":10},ei=new Set(["gpt-image-1","gpt-image-1-mini","gpt-image-1.5"]),er=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v3"}get maxImagesPerCall(){var e;return null!=(e=en[this.modelId])?e:1}get provider(){return this.config.provider}async doGenerate({prompt:e,files:o,mask:n,n:i,size:r,aspectRatio:a,seed:l,providerOptions:s,headers:u,abortSignal:d}){var p,c,m,h,g,_,z,y,f,b,v;let x=[];null!=a&&x.push({type:"unsupported",feature:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),null!=l&&x.push({type:"unsupported",feature:"seed"});let w=null!=(m=null==(c=null==(p=this.config._internal)?void 0:p.currentDate)?void 0:c.call(p))?m:new Date;if(null!=o){let{value:a,responseHeaders:l}=await (0,t.postFormDataToApi)({url:this.config.url({path:"/images/edits",modelId:this.modelId}),headers:(0,t.combineHeaders)(this.config.headers(),u),formData:(0,t.convertToFormData)({model:this.modelId,prompt:e,image:await Promise.all(o.map(e=>"file"===e.type?new Blob([e.data instanceof Uint8Array?new Blob([e.data],{type:e.mediaType}):new Blob([(0,t.convertBase64ToUint8Array)(e.data)],{type:e.mediaType})],{type:e.mediaType}):(0,t.downloadBlob)(e.url))),mask:null!=n?await ea(n):void 0,n:i,size:r,...null!=(h=s.openai)?h:{}}),failedResponseHandler:A,successfulResponseHandler:(0,t.createJsonResponseHandler)(eo),abortSignal:d,fetch:this.config.fetch});return{images:a.data.map(e=>e.b64_json),warnings:x,usage:null!=a.usage?{inputTokens:null!=(g=a.usage.input_tokens)?g:void 0,outputTokens:null!=(_=a.usage.output_tokens)?_:void 0,totalTokens:null!=(z=a.usage.total_tokens)?z:void 0}:void 0,response:{timestamp:w,modelId:this.modelId,headers:l},providerMetadata:{openai:{images:a.data.map(e=>{var t,o,n,i,r;return{...e.revised_prompt?{revisedPrompt:e.revised_prompt}:{},created:null!=(t=a.created)?t:void 0,size:null!=(o=a.size)?o:void 0,quality:null!=(n=a.quality)?n:void 0,background:null!=(i=a.background)?i:void 0,outputFormat:null!=(r=a.output_format)?r:void 0}})}}}}let{value:k,responseHeaders:j}=await (0,t.postJsonToApi)({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:(0,t.combineHeaders)(this.config.headers(),u),body:{model:this.modelId,prompt:e,n:i,size:r,...null!=(y=s.openai)?y:{},...!ei.has(this.modelId)?{response_format:"b64_json"}:{}},failedResponseHandler:A,successfulResponseHandler:(0,t.createJsonResponseHandler)(eo),abortSignal:d,fetch:this.config.fetch});return{images:k.data.map(e=>e.b64_json),warnings:x,usage:null!=k.usage?{inputTokens:null!=(f=k.usage.input_tokens)?f:void 0,outputTokens:null!=(b=k.usage.output_tokens)?b:void 0,totalTokens:null!=(v=k.usage.total_tokens)?v:void 0}:void 0,response:{timestamp:w,modelId:this.modelId,headers:j},providerMetadata:{openai:{images:k.data.map(e=>{var t,o,n,i,r;return{...e.revised_prompt?{revisedPrompt:e.revised_prompt}:{},created:null!=(t=k.created)?t:void 0,size:null!=(o=k.size)?o:void 0,quality:null!=(n=k.quality)?n:void 0,background:null!=(i=k.background)?i:void 0,outputFormat:null!=(r=k.output_format)?r:void 0}})}}}}};async function ea(e){return e?"url"===e.type?(0,t.downloadBlob)(e.url):new Blob([e.data instanceof Uint8Array?e.data:(0,t.convertBase64ToUint8Array)(e.data)],{type:e.mediaType}):void 0}var el=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({callId:n.z.string(),operation:n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("create_file"),path:n.z.string(),diff:n.z.string()}),n.z.object({type:n.z.literal("delete_file"),path:n.z.string()}),n.z.object({type:n.z.literal("update_file"),path:n.z.string(),diff:n.z.string()})])}))),es=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({status:n.z.enum(["completed","failed"]),output:n.z.string().optional()})));(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({})));var eu=(0,t.createProviderToolFactoryWithOutputSchema)({id:"openai.apply_patch",inputSchema:el,outputSchema:es}),ed=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({code:n.z.string().nullish(),containerId:n.z.string()}))),ep=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({outputs:n.z.array(n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("logs"),logs:n.z.string()}),n.z.object({type:n.z.literal("image"),url:n.z.string()})])).nullish()}))),ec=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({container:n.z.union([n.z.string(),n.z.object({fileIds:n.z.array(n.z.string()).optional()})]).optional()}))),em=(0,t.createProviderToolFactoryWithOutputSchema)({id:"openai.code_interpreter",inputSchema:ed,outputSchema:ep}),eh=n.z.object({key:n.z.string(),type:n.z.enum(["eq","ne","gt","gte","lt","lte","in","nin"]),value:n.z.union([n.z.string(),n.z.number(),n.z.boolean(),n.z.array(n.z.string())])}),eg=n.z.object({type:n.z.enum(["and","or"]),filters:n.z.array(n.z.union([eh,n.z.lazy(()=>eg)]))}),e_=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({vectorStoreIds:n.z.array(n.z.string()),maxNumResults:n.z.number().optional(),ranking:n.z.object({ranker:n.z.string().optional(),scoreThreshold:n.z.number().optional()}).optional(),filters:n.z.union([eh,eg]).optional()}))),ez=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({queries:n.z.array(n.z.string()),results:n.z.array(n.z.object({attributes:n.z.record(n.z.string(),n.z.unknown()),fileId:n.z.string(),filename:n.z.string(),score:n.z.number(),text:n.z.string()})).nullable()}))),ey=(0,t.createProviderToolFactoryWithOutputSchema)({id:"openai.file_search",inputSchema:n.z.object({}),outputSchema:ez}),ef=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({background:n.z.enum(["auto","opaque","transparent"]).optional(),inputFidelity:n.z.enum(["low","high"]).optional(),inputImageMask:n.z.object({fileId:n.z.string().optional(),imageUrl:n.z.string().optional()}).optional(),model:n.z.string().optional(),moderation:n.z.enum(["auto"]).optional(),outputCompression:n.z.number().int().min(0).max(100).optional(),outputFormat:n.z.enum(["png","jpeg","webp"]).optional(),partialImages:n.z.number().int().min(0).max(3).optional(),quality:n.z.enum(["auto","low","medium","high"]).optional(),size:n.z.enum(["1024x1024","1024x1536","1536x1024","auto"]).optional()}).strict())),eb=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({}))),ev=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({result:n.z.string()}))),ex=(0,t.createProviderToolFactoryWithOutputSchema)({id:"openai.image_generation",inputSchema:eb,outputSchema:ev}),ew=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({action:n.z.object({type:n.z.literal("exec"),command:n.z.array(n.z.string()),timeoutMs:n.z.number().optional(),user:n.z.string().optional(),workingDirectory:n.z.string().optional(),env:n.z.record(n.z.string(),n.z.string()).optional()})}))),ek=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({output:n.z.string()}))),ej=(0,t.createProviderToolFactoryWithOutputSchema)({id:"openai.local_shell",inputSchema:ew,outputSchema:ek}),eS=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({action:n.z.object({commands:n.z.array(n.z.string()),timeoutMs:n.z.number().optional(),maxOutputLength:n.z.number().optional()})}))),eI=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({output:n.z.array(n.z.object({stdout:n.z.string(),stderr:n.z.string(),outcome:n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("timeout")}),n.z.object({type:n.z.literal("exit"),exitCode:n.z.number()})])}))}))),eC=(0,t.createProviderToolFactoryWithOutputSchema)({id:"openai.shell",inputSchema:eS,outputSchema:eI}),eT=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({externalWebAccess:n.z.boolean().optional(),filters:n.z.object({allowedDomains:n.z.array(n.z.string()).optional()}).optional(),searchContextSize:n.z.enum(["low","medium","high"]).optional(),userLocation:n.z.object({type:n.z.literal("approximate"),country:n.z.string().optional(),city:n.z.string().optional(),region:n.z.string().optional(),timezone:n.z.string().optional()}).optional()}))),eN=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({}))),eq=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({action:n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("search"),query:n.z.string().optional()}),n.z.object({type:n.z.literal("openPage"),url:n.z.string().nullish()}),n.z.object({type:n.z.literal("findInPage"),url:n.z.string().nullish(),pattern:n.z.string().nullish()})]),sources:n.z.array(n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("url"),url:n.z.string()}),n.z.object({type:n.z.literal("api"),name:n.z.string()})])).optional()}))),eR=(0,t.createProviderToolFactoryWithOutputSchema)({id:"openai.web_search",inputSchema:eN,outputSchema:eq}),eE=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({searchContextSize:n.z.enum(["low","medium","high"]).optional(),userLocation:n.z.object({type:n.z.literal("approximate"),country:n.z.string().optional(),city:n.z.string().optional(),region:n.z.string().optional(),timezone:n.z.string().optional()}).optional()}))),eO=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({}))),eM=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({action:n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("search"),query:n.z.string().optional()}),n.z.object({type:n.z.literal("openPage"),url:n.z.string().nullish()}),n.z.object({type:n.z.literal("findInPage"),url:n.z.string().nullish(),pattern:n.z.string().nullish()})])}))),eU=(0,t.createProviderToolFactoryWithOutputSchema)({id:"openai.web_search_preview",inputSchema:eO,outputSchema:eM}),eA=n.z.lazy(()=>n.z.union([n.z.string(),n.z.number(),n.z.boolean(),n.z.null(),n.z.array(eA),n.z.record(n.z.string(),eA)])),eP=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({serverLabel:n.z.string(),allowedTools:n.z.union([n.z.array(n.z.string()),n.z.object({readOnly:n.z.boolean().optional(),toolNames:n.z.array(n.z.string()).optional()})]).optional(),authorization:n.z.string().optional(),connectorId:n.z.string().optional(),headers:n.z.record(n.z.string(),n.z.string()).optional(),requireApproval:n.z.union([n.z.enum(["always","never"]),n.z.object({never:n.z.object({toolNames:n.z.array(n.z.string()).optional()}).optional()})]).optional(),serverDescription:n.z.string().optional(),serverUrl:n.z.string().optional()}).refine(e=>null!=e.serverUrl||null!=e.connectorId,"One of serverUrl or connectorId must be provided."))),e$=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({}))),eH=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({type:n.z.literal("call"),serverLabel:n.z.string(),name:n.z.string(),arguments:n.z.string(),output:n.z.string().nullish(),error:n.z.union([n.z.string(),eA]).optional()}))),eD=(0,t.createProviderToolFactoryWithOutputSchema)({id:"openai.mcp",inputSchema:e$,outputSchema:eH}),eF={applyPatch:eu,codeInterpreter:(e={})=>em(e),fileSearch:ey,imageGeneration:(e={})=>ex(e),localShell:ej,shell:eC,webSearchPreview:eU,webSearch:(e={})=>eR(e),mcp:e=>eD(e)};function eJ(e){var t,o,n,i;if(null==e)return{inputTokens:{total:void 0,noCache:void 0,cacheRead:void 0,cacheWrite:void 0},outputTokens:{total:void 0,text:void 0,reasoning:void 0},raw:void 0};let r=e.input_tokens,a=e.output_tokens,l=null!=(o=null==(t=e.input_tokens_details)?void 0:t.cached_tokens)?o:0,s=null!=(i=null==(n=e.output_tokens_details)?void 0:n.reasoning_tokens)?i:0;return{inputTokens:{total:r,noCache:r-l,cacheRead:l,cacheWrite:void 0},outputTokens:{total:a,text:a-s,reasoning:s},raw:e}}function eL(e,t){return!!t&&t.some(t=>e.startsWith(t))}async function eB({prompt:e,toolNameMapping:n,systemMessageMode:i,fileIdPrefixes:r,store:a,hasLocalShellTool:l=!1,hasShellTool:s=!1,hasApplyPatchTool:u=!1}){var d,p,c,m,h,g,_,z,y,f,b,v,x;let w=[],k=[],j=new Set;for(let{role:S,content:I}of e)switch(S){case"system":switch(i){case"system":w.push({role:"system",content:I});break;case"developer":w.push({role:"developer",content:I});break;case"remove":k.push({type:"other",message:"system messages are removed for this model"});break;default:throw Error(`Unsupported system message mode: ${i}`)}break;case"user":w.push({role:"user",content:I.map((e,n)=>{var i,a,l;switch(e.type){case"text":return{type:"input_text",text:e.text};case"file":if(e.mediaType.startsWith("image/")){let o="image/*"===e.mediaType?"image/jpeg":e.mediaType;return{type:"input_image",...e.data instanceof URL?{image_url:e.data.toString()}:"string"==typeof e.data&&eL(e.data,r)?{file_id:e.data}:{image_url:`data:${o};base64,${(0,t.convertToBase64)(e.data)}`},detail:null==(a=null==(i=e.providerOptions)?void 0:i.openai)?void 0:a.imageDetail}}if("application/pdf"===e.mediaType){if(e.data instanceof URL)return{type:"input_file",file_url:e.data.toString()};return{type:"input_file",..."string"==typeof e.data&&eL(e.data,r)?{file_id:e.data}:{filename:null!=(l=e.filename)?l:`part-${n}.pdf`,file_data:`data:application/pdf;base64,${(0,t.convertToBase64)(e.data)}`}}}throw new o.UnsupportedFunctionalityError({functionality:`file part media type ${e.mediaType}`})}})});break;case"assistant":{let e={};for(let o of I)switch(o.type){case"text":{let e=null==(p=null==(d=o.providerOptions)?void 0:d.openai)?void 0:p.itemId;if(a&&null!=e){w.push({type:"item_reference",id:e});break}w.push({role:"assistant",content:[{type:"output_text",text:o.text}],id:e});break}case"tool-call":{let e=null!=(_=null==(m=null==(c=o.providerOptions)?void 0:c.openai)?void 0:m.itemId)?_:null==(g=null==(h=o.providerMetadata)?void 0:h.openai)?void 0:g.itemId;if(o.providerExecuted){a&&null!=e&&w.push({type:"item_reference",id:e});break}if(a&&null!=e){w.push({type:"item_reference",id:e});break}let i=n.toProviderToolName(o.toolName);if(l&&"local_shell"===i){let n=await (0,t.validateTypes)({value:o.input,schema:ew});w.push({type:"local_shell_call",call_id:o.toolCallId,id:e,action:{type:"exec",command:n.action.command,timeout_ms:n.action.timeoutMs,user:n.action.user,working_directory:n.action.workingDirectory,env:n.action.env}});break}if(s&&"shell"===i){let n=await (0,t.validateTypes)({value:o.input,schema:eS});w.push({type:"shell_call",call_id:o.toolCallId,id:e,status:"completed",action:{commands:n.action.commands,timeout_ms:n.action.timeoutMs,max_output_length:n.action.maxOutputLength}});break}w.push({type:"function_call",call_id:o.toolCallId,name:i,arguments:JSON.stringify(o.input),id:e});break}case"tool-result":if("execution-denied"===o.output.type||"json"===o.output.type&&"object"==typeof o.output.value&&null!=o.output.value&&"type"in o.output.value&&"execution-denied"===o.output.value.type)break;if(a){let e=null!=(f=null==(y=null==(z=o.providerMetadata)?void 0:z.openai)?void 0:y.itemId)?f:o.toolCallId;w.push({type:"item_reference",id:e})}else k.push({type:"other",message:`Results for OpenAI tool ${o.toolName} are not sent to the API when store is false`});break;case"reasoning":{let n=await (0,t.parseProviderOptions)({provider:"openai",providerOptions:o.providerOptions,schema:eV}),i=null==n?void 0:n.itemId;if(null!=i){let t=e[i];if(a)void 0===t&&(w.push({type:"item_reference",id:i}),e[i]={type:"reasoning",id:i,summary:[]});else{let r=[];o.text.length>0?r.push({type:"summary_text",text:o.text}):void 0!==t&&k.push({type:"other",message:`Cannot append empty reasoning part to existing reasoning sequence. Skipping reasoning part: ${JSON.stringify(o)}.`}),void 0===t?(e[i]={type:"reasoning",id:i,encrypted_content:null==n?void 0:n.reasoningEncryptedContent,summary:r},w.push(e[i])):(t.summary.push(...r),(null==n?void 0:n.reasoningEncryptedContent)!=null&&(t.encrypted_content=n.reasoningEncryptedContent))}}else k.push({type:"other",message:`Non-OpenAI reasoning parts are not supported. Skipping reasoning part: ${JSON.stringify(o)}.`})}}break}case"tool":for(let e of I){let o;if("tool-approval-response"===e.type){if(j.has(e.approvalId))continue;j.add(e.approvalId),a&&w.push({type:"item_reference",id:e.approvalId}),w.push({type:"mcp_approval_response",approval_request_id:e.approvalId,approve:e.approved});continue}let i=e.output;if("execution-denied"===i.type&&(null==(v=null==(b=i.providerOptions)?void 0:b.openai)?void 0:v.approvalId))continue;let r=n.toProviderToolName(e.toolName);if(l&&"local_shell"===r&&"json"===i.type){let o=await (0,t.validateTypes)({value:i.value,schema:ek});w.push({type:"local_shell_call_output",call_id:e.toolCallId,output:o.output});continue}if(s&&"shell"===r&&"json"===i.type){let o=await (0,t.validateTypes)({value:i.value,schema:eI});w.push({type:"shell_call_output",call_id:e.toolCallId,output:o.output.map(e=>({stdout:e.stdout,stderr:e.stderr,outcome:"timeout"===e.outcome.type?{type:"timeout"}:{type:"exit",exit_code:e.outcome.exitCode}}))});continue}if(u&&"apply_patch"===e.toolName&&"json"===i.type){let o=await (0,t.validateTypes)({value:i.value,schema:es});w.push({type:"apply_patch_call_output",call_id:e.toolCallId,status:o.status,output:o.output});continue}switch(i.type){case"text":case"error-text":o=i.value;break;case"execution-denied":o=null!=(x=i.reason)?x:"Tool execution denied.";break;case"json":case"error-json":o=JSON.stringify(i.value);break;case"content":o=i.value.map(e=>{var t;switch(e.type){case"text":return{type:"input_text",text:e.text};case"image-data":return{type:"input_image",image_url:`data:${e.mediaType};base64,${e.data}`};case"file-data":return{type:"input_file",filename:null!=(t=e.filename)?t:"data",file_data:`data:${e.mediaType};base64,${e.data}`};default:return void k.push({type:"other",message:`unsupported tool content part type: ${e.type}`})}}).filter(t.isNonNullable)}w.push({type:"function_call_output",call_id:e.toolCallId,output:o})}break;default:throw Error(`Unsupported role: ${S}`)}return{input:w,warnings:k}}var eV=n.z.object({itemId:n.z.string().nullish(),reasoningEncryptedContent:n.z.string().nullish()});function eW({finishReason:e,hasFunctionCall:t}){switch(e){case void 0:case null:return t?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return t?"tool-calls":"other"}}var eG=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.union([n.z.object({type:n.z.literal("response.output_text.delta"),item_id:n.z.string(),delta:n.z.string(),logprobs:n.z.array(n.z.object({token:n.z.string(),logprob:n.z.number(),top_logprobs:n.z.array(n.z.object({token:n.z.string(),logprob:n.z.number()}))})).nullish()}),n.z.object({type:n.z.enum(["response.completed","response.incomplete"]),response:n.z.object({incomplete_details:n.z.object({reason:n.z.string()}).nullish(),usage:n.z.object({input_tokens:n.z.number(),input_tokens_details:n.z.object({cached_tokens:n.z.number().nullish()}).nullish(),output_tokens:n.z.number(),output_tokens_details:n.z.object({reasoning_tokens:n.z.number().nullish()}).nullish()}),service_tier:n.z.string().nullish()})}),n.z.object({type:n.z.literal("response.created"),response:n.z.object({id:n.z.string(),created_at:n.z.number(),model:n.z.string(),service_tier:n.z.string().nullish()})}),n.z.object({type:n.z.literal("response.output_item.added"),output_index:n.z.number(),item:n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("message"),id:n.z.string()}),n.z.object({type:n.z.literal("reasoning"),id:n.z.string(),encrypted_content:n.z.string().nullish()}),n.z.object({type:n.z.literal("function_call"),id:n.z.string(),call_id:n.z.string(),name:n.z.string(),arguments:n.z.string()}),n.z.object({type:n.z.literal("web_search_call"),id:n.z.string(),status:n.z.string()}),n.z.object({type:n.z.literal("computer_call"),id:n.z.string(),status:n.z.string()}),n.z.object({type:n.z.literal("file_search_call"),id:n.z.string()}),n.z.object({type:n.z.literal("image_generation_call"),id:n.z.string()}),n.z.object({type:n.z.literal("code_interpreter_call"),id:n.z.string(),container_id:n.z.string(),code:n.z.string().nullable(),outputs:n.z.array(n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("logs"),logs:n.z.string()}),n.z.object({type:n.z.literal("image"),url:n.z.string()})])).nullable(),status:n.z.string()}),n.z.object({type:n.z.literal("mcp_call"),id:n.z.string(),status:n.z.string(),approval_request_id:n.z.string().nullish()}),n.z.object({type:n.z.literal("mcp_list_tools"),id:n.z.string()}),n.z.object({type:n.z.literal("mcp_approval_request"),id:n.z.string()}),n.z.object({type:n.z.literal("apply_patch_call"),id:n.z.string(),call_id:n.z.string(),status:n.z.enum(["in_progress","completed"]),operation:n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("create_file"),path:n.z.string(),diff:n.z.string()}),n.z.object({type:n.z.literal("delete_file"),path:n.z.string()}),n.z.object({type:n.z.literal("update_file"),path:n.z.string(),diff:n.z.string()})])}),n.z.object({type:n.z.literal("shell_call"),id:n.z.string(),call_id:n.z.string(),status:n.z.enum(["in_progress","completed","incomplete"]),action:n.z.object({commands:n.z.array(n.z.string())})})])}),n.z.object({type:n.z.literal("response.output_item.done"),output_index:n.z.number(),item:n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("message"),id:n.z.string()}),n.z.object({type:n.z.literal("reasoning"),id:n.z.string(),encrypted_content:n.z.string().nullish()}),n.z.object({type:n.z.literal("function_call"),id:n.z.string(),call_id:n.z.string(),name:n.z.string(),arguments:n.z.string(),status:n.z.literal("completed")}),n.z.object({type:n.z.literal("code_interpreter_call"),id:n.z.string(),code:n.z.string().nullable(),container_id:n.z.string(),outputs:n.z.array(n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("logs"),logs:n.z.string()}),n.z.object({type:n.z.literal("image"),url:n.z.string()})])).nullable()}),n.z.object({type:n.z.literal("image_generation_call"),id:n.z.string(),result:n.z.string()}),n.z.object({type:n.z.literal("web_search_call"),id:n.z.string(),status:n.z.string(),action:n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("search"),query:n.z.string().nullish(),sources:n.z.array(n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("url"),url:n.z.string()}),n.z.object({type:n.z.literal("api"),name:n.z.string()})])).nullish()}),n.z.object({type:n.z.literal("open_page"),url:n.z.string().nullish()}),n.z.object({type:n.z.literal("find_in_page"),url:n.z.string().nullish(),pattern:n.z.string().nullish()})])}),n.z.object({type:n.z.literal("file_search_call"),id:n.z.string(),queries:n.z.array(n.z.string()),results:n.z.array(n.z.object({attributes:n.z.record(n.z.string(),n.z.union([n.z.string(),n.z.number(),n.z.boolean()])),file_id:n.z.string(),filename:n.z.string(),score:n.z.number(),text:n.z.string()})).nullish()}),n.z.object({type:n.z.literal("local_shell_call"),id:n.z.string(),call_id:n.z.string(),action:n.z.object({type:n.z.literal("exec"),command:n.z.array(n.z.string()),timeout_ms:n.z.number().optional(),user:n.z.string().optional(),working_directory:n.z.string().optional(),env:n.z.record(n.z.string(),n.z.string()).optional()})}),n.z.object({type:n.z.literal("computer_call"),id:n.z.string(),status:n.z.literal("completed")}),n.z.object({type:n.z.literal("mcp_call"),id:n.z.string(),status:n.z.string(),arguments:n.z.string(),name:n.z.string(),server_label:n.z.string(),output:n.z.string().nullish(),error:n.z.union([n.z.string(),n.z.object({type:n.z.string().optional(),code:n.z.union([n.z.number(),n.z.string()]).optional(),message:n.z.string().optional()}).loose()]).nullish(),approval_request_id:n.z.string().nullish()}),n.z.object({type:n.z.literal("mcp_list_tools"),id:n.z.string(),server_label:n.z.string(),tools:n.z.array(n.z.object({name:n.z.string(),description:n.z.string().optional(),input_schema:n.z.any(),annotations:n.z.record(n.z.string(),n.z.unknown()).optional()})),error:n.z.union([n.z.string(),n.z.object({type:n.z.string().optional(),code:n.z.union([n.z.number(),n.z.string()]).optional(),message:n.z.string().optional()}).loose()]).optional()}),n.z.object({type:n.z.literal("mcp_approval_request"),id:n.z.string(),server_label:n.z.string(),name:n.z.string(),arguments:n.z.string(),approval_request_id:n.z.string().optional()}),n.z.object({type:n.z.literal("apply_patch_call"),id:n.z.string(),call_id:n.z.string(),status:n.z.enum(["in_progress","completed"]),operation:n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("create_file"),path:n.z.string(),diff:n.z.string()}),n.z.object({type:n.z.literal("delete_file"),path:n.z.string()}),n.z.object({type:n.z.literal("update_file"),path:n.z.string(),diff:n.z.string()})])}),n.z.object({type:n.z.literal("shell_call"),id:n.z.string(),call_id:n.z.string(),status:n.z.enum(["in_progress","completed","incomplete"]),action:n.z.object({commands:n.z.array(n.z.string())})})])}),n.z.object({type:n.z.literal("response.function_call_arguments.delta"),item_id:n.z.string(),output_index:n.z.number(),delta:n.z.string()}),n.z.object({type:n.z.literal("response.image_generation_call.partial_image"),item_id:n.z.string(),output_index:n.z.number(),partial_image_b64:n.z.string()}),n.z.object({type:n.z.literal("response.code_interpreter_call_code.delta"),item_id:n.z.string(),output_index:n.z.number(),delta:n.z.string()}),n.z.object({type:n.z.literal("response.code_interpreter_call_code.done"),item_id:n.z.string(),output_index:n.z.number(),code:n.z.string()}),n.z.object({type:n.z.literal("response.output_text.annotation.added"),annotation:n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("url_citation"),start_index:n.z.number(),end_index:n.z.number(),url:n.z.string(),title:n.z.string()}),n.z.object({type:n.z.literal("file_citation"),file_id:n.z.string(),filename:n.z.string().nullish(),index:n.z.number().nullish(),start_index:n.z.number().nullish(),end_index:n.z.number().nullish(),quote:n.z.string().nullish()}),n.z.object({type:n.z.literal("container_file_citation"),container_id:n.z.string(),file_id:n.z.string(),filename:n.z.string().nullish(),start_index:n.z.number().nullish(),end_index:n.z.number().nullish(),index:n.z.number().nullish()}),n.z.object({type:n.z.literal("file_path"),file_id:n.z.string(),index:n.z.number().nullish()})])}),n.z.object({type:n.z.literal("response.reasoning_summary_part.added"),item_id:n.z.string(),summary_index:n.z.number()}),n.z.object({type:n.z.literal("response.reasoning_summary_text.delta"),item_id:n.z.string(),summary_index:n.z.number(),delta:n.z.string()}),n.z.object({type:n.z.literal("response.reasoning_summary_part.done"),item_id:n.z.string(),summary_index:n.z.number()}),n.z.object({type:n.z.literal("response.apply_patch_call_operation_diff.delta"),item_id:n.z.string(),output_index:n.z.number(),delta:n.z.string(),obfuscation:n.z.string().nullish()}),n.z.object({type:n.z.literal("response.apply_patch_call_operation_diff.done"),item_id:n.z.string(),output_index:n.z.number(),diff:n.z.string()}),n.z.object({type:n.z.literal("error"),sequence_number:n.z.number(),error:n.z.object({type:n.z.string(),code:n.z.string(),message:n.z.string(),param:n.z.string().nullish()})}),n.z.object({type:n.z.string()}).loose().transform(e=>({type:"unknown_chunk",message:e.type}))]))),eK=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({id:n.z.string().optional(),created_at:n.z.number().optional(),error:n.z.object({message:n.z.string(),type:n.z.string(),param:n.z.string().nullish(),code:n.z.string()}).nullish(),model:n.z.string().optional(),output:n.z.array(n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("message"),role:n.z.literal("assistant"),id:n.z.string(),content:n.z.array(n.z.object({type:n.z.literal("output_text"),text:n.z.string(),logprobs:n.z.array(n.z.object({token:n.z.string(),logprob:n.z.number(),top_logprobs:n.z.array(n.z.object({token:n.z.string(),logprob:n.z.number()}))})).nullish(),annotations:n.z.array(n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("url_citation"),start_index:n.z.number(),end_index:n.z.number(),url:n.z.string(),title:n.z.string()}),n.z.object({type:n.z.literal("file_citation"),file_id:n.z.string(),filename:n.z.string().nullish(),index:n.z.number().nullish(),start_index:n.z.number().nullish(),end_index:n.z.number().nullish(),quote:n.z.string().nullish()}),n.z.object({type:n.z.literal("container_file_citation"),container_id:n.z.string(),file_id:n.z.string(),filename:n.z.string().nullish(),start_index:n.z.number().nullish(),end_index:n.z.number().nullish(),index:n.z.number().nullish()}),n.z.object({type:n.z.literal("file_path"),file_id:n.z.string(),index:n.z.number().nullish()})]))}))}),n.z.object({type:n.z.literal("web_search_call"),id:n.z.string(),status:n.z.string(),action:n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("search"),query:n.z.string().nullish(),sources:n.z.array(n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("url"),url:n.z.string()}),n.z.object({type:n.z.literal("api"),name:n.z.string()})])).nullish()}),n.z.object({type:n.z.literal("open_page"),url:n.z.string().nullish()}),n.z.object({type:n.z.literal("find_in_page"),url:n.z.string().nullish(),pattern:n.z.string().nullish()})])}),n.z.object({type:n.z.literal("file_search_call"),id:n.z.string(),queries:n.z.array(n.z.string()),results:n.z.array(n.z.object({attributes:n.z.record(n.z.string(),n.z.union([n.z.string(),n.z.number(),n.z.boolean()])),file_id:n.z.string(),filename:n.z.string(),score:n.z.number(),text:n.z.string()})).nullish()}),n.z.object({type:n.z.literal("code_interpreter_call"),id:n.z.string(),code:n.z.string().nullable(),container_id:n.z.string(),outputs:n.z.array(n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("logs"),logs:n.z.string()}),n.z.object({type:n.z.literal("image"),url:n.z.string()})])).nullable()}),n.z.object({type:n.z.literal("image_generation_call"),id:n.z.string(),result:n.z.string()}),n.z.object({type:n.z.literal("local_shell_call"),id:n.z.string(),call_id:n.z.string(),action:n.z.object({type:n.z.literal("exec"),command:n.z.array(n.z.string()),timeout_ms:n.z.number().optional(),user:n.z.string().optional(),working_directory:n.z.string().optional(),env:n.z.record(n.z.string(),n.z.string()).optional()})}),n.z.object({type:n.z.literal("function_call"),call_id:n.z.string(),name:n.z.string(),arguments:n.z.string(),id:n.z.string()}),n.z.object({type:n.z.literal("computer_call"),id:n.z.string(),status:n.z.string().optional()}),n.z.object({type:n.z.literal("reasoning"),id:n.z.string(),encrypted_content:n.z.string().nullish(),summary:n.z.array(n.z.object({type:n.z.literal("summary_text"),text:n.z.string()}))}),n.z.object({type:n.z.literal("mcp_call"),id:n.z.string(),status:n.z.string(),arguments:n.z.string(),name:n.z.string(),server_label:n.z.string(),output:n.z.string().nullish(),error:n.z.union([n.z.string(),n.z.object({type:n.z.string().optional(),code:n.z.union([n.z.number(),n.z.string()]).optional(),message:n.z.string().optional()}).loose()]).nullish(),approval_request_id:n.z.string().nullish()}),n.z.object({type:n.z.literal("mcp_list_tools"),id:n.z.string(),server_label:n.z.string(),tools:n.z.array(n.z.object({name:n.z.string(),description:n.z.string().optional(),input_schema:n.z.any(),annotations:n.z.record(n.z.string(),n.z.unknown()).optional()})),error:n.z.union([n.z.string(),n.z.object({type:n.z.string().optional(),code:n.z.union([n.z.number(),n.z.string()]).optional(),message:n.z.string().optional()}).loose()]).optional()}),n.z.object({type:n.z.literal("mcp_approval_request"),id:n.z.string(),server_label:n.z.string(),name:n.z.string(),arguments:n.z.string(),approval_request_id:n.z.string().optional()}),n.z.object({type:n.z.literal("apply_patch_call"),id:n.z.string(),call_id:n.z.string(),status:n.z.enum(["in_progress","completed"]),operation:n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("create_file"),path:n.z.string(),diff:n.z.string()}),n.z.object({type:n.z.literal("delete_file"),path:n.z.string()}),n.z.object({type:n.z.literal("update_file"),path:n.z.string(),diff:n.z.string()})])}),n.z.object({type:n.z.literal("shell_call"),id:n.z.string(),call_id:n.z.string(),status:n.z.enum(["in_progress","completed","incomplete"]),action:n.z.object({commands:n.z.array(n.z.string())})})])).optional(),service_tier:n.z.string().nullish(),incomplete_details:n.z.object({reason:n.z.string()}).nullish(),usage:n.z.object({input_tokens:n.z.number(),input_tokens_details:n.z.object({cached_tokens:n.z.number().nullish()}).nullish(),output_tokens:n.z.number(),output_tokens_details:n.z.object({reasoning_tokens:n.z.number().nullish()}).nullish()}).optional()}))),eY=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({conversation:n.z.string().nullish(),include:n.z.array(n.z.enum(["reasoning.encrypted_content","file_search_call.results","message.output_text.logprobs"])).nullish(),instructions:n.z.string().nullish(),logprobs:n.z.union([n.z.boolean(),n.z.number().min(1).max(20)]).optional(),maxToolCalls:n.z.number().nullish(),metadata:n.z.any().nullish(),parallelToolCalls:n.z.boolean().nullish(),previousResponseId:n.z.string().nullish(),promptCacheKey:n.z.string().nullish(),promptCacheRetention:n.z.enum(["in_memory","24h"]).nullish(),reasoningEffort:n.z.string().nullish(),reasoningSummary:n.z.string().nullish(),safetyIdentifier:n.z.string().nullish(),serviceTier:n.z.enum(["auto","flex","priority","default"]).nullish(),store:n.z.boolean().nullish(),strictJsonSchema:n.z.boolean().nullish(),textVerbosity:n.z.enum(["low","medium","high"]).nullish(),truncation:n.z.enum(["auto","disabled"]).nullish(),user:n.z.string().nullish(),systemMessageMode:n.z.enum(["system","developer","remove"]).optional(),forceReasoning:n.z.boolean().optional()})));async function eQ({tools:e,toolChoice:n}){e=(null==e?void 0:e.length)?e:void 0;let i=[];if(null==e)return{tools:void 0,toolChoice:void 0,toolWarnings:i};let r=[];for(let o of e)switch(o.type){case"function":r.push({type:"function",name:o.name,description:o.description,parameters:o.inputSchema,...null!=o.strict?{strict:o.strict}:{}});break;case"provider":switch(o.id){case"openai.file_search":{let e=await (0,t.validateTypes)({value:o.args,schema:e_});r.push({type:"file_search",vector_store_ids:e.vectorStoreIds,max_num_results:e.maxNumResults,ranking_options:e.ranking?{ranker:e.ranking.ranker,score_threshold:e.ranking.scoreThreshold}:void 0,filters:e.filters});break}case"openai.local_shell":r.push({type:"local_shell"});break;case"openai.shell":r.push({type:"shell"});break;case"openai.apply_patch":r.push({type:"apply_patch"});break;case"openai.web_search_preview":{let e=await (0,t.validateTypes)({value:o.args,schema:eE});r.push({type:"web_search_preview",search_context_size:e.searchContextSize,user_location:e.userLocation});break}case"openai.web_search":{let e=await (0,t.validateTypes)({value:o.args,schema:eT});r.push({type:"web_search",filters:null!=e.filters?{allowed_domains:e.filters.allowedDomains}:void 0,external_web_access:e.externalWebAccess,search_context_size:e.searchContextSize,user_location:e.userLocation});break}case"openai.code_interpreter":{let e=await (0,t.validateTypes)({value:o.args,schema:ec});r.push({type:"code_interpreter",container:null==e.container?{type:"auto",file_ids:void 0}:"string"==typeof e.container?e.container:{type:"auto",file_ids:e.container.fileIds}});break}case"openai.image_generation":{let e=await (0,t.validateTypes)({value:o.args,schema:ef});r.push({type:"image_generation",background:e.background,input_fidelity:e.inputFidelity,input_image_mask:e.inputImageMask?{file_id:e.inputImageMask.fileId,image_url:e.inputImageMask.imageUrl}:void 0,model:e.model,moderation:e.moderation,partial_images:e.partialImages,quality:e.quality,output_compression:e.outputCompression,output_format:e.outputFormat,size:e.size});break}case"openai.mcp":{let e=await (0,t.validateTypes)({value:o.args,schema:eP}),n=e=>({tool_names:e.toolNames}),i=e.requireApproval,a=null==i?void 0:"string"==typeof i?i:null!=i.never?{never:n(i.never)}:void 0;r.push({type:"mcp",server_label:e.serverLabel,allowed_tools:Array.isArray(e.allowedTools)?e.allowedTools:e.allowedTools?{read_only:e.allowedTools.readOnly,tool_names:e.allowedTools.toolNames}:void 0,authorization:e.authorization,connector_id:e.connectorId,headers:e.headers,require_approval:null!=a?a:"never",server_description:e.serverDescription,server_url:e.serverUrl})}}break;default:i.push({type:"unsupported",feature:`function tool ${o}`})}if(null==n)return{tools:r,toolChoice:void 0,toolWarnings:i};let a=n.type;switch(a){case"auto":case"none":case"required":return{tools:r,toolChoice:a,toolWarnings:i};case"tool":return{tools:r,toolChoice:"code_interpreter"===n.toolName||"file_search"===n.toolName||"image_generation"===n.toolName||"web_search_preview"===n.toolName||"web_search"===n.toolName||"mcp"===n.toolName||"apply_patch"===n.toolName?{type:n.toolName}:{type:"function",name:n.toolName},toolWarnings:i};default:throw new o.UnsupportedFunctionalityError({functionality:`tool choice type: ${a}`})}}function eX(e){var t,o;let n={};for(let i of e)if("assistant"===i.role)for(let e of i.content){if("tool-call"!==e.type)continue;let i=null==(o=null==(t=e.providerOptions)?void 0:t.openai)?void 0:o.approvalRequestId;null!=i&&(n[i]=e.toolCallId)}return n}var eZ=class{constructor(e,t){this.specificationVersion="v3",this.supportedUrls={"image/*":[/^https?:\/\/.*$/],"application/pdf":[/^https?:\/\/.*$/]},this.modelId=e,this.config=t}get provider(){return this.config.provider}async getArgs({maxOutputTokens:e,temperature:o,stopSequences:n,topP:i,topK:r,presencePenalty:a,frequencyPenalty:l,seed:s,prompt:u,providerOptions:d,tools:p,toolChoice:c,responseFormat:m}){var h,g,_,z,y,f;let b=[],v=P(this.modelId);null!=r&&b.push({type:"unsupported",feature:"topK"}),null!=s&&b.push({type:"unsupported",feature:"seed"}),null!=a&&b.push({type:"unsupported",feature:"presencePenalty"}),null!=l&&b.push({type:"unsupported",feature:"frequencyPenalty"}),null!=n&&b.push({type:"unsupported",feature:"stopSequences"});let x=await (0,t.parseProviderOptions)({provider:"openai",providerOptions:d,schema:eY}),w=null!=(h=null==x?void 0:x.forceReasoning)?h:v.isReasoningModel;(null==x?void 0:x.conversation)&&(null==x?void 0:x.previousResponseId)&&b.push({type:"unsupported",feature:"conversation",details:"conversation and previousResponseId cannot be used together"});let k=(0,t.createToolNameMapping)({tools:p,providerToolNames:{"openai.code_interpreter":"code_interpreter","openai.file_search":"file_search","openai.image_generation":"image_generation","openai.local_shell":"local_shell","openai.shell":"shell","openai.web_search":"web_search","openai.web_search_preview":"web_search_preview","openai.mcp":"mcp","openai.apply_patch":"apply_patch"}}),{input:j,warnings:S}=await eB({prompt:u,toolNameMapping:k,systemMessageMode:null!=(g=null==x?void 0:x.systemMessageMode)?g:w?"developer":v.systemMessageMode,fileIdPrefixes:this.config.fileIdPrefixes,store:null==(_=null==x?void 0:x.store)||_,hasLocalShellTool:N("openai.local_shell"),hasShellTool:N("openai.shell"),hasApplyPatchTool:N("openai.apply_patch")});b.push(...S);let I=null==(z=null==x?void 0:x.strictJsonSchema)||z,C=null==x?void 0:x.include;function T(e){null==C?C=[e]:C.includes(e)||(C=[...C,e])}function N(e){return(null==p?void 0:p.find(t=>"provider"===t.type&&t.id===e))!=null}let q="number"==typeof(null==x?void 0:x.logprobs)?null==x?void 0:x.logprobs:(null==x?void 0:x.logprobs)===!0?20:void 0;q&&T("message.output_text.logprobs");let R=null==(y=null==p?void 0:p.find(e=>"provider"===e.type&&("openai.web_search"===e.id||"openai.web_search_preview"===e.id)))?void 0:y.name;R&&T("web_search_call.action.sources"),N("openai.code_interpreter")&&T("code_interpreter_call.outputs");let E=null==x?void 0:x.store;!1===E&&w&&T("reasoning.encrypted_content");let O={model:this.modelId,input:j,temperature:o,top_p:i,max_output_tokens:e,...((null==m?void 0:m.type)==="json"||(null==x?void 0:x.textVerbosity))&&{text:{...(null==m?void 0:m.type)==="json"&&{format:null!=m.schema?{type:"json_schema",strict:I,name:null!=(f=m.name)?f:"response",description:m.description,schema:m.schema}:{type:"json_object"}},...(null==x?void 0:x.textVerbosity)&&{verbosity:x.textVerbosity}}},conversation:null==x?void 0:x.conversation,max_tool_calls:null==x?void 0:x.maxToolCalls,metadata:null==x?void 0:x.metadata,parallel_tool_calls:null==x?void 0:x.parallelToolCalls,previous_response_id:null==x?void 0:x.previousResponseId,store:E,user:null==x?void 0:x.user,instructions:null==x?void 0:x.instructions,service_tier:null==x?void 0:x.serviceTier,include:C,prompt_cache_key:null==x?void 0:x.promptCacheKey,prompt_cache_retention:null==x?void 0:x.promptCacheRetention,safety_identifier:null==x?void 0:x.safetyIdentifier,top_logprobs:q,truncation:null==x?void 0:x.truncation,...w&&((null==x?void 0:x.reasoningEffort)!=null||(null==x?void 0:x.reasoningSummary)!=null)&&{reasoning:{...(null==x?void 0:x.reasoningEffort)!=null&&{effort:x.reasoningEffort},...(null==x?void 0:x.reasoningSummary)!=null&&{summary:x.reasoningSummary}}}};w?(null==x?void 0:x.reasoningEffort)==="none"&&v.supportsNonReasoningParameters||(null!=O.temperature&&(O.temperature=void 0,b.push({type:"unsupported",feature:"temperature",details:"temperature is not supported for reasoning models"})),null!=O.top_p&&(O.top_p=void 0,b.push({type:"unsupported",feature:"topP",details:"topP is not supported for reasoning models"}))):((null==x?void 0:x.reasoningEffort)!=null&&b.push({type:"unsupported",feature:"reasoningEffort",details:"reasoningEffort is not supported for non-reasoning models"}),(null==x?void 0:x.reasoningSummary)!=null&&b.push({type:"unsupported",feature:"reasoningSummary",details:"reasoningSummary is not supported for non-reasoning models"})),(null==x?void 0:x.serviceTier)!=="flex"||v.supportsFlexProcessing||(b.push({type:"unsupported",feature:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"}),delete O.service_tier),(null==x?void 0:x.serviceTier)!=="priority"||v.supportsPriorityProcessing||(b.push({type:"unsupported",feature:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"}),delete O.service_tier);let{tools:M,toolChoice:U,toolWarnings:A}=await eQ({tools:p,toolChoice:c});return{webSearchToolName:R,args:{...O,tools:M,tool_choice:U},warnings:[...b,...A],store:E,toolNameMapping:k}}async doGenerate(e){var n,i,r,a,l,s,u,d,p,c,m,h,g,_,z,y,f,b,v,x,w,k,j,S,I,C,T,N,q,R,E;let{args:O,warnings:M,webSearchToolName:U,toolNameMapping:P}=await this.getArgs(e),$=this.config.url({path:"/responses",modelId:this.modelId}),H=this.config.provider.replace(".responses",""),D=eX(e.prompt),{responseHeaders:F,value:J,rawValue:L}=await (0,t.postJsonToApi)({url:$,headers:(0,t.combineHeaders)(this.config.headers(),e.headers),body:O,failedResponseHandler:A,successfulResponseHandler:(0,t.createJsonResponseHandler)(eK),abortSignal:e.abortSignal,fetch:this.config.fetch});if(J.error)throw new o.APICallError({message:J.error.message,url:$,requestBodyValues:O,statusCode:400,responseHeaders:F,responseBody:L,isRetryable:!1});let B=[],V=[],W=!1;for(let o of J.output)switch(o.type){case"reasoning":for(let e of(0===o.summary.length&&o.summary.push({type:"summary_text",text:""}),o.summary))B.push({type:"reasoning",text:e.text,providerMetadata:{[H]:{itemId:o.id,reasoningEncryptedContent:null!=(n=o.encrypted_content)?n:null}}});break;case"image_generation_call":B.push({type:"tool-call",toolCallId:o.id,toolName:P.toCustomToolName("image_generation"),input:"{}",providerExecuted:!0}),B.push({type:"tool-result",toolCallId:o.id,toolName:P.toCustomToolName("image_generation"),result:{result:o.result}});break;case"local_shell_call":B.push({type:"tool-call",toolCallId:o.call_id,toolName:P.toCustomToolName("local_shell"),input:JSON.stringify({action:o.action}),providerMetadata:{[H]:{itemId:o.id}}});break;case"shell_call":B.push({type:"tool-call",toolCallId:o.call_id,toolName:P.toCustomToolName("shell"),input:JSON.stringify({action:{commands:o.action.commands}}),providerMetadata:{[H]:{itemId:o.id}}});break;case"message":for(let n of o.content){(null==(r=null==(i=e.providerOptions)?void 0:i.openai)?void 0:r.logprobs)&&n.logprobs&&V.push(n.logprobs);let k={itemId:o.id,...n.annotations.length>0&&{annotations:n.annotations}};for(let e of(B.push({type:"text",text:n.text,providerMetadata:{[H]:k}}),n.annotations))"url_citation"===e.type?B.push({type:"source",sourceType:"url",id:null!=(s=null==(l=(a=this.config).generateId)?void 0:l.call(a))?s:(0,t.generateId)(),url:e.url,title:e.title}):"file_citation"===e.type?B.push({type:"source",sourceType:"document",id:null!=(p=null==(d=(u=this.config).generateId)?void 0:d.call(u))?p:(0,t.generateId)(),mediaType:"text/plain",title:null!=(m=null!=(c=e.quote)?c:e.filename)?m:"Document",filename:null!=(h=e.filename)?h:e.file_id,...e.file_id?{providerMetadata:{[H]:{fileId:e.file_id}}}:{}}):"container_file_citation"===e.type?B.push({type:"source",sourceType:"document",id:null!=(z=null==(_=(g=this.config).generateId)?void 0:_.call(g))?z:(0,t.generateId)(),mediaType:"text/plain",title:null!=(f=null!=(y=e.filename)?y:e.file_id)?f:"Document",filename:null!=(b=e.filename)?b:e.file_id,providerMetadata:{[H]:{fileId:e.file_id,containerId:e.container_id,...null!=e.index?{index:e.index}:{}}}}):"file_path"===e.type&&B.push({type:"source",sourceType:"document",id:null!=(w=null==(x=(v=this.config).generateId)?void 0:x.call(v))?w:(0,t.generateId)(),mediaType:"application/octet-stream",title:e.file_id,filename:e.file_id,providerMetadata:{[H]:{fileId:e.file_id,...null!=e.index?{index:e.index}:{}}}})}break;case"function_call":W=!0,B.push({type:"tool-call",toolCallId:o.call_id,toolName:o.name,input:o.arguments,providerMetadata:{[H]:{itemId:o.id}}});break;case"web_search_call":B.push({type:"tool-call",toolCallId:o.id,toolName:P.toCustomToolName(null!=U?U:"web_search"),input:JSON.stringify({}),providerExecuted:!0}),B.push({type:"tool-result",toolCallId:o.id,toolName:P.toCustomToolName(null!=U?U:"web_search"),result:e2(o.action)});break;case"mcp_call":{let e=null!=o.approval_request_id&&null!=(k=D[o.approval_request_id])?k:o.id,t=`mcp.${o.name}`;B.push({type:"tool-call",toolCallId:e,toolName:t,input:o.arguments,providerExecuted:!0,dynamic:!0}),B.push({type:"tool-result",toolCallId:e,toolName:t,result:{type:"call",serverLabel:o.server_label,name:o.name,arguments:o.arguments,...null!=o.output?{output:o.output}:{},...null!=o.error?{error:o.error}:{}},providerMetadata:{[H]:{itemId:o.id}}});break}case"mcp_list_tools":break;case"mcp_approval_request":{let e=null!=(j=o.approval_request_id)?j:o.id,n=null!=(C=null==(I=(S=this.config).generateId)?void 0:I.call(S))?C:(0,t.generateId)(),i=`mcp.${o.name}`;B.push({type:"tool-call",toolCallId:n,toolName:i,input:o.arguments,providerExecuted:!0,dynamic:!0}),B.push({type:"tool-approval-request",approvalId:e,toolCallId:n});break}case"computer_call":B.push({type:"tool-call",toolCallId:o.id,toolName:P.toCustomToolName("computer_use"),input:"",providerExecuted:!0}),B.push({type:"tool-result",toolCallId:o.id,toolName:P.toCustomToolName("computer_use"),result:{type:"computer_use_tool_result",status:o.status||"completed"}});break;case"file_search_call":B.push({type:"tool-call",toolCallId:o.id,toolName:P.toCustomToolName("file_search"),input:"{}",providerExecuted:!0}),B.push({type:"tool-result",toolCallId:o.id,toolName:P.toCustomToolName("file_search"),result:{queries:o.queries,results:null!=(N=null==(T=o.results)?void 0:T.map(e=>({attributes:e.attributes,fileId:e.file_id,filename:e.filename,score:e.score,text:e.text})))?N:null}});break;case"code_interpreter_call":B.push({type:"tool-call",toolCallId:o.id,toolName:P.toCustomToolName("code_interpreter"),input:JSON.stringify({code:o.code,containerId:o.container_id}),providerExecuted:!0}),B.push({type:"tool-result",toolCallId:o.id,toolName:P.toCustomToolName("code_interpreter"),result:{outputs:o.outputs}});break;case"apply_patch_call":B.push({type:"tool-call",toolCallId:o.call_id,toolName:P.toCustomToolName("apply_patch"),input:JSON.stringify({callId:o.call_id,operation:o.operation}),providerMetadata:{[H]:{itemId:o.id}}})}let G={[H]:{responseId:J.id}};V.length>0&&(G[H].logprobs=V),"string"==typeof J.service_tier&&(G[H].serviceTier=J.service_tier);let K=J.usage;return{content:B,finishReason:{unified:eW({finishReason:null==(q=J.incomplete_details)?void 0:q.reason,hasFunctionCall:W}),raw:null!=(E=null==(R=J.incomplete_details)?void 0:R.reason)?E:void 0},usage:eJ(K),request:{body:O},response:{id:J.id,timestamp:new Date(1e3*J.created_at),modelId:J.model,headers:F,body:L},providerMetadata:G,warnings:M}}async doStream(e){let o,n,{args:i,warnings:r,webSearchToolName:a,toolNameMapping:l,store:s}=await this.getArgs(e),{responseHeaders:u,value:d}=await (0,t.postJsonToApi)({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:(0,t.combineHeaders)(this.config.headers(),e.headers),body:{...i,stream:!0},failedResponseHandler:A,successfulResponseHandler:(0,t.createEventSourceResponseHandler)(eG),abortSignal:e.abortSignal,fetch:this.config.fetch}),p=this,c=this.config.provider.replace(".responses",""),m=eX(e.prompt),h=new Map,g={unified:"other",raw:void 0},_=[],z=null,y={},f=[],b=!1,v={};return{stream:d.pipeThrough(new TransformStream({start(e){e.enqueue({type:"stream-start",warnings:r})},transform(i,r){var u,d,x,w,k,j,S,I,C,T,N,q,R,E,O,M,U,A,P,$,H,D,F,J,L,B,V,W,G,K,Y,Q,X,Z,ee,et,eo;if(e.includeRawChunks&&r.enqueue({type:"raw",rawValue:i.rawValue}),!i.success){g={unified:"error",raw:void 0},r.enqueue({type:"error",error:i.error});return}let en=i.value;if(e0(en))if("function_call"===en.item.type)y[en.output_index]={toolName:en.item.name,toolCallId:en.item.call_id},r.enqueue({type:"tool-input-start",id:en.item.call_id,toolName:en.item.name});else if("web_search_call"===en.item.type)y[en.output_index]={toolName:l.toCustomToolName(null!=a?a:"web_search"),toolCallId:en.item.id},r.enqueue({type:"tool-input-start",id:en.item.id,toolName:l.toCustomToolName(null!=a?a:"web_search"),providerExecuted:!0}),r.enqueue({type:"tool-input-end",id:en.item.id}),r.enqueue({type:"tool-call",toolCallId:en.item.id,toolName:l.toCustomToolName(null!=a?a:"web_search"),input:JSON.stringify({}),providerExecuted:!0});else if("computer_call"===en.item.type)y[en.output_index]={toolName:l.toCustomToolName("computer_use"),toolCallId:en.item.id},r.enqueue({type:"tool-input-start",id:en.item.id,toolName:l.toCustomToolName("computer_use"),providerExecuted:!0});else if("code_interpreter_call"===en.item.type)y[en.output_index]={toolName:l.toCustomToolName("code_interpreter"),toolCallId:en.item.id,codeInterpreter:{containerId:en.item.container_id}},r.enqueue({type:"tool-input-start",id:en.item.id,toolName:l.toCustomToolName("code_interpreter"),providerExecuted:!0}),r.enqueue({type:"tool-input-delta",id:en.item.id,delta:`{"containerId":"${en.item.container_id}","code":"`});else if("file_search_call"===en.item.type)r.enqueue({type:"tool-call",toolCallId:en.item.id,toolName:l.toCustomToolName("file_search"),input:"{}",providerExecuted:!0});else if("image_generation_call"===en.item.type)r.enqueue({type:"tool-call",toolCallId:en.item.id,toolName:l.toCustomToolName("image_generation"),input:"{}",providerExecuted:!0});else if("mcp_call"===en.item.type||"mcp_list_tools"===en.item.type||"mcp_approval_request"===en.item.type);else if("apply_patch_call"===en.item.type){let{call_id:e,operation:t}=en.item;if(y[en.output_index]={toolName:l.toCustomToolName("apply_patch"),toolCallId:e,applyPatch:{hasDiff:"delete_file"===t.type,endEmitted:"delete_file"===t.type}},r.enqueue({type:"tool-input-start",id:e,toolName:l.toCustomToolName("apply_patch")}),"delete_file"===t.type){let o=JSON.stringify({callId:e,operation:t});r.enqueue({type:"tool-input-delta",id:e,delta:o}),r.enqueue({type:"tool-input-end",id:e})}else r.enqueue({type:"tool-input-delta",id:e,delta:`{"callId":"${e1(e)}","operation":{"type":"${e1(t.type)}","path":"${e1(t.path)}","diff":"`})}else"shell_call"===en.item.type?y[en.output_index]={toolName:l.toCustomToolName("shell"),toolCallId:en.item.call_id}:"message"===en.item.type?(f.splice(0,f.length),r.enqueue({type:"text-start",id:en.item.id,providerMetadata:{[c]:{itemId:en.item.id}}})):e0(en)&&"reasoning"===en.item.type&&(v[en.item.id]={encryptedContent:en.item.encrypted_content,summaryParts:{0:"active"}},r.enqueue({type:"reasoning-start",id:`${en.item.id}:0`,providerMetadata:{[c]:{itemId:en.item.id,reasoningEncryptedContent:null!=(u=en.item.encrypted_content)?u:null}}}));else if("response.output_item.done"===en.type){if("message"===en.item.type)r.enqueue({type:"text-end",id:en.item.id,providerMetadata:{[c]:{itemId:en.item.id,...f.length>0&&{annotations:f}}}});else if("function_call"===en.item.type)y[en.output_index]=void 0,b=!0,r.enqueue({type:"tool-input-end",id:en.item.call_id}),r.enqueue({type:"tool-call",toolCallId:en.item.call_id,toolName:en.item.name,input:en.item.arguments,providerMetadata:{[c]:{itemId:en.item.id}}});else if("web_search_call"===en.item.type)y[en.output_index]=void 0,r.enqueue({type:"tool-result",toolCallId:en.item.id,toolName:l.toCustomToolName(null!=a?a:"web_search"),result:e2(en.item.action)});else if("computer_call"===en.item.type)y[en.output_index]=void 0,r.enqueue({type:"tool-input-end",id:en.item.id}),r.enqueue({type:"tool-call",toolCallId:en.item.id,toolName:l.toCustomToolName("computer_use"),input:"",providerExecuted:!0}),r.enqueue({type:"tool-result",toolCallId:en.item.id,toolName:l.toCustomToolName("computer_use"),result:{type:"computer_use_tool_result",status:en.item.status||"completed"}});else if("file_search_call"===en.item.type)y[en.output_index]=void 0,r.enqueue({type:"tool-result",toolCallId:en.item.id,toolName:l.toCustomToolName("file_search"),result:{queries:en.item.queries,results:null!=(x=null==(d=en.item.results)?void 0:d.map(e=>({attributes:e.attributes,fileId:e.file_id,filename:e.filename,score:e.score,text:e.text})))?x:null}});else if("code_interpreter_call"===en.item.type)y[en.output_index]=void 0,r.enqueue({type:"tool-result",toolCallId:en.item.id,toolName:l.toCustomToolName("code_interpreter"),result:{outputs:en.item.outputs}});else if("image_generation_call"===en.item.type)r.enqueue({type:"tool-result",toolCallId:en.item.id,toolName:l.toCustomToolName("image_generation"),result:{result:en.item.result}});else if("mcp_call"===en.item.type){y[en.output_index]=void 0;let e=null!=(w=en.item.approval_request_id)?w:void 0,t=null!=e&&null!=(j=null!=(k=h.get(e))?k:m[e])?j:en.item.id,o=`mcp.${en.item.name}`;r.enqueue({type:"tool-call",toolCallId:t,toolName:o,input:en.item.arguments,providerExecuted:!0,dynamic:!0}),r.enqueue({type:"tool-result",toolCallId:t,toolName:o,result:{type:"call",serverLabel:en.item.server_label,name:en.item.name,arguments:en.item.arguments,...null!=en.item.output?{output:en.item.output}:{},...null!=en.item.error?{error:en.item.error}:{}},providerMetadata:{[c]:{itemId:en.item.id}}})}else if("mcp_list_tools"===en.item.type)y[en.output_index]=void 0;else if("apply_patch_call"===en.item.type){let e=y[en.output_index];(null==e?void 0:e.applyPatch)&&!e.applyPatch.endEmitted&&"delete_file"!==en.item.operation.type&&(e.applyPatch.hasDiff||r.enqueue({type:"tool-input-delta",id:e.toolCallId,delta:e1(en.item.operation.diff)}),r.enqueue({type:"tool-input-delta",id:e.toolCallId,delta:'"}}'}),r.enqueue({type:"tool-input-end",id:e.toolCallId}),e.applyPatch.endEmitted=!0),e&&"completed"===en.item.status&&r.enqueue({type:"tool-call",toolCallId:e.toolCallId,toolName:l.toCustomToolName("apply_patch"),input:JSON.stringify({callId:en.item.call_id,operation:en.item.operation}),providerMetadata:{[c]:{itemId:en.item.id}}}),y[en.output_index]=void 0}else if("mcp_approval_request"===en.item.type){y[en.output_index]=void 0;let e=null!=(C=null==(I=(S=p.config).generateId)?void 0:I.call(S))?C:(0,t.generateId)(),o=null!=(T=en.item.approval_request_id)?T:en.item.id;h.set(o,e);let n=`mcp.${en.item.name}`;r.enqueue({type:"tool-call",toolCallId:e,toolName:n,input:en.item.arguments,providerExecuted:!0,dynamic:!0}),r.enqueue({type:"tool-approval-request",approvalId:o,toolCallId:e})}else if("local_shell_call"===en.item.type)y[en.output_index]=void 0,r.enqueue({type:"tool-call",toolCallId:en.item.call_id,toolName:l.toCustomToolName("local_shell"),input:JSON.stringify({action:{type:"exec",command:en.item.action.command,timeoutMs:en.item.action.timeout_ms,user:en.item.action.user,workingDirectory:en.item.action.working_directory,env:en.item.action.env}}),providerMetadata:{[c]:{itemId:en.item.id}}});else if("shell_call"===en.item.type)y[en.output_index]=void 0,r.enqueue({type:"tool-call",toolCallId:en.item.call_id,toolName:l.toCustomToolName("shell"),input:JSON.stringify({action:{commands:en.item.action.commands}}),providerMetadata:{[c]:{itemId:en.item.id}}});else if("reasoning"===en.item.type){for(let e of Object.entries(v[en.item.id].summaryParts).filter(([e,t])=>"active"===t||"can-conclude"===t).map(([e])=>e))r.enqueue({type:"reasoning-end",id:`${en.item.id}:${e}`,providerMetadata:{[c]:{itemId:en.item.id,reasoningEncryptedContent:null!=(N=en.item.encrypted_content)?N:null}}});delete v[en.item.id]}}else if("response.function_call_arguments.delta"===en.type){let e=y[en.output_index];null!=e&&r.enqueue({type:"tool-input-delta",id:e.toolCallId,delta:en.delta})}else if("response.apply_patch_call_operation_diff.delta"===en.type){let e=y[en.output_index];(null==e?void 0:e.applyPatch)&&(r.enqueue({type:"tool-input-delta",id:e.toolCallId,delta:e1(en.delta)}),e.applyPatch.hasDiff=!0)}else if("response.apply_patch_call_operation_diff.done"===en.type){let e=y[en.output_index];(null==e?void 0:e.applyPatch)&&!e.applyPatch.endEmitted&&(e.applyPatch.hasDiff||(r.enqueue({type:"tool-input-delta",id:e.toolCallId,delta:e1(en.diff)}),e.applyPatch.hasDiff=!0),r.enqueue({type:"tool-input-delta",id:e.toolCallId,delta:'"}}'}),r.enqueue({type:"tool-input-end",id:e.toolCallId}),e.applyPatch.endEmitted=!0)}else if("response.image_generation_call.partial_image"===en.type)r.enqueue({type:"tool-result",toolCallId:en.item_id,toolName:l.toCustomToolName("image_generation"),result:{result:en.partial_image_b64},preliminary:!0});else if("response.code_interpreter_call_code.delta"===en.type){let e=y[en.output_index];null!=e&&r.enqueue({type:"tool-input-delta",id:e.toolCallId,delta:e1(en.delta)})}else if("response.code_interpreter_call_code.done"===en.type){let e=y[en.output_index];null!=e&&(r.enqueue({type:"tool-input-delta",id:e.toolCallId,delta:'"}'}),r.enqueue({type:"tool-input-end",id:e.toolCallId}),r.enqueue({type:"tool-call",toolCallId:e.toolCallId,toolName:l.toCustomToolName("code_interpreter"),input:JSON.stringify({code:en.code,containerId:e.codeInterpreter.containerId}),providerExecuted:!0}))}else if("response.created"===en.type)z=en.response.id,r.enqueue({type:"response-metadata",id:en.response.id,timestamp:new Date(1e3*en.response.created_at),modelId:en.response.model});else if("response.output_text.delta"===en.type)r.enqueue({type:"text-delta",id:en.item_id,delta:en.delta}),(null==(R=null==(q=e.providerOptions)?void 0:q.openai)?void 0:R.logprobs)&&en.logprobs&&_.push(en.logprobs);else if("response.reasoning_summary_part.added"===en.type){if(en.summary_index>0){let e=v[en.item_id];for(let t of(e.summaryParts[en.summary_index]="active",Object.keys(e.summaryParts)))"can-conclude"===e.summaryParts[t]&&(r.enqueue({type:"reasoning-end",id:`${en.item_id}:${t}`,providerMetadata:{[c]:{itemId:en.item_id}}}),e.summaryParts[t]="concluded");r.enqueue({type:"reasoning-start",id:`${en.item_id}:${en.summary_index}`,providerMetadata:{[c]:{itemId:en.item_id,reasoningEncryptedContent:null!=(O=null==(E=v[en.item_id])?void 0:E.encryptedContent)?O:null}}})}}else{"response.reasoning_summary_text.delta"===en.type?r.enqueue({type:"reasoning-delta",id:`${en.item_id}:${en.summary_index}`,delta:en.delta,providerMetadata:{[c]:{itemId:en.item_id}}}):"response.reasoning_summary_part.done"===en.type?s?(r.enqueue({type:"reasoning-end",id:`${en.item_id}:${en.summary_index}`,providerMetadata:{[c]:{itemId:en.item_id}}}),v[en.item_id].summaryParts[en.summary_index]="concluded"):v[en.item_id].summaryParts[en.summary_index]="can-conclude":"response.completed"===(eo=en).type||"response.incomplete"===eo.type?(g={unified:eW({finishReason:null==(M=en.response.incomplete_details)?void 0:M.reason,hasFunctionCall:b}),raw:null!=(A=null==(U=en.response.incomplete_details)?void 0:U.reason)?A:void 0},n=en.response.usage,"string"==typeof en.response.service_tier&&(o=en.response.service_tier)):"response.output_text.annotation.added"===en.type?(f.push(en.annotation),"url_citation"===en.annotation.type?r.enqueue({type:"source",sourceType:"url",id:null!=(H=null==($=(P=p.config).generateId)?void 0:$.call(P))?H:(0,t.generateId)(),url:en.annotation.url,title:en.annotation.title}):"file_citation"===en.annotation.type?r.enqueue({type:"source",sourceType:"document",id:null!=(J=null==(F=(D=p.config).generateId)?void 0:F.call(D))?J:(0,t.generateId)(),mediaType:"text/plain",title:null!=(B=null!=(L=en.annotation.quote)?L:en.annotation.filename)?B:"Document",filename:null!=(V=en.annotation.filename)?V:en.annotation.file_id,...en.annotation.file_id?{providerMetadata:{[c]:{fileId:en.annotation.file_id}}}:{}}):"container_file_citation"===en.annotation.type?r.enqueue({type:"source",sourceType:"document",id:null!=(K=null==(G=(W=p.config).generateId)?void 0:G.call(W))?K:(0,t.generateId)(),mediaType:"text/plain",title:null!=(Q=null!=(Y=en.annotation.filename)?Y:en.annotation.file_id)?Q:"Document",filename:null!=(X=en.annotation.filename)?X:en.annotation.file_id,providerMetadata:{[c]:{fileId:en.annotation.file_id,containerId:en.annotation.container_id,...null!=en.annotation.index?{index:en.annotation.index}:{}}}}):"file_path"===en.annotation.type&&r.enqueue({type:"source",sourceType:"document",id:null!=(et=null==(ee=(Z=p.config).generateId)?void 0:ee.call(Z))?et:(0,t.generateId)(),mediaType:"application/octet-stream",title:en.annotation.file_id,filename:en.annotation.file_id,providerMetadata:{[c]:{fileId:en.annotation.file_id,...null!=en.annotation.index?{index:en.annotation.index}:{}}}})):"error"===en.type&&r.enqueue({type:"error",error:en})}},flush(e){let t={[c]:{responseId:z}};_.length>0&&(t[c].logprobs=_),void 0!==o&&(t[c].serviceTier=o),e.enqueue({type:"finish",finishReason:g,usage:eJ(n),providerMetadata:t})}})),request:{body:i},response:{headers:u}}}};function e0(e){return"response.output_item.added"===e.type}function e2(e){var t;switch(e.type){case"search":return{action:{type:"search",query:null!=(t=e.query)?t:void 0},...null!=e.sources&&{sources:e.sources}};case"open_page":return{action:{type:"openPage",url:e.url}};case"find_in_page":return{action:{type:"findInPage",url:e.url,pattern:e.pattern}}}}function e1(e){return JSON.stringify(e).slice(1,-1)}var e5=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({instructions:n.z.string().nullish(),speed:n.z.number().min(.25).max(4).default(1).nullish()}))),e4=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v3"}get provider(){return this.config.provider}async getArgs({text:e,voice:o="alloy",outputFormat:n="mp3",speed:i,instructions:r,language:a,providerOptions:l}){let s=[],u=await (0,t.parseProviderOptions)({provider:"openai",providerOptions:l,schema:e5}),d={model:this.modelId,input:e,voice:o,response_format:"mp3",speed:i,instructions:r};if(n&&(["mp3","opus","aac","flac","wav","pcm"].includes(n)?d.response_format=n:s.push({type:"unsupported",feature:"outputFormat",details:`Unsupported output format: ${n}. Using mp3 instead.`})),u){let e={};for(let t in e){let o=e[t];void 0!==o&&(d[t]=o)}}return a&&s.push({type:"unsupported",feature:"language",details:`OpenAI speech models do not support language selection. Language parameter "${a}" was ignored.`}),{requestBody:d,warnings:s}}async doGenerate(e){var o,n,i;let r=null!=(i=null==(n=null==(o=this.config._internal)?void 0:o.currentDate)?void 0:n.call(o))?i:new Date,{requestBody:a,warnings:l}=await this.getArgs(e),{value:s,responseHeaders:u,rawValue:d}=await (0,t.postJsonToApi)({url:this.config.url({path:"/audio/speech",modelId:this.modelId}),headers:(0,t.combineHeaders)(this.config.headers(),e.headers),body:a,failedResponseHandler:A,successfulResponseHandler:(0,t.createBinaryResponseHandler)(),abortSignal:e.abortSignal,fetch:this.config.fetch});return{audio:s,warnings:l,request:{body:JSON.stringify(a)},response:{timestamp:r,modelId:this.modelId,headers:u,body:d}}}},e3=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({text:n.z.string(),language:n.z.string().nullish(),duration:n.z.number().nullish(),words:n.z.array(n.z.object({word:n.z.string(),start:n.z.number(),end:n.z.number()})).nullish(),segments:n.z.array(n.z.object({id:n.z.number(),seek:n.z.number(),start:n.z.number(),end:n.z.number(),text:n.z.string(),tokens:n.z.array(n.z.number()),temperature:n.z.number(),avg_logprob:n.z.number(),compression_ratio:n.z.number(),no_speech_prob:n.z.number()})).nullish()}))),e6=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({include:n.z.array(n.z.string()).optional(),language:n.z.string().optional(),prompt:n.z.string().optional(),temperature:n.z.number().min(0).max(1).default(0).optional(),timestampGranularities:n.z.array(n.z.enum(["word","segment"])).default(["segment"]).optional()}))),e8={afrikaans:"af",arabic:"ar",armenian:"hy",azerbaijani:"az",belarusian:"be",bosnian:"bs",bulgarian:"bg",catalan:"ca",chinese:"zh",croatian:"hr",czech:"cs",danish:"da",dutch:"nl",english:"en",estonian:"et",finnish:"fi",french:"fr",galician:"gl",german:"de",greek:"el",hebrew:"he",hindi:"hi",hungarian:"hu",icelandic:"is",indonesian:"id",italian:"it",japanese:"ja",kannada:"kn",kazakh:"kk",korean:"ko",latvian:"lv",lithuanian:"lt",macedonian:"mk",malay:"ms",marathi:"mr",maori:"mi",nepali:"ne",norwegian:"no",persian:"fa",polish:"pl",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"sr",slovak:"sk",slovenian:"sl",spanish:"es",swahili:"sw",swedish:"sv",tagalog:"tl",tamil:"ta",thai:"th",turkish:"tr",ukrainian:"uk",urdu:"ur",vietnamese:"vi",welsh:"cy"},e9=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v3"}get provider(){return this.config.provider}async getArgs({audio:e,mediaType:o,providerOptions:n}){let i=await (0,t.parseProviderOptions)({provider:"openai",providerOptions:n,schema:e6}),r=new FormData,a=e instanceof Uint8Array?new Blob([e]):new Blob([(0,t.convertBase64ToUint8Array)(e)]);r.append("model",this.modelId);let l=(0,t.mediaTypeToExtension)(o);if(r.append("file",new File([a],"audio",{type:o}),`audio.${l}`),i){for(let[e,t]of Object.entries({include:i.include,language:i.language,prompt:i.prompt,response_format:["gpt-4o-transcribe","gpt-4o-mini-transcribe"].includes(this.modelId)?"json":"verbose_json",temperature:i.temperature,timestamp_granularities:i.timestampGranularities}))if(null!=t)if(Array.isArray(t))for(let o of t)r.append(`${e}[]`,String(o));else r.append(e,String(t))}return{formData:r,warnings:[]}}async doGenerate(e){var o,n,i,r,a,l,s,u;let d=null!=(i=null==(n=null==(o=this.config._internal)?void 0:o.currentDate)?void 0:n.call(o))?i:new Date,{formData:p,warnings:c}=await this.getArgs(e),{value:m,responseHeaders:h,rawValue:g}=await (0,t.postFormDataToApi)({url:this.config.url({path:"/audio/transcriptions",modelId:this.modelId}),headers:(0,t.combineHeaders)(this.config.headers(),e.headers),formData:p,failedResponseHandler:A,successfulResponseHandler:(0,t.createJsonResponseHandler)(e3),abortSignal:e.abortSignal,fetch:this.config.fetch}),_=null!=m.language&&m.language in e8?e8[m.language]:void 0;return{text:m.text,segments:null!=(s=null!=(l=null==(r=m.segments)?void 0:r.map(e=>({text:e.text,startSecond:e.start,endSecond:e.end})))?l:null==(a=m.words)?void 0:a.map(e=>({text:e.word,startSecond:e.start,endSecond:e.end})))?s:[],language:_,durationInSeconds:null!=(u=m.duration)?u:void 0,warnings:c,response:{timestamp:d,modelId:this.modelId,headers:h,body:g}}}};function e7(e={}){var o,n;let i=null!=(o=(0,t.withoutTrailingSlash)((0,t.loadOptionalSetting)({settingValue:e.baseURL,environmentVariableName:"OPENAI_BASE_URL"})))?o:"https://api.openai.com/v1",r=null!=(n=e.name)?n:"openai",a=()=>(0,t.withUserAgentSuffix)({Authorization:`Bearer ${(0,t.loadApiKey)({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers},"ai-sdk/openai/3.0.1"),l=t=>new et(t,{provider:`${r}.embedding`,url:({path:e})=>`${i}${e}`,headers:a,fetch:e.fetch}),s=t=>new er(t,{provider:`${r}.image`,url:({path:e})=>`${i}${e}`,headers:a,fetch:e.fetch}),u=t=>new e9(t,{provider:`${r}.transcription`,url:({path:e})=>`${i}${e}`,headers:a,fetch:e.fetch}),d=t=>new e4(t,{provider:`${r}.speech`,url:({path:e})=>`${i}${e}`,headers:a,fetch:e.fetch}),p=e=>{if(new.target)throw Error("The OpenAI model function cannot be called with the new keyword.");return c(e)},c=t=>new eZ(t,{provider:`${r}.responses`,url:({path:e})=>`${i}${e}`,headers:a,fetch:e.fetch,fileIdPrefixes:["file-"]}),m=function(e){return p(e)};return m.specificationVersion="v3",m.languageModel=p,m.chat=t=>new B(t,{provider:`${r}.chat`,url:({path:e})=>`${i}${e}`,headers:a,fetch:e.fetch}),m.completion=t=>new X(t,{provider:`${r}.completion`,url:({path:e})=>`${i}${e}`,headers:a,fetch:e.fetch}),m.responses=c,m.embedding=l,m.embeddingModel=l,m.textEmbedding=l,m.textEmbeddingModel=l,m.image=s,m.imageModel=s,m.transcription=u,m.transcriptionModel=u,m.speech=d,m.speechModel=d,m.tools=eF,m}e7();var te=e.i(51615),tt=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({type:n.z.literal("error"),error:n.z.object({type:n.z.string(),message:n.z.string()})}))),to=(0,t.createJsonErrorResponseHandler)({errorSchema:tt,errorToMessage:e=>e.error.message}),tn=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({type:n.z.literal("message"),id:n.z.string().nullish(),model:n.z.string().nullish(),content:n.z.array(n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("text"),text:n.z.string(),citations:n.z.array(n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("web_search_result_location"),cited_text:n.z.string(),url:n.z.string(),title:n.z.string(),encrypted_index:n.z.string()}),n.z.object({type:n.z.literal("page_location"),cited_text:n.z.string(),document_index:n.z.number(),document_title:n.z.string().nullable(),start_page_number:n.z.number(),end_page_number:n.z.number()}),n.z.object({type:n.z.literal("char_location"),cited_text:n.z.string(),document_index:n.z.number(),document_title:n.z.string().nullable(),start_char_index:n.z.number(),end_char_index:n.z.number()})])).optional()}),n.z.object({type:n.z.literal("thinking"),thinking:n.z.string(),signature:n.z.string()}),n.z.object({type:n.z.literal("redacted_thinking"),data:n.z.string()}),n.z.object({type:n.z.literal("tool_use"),id:n.z.string(),name:n.z.string(),input:n.z.unknown(),caller:n.z.union([n.z.object({type:n.z.literal("code_execution_20250825"),tool_id:n.z.string()}),n.z.object({type:n.z.literal("direct")})]).optional()}),n.z.object({type:n.z.literal("server_tool_use"),id:n.z.string(),name:n.z.string(),input:n.z.record(n.z.string(),n.z.unknown()).nullish()}),n.z.object({type:n.z.literal("mcp_tool_use"),id:n.z.string(),name:n.z.string(),input:n.z.unknown(),server_name:n.z.string()}),n.z.object({type:n.z.literal("mcp_tool_result"),tool_use_id:n.z.string(),is_error:n.z.boolean(),content:n.z.array(n.z.union([n.z.string(),n.z.object({type:n.z.literal("text"),text:n.z.string()})]))}),n.z.object({type:n.z.literal("web_fetch_tool_result"),tool_use_id:n.z.string(),content:n.z.union([n.z.object({type:n.z.literal("web_fetch_result"),url:n.z.string(),retrieved_at:n.z.string(),content:n.z.object({type:n.z.literal("document"),title:n.z.string().nullable(),citations:n.z.object({enabled:n.z.boolean()}).optional(),source:n.z.union([n.z.object({type:n.z.literal("base64"),media_type:n.z.literal("application/pdf"),data:n.z.string()}),n.z.object({type:n.z.literal("text"),media_type:n.z.literal("text/plain"),data:n.z.string()})])})}),n.z.object({type:n.z.literal("web_fetch_tool_result_error"),error_code:n.z.string()})])}),n.z.object({type:n.z.literal("web_search_tool_result"),tool_use_id:n.z.string(),content:n.z.union([n.z.array(n.z.object({type:n.z.literal("web_search_result"),url:n.z.string(),title:n.z.string(),encrypted_content:n.z.string(),page_age:n.z.string().nullish()})),n.z.object({type:n.z.literal("web_search_tool_result_error"),error_code:n.z.string()})])}),n.z.object({type:n.z.literal("code_execution_tool_result"),tool_use_id:n.z.string(),content:n.z.union([n.z.object({type:n.z.literal("code_execution_result"),stdout:n.z.string(),stderr:n.z.string(),return_code:n.z.number(),content:n.z.array(n.z.object({type:n.z.literal("code_execution_output"),file_id:n.z.string()})).optional().default([])}),n.z.object({type:n.z.literal("code_execution_tool_result_error"),error_code:n.z.string()})])}),n.z.object({type:n.z.literal("bash_code_execution_tool_result"),tool_use_id:n.z.string(),content:n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("bash_code_execution_result"),content:n.z.array(n.z.object({type:n.z.literal("bash_code_execution_output"),file_id:n.z.string()})),stdout:n.z.string(),stderr:n.z.string(),return_code:n.z.number()}),n.z.object({type:n.z.literal("bash_code_execution_tool_result_error"),error_code:n.z.string()})])}),n.z.object({type:n.z.literal("text_editor_code_execution_tool_result"),tool_use_id:n.z.string(),content:n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("text_editor_code_execution_tool_result_error"),error_code:n.z.string()}),n.z.object({type:n.z.literal("text_editor_code_execution_view_result"),content:n.z.string(),file_type:n.z.string(),num_lines:n.z.number().nullable(),start_line:n.z.number().nullable(),total_lines:n.z.number().nullable()}),n.z.object({type:n.z.literal("text_editor_code_execution_create_result"),is_file_update:n.z.boolean()}),n.z.object({type:n.z.literal("text_editor_code_execution_str_replace_result"),lines:n.z.array(n.z.string()).nullable(),new_lines:n.z.number().nullable(),new_start:n.z.number().nullable(),old_lines:n.z.number().nullable(),old_start:n.z.number().nullable()})])}),n.z.object({type:n.z.literal("tool_search_tool_result"),tool_use_id:n.z.string(),content:n.z.union([n.z.object({type:n.z.literal("tool_search_tool_search_result"),tool_references:n.z.array(n.z.object({type:n.z.literal("tool_reference"),tool_name:n.z.string()}))}),n.z.object({type:n.z.literal("tool_search_tool_result_error"),error_code:n.z.string()})])})])),stop_reason:n.z.string().nullish(),stop_sequence:n.z.string().nullish(),usage:n.z.looseObject({input_tokens:n.z.number(),output_tokens:n.z.number(),cache_creation_input_tokens:n.z.number().nullish(),cache_read_input_tokens:n.z.number().nullish()}),container:n.z.object({expires_at:n.z.string(),id:n.z.string(),skills:n.z.array(n.z.object({type:n.z.union([n.z.literal("anthropic"),n.z.literal("custom")]),skill_id:n.z.string(),version:n.z.string()})).nullish()}).nullish(),context_management:n.z.object({applied_edits:n.z.array(n.z.union([n.z.object({type:n.z.literal("clear_tool_uses_20250919"),cleared_tool_uses:n.z.number(),cleared_input_tokens:n.z.number()}),n.z.object({type:n.z.literal("clear_thinking_20251015"),cleared_thinking_turns:n.z.number(),cleared_input_tokens:n.z.number()})]))}).nullish()}))),ti=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("message_start"),message:n.z.object({id:n.z.string().nullish(),model:n.z.string().nullish(),role:n.z.string().nullish(),usage:n.z.looseObject({input_tokens:n.z.number(),cache_creation_input_tokens:n.z.number().nullish(),cache_read_input_tokens:n.z.number().nullish()}),content:n.z.array(n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("tool_use"),id:n.z.string(),name:n.z.string(),input:n.z.unknown(),caller:n.z.union([n.z.object({type:n.z.literal("code_execution_20250825"),tool_id:n.z.string()}),n.z.object({type:n.z.literal("direct")})]).optional()})])).nullish(),stop_reason:n.z.string().nullish(),container:n.z.object({expires_at:n.z.string(),id:n.z.string()}).nullish()})}),n.z.object({type:n.z.literal("content_block_start"),index:n.z.number(),content_block:n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("text"),text:n.z.string()}),n.z.object({type:n.z.literal("thinking"),thinking:n.z.string()}),n.z.object({type:n.z.literal("tool_use"),id:n.z.string(),name:n.z.string(),input:n.z.record(n.z.string(),n.z.unknown()).optional(),caller:n.z.union([n.z.object({type:n.z.literal("code_execution_20250825"),tool_id:n.z.string()}),n.z.object({type:n.z.literal("direct")})]).optional()}),n.z.object({type:n.z.literal("redacted_thinking"),data:n.z.string()}),n.z.object({type:n.z.literal("server_tool_use"),id:n.z.string(),name:n.z.string(),input:n.z.record(n.z.string(),n.z.unknown()).nullish()}),n.z.object({type:n.z.literal("mcp_tool_use"),id:n.z.string(),name:n.z.string(),input:n.z.unknown(),server_name:n.z.string()}),n.z.object({type:n.z.literal("mcp_tool_result"),tool_use_id:n.z.string(),is_error:n.z.boolean(),content:n.z.array(n.z.union([n.z.string(),n.z.object({type:n.z.literal("text"),text:n.z.string()})]))}),n.z.object({type:n.z.literal("web_fetch_tool_result"),tool_use_id:n.z.string(),content:n.z.union([n.z.object({type:n.z.literal("web_fetch_result"),url:n.z.string(),retrieved_at:n.z.string(),content:n.z.object({type:n.z.literal("document"),title:n.z.string().nullable(),citations:n.z.object({enabled:n.z.boolean()}).optional(),source:n.z.union([n.z.object({type:n.z.literal("base64"),media_type:n.z.literal("application/pdf"),data:n.z.string()}),n.z.object({type:n.z.literal("text"),media_type:n.z.literal("text/plain"),data:n.z.string()})])})}),n.z.object({type:n.z.literal("web_fetch_tool_result_error"),error_code:n.z.string()})])}),n.z.object({type:n.z.literal("web_search_tool_result"),tool_use_id:n.z.string(),content:n.z.union([n.z.array(n.z.object({type:n.z.literal("web_search_result"),url:n.z.string(),title:n.z.string(),encrypted_content:n.z.string(),page_age:n.z.string().nullish()})),n.z.object({type:n.z.literal("web_search_tool_result_error"),error_code:n.z.string()})])}),n.z.object({type:n.z.literal("code_execution_tool_result"),tool_use_id:n.z.string(),content:n.z.union([n.z.object({type:n.z.literal("code_execution_result"),stdout:n.z.string(),stderr:n.z.string(),return_code:n.z.number(),content:n.z.array(n.z.object({type:n.z.literal("code_execution_output"),file_id:n.z.string()})).optional().default([])}),n.z.object({type:n.z.literal("code_execution_tool_result_error"),error_code:n.z.string()})])}),n.z.object({type:n.z.literal("bash_code_execution_tool_result"),tool_use_id:n.z.string(),content:n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("bash_code_execution_result"),content:n.z.array(n.z.object({type:n.z.literal("bash_code_execution_output"),file_id:n.z.string()})),stdout:n.z.string(),stderr:n.z.string(),return_code:n.z.number()}),n.z.object({type:n.z.literal("bash_code_execution_tool_result_error"),error_code:n.z.string()})])}),n.z.object({type:n.z.literal("text_editor_code_execution_tool_result"),tool_use_id:n.z.string(),content:n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("text_editor_code_execution_tool_result_error"),error_code:n.z.string()}),n.z.object({type:n.z.literal("text_editor_code_execution_view_result"),content:n.z.string(),file_type:n.z.string(),num_lines:n.z.number().nullable(),start_line:n.z.number().nullable(),total_lines:n.z.number().nullable()}),n.z.object({type:n.z.literal("text_editor_code_execution_create_result"),is_file_update:n.z.boolean()}),n.z.object({type:n.z.literal("text_editor_code_execution_str_replace_result"),lines:n.z.array(n.z.string()).nullable(),new_lines:n.z.number().nullable(),new_start:n.z.number().nullable(),old_lines:n.z.number().nullable(),old_start:n.z.number().nullable()})])}),n.z.object({type:n.z.literal("tool_search_tool_result"),tool_use_id:n.z.string(),content:n.z.union([n.z.object({type:n.z.literal("tool_search_tool_search_result"),tool_references:n.z.array(n.z.object({type:n.z.literal("tool_reference"),tool_name:n.z.string()}))}),n.z.object({type:n.z.literal("tool_search_tool_result_error"),error_code:n.z.string()})])})])}),n.z.object({type:n.z.literal("content_block_delta"),index:n.z.number(),delta:n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("input_json_delta"),partial_json:n.z.string()}),n.z.object({type:n.z.literal("text_delta"),text:n.z.string()}),n.z.object({type:n.z.literal("thinking_delta"),thinking:n.z.string()}),n.z.object({type:n.z.literal("signature_delta"),signature:n.z.string()}),n.z.object({type:n.z.literal("citations_delta"),citation:n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("web_search_result_location"),cited_text:n.z.string(),url:n.z.string(),title:n.z.string(),encrypted_index:n.z.string()}),n.z.object({type:n.z.literal("page_location"),cited_text:n.z.string(),document_index:n.z.number(),document_title:n.z.string().nullable(),start_page_number:n.z.number(),end_page_number:n.z.number()}),n.z.object({type:n.z.literal("char_location"),cited_text:n.z.string(),document_index:n.z.number(),document_title:n.z.string().nullable(),start_char_index:n.z.number(),end_char_index:n.z.number()})])})])}),n.z.object({type:n.z.literal("content_block_stop"),index:n.z.number()}),n.z.object({type:n.z.literal("error"),error:n.z.object({type:n.z.string(),message:n.z.string()})}),n.z.object({type:n.z.literal("message_delta"),delta:n.z.object({stop_reason:n.z.string().nullish(),stop_sequence:n.z.string().nullish(),container:n.z.object({expires_at:n.z.string(),id:n.z.string(),skills:n.z.array(n.z.object({type:n.z.union([n.z.literal("anthropic"),n.z.literal("custom")]),skill_id:n.z.string(),version:n.z.string()})).nullish()}).nullish(),context_management:n.z.object({applied_edits:n.z.array(n.z.union([n.z.object({type:n.z.literal("clear_tool_uses_20250919"),cleared_tool_uses:n.z.number(),cleared_input_tokens:n.z.number()}),n.z.object({type:n.z.literal("clear_thinking_20251015"),cleared_thinking_turns:n.z.number(),cleared_input_tokens:n.z.number()})]))}).nullish()}),usage:n.z.looseObject({output_tokens:n.z.number(),cache_creation_input_tokens:n.z.number().nullish()})}),n.z.object({type:n.z.literal("message_stop")}),n.z.object({type:n.z.literal("ping")})]))),tr=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({signature:n.z.string().optional(),redactedData:n.z.string().optional()}))),ta=n.z.object({citations:n.z.object({enabled:n.z.boolean()}).optional(),title:n.z.string().optional(),context:n.z.string().optional()}),tl=n.z.object({sendReasoning:n.z.boolean().optional(),structuredOutputMode:n.z.enum(["outputFormat","jsonTool","auto"]).optional(),thinking:n.z.object({type:n.z.union([n.z.literal("enabled"),n.z.literal("disabled")]),budgetTokens:n.z.number().optional()}).optional(),disableParallelToolUse:n.z.boolean().optional(),cacheControl:n.z.object({type:n.z.literal("ephemeral"),ttl:n.z.union([n.z.literal("5m"),n.z.literal("1h")]).optional()}).optional(),mcpServers:n.z.array(n.z.object({type:n.z.literal("url"),name:n.z.string(),url:n.z.string(),authorizationToken:n.z.string().nullish(),toolConfiguration:n.z.object({enabled:n.z.boolean().nullish(),allowedTools:n.z.array(n.z.string()).nullish()}).nullish()})).optional(),container:n.z.object({id:n.z.string().optional(),skills:n.z.array(n.z.object({type:n.z.union([n.z.literal("anthropic"),n.z.literal("custom")]),skillId:n.z.string(),version:n.z.string().optional()})).optional()}).optional(),toolStreaming:n.z.boolean().optional(),effort:n.z.enum(["low","medium","high"]).optional(),contextManagement:n.z.object({edits:n.z.array(n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("clear_tool_uses_20250919"),trigger:n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("input_tokens"),value:n.z.number()}),n.z.object({type:n.z.literal("tool_uses"),value:n.z.number()})]).optional(),keep:n.z.object({type:n.z.literal("tool_uses"),value:n.z.number()}).optional(),clearAtLeast:n.z.object({type:n.z.literal("input_tokens"),value:n.z.number()}).optional(),clearToolInputs:n.z.boolean().optional(),excludeTools:n.z.array(n.z.string()).optional()}),n.z.object({type:n.z.literal("clear_thinking_20251015"),keep:n.z.union([n.z.literal("all"),n.z.object({type:n.z.literal("thinking_turns"),value:n.z.number()})]).optional()})]))}).optional()}),ts=class{constructor(){this.breakpointCount=0,this.warnings=[]}getCacheControl(e,t){var o;let n,i=null!=(o=null==(n=null==e?void 0:e.anthropic)?void 0:n.cacheControl)?o:null==n?void 0:n.cache_control;if(i)return t.canCache?(this.breakpointCount++,this.breakpointCount>4)?void this.warnings.push({type:"unsupported",feature:"cacheControl breakpoint limit",details:`Maximum 4 cache breakpoints exceeded (found ${this.breakpointCount}). This breakpoint will be ignored.`}):i:void this.warnings.push({type:"unsupported",feature:"cache_control on non-cacheable context",details:`cache_control cannot be set on ${t.type}. It will be ignored.`})}getWarnings(){return this.warnings}},tu=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({maxCharacters:n.z.number().optional()}))),td=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({command:n.z.enum(["view","create","str_replace","insert"]),path:n.z.string(),file_text:n.z.string().optional(),insert_line:n.z.number().int().optional(),new_str:n.z.string().optional(),old_str:n.z.string().optional(),view_range:n.z.array(n.z.number().int()).optional()}))),tp=(0,t.createProviderToolFactory)({id:"anthropic.text_editor_20250728",inputSchema:td}),tc=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({maxUses:n.z.number().optional(),allowedDomains:n.z.array(n.z.string()).optional(),blockedDomains:n.z.array(n.z.string()).optional(),userLocation:n.z.object({type:n.z.literal("approximate"),city:n.z.string().optional(),region:n.z.string().optional(),country:n.z.string().optional(),timezone:n.z.string().optional()}).optional()}))),tm=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.array(n.z.object({url:n.z.string(),title:n.z.string().nullable(),pageAge:n.z.string().nullable(),encryptedContent:n.z.string(),type:n.z.literal("web_search_result")})))),th=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({query:n.z.string()}))),tg=(0,t.createProviderToolFactoryWithOutputSchema)({id:"anthropic.web_search_20250305",inputSchema:th,outputSchema:tm}),t_=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({maxUses:n.z.number().optional(),allowedDomains:n.z.array(n.z.string()).optional(),blockedDomains:n.z.array(n.z.string()).optional(),citations:n.z.object({enabled:n.z.boolean()}).optional(),maxContentTokens:n.z.number().optional()}))),tz=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({type:n.z.literal("web_fetch_result"),url:n.z.string(),content:n.z.object({type:n.z.literal("document"),title:n.z.string().nullable(),citations:n.z.object({enabled:n.z.boolean()}).optional(),source:n.z.union([n.z.object({type:n.z.literal("base64"),mediaType:n.z.literal("application/pdf"),data:n.z.string()}),n.z.object({type:n.z.literal("text"),mediaType:n.z.literal("text/plain"),data:n.z.string()})])}),retrievedAt:n.z.string().nullable()}))),ty=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({url:n.z.string()}))),tf=(0,t.createProviderToolFactoryWithOutputSchema)({id:"anthropic.web_fetch_20250910",inputSchema:ty,outputSchema:tz});async function tb({tools:e,toolChoice:n,disableParallelToolUse:i,cacheControlValidator:r,supportsStructuredOutput:a}){var l;e=(null==e?void 0:e.length)?e:void 0;let s=[],u=new Set,d=r||new ts;if(null==e)return{tools:void 0,toolChoice:void 0,toolWarnings:s,betas:u};let p=[];for(let o of e)switch(o.type){case"function":{let e=d.getCacheControl(o.providerOptions,{type:"tool definition",canCache:!0}),t=null==(l=o.providerOptions)?void 0:l.anthropic,n=null==t?void 0:t.deferLoading,i=null==t?void 0:t.allowedCallers;p.push({name:o.name,description:o.description,input_schema:o.inputSchema,cache_control:e,...!0===a&&null!=o.strict?{strict:o.strict}:{},...null!=n?{defer_loading:n}:{},...null!=i?{allowed_callers:i}:{},...null!=o.inputExamples?{input_examples:o.inputExamples.map(e=>e.input)}:{}}),!0===a&&u.add("structured-outputs-2025-11-13"),(null!=o.inputExamples||null!=i)&&u.add("advanced-tool-use-2025-11-20");break}case"provider":switch(o.id){case"anthropic.code_execution_20250522":u.add("code-execution-2025-05-22"),p.push({type:"code_execution_20250522",name:"code_execution",cache_control:void 0});break;case"anthropic.code_execution_20250825":u.add("code-execution-2025-08-25"),p.push({type:"code_execution_20250825",name:"code_execution"});break;case"anthropic.computer_20250124":u.add("computer-use-2025-01-24"),p.push({name:"computer",type:"computer_20250124",display_width_px:o.args.displayWidthPx,display_height_px:o.args.displayHeightPx,display_number:o.args.displayNumber,cache_control:void 0});break;case"anthropic.computer_20241022":u.add("computer-use-2024-10-22"),p.push({name:"computer",type:"computer_20241022",display_width_px:o.args.displayWidthPx,display_height_px:o.args.displayHeightPx,display_number:o.args.displayNumber,cache_control:void 0});break;case"anthropic.text_editor_20250124":u.add("computer-use-2025-01-24"),p.push({name:"str_replace_editor",type:"text_editor_20250124",cache_control:void 0});break;case"anthropic.text_editor_20241022":u.add("computer-use-2024-10-22"),p.push({name:"str_replace_editor",type:"text_editor_20241022",cache_control:void 0});break;case"anthropic.text_editor_20250429":u.add("computer-use-2025-01-24"),p.push({name:"str_replace_based_edit_tool",type:"text_editor_20250429",cache_control:void 0});break;case"anthropic.text_editor_20250728":{let e=await (0,t.validateTypes)({value:o.args,schema:tu});p.push({name:"str_replace_based_edit_tool",type:"text_editor_20250728",max_characters:e.maxCharacters,cache_control:void 0});break}case"anthropic.bash_20250124":u.add("computer-use-2025-01-24"),p.push({name:"bash",type:"bash_20250124",cache_control:void 0});break;case"anthropic.bash_20241022":u.add("computer-use-2024-10-22"),p.push({name:"bash",type:"bash_20241022",cache_control:void 0});break;case"anthropic.memory_20250818":u.add("context-management-2025-06-27"),p.push({name:"memory",type:"memory_20250818"});break;case"anthropic.web_fetch_20250910":{u.add("web-fetch-2025-09-10");let e=await (0,t.validateTypes)({value:o.args,schema:t_});p.push({type:"web_fetch_20250910",name:"web_fetch",max_uses:e.maxUses,allowed_domains:e.allowedDomains,blocked_domains:e.blockedDomains,citations:e.citations,max_content_tokens:e.maxContentTokens,cache_control:void 0});break}case"anthropic.web_search_20250305":{let e=await (0,t.validateTypes)({value:o.args,schema:tc});p.push({type:"web_search_20250305",name:"web_search",max_uses:e.maxUses,allowed_domains:e.allowedDomains,blocked_domains:e.blockedDomains,user_location:e.userLocation,cache_control:void 0});break}case"anthropic.tool_search_regex_20251119":u.add("advanced-tool-use-2025-11-20"),p.push({type:"tool_search_tool_regex_20251119",name:"tool_search_tool_regex"});break;case"anthropic.tool_search_bm25_20251119":u.add("advanced-tool-use-2025-11-20"),p.push({type:"tool_search_tool_bm25_20251119",name:"tool_search_tool_bm25"});break;default:s.push({type:"unsupported",feature:`provider-defined tool ${o.id}`})}break;default:s.push({type:"unsupported",feature:`tool ${o}`})}if(null==n)return{tools:p,toolChoice:i?{type:"auto",disable_parallel_tool_use:i}:void 0,toolWarnings:s,betas:u};let c=n.type;switch(c){case"auto":return{tools:p,toolChoice:{type:"auto",disable_parallel_tool_use:i},toolWarnings:s,betas:u};case"required":return{tools:p,toolChoice:{type:"any",disable_parallel_tool_use:i},toolWarnings:s,betas:u};case"none":return{tools:void 0,toolChoice:void 0,toolWarnings:s,betas:u};case"tool":return{tools:p,toolChoice:{type:"tool",name:n.toolName,disable_parallel_tool_use:i},toolWarnings:s,betas:u};default:throw new o.UnsupportedFunctionalityError({functionality:`tool choice type: ${c}`})}}function tv(e){var t,o;let n=e.input_tokens,i=e.output_tokens,r=null!=(t=e.cache_creation_input_tokens)?t:0,a=null!=(o=e.cache_read_input_tokens)?o:0;return{inputTokens:{total:n+r+a,noCache:n,cacheRead:a,cacheWrite:r},outputTokens:{total:i,text:void 0,reasoning:void 0},raw:e}}var tx=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({type:n.z.literal("code_execution_result"),stdout:n.z.string(),stderr:n.z.string(),return_code:n.z.number(),content:n.z.array(n.z.object({type:n.z.literal("code_execution_output"),file_id:n.z.string()})).optional().default([])}))),tw=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({code:n.z.string()}))),tk=(0,t.createProviderToolFactoryWithOutputSchema)({id:"anthropic.code_execution_20250522",inputSchema:tw,outputSchema:tx}),tj=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("code_execution_result"),stdout:n.z.string(),stderr:n.z.string(),return_code:n.z.number(),content:n.z.array(n.z.object({type:n.z.literal("code_execution_output"),file_id:n.z.string()})).optional().default([])}),n.z.object({type:n.z.literal("bash_code_execution_result"),content:n.z.array(n.z.object({type:n.z.literal("bash_code_execution_output"),file_id:n.z.string()})),stdout:n.z.string(),stderr:n.z.string(),return_code:n.z.number()}),n.z.object({type:n.z.literal("bash_code_execution_tool_result_error"),error_code:n.z.string()}),n.z.object({type:n.z.literal("text_editor_code_execution_tool_result_error"),error_code:n.z.string()}),n.z.object({type:n.z.literal("text_editor_code_execution_view_result"),content:n.z.string(),file_type:n.z.string(),num_lines:n.z.number().nullable(),start_line:n.z.number().nullable(),total_lines:n.z.number().nullable()}),n.z.object({type:n.z.literal("text_editor_code_execution_create_result"),is_file_update:n.z.boolean()}),n.z.object({type:n.z.literal("text_editor_code_execution_str_replace_result"),lines:n.z.array(n.z.string()).nullable(),new_lines:n.z.number().nullable(),new_start:n.z.number().nullable(),old_lines:n.z.number().nullable(),old_start:n.z.number().nullable()})]))),tS=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("programmatic-tool-call"),code:n.z.string()}),n.z.object({type:n.z.literal("bash_code_execution"),command:n.z.string()}),n.z.discriminatedUnion("command",[n.z.object({type:n.z.literal("text_editor_code_execution"),command:n.z.literal("view"),path:n.z.string()}),n.z.object({type:n.z.literal("text_editor_code_execution"),command:n.z.literal("create"),path:n.z.string(),file_text:n.z.string().nullish()}),n.z.object({type:n.z.literal("text_editor_code_execution"),command:n.z.literal("str_replace"),path:n.z.string(),old_str:n.z.string(),new_str:n.z.string()})])]))),tI=(0,t.createProviderToolFactoryWithOutputSchema)({id:"anthropic.code_execution_20250825",inputSchema:tS,outputSchema:tj,supportsDeferredResults:!0}),tC=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.array(n.z.object({type:n.z.literal("tool_reference"),toolName:n.z.string()})))),tT=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({pattern:n.z.string(),limit:n.z.number().optional()}))),tN=(0,t.createProviderToolFactoryWithOutputSchema)({id:"anthropic.tool_search_regex_20251119",inputSchema:tT,outputSchema:tC});async function tq({prompt:e,sendReasoning:n,warnings:i,cacheControlValidator:r,toolNameMapping:a}){var l,s,u,d,p,c,m,h,g,_,z,y,f,b,v;let x,w=new Set,k=function(e){let t,o=[];for(let n of e){let{role:e}=n;switch(e){case"system":(null==t?void 0:t.type)!=="system"&&(t={type:"system",messages:[]},o.push(t)),t.messages.push(n);break;case"assistant":(null==t?void 0:t.type)!=="assistant"&&(t={type:"assistant",messages:[]},o.push(t)),t.messages.push(n);break;case"user":case"tool":(null==t?void 0:t.type)!=="user"&&(t={type:"user",messages:[]},o.push(t)),t.messages.push(n);break;default:throw Error(`Unsupported role: ${e}`)}}return o}(e),j=r||new ts,S=[];async function I(e){var o,n;let i=await (0,t.parseProviderOptions)({provider:"anthropic",providerOptions:e,schema:ta});return null!=(n=null==(o=null==i?void 0:i.citations)?void 0:o.enabled)&&n}async function C(e){let o=await (0,t.parseProviderOptions)({provider:"anthropic",providerOptions:e,schema:ta});return{title:null==o?void 0:o.title,context:null==o?void 0:o.context}}for(let e=0;e<k.length;e++){let r=k[e],T=e===k.length-1,N=r.type;switch(N){case"system":if(null!=x)throw new o.UnsupportedFunctionalityError({functionality:"Multiple system messages that are separated by user/assistant messages"});x=r.messages.map(({content:e,providerOptions:t})=>({type:"text",text:e,cache_control:j.getCacheControl(t,{type:"system message",canCache:!0})}));break;case"user":{let e=[];for(let n of r.messages){let{role:r,content:a}=n;switch(r){case"user":for(let i=0;i<a.length;i++){let r=a[i],d=i===a.length-1,p=null!=(l=j.getCacheControl(r.providerOptions,{type:"user message part",canCache:!0}))?l:d?j.getCacheControl(n.providerOptions,{type:"user message",canCache:!0}):void 0;switch(r.type){case"text":e.push({type:"text",text:r.text,cache_control:p});break;case"file":if(r.mediaType.startsWith("image/"))e.push({type:"image",source:r.data instanceof URL?{type:"url",url:r.data.toString()}:{type:"base64",media_type:"image/*"===r.mediaType?"image/jpeg":r.mediaType,data:(0,t.convertToBase64)(r.data)},cache_control:p});else if("application/pdf"===r.mediaType){w.add("pdfs-2024-09-25");let o=await I(r.providerOptions),n=await C(r.providerOptions);e.push({type:"document",source:r.data instanceof URL?{type:"url",url:r.data.toString()}:{type:"base64",media_type:"application/pdf",data:(0,t.convertToBase64)(r.data)},title:null!=(s=n.title)?s:r.filename,...n.context&&{context:n.context},...o&&{citations:{enabled:!0}},cache_control:p})}else if("text/plain"===r.mediaType){let t=await I(r.providerOptions),n=await C(r.providerOptions);e.push({type:"document",source:r.data instanceof URL?{type:"url",url:r.data.toString()}:{type:"text",media_type:"text/plain",data:function(e){if("string"==typeof e)return te.Buffer.from(e,"base64").toString("utf-8");if(e instanceof Uint8Array)return new TextDecoder().decode(e);if(e instanceof URL)throw new o.UnsupportedFunctionalityError({functionality:"URL-based text documents are not supported for citations"});throw new o.UnsupportedFunctionalityError({functionality:`unsupported data type for text documents: ${typeof e}`})}(r.data)},title:null!=(u=n.title)?u:r.filename,...n.context&&{context:n.context},...t&&{citations:{enabled:!0}},cache_control:p})}else throw new o.UnsupportedFunctionalityError({functionality:`media type: ${r.mediaType}`})}}break;case"tool":for(let o=0;o<a.length;o++){let r,l=a[o];if("tool-approval-response"===l.type)continue;let s=o===a.length-1,u=null!=(d=j.getCacheControl(l.providerOptions,{type:"tool result part",canCache:!0}))?d:s?j.getCacheControl(n.providerOptions,{type:"tool result message",canCache:!0}):void 0,c=l.output;switch(c.type){case"content":r=c.value.map(e=>{switch(e.type){case"text":return{type:"text",text:e.text};case"image-data":return{type:"image",source:{type:"base64",media_type:e.mediaType,data:e.data}};case"image-url":return{type:"image",source:{type:"url",url:e.url}};case"file-url":return{type:"document",source:{type:"url",url:e.url}};case"file-data":if("application/pdf"===e.mediaType)return w.add("pdfs-2024-09-25"),{type:"document",source:{type:"base64",media_type:e.mediaType,data:e.data}};i.push({type:"other",message:`unsupported tool content part type: ${e.type} with media type: ${e.mediaType}`});return;default:return void i.push({type:"other",message:`unsupported tool content part type: ${e.type}`})}}).filter(t.isNonNullable);break;case"text":case"error-text":r=c.value;break;case"execution-denied":r=null!=(p=c.reason)?p:"Tool execution denied.";break;default:r=JSON.stringify(c.value)}e.push({type:"tool_result",tool_use_id:l.toolCallId,content:r,is_error:"error-text"===c.type||"error-json"===c.type||void 0,cache_control:u})}break;default:throw Error(`Unsupported role: ${r}`)}}S.push({role:"user",content:e});break}case"assistant":{let e=[],o=new Set;for(let l=0;l<r.messages.length;l++){let s=r.messages[l],u=l===r.messages.length-1,{content:d}=s;for(let r=0;r<d.length;r++){let l=d[r],p=r===d.length-1,x=null!=(c=j.getCacheControl(l.providerOptions,{type:"assistant message part",canCache:!0}))?c:p?j.getCacheControl(s.providerOptions,{type:"assistant message",canCache:!0}):void 0;switch(l.type){case"text":e.push({type:"text",text:T&&u&&p?l.text.trim():l.text,cache_control:x});break;case"reasoning":if(n){let o=await (0,t.parseProviderOptions)({provider:"anthropic",providerOptions:l.providerOptions,schema:tr});null!=o?null!=o.signature?(j.getCacheControl(l.providerOptions,{type:"thinking block",canCache:!1}),e.push({type:"thinking",thinking:l.text,signature:o.signature})):null!=o.redactedData?(j.getCacheControl(l.providerOptions,{type:"redacted thinking block",canCache:!1}),e.push({type:"redacted_thinking",data:o.redactedData})):i.push({type:"other",message:"unsupported reasoning metadata"}):i.push({type:"other",message:"unsupported reasoning metadata"})}else i.push({type:"other",message:"sending reasoning content is disabled for this model"});break;case"tool-call":{if(l.providerExecuted){let t=a.toProviderToolName(l.toolName);if((null==(h=null==(m=l.providerOptions)?void 0:m.anthropic)?void 0:h.type)==="mcp-tool-use"){o.add(l.toolCallId);let t=null==(_=null==(g=l.providerOptions)?void 0:g.anthropic)?void 0:_.serverName;if(null==t||"string"!=typeof t){i.push({type:"other",message:"mcp tool use server name is required and must be a string"});break}e.push({type:"mcp_tool_use",id:l.toolCallId,name:l.toolName,input:l.input,server_name:t,cache_control:x})}else if("code_execution"===t&&null!=l.input&&"object"==typeof l.input&&"type"in l.input&&"string"==typeof l.input.type&&("bash_code_execution"===l.input.type||"text_editor_code_execution"===l.input.type))e.push({type:"server_tool_use",id:l.toolCallId,name:l.input.type,input:l.input,cache_control:x});else if("code_execution"===t&&null!=l.input&&"object"==typeof l.input&&"type"in l.input&&"programmatic-tool-call"===l.input.type){let{type:t,...o}=l.input;e.push({type:"server_tool_use",id:l.toolCallId,name:"code_execution",input:o,cache_control:x})}else"code_execution"===t||"web_fetch"===t||"web_search"===t||"tool_search_tool_regex"===t||"tool_search_tool_bm25"===t?e.push({type:"server_tool_use",id:l.toolCallId,name:t,input:l.input,cache_control:x}):i.push({type:"other",message:`provider executed tool call for tool ${l.toolName} is not supported`});break}let t=null==(z=l.providerOptions)?void 0:z.anthropic,n=(null==t?void 0:t.caller)?"code_execution_20250825"===t.caller.type&&t.caller.toolId?{type:"code_execution_20250825",tool_id:t.caller.toolId}:"direct"===t.caller.type?{type:"direct"}:void 0:void 0;e.push({type:"tool_use",id:l.toolCallId,name:l.toolName,input:l.input,...n&&{caller:n},cache_control:x});break}case"tool-result":{let n=a.toProviderToolName(l.toolName);if(o.has(l.toolCallId)){let t=l.output;if("json"!==t.type&&"error-json"!==t.type){i.push({type:"other",message:`provider executed tool result output type ${t.type} for tool ${l.toolName} is not supported`});break}e.push({type:"mcp_tool_result",tool_use_id:l.toolCallId,is_error:"error-json"===t.type,content:t.value,cache_control:x})}else if("code_execution"===n){let o=l.output;if("error-text"===o.type||"error-json"===o.type){let t={};try{"string"==typeof o.value?t=JSON.parse(o.value):"object"==typeof o.value&&null!==o.value&&(t=o.value)}catch(e){}"code_execution_tool_result_error"===t.type?e.push({type:"code_execution_tool_result",tool_use_id:l.toolCallId,content:{type:"code_execution_tool_result_error",error_code:null!=(y=t.errorCode)?y:"unknown"},cache_control:x}):e.push({type:"bash_code_execution_tool_result",tool_use_id:l.toolCallId,cache_control:x,content:{type:"bash_code_execution_tool_result_error",error_code:null!=(f=t.errorCode)?f:"unknown"}});break}if("json"!==o.type){i.push({type:"other",message:`provider executed tool result output type ${o.type} for tool ${l.toolName} is not supported`});break}if(null==o.value||"object"!=typeof o.value||!("type"in o.value)||"string"!=typeof o.value.type){i.push({type:"other",message:`provider executed tool result output value is not a valid code execution result for tool ${l.toolName}`});break}if("code_execution_result"===o.value.type){let n=await (0,t.validateTypes)({value:o.value,schema:tx});e.push({type:"code_execution_tool_result",tool_use_id:l.toolCallId,content:{type:n.type,stdout:n.stdout,stderr:n.stderr,return_code:n.return_code,content:null!=(b=n.content)?b:[]},cache_control:x})}else{let n=await (0,t.validateTypes)({value:o.value,schema:tj});"code_execution_result"===n.type?e.push({type:"code_execution_tool_result",tool_use_id:l.toolCallId,content:{type:n.type,stdout:n.stdout,stderr:n.stderr,return_code:n.return_code,content:null!=(v=n.content)?v:[]},cache_control:x}):"bash_code_execution_result"===n.type||"bash_code_execution_tool_result_error"===n.type?e.push({type:"bash_code_execution_tool_result",tool_use_id:l.toolCallId,cache_control:x,content:n}):e.push({type:"text_editor_code_execution_tool_result",tool_use_id:l.toolCallId,cache_control:x,content:n})}break}if("web_fetch"===n){let o=l.output;if("error-json"===o.type){let t=JSON.parse(o.value);e.push({type:"web_fetch_tool_result",tool_use_id:l.toolCallId,content:{type:"web_fetch_tool_result_error",error_code:t.errorCode},cache_control:x});break}if("json"!==o.type){i.push({type:"other",message:`provider executed tool result output type ${o.type} for tool ${l.toolName} is not supported`});break}let n=await (0,t.validateTypes)({value:o.value,schema:tz});e.push({type:"web_fetch_tool_result",tool_use_id:l.toolCallId,content:{type:"web_fetch_result",url:n.url,retrieved_at:n.retrievedAt,content:{type:"document",title:n.content.title,citations:n.content.citations,source:{type:n.content.source.type,media_type:n.content.source.mediaType,data:n.content.source.data}}},cache_control:x});break}if("web_search"===n){let o=l.output;if("json"!==o.type){i.push({type:"other",message:`provider executed tool result output type ${o.type} for tool ${l.toolName} is not supported`});break}let n=await (0,t.validateTypes)({value:o.value,schema:tm});e.push({type:"web_search_tool_result",tool_use_id:l.toolCallId,content:n.map(e=>({url:e.url,title:e.title,page_age:e.pageAge,encrypted_content:e.encryptedContent,type:e.type})),cache_control:x});break}if("tool_search_tool_regex"===n||"tool_search_tool_bm25"===n){let o=l.output;if("json"!==o.type){i.push({type:"other",message:`provider executed tool result output type ${o.type} for tool ${l.toolName} is not supported`});break}let n=(await (0,t.validateTypes)({value:o.value,schema:tC})).map(e=>({type:"tool_reference",tool_name:e.toolName}));e.push({type:"tool_search_tool_result",tool_use_id:l.toolCallId,content:{type:"tool_search_tool_search_result",tool_references:n},cache_control:x});break}i.push({type:"other",message:`provider executed tool result for tool ${l.toolName} is not supported`})}}}}S.push({role:"assistant",content:e});break}default:throw Error(`content type: ${N}`)}}return{prompt:{system:x,messages:S},betas:w}}function tR({finishReason:e,isJsonResponseFromTool:t}){switch(e){case"pause_turn":case"end_turn":case"stop_sequence":return"stop";case"refusal":return"content-filter";case"tool_use":return t?"stop":"tool-calls";case"max_tokens":case"model_context_window_exceeded":return"length";default:return"other"}}function tE(e,t,o){var n;if("page_location"!==e.type&&"char_location"!==e.type)return;let i=t[e.document_index];if(i)return{type:"source",sourceType:"document",id:o(),mediaType:i.mediaType,title:null!=(n=e.document_title)?n:i.title,filename:i.filename,providerMetadata:{anthropic:"page_location"===e.type?{citedText:e.cited_text,startPageNumber:e.start_page_number,endPageNumber:e.end_page_number}:{citedText:e.cited_text,startCharIndex:e.start_char_index,endCharIndex:e.end_char_index}}}}var tO=class{constructor(e,o){var n;this.specificationVersion="v3",this.modelId=e,this.config=o,this.generateId=null!=(n=o.generateId)?n:t.generateId}supportsUrl(e){return"https:"===e.protocol}get provider(){return this.config.provider}get supportedUrls(){var e,t,o;return null!=(o=null==(t=(e=this.config).supportedUrls)?void 0:t.call(e))?o:{}}async getArgs({userSuppliedBetas:e,prompt:o,maxOutputTokens:n,temperature:i,topP:r,topK:a,frequencyPenalty:l,presencePenalty:s,stopSequences:u,responseFormat:d,seed:p,tools:c,toolChoice:m,providerOptions:h,stream:g}){var _,z,y,f,b,v;let x=[];null!=l&&x.push({type:"unsupported",feature:"frequencyPenalty"}),null!=s&&x.push({type:"unsupported",feature:"presencePenalty"}),null!=p&&x.push({type:"unsupported",feature:"seed"}),null!=i&&i>1?(x.push({type:"unsupported",feature:"temperature",details:`${i} exceeds anthropic maximum of 1.0. clamped to 1.0`}),i=1):null!=i&&i<0&&(x.push({type:"unsupported",feature:"temperature",details:`${i} is below anthropic minimum of 0. clamped to 0`}),i=0),(null==d?void 0:d.type)==="json"&&null==d.schema&&x.push({type:"unsupported",feature:"responseFormat",details:"JSON response format requires a schema. The response format is ignored."});let w=await (0,t.parseProviderOptions)({provider:"anthropic",providerOptions:h,schema:tl}),{maxOutputTokens:k,supportsStructuredOutput:j,isKnownModel:S}=function(e){if(e.includes("claude-sonnet-4-5")||e.includes("claude-opus-4-5"))return{maxOutputTokens:64e3,supportsStructuredOutput:!0,isKnownModel:!0};if(e.includes("claude-opus-4-1"))return{maxOutputTokens:32e3,supportsStructuredOutput:!0,isKnownModel:!0};if(e.includes("claude-sonnet-4-")||e.includes("claude-3-7-sonnet")||e.includes("claude-haiku-4-5"))return{maxOutputTokens:64e3,supportsStructuredOutput:!1,isKnownModel:!0};if(e.includes("claude-opus-4-"))return{maxOutputTokens:32e3,supportsStructuredOutput:!1,isKnownModel:!0};if(e.includes("claude-3-5-haiku"))return{maxOutputTokens:8192,supportsStructuredOutput:!1,isKnownModel:!0};else if(e.includes("claude-3-haiku"))return{maxOutputTokens:4096,supportsStructuredOutput:!1,isKnownModel:!0};else return{maxOutputTokens:4096,supportsStructuredOutput:!1,isKnownModel:!1}}(this.modelId),I=(null==(_=this.config.supportsNativeStructuredOutput)||_)&&j,C=null!=(z=null==w?void 0:w.structuredOutputMode)?z:"auto",T="outputFormat"===C||"auto"===C&&I,N=(null==d?void 0:d.type)!=="json"||null==d.schema||T?void 0:{type:"function",name:"json",description:"Respond with a JSON object.",inputSchema:d.schema},q=null==w?void 0:w.contextManagement,R=new ts,E=(0,t.createToolNameMapping)({tools:c,providerToolNames:{"anthropic.code_execution_20250522":"code_execution","anthropic.code_execution_20250825":"code_execution","anthropic.computer_20241022":"computer","anthropic.computer_20250124":"computer","anthropic.text_editor_20241022":"str_replace_editor","anthropic.text_editor_20250124":"str_replace_editor","anthropic.text_editor_20250429":"str_replace_based_edit_tool","anthropic.text_editor_20250728":"str_replace_based_edit_tool","anthropic.bash_20241022":"bash","anthropic.bash_20250124":"bash","anthropic.memory_20250818":"memory","anthropic.web_search_20250305":"web_search","anthropic.web_fetch_20250910":"web_fetch","anthropic.tool_search_regex_20251119":"tool_search_tool_regex","anthropic.tool_search_bm25_20251119":"tool_search_tool_bm25"}}),{prompt:O,betas:M}=await tq({prompt:o,sendReasoning:null==(y=null==w?void 0:w.sendReasoning)||y,warnings:x,cacheControlValidator:R,toolNameMapping:E}),U=(null==(f=null==w?void 0:w.thinking)?void 0:f.type)==="enabled",A=null==(b=null==w?void 0:w.thinking)?void 0:b.budgetTokens,P=null!=n?n:k,$={model:this.modelId,max_tokens:P,temperature:i,top_k:a,top_p:r,stop_sequences:u,...U&&{thinking:{type:"enabled",budget_tokens:A}},...(null==w?void 0:w.effort)&&{output_config:{effort:w.effort}},...T&&(null==d?void 0:d.type)==="json"&&null!=d.schema&&{output_format:{type:"json_schema",schema:d.schema}},...(null==w?void 0:w.mcpServers)&&w.mcpServers.length>0&&{mcp_servers:w.mcpServers.map(e=>({type:e.type,name:e.name,url:e.url,authorization_token:e.authorizationToken,tool_configuration:e.toolConfiguration?{allowed_tools:e.toolConfiguration.allowedTools,enabled:e.toolConfiguration.enabled}:void 0}))},...(null==w?void 0:w.container)&&{container:w.container.skills&&w.container.skills.length>0?{id:w.container.id,skills:w.container.skills.map(e=>({type:e.type,skill_id:e.skillId,version:e.version}))}:w.container.id},system:O.system,messages:O.messages,...q&&{context_management:{edits:q.edits.map(e=>{let t=e.type;switch(t){case"clear_tool_uses_20250919":return{type:e.type,...void 0!==e.trigger&&{trigger:e.trigger},...void 0!==e.keep&&{keep:e.keep},...void 0!==e.clearAtLeast&&{clear_at_least:e.clearAtLeast},...void 0!==e.clearToolInputs&&{clear_tool_inputs:e.clearToolInputs},...void 0!==e.excludeTools&&{exclude_tools:e.excludeTools}};case"clear_thinking_20251015":return{type:e.type,...void 0!==e.keep&&{keep:e.keep}};default:x.push({type:"other",message:`Unknown context management strategy: ${t}`});return}}).filter(e=>void 0!==e)}}};U&&(null==A&&(x.push({type:"compatibility",feature:"extended thinking",details:"thinking budget is required when thinking is enabled. using default budget of 1024 tokens."}),$.thinking={type:"enabled",budget_tokens:1024},A=1024),null!=$.temperature&&($.temperature=void 0,x.push({type:"unsupported",feature:"temperature",details:"temperature is not supported when thinking is enabled"})),null!=a&&($.top_k=void 0,x.push({type:"unsupported",feature:"topK",details:"topK is not supported when thinking is enabled"})),null!=r&&($.top_p=void 0,x.push({type:"unsupported",feature:"topP",details:"topP is not supported when thinking is enabled"})),$.max_tokens=P+(null!=A?A:0)),S&&$.max_tokens>k&&(null!=n&&x.push({type:"unsupported",feature:"maxOutputTokens",details:`${$.max_tokens} (maxOutputTokens + thinkingBudget) is greater than ${this.modelId} ${k} max output tokens. The max output tokens have been limited to ${k}.`}),$.max_tokens=k),(null==w?void 0:w.mcpServers)&&w.mcpServers.length>0&&M.add("mcp-client-2025-04-04"),q&&M.add("context-management-2025-06-27"),(null==w?void 0:w.container)&&w.container.skills&&w.container.skills.length>0&&(M.add("code-execution-2025-08-25"),M.add("skills-2025-10-02"),M.add("files-api-2025-04-14"),(null==c?void 0:c.some(e=>"provider"===e.type&&"anthropic.code_execution_20250825"===e.id))||x.push({type:"other",message:"code execution tool is required when using skills"})),(null==w?void 0:w.effort)&&M.add("effort-2025-11-24"),g&&(null==(v=null==w?void 0:w.toolStreaming)||v)&&M.add("fine-grained-tool-streaming-2025-05-14"),T&&(null==d?void 0:d.type)==="json"&&null!=d.schema&&M.add("structured-outputs-2025-11-13");let{tools:H,toolChoice:D,toolWarnings:F,betas:J}=await tb(null!=N?{tools:[...null!=c?c:[],N],toolChoice:{type:"required"},disableParallelToolUse:!0,cacheControlValidator:R,supportsStructuredOutput:I}:{tools:null!=c?c:[],toolChoice:m,disableParallelToolUse:null==w?void 0:w.disableParallelToolUse,cacheControlValidator:R,supportsStructuredOutput:I}),L=R.getWarnings();return{args:{...$,tools:H,tool_choice:D,stream:!0===g||void 0},warnings:[...x,...F,...L],betas:new Set([...M,...J,...e]),usesJsonResponseTool:null!=N,toolNameMapping:E}}async getHeaders({betas:e,headers:o}){return(0,t.combineHeaders)(await (0,t.resolve)(this.config.headers),o,e.size>0?{"anthropic-beta":Array.from(e).join(",")}:{})}async getBetasFromHeaders(e){var o,n;let i=null!=(o=(await (0,t.resolve)(this.config.headers))["anthropic-beta"])?o:"",r=null!=(n=null==e?void 0:e["anthropic-beta"])?n:"";return new Set([...i.toLowerCase().split(","),...r.toLowerCase().split(",")].map(e=>e.trim()).filter(e=>""!==e))}buildRequestUrl(e){var t,o,n;return null!=(n=null==(o=(t=this.config).buildRequestUrl)?void 0:o.call(t,this.config.baseURL,e))?n:`${this.config.baseURL}/messages`}transformRequestBody(e){var t,o,n;return null!=(n=null==(o=(t=this.config).transformRequestBody)?void 0:o.call(t,e))?n:e}extractCitationDocuments(e){return e.filter(e=>"user"===e.role).flatMap(e=>e.content).filter(e=>{var t,o;if("file"!==e.type||"application/pdf"!==e.mediaType&&"text/plain"!==e.mediaType)return!1;let n=null==(t=e.providerOptions)?void 0:t.anthropic,i=null==n?void 0:n.citations;return null!=(o=null==i?void 0:i.enabled)&&o}).map(e=>{var t;return{title:null!=(t=e.filename)?t:"Untitled Document",filename:e.filename,mediaType:e.mediaType}})}async doGenerate(e){var o,n,i,r,a,l,s,u,d,p;let{args:c,warnings:m,betas:h,usesJsonResponseTool:g,toolNameMapping:_}=await this.getArgs({...e,stream:!1,userSuppliedBetas:await this.getBetasFromHeaders(e.headers)}),z=this.extractCitationDocuments(e.prompt),{responseHeaders:y,value:f,rawValue:b}=await (0,t.postJsonToApi)({url:this.buildRequestUrl(!1),headers:await this.getHeaders({betas:h,headers:e.headers}),body:this.transformRequestBody(c),failedResponseHandler:to,successfulResponseHandler:(0,t.createJsonResponseHandler)(tn),abortSignal:e.abortSignal,fetch:this.config.fetch}),v=[],x={},w=!1;for(let e of f.content)switch(e.type){case"text":if(!g&&(v.push({type:"text",text:e.text}),e.citations))for(let t of e.citations){let e=tE(t,z,this.generateId);e&&v.push(e)}break;case"thinking":v.push({type:"reasoning",text:e.thinking,providerMetadata:{anthropic:{signature:e.signature}}});break;case"redacted_thinking":v.push({type:"reasoning",text:"",providerMetadata:{anthropic:{redactedData:e.data}}});break;case"tool_use":if(g&&"json"===e.name)w=!0,v.push({type:"text",text:JSON.stringify(e.input)});else{let t=e.caller,o=t?{type:t.type,toolId:"tool_id"in t?t.tool_id:void 0}:void 0;v.push({type:"tool-call",toolCallId:e.id,toolName:e.name,input:JSON.stringify(e.input),...o&&{providerMetadata:{anthropic:{caller:o}}}})}break;case"server_tool_use":if("text_editor_code_execution"===e.name||"bash_code_execution"===e.name)v.push({type:"tool-call",toolCallId:e.id,toolName:_.toCustomToolName("code_execution"),input:JSON.stringify({type:e.name,...e.input}),providerExecuted:!0});else if("web_search"===e.name||"code_execution"===e.name||"web_fetch"===e.name){let t="code_execution"===e.name&&null!=e.input&&"object"==typeof e.input&&"code"in e.input&&!("type"in e.input)?{type:"programmatic-tool-call",...e.input}:e.input;v.push({type:"tool-call",toolCallId:e.id,toolName:_.toCustomToolName(e.name),input:JSON.stringify(t),providerExecuted:!0})}else("tool_search_tool_regex"===e.name||"tool_search_tool_bm25"===e.name)&&v.push({type:"tool-call",toolCallId:e.id,toolName:_.toCustomToolName(e.name),input:JSON.stringify(e.input),providerExecuted:!0});break;case"mcp_tool_use":x[e.id]={type:"tool-call",toolCallId:e.id,toolName:e.name,input:JSON.stringify(e.input),providerExecuted:!0,dynamic:!0,providerMetadata:{anthropic:{type:"mcp-tool-use",serverName:e.server_name}}},v.push(x[e.id]);break;case"mcp_tool_result":v.push({type:"tool-result",toolCallId:e.tool_use_id,toolName:x[e.tool_use_id].toolName,isError:e.is_error,result:e.content,dynamic:!0,providerMetadata:x[e.tool_use_id].providerMetadata});break;case"web_fetch_tool_result":"web_fetch_result"===e.content.type?v.push({type:"tool-result",toolCallId:e.tool_use_id,toolName:_.toCustomToolName("web_fetch"),result:{type:"web_fetch_result",url:e.content.url,retrievedAt:e.content.retrieved_at,content:{type:e.content.content.type,title:e.content.content.title,citations:e.content.content.citations,source:{type:e.content.content.source.type,mediaType:e.content.content.source.media_type,data:e.content.content.source.data}}}}):"web_fetch_tool_result_error"===e.content.type&&v.push({type:"tool-result",toolCallId:e.tool_use_id,toolName:_.toCustomToolName("web_fetch"),isError:!0,result:{type:"web_fetch_tool_result_error",errorCode:e.content.error_code}});break;case"web_search_tool_result":if(Array.isArray(e.content))for(let t of(v.push({type:"tool-result",toolCallId:e.tool_use_id,toolName:_.toCustomToolName("web_search"),result:e.content.map(e=>{var t;return{url:e.url,title:e.title,pageAge:null!=(t=e.page_age)?t:null,encryptedContent:e.encrypted_content,type:e.type}})}),e.content))v.push({type:"source",sourceType:"url",id:this.generateId(),url:t.url,title:t.title,providerMetadata:{anthropic:{pageAge:null!=(o=t.page_age)?o:null}}});else v.push({type:"tool-result",toolCallId:e.tool_use_id,toolName:_.toCustomToolName("web_search"),isError:!0,result:{type:"web_search_tool_result_error",errorCode:e.content.error_code}});break;case"code_execution_tool_result":"code_execution_result"===e.content.type?v.push({type:"tool-result",toolCallId:e.tool_use_id,toolName:_.toCustomToolName("code_execution"),result:{type:e.content.type,stdout:e.content.stdout,stderr:e.content.stderr,return_code:e.content.return_code,content:null!=(n=e.content.content)?n:[]}}):"code_execution_tool_result_error"===e.content.type&&v.push({type:"tool-result",toolCallId:e.tool_use_id,toolName:_.toCustomToolName("code_execution"),isError:!0,result:{type:"code_execution_tool_result_error",errorCode:e.content.error_code}});break;case"bash_code_execution_tool_result":case"text_editor_code_execution_tool_result":v.push({type:"tool-result",toolCallId:e.tool_use_id,toolName:_.toCustomToolName("code_execution"),result:e.content});break;case"tool_search_tool_result":"tool_search_tool_search_result"===e.content.type?v.push({type:"tool-result",toolCallId:e.tool_use_id,toolName:_.toCustomToolName("tool_search"),result:e.content.tool_references.map(e=>({type:e.type,toolName:e.tool_name}))}):v.push({type:"tool-result",toolCallId:e.tool_use_id,toolName:_.toCustomToolName("tool_search"),isError:!0,result:{type:"tool_search_tool_result_error",errorCode:e.content.error_code}})}return{content:v,finishReason:{unified:tR({finishReason:f.stop_reason,isJsonResponseFromTool:w}),raw:null!=(i=f.stop_reason)?i:void 0},usage:tv(f.usage),request:{body:c},response:{id:null!=(r=f.id)?r:void 0,modelId:null!=(a=f.model)?a:void 0,headers:y,body:b},warnings:m,providerMetadata:{anthropic:{usage:f.usage,cacheCreationInputTokens:null!=(l=f.usage.cache_creation_input_tokens)?l:null,stopSequence:null!=(s=f.stop_sequence)?s:null,container:f.container?{expiresAt:f.container.expires_at,id:f.container.id,skills:null!=(d=null==(u=f.container.skills)?void 0:u.map(e=>({type:e.type,skillId:e.skill_id,version:e.version})))?d:null}:null,contextManagement:null!=(p=tM(f.context_management))?p:null}}}}async doStream(e){var n,i;let r,a,{args:l,warnings:s,betas:u,usesJsonResponseTool:d,toolNameMapping:p}=await this.getArgs({...e,stream:!0,userSuppliedBetas:await this.getBetasFromHeaders(e.headers)}),c=this.extractCitationDocuments(e.prompt),m=this.buildRequestUrl(!0),{responseHeaders:h,value:g}=await (0,t.postJsonToApi)({url:m,headers:await this.getHeaders({betas:u,headers:e.headers}),body:this.transformRequestBody(l),failedResponseHandler:to,successfulResponseHandler:(0,t.createEventSourceResponseHandler)(ti),abortSignal:e.abortSignal,fetch:this.config.fetch}),_={unified:"other",raw:void 0},z={input_tokens:0,output_tokens:0,cache_creation_input_tokens:0,cache_read_input_tokens:0},y={},f={},b=null,v=null,x=null,w=null,k=!1,j=this.generateId,[S,I]=g.pipeThrough(new TransformStream({start(e){e.enqueue({type:"stream-start",warnings:s})},transform(t,o){var n,i,l,s,u,m,h,g,S,I,C,T;if(e.includeRawChunks&&o.enqueue({type:"raw",rawValue:t.rawValue}),!t.success)return void o.enqueue({type:"error",error:t.error});let N=t.value;switch(N.type){case"ping":return;case"content_block_start":{let e=N.content_block,t=e.type;switch(a=t,t){case"text":if(d)return;y[N.index]={type:"text"},o.enqueue({type:"text-start",id:String(N.index)});return;case"thinking":y[N.index]={type:"reasoning"},o.enqueue({type:"reasoning-start",id:String(N.index)});return;case"redacted_thinking":y[N.index]={type:"reasoning"},o.enqueue({type:"reasoning-start",id:String(N.index),providerMetadata:{anthropic:{redactedData:e.data}}});return;case"tool_use":if(d&&"json"===e.name)k=!0,y[N.index]={type:"text"},o.enqueue({type:"text-start",id:String(N.index)});else{let t=e.caller,n=t?{type:t.type,toolId:"tool_id"in t?t.tool_id:void 0}:void 0,i=e.input&&Object.keys(e.input).length>0?JSON.stringify(e.input):"";y[N.index]={type:"tool-call",toolCallId:e.id,toolName:e.name,input:i,firstDelta:0===i.length,...n&&{caller:n}},o.enqueue({type:"tool-input-start",id:e.id,toolName:e.name})}return;case"server_tool_use":if(["web_fetch","web_search","code_execution","text_editor_code_execution","bash_code_execution"].includes(e.name)){let t="text_editor_code_execution"===e.name||"bash_code_execution"===e.name?"code_execution":e.name,n=p.toCustomToolName(t);y[N.index]={type:"tool-call",toolCallId:e.id,toolName:n,input:"",providerExecuted:!0,firstDelta:!0,providerToolName:e.name},o.enqueue({type:"tool-input-start",id:e.id,toolName:n,providerExecuted:!0})}else if("tool_search_tool_regex"===e.name||"tool_search_tool_bm25"===e.name){let t=p.toCustomToolName(e.name);y[N.index]={type:"tool-call",toolCallId:e.id,toolName:t,input:"",providerExecuted:!0,firstDelta:!0,providerToolName:e.name},o.enqueue({type:"tool-input-start",id:e.id,toolName:t,providerExecuted:!0})}return;case"web_fetch_tool_result":"web_fetch_result"===e.content.type?o.enqueue({type:"tool-result",toolCallId:e.tool_use_id,toolName:p.toCustomToolName("web_fetch"),result:{type:"web_fetch_result",url:e.content.url,retrievedAt:e.content.retrieved_at,content:{type:e.content.content.type,title:e.content.content.title,citations:e.content.content.citations,source:{type:e.content.content.source.type,mediaType:e.content.content.source.media_type,data:e.content.content.source.data}}}}):"web_fetch_tool_result_error"===e.content.type&&o.enqueue({type:"tool-result",toolCallId:e.tool_use_id,toolName:p.toCustomToolName("web_fetch"),isError:!0,result:{type:"web_fetch_tool_result_error",errorCode:e.content.error_code}});return;case"web_search_tool_result":if(Array.isArray(e.content))for(let t of(o.enqueue({type:"tool-result",toolCallId:e.tool_use_id,toolName:p.toCustomToolName("web_search"),result:e.content.map(e=>{var t;return{url:e.url,title:e.title,pageAge:null!=(t=e.page_age)?t:null,encryptedContent:e.encrypted_content,type:e.type}})}),e.content))o.enqueue({type:"source",sourceType:"url",id:j(),url:t.url,title:t.title,providerMetadata:{anthropic:{pageAge:null!=(n=t.page_age)?n:null}}});else o.enqueue({type:"tool-result",toolCallId:e.tool_use_id,toolName:p.toCustomToolName("web_search"),isError:!0,result:{type:"web_search_tool_result_error",errorCode:e.content.error_code}});return;case"code_execution_tool_result":"code_execution_result"===e.content.type?o.enqueue({type:"tool-result",toolCallId:e.tool_use_id,toolName:p.toCustomToolName("code_execution"),result:{type:e.content.type,stdout:e.content.stdout,stderr:e.content.stderr,return_code:e.content.return_code,content:null!=(i=e.content.content)?i:[]}}):"code_execution_tool_result_error"===e.content.type&&o.enqueue({type:"tool-result",toolCallId:e.tool_use_id,toolName:p.toCustomToolName("code_execution"),isError:!0,result:{type:"code_execution_tool_result_error",errorCode:e.content.error_code}});return;case"bash_code_execution_tool_result":case"text_editor_code_execution_tool_result":return void o.enqueue({type:"tool-result",toolCallId:e.tool_use_id,toolName:p.toCustomToolName("code_execution"),result:e.content});case"tool_search_tool_result":"tool_search_tool_search_result"===e.content.type?o.enqueue({type:"tool-result",toolCallId:e.tool_use_id,toolName:p.toCustomToolName("tool_search"),result:e.content.tool_references.map(e=>({type:e.type,toolName:e.tool_name}))}):o.enqueue({type:"tool-result",toolCallId:e.tool_use_id,toolName:p.toCustomToolName("tool_search"),isError:!0,result:{type:"tool_search_tool_result_error",errorCode:e.content.error_code}});return;case"mcp_tool_use":f[e.id]={type:"tool-call",toolCallId:e.id,toolName:e.name,input:JSON.stringify(e.input),providerExecuted:!0,dynamic:!0,providerMetadata:{anthropic:{type:"mcp-tool-use",serverName:e.server_name}}},o.enqueue(f[e.id]);return;case"mcp_tool_result":return void o.enqueue({type:"tool-result",toolCallId:e.tool_use_id,toolName:f[e.tool_use_id].toolName,isError:e.is_error,result:e.content,dynamic:!0,providerMetadata:f[e.tool_use_id].providerMetadata});default:throw Error(`Unsupported content block type: ${t}`)}}case"content_block_stop":if(null!=y[N.index]){let e=y[N.index];switch(e.type){case"text":o.enqueue({type:"text-end",id:String(N.index)});break;case"reasoning":o.enqueue({type:"reasoning-end",id:String(N.index)});break;case"tool-call":if(!(d&&"json"===e.toolName)){o.enqueue({type:"tool-input-end",id:e.toolCallId});let t=""===e.input?"{}":e.input;if("code_execution"===e.providerToolName)try{let e=JSON.parse(t);null!=e&&"object"==typeof e&&"code"in e&&!("type"in e)&&(t=JSON.stringify({type:"programmatic-tool-call",...e}))}catch(e){}o.enqueue({type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:t,providerExecuted:e.providerExecuted,...e.caller&&{providerMetadata:{anthropic:{caller:e.caller}}}})}}delete y[N.index]}a=void 0;return;case"content_block_delta":{let e=N.delta.type;switch(e){case"text_delta":if(d)return;o.enqueue({type:"text-delta",id:String(N.index),delta:N.delta.text});return;case"thinking_delta":return void o.enqueue({type:"reasoning-delta",id:String(N.index),delta:N.delta.thinking});case"signature_delta":"thinking"===a&&o.enqueue({type:"reasoning-delta",id:String(N.index),delta:"",providerMetadata:{anthropic:{signature:N.delta.signature}}});return;case"input_json_delta":{let e=y[N.index],t=N.delta.partial_json;if(0===t.length)return;if(k){if((null==e?void 0:e.type)!=="text")return;o.enqueue({type:"text-delta",id:String(N.index),delta:t})}else{if((null==e?void 0:e.type)!=="tool-call")return;e.firstDelta&&("bash_code_execution"===e.providerToolName||"text_editor_code_execution"===e.providerToolName)&&(t=`{"type": "${e.providerToolName}",${t.substring(1)}`),o.enqueue({type:"tool-input-delta",id:e.toolCallId,delta:t}),e.input+=t,e.firstDelta=!1}return}case"citations_delta":{let e=tE(N.delta.citation,c,j);e&&o.enqueue(e);return}default:throw Error(`Unsupported delta type: ${e}`)}}case"message_start":if(z.input_tokens=N.message.usage.input_tokens,z.cache_read_input_tokens=null!=(l=N.message.usage.cache_read_input_tokens)?l:0,z.cache_creation_input_tokens=null!=(s=N.message.usage.cache_creation_input_tokens)?s:0,r={...N.message.usage},v=null!=(u=N.message.usage.cache_creation_input_tokens)?u:null,null!=N.message.container&&(w={expiresAt:N.message.container.expires_at,id:N.message.container.id,skills:null}),null!=N.message.stop_reason&&(_={unified:tR({finishReason:N.message.stop_reason,isJsonResponseFromTool:k}),raw:N.message.stop_reason}),o.enqueue({type:"response-metadata",id:null!=(m=N.message.id)?m:void 0,modelId:null!=(h=N.message.model)?h:void 0}),null!=N.message.content)for(let e=0;e<N.message.content.length;e++){let t=N.message.content[e];if("tool_use"===t.type){let e=t.caller,n=e?{type:e.type,toolId:"tool_id"in e?e.tool_id:void 0}:void 0;o.enqueue({type:"tool-input-start",id:t.id,toolName:t.name});let i=JSON.stringify(null!=(g=t.input)?g:{});o.enqueue({type:"tool-input-delta",id:t.id,delta:i}),o.enqueue({type:"tool-input-end",id:t.id}),o.enqueue({type:"tool-call",toolCallId:t.id,toolName:t.name,input:i,...n&&{providerMetadata:{anthropic:{caller:n}}}})}}return;case"message_delta":z.output_tokens=N.usage.output_tokens,_={unified:tR({finishReason:N.delta.stop_reason,isJsonResponseFromTool:k}),raw:null!=(S=N.delta.stop_reason)?S:void 0},x=null!=(I=N.delta.stop_sequence)?I:null,w=null!=N.delta.container?{expiresAt:N.delta.container.expires_at,id:N.delta.container.id,skills:null!=(T=null==(C=N.delta.container.skills)?void 0:C.map(e=>({type:e.type,skillId:e.skill_id,version:e.version})))?T:null}:null,N.delta.context_management&&(b=tM(N.delta.context_management)),r={...r,...N.usage};return;case"message_stop":return void o.enqueue({type:"finish",finishReason:_,usage:tv(z),providerMetadata:{anthropic:{usage:null!=r?r:null,cacheCreationInputTokens:v,stopSequence:x,container:w,contextManagement:b}}});case"error":return void o.enqueue({type:"error",error:N.error});default:throw Error(`Unsupported chunk type: ${N}`)}}})).tee(),C=S.getReader();try{await C.read();let e=await C.read();if((null==(n=e.value)?void 0:n.type)==="raw"&&(e=await C.read()),(null==(i=e.value)?void 0:i.type)==="error"){let t=e.value.error;throw new o.APICallError({message:t.message,url:m,requestBodyValues:l,statusCode:"overloaded_error"===t.type?529:500,responseHeaders:h,responseBody:JSON.stringify(t),isRetryable:"overloaded_error"===t.type})}}finally{C.cancel().catch(()=>{}),C.releaseLock()}return{stream:I,request:{body:l},response:{headers:h}}}};function tM(e){return e?{appliedEdits:e.applied_edits.map(e=>{switch(e.type){case"clear_tool_uses_20250919":return{type:e.type,clearedToolUses:e.cleared_tool_uses,clearedInputTokens:e.cleared_input_tokens};case"clear_thinking_20251015":return{type:e.type,clearedThinkingTurns:e.cleared_thinking_turns,clearedInputTokens:e.cleared_input_tokens}}}).filter(e=>void 0!==e)}:null}var tU=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({command:n.z.string(),restart:n.z.boolean().optional()}))),tA=(0,t.createProviderToolFactory)({id:"anthropic.bash_20241022",inputSchema:tU}),tP=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({command:n.z.string(),restart:n.z.boolean().optional()}))),t$=(0,t.createProviderToolFactory)({id:"anthropic.bash_20250124",inputSchema:tP}),tH=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({action:n.z.enum(["key","type","mouse_move","left_click","left_click_drag","right_click","middle_click","double_click","screenshot","cursor_position"]),coordinate:n.z.array(n.z.number().int()).optional(),text:n.z.string().optional()}))),tD=(0,t.createProviderToolFactory)({id:"anthropic.computer_20241022",inputSchema:tH}),tF=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({action:n.z.enum(["key","hold_key","type","cursor_position","mouse_move","left_mouse_down","left_mouse_up","left_click","left_click_drag","right_click","middle_click","double_click","triple_click","scroll","wait","screenshot"]),coordinate:n.z.tuple([n.z.number().int(),n.z.number().int()]).optional(),duration:n.z.number().optional(),scroll_amount:n.z.number().optional(),scroll_direction:n.z.enum(["up","down","left","right"]).optional(),start_coordinate:n.z.tuple([n.z.number().int(),n.z.number().int()]).optional(),text:n.z.string().optional()}))),tJ=(0,t.createProviderToolFactory)({id:"anthropic.computer_20250124",inputSchema:tF}),tL=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.discriminatedUnion("command",[n.z.object({command:n.z.literal("view"),path:n.z.string(),view_range:n.z.tuple([n.z.number(),n.z.number()]).optional()}),n.z.object({command:n.z.literal("create"),path:n.z.string(),file_text:n.z.string()}),n.z.object({command:n.z.literal("str_replace"),path:n.z.string(),old_str:n.z.string(),new_str:n.z.string()}),n.z.object({command:n.z.literal("insert"),path:n.z.string(),insert_line:n.z.number(),insert_text:n.z.string()}),n.z.object({command:n.z.literal("delete"),path:n.z.string()}),n.z.object({command:n.z.literal("rename"),old_path:n.z.string(),new_path:n.z.string()})]))),tB=(0,t.createProviderToolFactory)({id:"anthropic.memory_20250818",inputSchema:tL}),tV=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({command:n.z.enum(["view","create","str_replace","insert","undo_edit"]),path:n.z.string(),file_text:n.z.string().optional(),insert_line:n.z.number().int().optional(),new_str:n.z.string().optional(),old_str:n.z.string().optional(),view_range:n.z.array(n.z.number().int()).optional()}))),tW=(0,t.createProviderToolFactory)({id:"anthropic.text_editor_20241022",inputSchema:tV}),tG=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({command:n.z.enum(["view","create","str_replace","insert","undo_edit"]),path:n.z.string(),file_text:n.z.string().optional(),insert_line:n.z.number().int().optional(),new_str:n.z.string().optional(),old_str:n.z.string().optional(),view_range:n.z.array(n.z.number().int()).optional()}))),tK=(0,t.createProviderToolFactory)({id:"anthropic.text_editor_20250124",inputSchema:tG}),tY=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({command:n.z.enum(["view","create","str_replace","insert"]),path:n.z.string(),file_text:n.z.string().optional(),insert_line:n.z.number().int().optional(),new_str:n.z.string().optional(),old_str:n.z.string().optional(),view_range:n.z.array(n.z.number().int()).optional()}))),tQ=(0,t.createProviderToolFactory)({id:"anthropic.text_editor_20250429",inputSchema:tY}),tX=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.array(n.z.object({type:n.z.literal("tool_reference"),toolName:n.z.string()})))),tZ=(0,t.lazySchema)(()=>(0,t.zodSchema)(n.z.object({query:n.z.string(),limit:n.z.number().optional()}))),t0=(0,t.createProviderToolFactoryWithOutputSchema)({id:"anthropic.tool_search_bm25_20251119",inputSchema:tZ,outputSchema:tX}),t2={bash_20241022:tA,bash_20250124:t$,codeExecution_20250522:(e={})=>tk(e),codeExecution_20250825:(e={})=>tI(e),computer_20241022:tD,computer_20250124:tJ,memory_20250818:tB,textEditor_20241022:tW,textEditor_20250124:tK,textEditor_20250429:tQ,textEditor_20250728:(e={})=>tp(e),webFetch_20250910:(e={})=>tf(e),webSearch_20250305:(e={})=>tg(e),toolSearchRegex_20251119:(e={})=>tN(e),toolSearchBm25_20251119:(e={})=>t0(e)};function t1(e={}){var n,i;let r=null!=(n=(0,t.withoutTrailingSlash)((0,t.loadOptionalSetting)({settingValue:e.baseURL,environmentVariableName:"ANTHROPIC_BASE_URL"})))?n:"https://api.anthropic.com/v1",a=null!=(i=e.name)?i:"anthropic.messages",l=()=>(0,t.withUserAgentSuffix)({"anthropic-version":"2023-06-01","x-api-key":(0,t.loadApiKey)({apiKey:e.apiKey,environmentVariableName:"ANTHROPIC_API_KEY",description:"Anthropic"}),...e.headers},"ai-sdk/anthropic/3.0.1"),s=o=>{var n;return new tO(o,{provider:a,baseURL:r,headers:l,fetch:e.fetch,generateId:null!=(n=e.generateId)?n:t.generateId,supportedUrls:()=>({"image/*":[/^https?:\/\/.*$/]})})},u=function(e){if(new.target)throw Error("The Anthropic model function cannot be called with the new keyword.");return s(e)};return u.specificationVersion="v3",u.languageModel=s,u.chat=s,u.messages=s,u.embeddingModel=e=>{throw new o.NoSuchModelError({modelId:e,modelType:"embeddingModel"})},u.textEmbeddingModel=u.embeddingModel,u.imageModel=e=>{throw new o.NoSuchModelError({modelId:e,modelType:"imageModel"})},u.tools=t2,u}t1();var t5={errorSchema:n.z.object({error:n.z.object({message:n.z.string(),type:n.z.string().nullish(),param:n.z.any().nullish(),code:n.z.union([n.z.string(),n.z.number()]).nullish()})}),errorToMessage:e=>e.error.message};function t4(e){var t,o,n,i,r,a;if(null==e)return{inputTokens:{total:void 0,noCache:void 0,cacheRead:void 0,cacheWrite:void 0},outputTokens:{total:void 0,text:void 0,reasoning:void 0},raw:void 0};let l=null!=(t=e.prompt_tokens)?t:0,s=null!=(o=e.completion_tokens)?o:0,u=null!=(i=null==(n=e.prompt_tokens_details)?void 0:n.cached_tokens)?i:0,d=null!=(a=null==(r=e.completion_tokens_details)?void 0:r.reasoning_tokens)?a:0;return{inputTokens:{total:l,noCache:l-u,cacheRead:u,cacheWrite:void 0},outputTokens:{total:s,text:s-d,reasoning:d},raw:e}}function t3(e){var t,o;return null!=(o=null==(t=null==e?void 0:e.providerOptions)?void 0:t.openaiCompatible)?o:{}}function t6({id:e,model:t,created:o}){return{id:null!=e?e:void 0,modelId:null!=t?t:void 0,timestamp:null!=o?new Date(1e3*o):void 0}}function t8(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"other"}}var t9=n.z.object({user:n.z.string().optional(),reasoningEffort:n.z.string().optional(),textVerbosity:n.z.string().optional()}),t7=class{constructor(e,o){var n,i;this.specificationVersion="v3",this.modelId=e,this.config=o;const r=null!=(n=o.errorStructure)?n:t5;this.chunkSchema=on(r.errorSchema),this.failedResponseHandler=(0,t.createJsonErrorResponseHandler)(r),this.supportsStructuredOutputs=null!=(i=o.supportsStructuredOutputs)&&i}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}get supportedUrls(){var e,t,o;return null!=(o=null==(t=(e=this.config).supportedUrls)?void 0:t.call(e))?o:{}}async getArgs({prompt:e,maxOutputTokens:n,temperature:i,topP:r,topK:a,frequencyPenalty:l,presencePenalty:s,providerOptions:u,stopSequences:d,responseFormat:p,seed:c,toolChoice:m,tools:h}){var g,_,z,y;let f=[],b=Object.assign(null!=(g=await (0,t.parseProviderOptions)({provider:"openai-compatible",providerOptions:u,schema:t9}))?g:{},null!=(_=await (0,t.parseProviderOptions)({provider:this.providerOptionsName,providerOptions:u,schema:t9}))?_:{});null!=a&&f.push({type:"unsupported",feature:"topK"}),(null==p?void 0:p.type)!=="json"||null==p.schema||this.supportsStructuredOutputs||f.push({type:"unsupported",feature:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});let{tools:v,toolChoice:x,toolWarnings:w}=function({tools:e,toolChoice:t}){e=(null==e?void 0:e.length)?e:void 0;let n=[];if(null==e)return{tools:void 0,toolChoice:void 0,toolWarnings:n};let i=[];for(let t of e)"provider"===t.type?n.push({type:"unsupported",feature:`provider-defined tool ${t.id}`}):i.push({type:"function",function:{name:t.name,description:t.description,parameters:t.inputSchema,...null!=t.strict?{strict:t.strict}:{}}});if(null==t)return{tools:i,toolChoice:void 0,toolWarnings:n};let r=t.type;switch(r){case"auto":case"none":case"required":return{tools:i,toolChoice:r,toolWarnings:n};case"tool":return{tools:i,toolChoice:{type:"function",function:{name:t.toolName}},toolWarnings:n};default:throw new o.UnsupportedFunctionalityError({functionality:`tool choice type: ${r}`})}}({tools:h,toolChoice:m});return{args:{model:this.modelId,user:b.user,max_tokens:n,temperature:i,top_p:r,frequency_penalty:l,presence_penalty:s,response_format:(null==p?void 0:p.type)==="json"?!0===this.supportsStructuredOutputs&&null!=p.schema?{type:"json_schema",json_schema:{schema:p.schema,name:null!=(z=p.name)?z:"response",description:p.description}}:{type:"json_object"}:void 0,stop:d,seed:c,...Object.fromEntries(Object.entries(null!=(y=null==u?void 0:u[this.providerOptionsName])?y:{}).filter(([e])=>!Object.keys(t9.shape).includes(e))),reasoning_effort:b.reasoningEffort,verbosity:b.textVerbosity,messages:function(e){var n;let i=[];for(let{role:r,content:a,...l}of e){let e=t3({...l});switch(r){case"system":i.push({role:"system",content:a,...e});break;case"user":if(1===a.length&&"text"===a[0].type){i.push({role:"user",content:a[0].text,...t3(a[0])});break}i.push({role:"user",content:a.map(e=>{let n=t3(e);switch(e.type){case"text":return{type:"text",text:e.text,...n};case"file":if(e.mediaType.startsWith("image/")){let o="image/*"===e.mediaType?"image/jpeg":e.mediaType;return{type:"image_url",image_url:{url:e.data instanceof URL?e.data.toString():`data:${o};base64,${(0,t.convertToBase64)(e.data)}`},...n}}throw new o.UnsupportedFunctionalityError({functionality:`file part media type ${e.mediaType}`})}}),...e});break;case"assistant":{let t="",o=[];for(let e of a){let n=t3(e);switch(e.type){case"text":t+=e.text;break;case"tool-call":o.push({id:e.toolCallId,type:"function",function:{name:e.toolName,arguments:JSON.stringify(e.input)},...n})}}i.push({role:"assistant",content:t,tool_calls:o.length>0?o:void 0,...e});break}case"tool":for(let e of a){let t;if("tool-approval-response"===e.type)continue;let o=e.output;switch(o.type){case"text":case"error-text":t=o.value;break;case"execution-denied":t=null!=(n=o.reason)?n:"Tool execution denied.";break;case"content":case"json":case"error-json":t=JSON.stringify(o.value)}let r=t3(e);i.push({role:"tool",tool_call_id:e.toolCallId,content:t,...r})}break;default:throw Error(`Unsupported role: ${r}`)}}return i}(e),tools:v,tool_choice:x},warnings:[...f,...w]}}async doGenerate(e){var o,n,i,r,a,l;let{args:s,warnings:u}=await this.getArgs({...e}),d=JSON.stringify(s),{responseHeaders:p,value:c,rawValue:m}=await (0,t.postJsonToApi)({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:(0,t.combineHeaders)(this.config.headers(),e.headers),body:s,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:(0,t.createJsonResponseHandler)(ot),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=c.choices[0],g=[],_=h.message.content;null!=_&&_.length>0&&g.push({type:"text",text:_});let z=null!=(o=h.message.reasoning_content)?o:h.message.reasoning;if(null!=z&&z.length>0&&g.push({type:"reasoning",text:z}),null!=h.message.tool_calls)for(let e of h.message.tool_calls)g.push({type:"tool-call",toolCallId:null!=(n=e.id)?n:(0,t.generateId)(),toolName:e.function.name,input:e.function.arguments});let y={[this.providerOptionsName]:{},...await (null==(r=null==(i=this.config.metadataExtractor)?void 0:i.extractMetadata)?void 0:r.call(i,{parsedBody:m}))},f=null==(a=c.usage)?void 0:a.completion_tokens_details;return(null==f?void 0:f.accepted_prediction_tokens)!=null&&(y[this.providerOptionsName].acceptedPredictionTokens=null==f?void 0:f.accepted_prediction_tokens),(null==f?void 0:f.rejected_prediction_tokens)!=null&&(y[this.providerOptionsName].rejectedPredictionTokens=null==f?void 0:f.rejected_prediction_tokens),{content:g,finishReason:{unified:t8(h.finish_reason),raw:null!=(l=h.finish_reason)?l:void 0},usage:t4(c.usage),providerMetadata:y,request:{body:d},response:{...t6(c),headers:p,body:m},warnings:u}}async doStream(e){var n;let i,{args:r,warnings:a}=await this.getArgs({...e}),l={...r,stream:!0,stream_options:this.config.includeUsage?{include_usage:!0}:void 0},s=null==(n=this.config.metadataExtractor)?void 0:n.createStreamExtractor(),{responseHeaders:u,value:d}=await (0,t.postJsonToApi)({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:(0,t.combineHeaders)(this.config.headers(),e.headers),body:l,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:(0,t.createEventSourceResponseHandler)(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),p=[],c={unified:"other",raw:void 0},m=!0,h=this.providerOptionsName,g=!1,_=!1;return{stream:d.pipeThrough(new TransformStream({start(e){e.enqueue({type:"stream-start",warnings:a})},transform(n,r){var a,l,u,d,h,z,y,f,b,v,x,w,k,j;if(e.includeRawChunks&&r.enqueue({type:"raw",rawValue:n.rawValue}),!n.success){c={unified:"error",raw:void 0},r.enqueue({type:"error",error:n.error});return}if(null==s||s.processChunk(n.rawValue),"error"in n.value){c={unified:"error",raw:void 0},r.enqueue({type:"error",error:n.value.error.message});return}let S=n.value;m&&(m=!1,r.enqueue({type:"response-metadata",...t6(S)})),null!=S.usage&&(i=S.usage);let I=S.choices[0];if((null==I?void 0:I.finish_reason)!=null&&(c={unified:t8(I.finish_reason),raw:null!=(a=I.finish_reason)?a:void 0}),(null==I?void 0:I.delta)==null)return;let C=I.delta,T=null!=(l=C.reasoning_content)?l:C.reasoning;if(T&&(g||(r.enqueue({type:"reasoning-start",id:"reasoning-0"}),g=!0),r.enqueue({type:"reasoning-delta",id:"reasoning-0",delta:T})),C.content&&(_||(r.enqueue({type:"text-start",id:"txt-0"}),_=!0),r.enqueue({type:"text-delta",id:"txt-0",delta:C.content})),null!=C.tool_calls)for(let e of C.tool_calls){let n=e.index;if(null==p[n]){if(null==e.id)throw new o.InvalidResponseDataError({data:e,message:"Expected 'id' to be a string."});if((null==(u=e.function)?void 0:u.name)==null)throw new o.InvalidResponseDataError({data:e,message:"Expected 'function.name' to be a string."});r.enqueue({type:"tool-input-start",id:e.id,toolName:e.function.name}),p[n]={id:e.id,type:"function",function:{name:e.function.name,arguments:null!=(d=e.function.arguments)?d:""},hasFinished:!1};let i=p[n];(null==(h=i.function)?void 0:h.name)!=null&&(null==(z=i.function)?void 0:z.arguments)!=null&&(i.function.arguments.length>0&&r.enqueue({type:"tool-input-delta",id:i.id,delta:i.function.arguments}),(0,t.isParsableJson)(i.function.arguments)&&(r.enqueue({type:"tool-input-end",id:i.id}),r.enqueue({type:"tool-call",toolCallId:null!=(y=i.id)?y:(0,t.generateId)(),toolName:i.function.name,input:i.function.arguments}),i.hasFinished=!0));continue}let i=p[n];!i.hasFinished&&((null==(f=e.function)?void 0:f.arguments)!=null&&(i.function.arguments+=null!=(v=null==(b=e.function)?void 0:b.arguments)?v:""),r.enqueue({type:"tool-input-delta",id:i.id,delta:null!=(x=e.function.arguments)?x:""}),(null==(w=i.function)?void 0:w.name)!=null&&(null==(k=i.function)?void 0:k.arguments)!=null&&(0,t.isParsableJson)(i.function.arguments)&&(r.enqueue({type:"tool-input-end",id:i.id}),r.enqueue({type:"tool-call",toolCallId:null!=(j=i.id)?j:(0,t.generateId)(),toolName:i.function.name,input:i.function.arguments}),i.hasFinished=!0))}},flush(e){var o,n,r,a,l;for(let n of(g&&e.enqueue({type:"reasoning-end",id:"reasoning-0"}),_&&e.enqueue({type:"text-end",id:"txt-0"}),p.filter(e=>!e.hasFinished)))e.enqueue({type:"tool-input-end",id:n.id}),e.enqueue({type:"tool-call",toolCallId:null!=(o=n.id)?o:(0,t.generateId)(),toolName:n.function.name,input:n.function.arguments});let u={[h]:{},...null==s?void 0:s.buildMetadata()};(null==(n=null==i?void 0:i.completion_tokens_details)?void 0:n.accepted_prediction_tokens)!=null&&(u[h].acceptedPredictionTokens=null==(r=null==i?void 0:i.completion_tokens_details)?void 0:r.accepted_prediction_tokens),(null==(a=null==i?void 0:i.completion_tokens_details)?void 0:a.rejected_prediction_tokens)!=null&&(u[h].rejectedPredictionTokens=null==(l=null==i?void 0:i.completion_tokens_details)?void 0:l.rejected_prediction_tokens),e.enqueue({type:"finish",finishReason:c,usage:t4(i),providerMetadata:u})}})),request:{body:l},response:{headers:u}}}},oe=n.z.object({prompt_tokens:n.z.number().nullish(),completion_tokens:n.z.number().nullish(),total_tokens:n.z.number().nullish(),prompt_tokens_details:n.z.object({cached_tokens:n.z.number().nullish()}).nullish(),completion_tokens_details:n.z.object({reasoning_tokens:n.z.number().nullish(),accepted_prediction_tokens:n.z.number().nullish(),rejected_prediction_tokens:n.z.number().nullish()}).nullish()}).nullish(),ot=n.z.object({id:n.z.string().nullish(),created:n.z.number().nullish(),model:n.z.string().nullish(),choices:n.z.array(n.z.object({message:n.z.object({role:n.z.literal("assistant").nullish(),content:n.z.string().nullish(),reasoning_content:n.z.string().nullish(),reasoning:n.z.string().nullish(),tool_calls:n.z.array(n.z.object({id:n.z.string().nullish(),function:n.z.object({name:n.z.string(),arguments:n.z.string()})})).nullish()}),finish_reason:n.z.string().nullish()})),usage:oe}),oo=n.z.object({id:n.z.string().nullish(),created:n.z.number().nullish(),model:n.z.string().nullish(),choices:n.z.array(n.z.object({delta:n.z.object({role:n.z.enum(["assistant"]).nullish(),content:n.z.string().nullish(),reasoning_content:n.z.string().nullish(),reasoning:n.z.string().nullish(),tool_calls:n.z.array(n.z.object({index:n.z.number(),id:n.z.string().nullish(),function:n.z.object({name:n.z.string().nullish(),arguments:n.z.string().nullish()})})).nullish()}).nullish(),finish_reason:n.z.string().nullish()})),usage:oe}),on=e=>n.z.union([oo,e]);function oi(e){var t,o;if(null==e)return{inputTokens:{total:void 0,noCache:void 0,cacheRead:void 0,cacheWrite:void 0},outputTokens:{total:void 0,text:void 0,reasoning:void 0},raw:void 0};let n=null!=(t=e.prompt_tokens)?t:0,i=null!=(o=e.completion_tokens)?o:0;return{inputTokens:{total:n,noCache:n,cacheRead:void 0,cacheWrite:void 0},outputTokens:{total:i,text:i,reasoning:void 0},raw:e}}function or({id:e,model:t,created:o}){return{id:null!=e?e:void 0,modelId:null!=t?t:void 0,timestamp:null!=o?new Date(1e3*o):void 0}}function oa(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"other"}}var ol=n.z.object({echo:n.z.boolean().optional(),logitBias:n.z.record(n.z.string(),n.z.number()).optional(),suffix:n.z.string().optional(),user:n.z.string().optional()}),os=class{constructor(e,o){var n;this.specificationVersion="v3",this.modelId=e,this.config=o;const i=null!=(n=o.errorStructure)?n:t5;this.chunkSchema=op(i.errorSchema),this.failedResponseHandler=(0,t.createJsonErrorResponseHandler)(i)}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}get supportedUrls(){var e,t,o;return null!=(o=null==(t=(e=this.config).supportedUrls)?void 0:t.call(e))?o:{}}async getArgs({prompt:e,maxOutputTokens:n,temperature:i,topP:r,topK:a,frequencyPenalty:l,presencePenalty:s,stopSequences:u,responseFormat:d,seed:p,providerOptions:c,tools:m,toolChoice:h}){var g;let _=[],z=null!=(g=await (0,t.parseProviderOptions)({provider:this.providerOptionsName,providerOptions:c,schema:ol}))?g:{};null!=a&&_.push({type:"unsupported",feature:"topK"}),(null==m?void 0:m.length)&&_.push({type:"unsupported",feature:"tools"}),null!=h&&_.push({type:"unsupported",feature:"toolChoice"}),null!=d&&"text"!==d.type&&_.push({type:"unsupported",feature:"responseFormat",details:"JSON response format is not supported."});let{prompt:y,stopSequences:f}=function({prompt:e,user:t="user",assistant:n="assistant"}){let i="";for(let{role:r,content:a}of("system"===e[0].role&&(i+=`${e[0].content}

`,e=e.slice(1)),e))switch(r){case"system":throw new o.InvalidPromptError({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{let e=a.map(e=>{if("text"===e.type)return e.text}).filter(Boolean).join("");i+=`${t}:
${e}

`;break}case"assistant":{let e=a.map(e=>{switch(e.type){case"text":return e.text;case"tool-call":throw new o.UnsupportedFunctionalityError({functionality:"tool-call messages"})}}).join("");i+=`${n}:
${e}

`;break}case"tool":throw new o.UnsupportedFunctionalityError({functionality:"tool messages"});default:throw Error(`Unsupported role: ${r}`)}return{prompt:i+=`${n}:
`,stopSequences:[`
${t}:`]}}({prompt:e}),b=[...null!=f?f:[],...null!=u?u:[]];return{args:{model:this.modelId,echo:z.echo,logit_bias:z.logitBias,suffix:z.suffix,user:z.user,max_tokens:n,temperature:i,top_p:r,frequency_penalty:l,presence_penalty:s,seed:p,...null==c?void 0:c[this.providerOptionsName],prompt:y,stop:b.length>0?b:void 0},warnings:_}}async doGenerate(e){let{args:o,warnings:n}=await this.getArgs(e),{responseHeaders:i,value:r,rawValue:a}=await (0,t.postJsonToApi)({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:(0,t.combineHeaders)(this.config.headers(),e.headers),body:o,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:(0,t.createJsonResponseHandler)(od),abortSignal:e.abortSignal,fetch:this.config.fetch}),l=r.choices[0],s=[];return null!=l.text&&l.text.length>0&&s.push({type:"text",text:l.text}),{content:s,usage:oi(r.usage),finishReason:{unified:oa(l.finish_reason),raw:l.finish_reason},request:{body:o},response:{...or(r),headers:i,body:a},warnings:n}}async doStream(e){let o,{args:n,warnings:i}=await this.getArgs(e),r={...n,stream:!0,stream_options:this.config.includeUsage?{include_usage:!0}:void 0},{responseHeaders:a,value:l}=await (0,t.postJsonToApi)({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:(0,t.combineHeaders)(this.config.headers(),e.headers),body:r,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:(0,t.createEventSourceResponseHandler)(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),s={unified:"other",raw:void 0},u=!0;return{stream:l.pipeThrough(new TransformStream({start(e){e.enqueue({type:"stream-start",warnings:i})},transform(t,n){var i;if(e.includeRawChunks&&n.enqueue({type:"raw",rawValue:t.rawValue}),!t.success){s={unified:"error",raw:void 0},n.enqueue({type:"error",error:t.error});return}let r=t.value;if("error"in r){s={unified:"error",raw:void 0},n.enqueue({type:"error",error:r.error});return}u&&(u=!1,n.enqueue({type:"response-metadata",...or(r)}),n.enqueue({type:"text-start",id:"0"})),null!=r.usage&&(o=r.usage);let a=r.choices[0];(null==a?void 0:a.finish_reason)!=null&&(s={unified:oa(a.finish_reason),raw:null!=(i=a.finish_reason)?i:void 0}),(null==a?void 0:a.text)!=null&&n.enqueue({type:"text-delta",id:"0",delta:a.text})},flush(e){u||e.enqueue({type:"text-end",id:"0"}),e.enqueue({type:"finish",finishReason:s,usage:oi(o)})}})),request:{body:r},response:{headers:a}}}},ou=n.z.object({prompt_tokens:n.z.number(),completion_tokens:n.z.number(),total_tokens:n.z.number()}),od=n.z.object({id:n.z.string().nullish(),created:n.z.number().nullish(),model:n.z.string().nullish(),choices:n.z.array(n.z.object({text:n.z.string(),finish_reason:n.z.string()})),usage:ou.nullish()}),op=e=>n.z.union([n.z.object({id:n.z.string().nullish(),created:n.z.number().nullish(),model:n.z.string().nullish(),choices:n.z.array(n.z.object({text:n.z.string(),finish_reason:n.z.string().nullish(),index:n.z.number()})),usage:ou.nullish()}),e]),oc=n.z.object({dimensions:n.z.number().optional(),user:n.z.string().optional()}),om=class{constructor(e,t){this.specificationVersion="v3",this.modelId=e,this.config=t}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return null!=(e=this.config.maxEmbeddingsPerCall)?e:2048}get supportsParallelCalls(){var e;return null==(e=this.config.supportsParallelCalls)||e}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}async doEmbed({values:e,headers:n,abortSignal:i,providerOptions:r}){var a,l,s;let u=Object.assign(null!=(a=await (0,t.parseProviderOptions)({provider:"openai-compatible",providerOptions:r,schema:oc}))?a:{},null!=(l=await (0,t.parseProviderOptions)({provider:this.providerOptionsName,providerOptions:r,schema:oc}))?l:{});if(e.length>this.maxEmbeddingsPerCall)throw new o.TooManyEmbeddingValuesForCallError({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});let{responseHeaders:d,value:p,rawValue:c}=await (0,t.postJsonToApi)({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:(0,t.combineHeaders)(this.config.headers(),n),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:u.dimensions,user:u.user},failedResponseHandler:(0,t.createJsonErrorResponseHandler)(null!=(s=this.config.errorStructure)?s:t5),successfulResponseHandler:(0,t.createJsonResponseHandler)(oh),abortSignal:i,fetch:this.config.fetch});return{warnings:[],embeddings:p.data.map(e=>e.embedding),usage:p.usage?{tokens:p.usage.prompt_tokens}:void 0,providerMetadata:p.providerMetadata,response:{headers:d,body:c}}}},oh=n.z.object({data:n.z.array(n.z.object({embedding:n.z.array(n.z.number())})),usage:n.z.object({prompt_tokens:n.z.number()}).nullish(),providerMetadata:n.z.record(n.z.string(),n.z.record(n.z.string(),n.z.any())).optional()}),og=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v3",this.maxImagesPerCall=10}get provider(){return this.config.provider}async doGenerate({prompt:e,n:o,size:n,aspectRatio:i,seed:r,providerOptions:a,headers:l,abortSignal:s,files:u,mask:d}){var p,c,m,h,g,_,z;let y=[];null!=i&&y.push({type:"unsupported",feature:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),null!=r&&y.push({type:"unsupported",feature:"seed"});let f=null!=(m=null==(c=null==(p=this.config._internal)?void 0:p.currentDate)?void 0:c.call(p))?m:new Date;if(null!=u&&u.length>0){let{value:i,responseHeaders:r}=await (0,t.postFormDataToApi)({url:this.config.url({path:"/images/edits",modelId:this.modelId}),headers:(0,t.combineHeaders)(this.config.headers(),l),formData:(0,t.convertToFormData)({model:this.modelId,prompt:e,image:await Promise.all(u.map(e=>oz(e))),mask:null!=d?await oz(d):void 0,n:o,size:n,...null!=(h=a.openai)?h:{}}),failedResponseHandler:(0,t.createJsonErrorResponseHandler)(null!=(g=this.config.errorStructure)?g:t5),successfulResponseHandler:(0,t.createJsonResponseHandler)(o_),abortSignal:s,fetch:this.config.fetch});return{images:i.data.map(e=>e.b64_json),warnings:y,response:{timestamp:f,modelId:this.modelId,headers:r}}}let{value:b,responseHeaders:v}=await (0,t.postJsonToApi)({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:(0,t.combineHeaders)(this.config.headers(),l),body:{model:this.modelId,prompt:e,n:o,size:n,...null!=(_=a.openai)?_:{},response_format:"b64_json"},failedResponseHandler:(0,t.createJsonErrorResponseHandler)(null!=(z=this.config.errorStructure)?z:t5),successfulResponseHandler:(0,t.createJsonResponseHandler)(o_),abortSignal:s,fetch:this.config.fetch});return{images:b.data.map(e=>e.b64_json),warnings:y,response:{timestamp:f,modelId:this.modelId,headers:v}}}},o_=n.z.object({data:n.z.array(n.z.object({b64_json:n.z.string()}))});async function oz(e){return"url"===e.type?(0,t.downloadBlob)(e.url):new Blob([e.data instanceof Uint8Array?e.data:(0,t.convertBase64ToUint8Array)(e.data)],{type:e.mediaType})}function oy(e){let o=(0,t.withoutTrailingSlash)(e.baseURL),n=e.name,i={...e.apiKey&&{Authorization:`Bearer ${e.apiKey}`},...e.headers},r=()=>(0,t.withUserAgentSuffix)(i,"ai-sdk/openai-compatible/2.0.1"),a=t=>({provider:`${n}.${t}`,url:({path:t})=>{let n=new URL(`${o}${t}`);return e.queryParams&&(n.search=new URLSearchParams(e.queryParams).toString()),n.toString()},headers:r,fetch:e.fetch}),l=e=>s(e),s=t=>new t7(t,{...a("chat"),includeUsage:e.includeUsage,supportsStructuredOutputs:e.supportsStructuredOutputs}),u=e=>new om(e,{...a("embedding")}),d=e=>l(e);return d.specificationVersion="v3",d.languageModel=l,d.chatModel=s,d.completionModel=t=>new os(t,{...a("completion"),includeUsage:e.includeUsage}),d.embeddingModel=u,d.textEmbeddingModel=u,d.imageModel=e=>new og(e,a("image")),d}let of={gemini:"gemini-3-flash-preview",openai:"gpt-5.2",anthropic:"claude-sonnet-4-5-20250929",ollama:"llama3.2",lmstudio:"deepseek-r1-distill-llama-8b"};function ob(e){let t=e.model||of[e.type];switch(e.type){case"gemini":if(!e.apiKey)throw Error("Gemini API key is required");return M({apiKey:e.apiKey})(t);case"openai":if(!e.apiKey)throw Error("OpenAI API key is required");return e7({apiKey:e.apiKey})(t);case"anthropic":if(!e.apiKey)throw Error("Anthropic API key is required");return t1({apiKey:e.apiKey})(t);case"ollama":return oy({name:"ollama",baseURL:e.baseUrl||"http://localhost:11434/v1",apiKey:"ollama"})(t);case"lmstudio":return oy({name:"lmstudio",baseURL:e.baseUrl||"http://127.0.0.1:1234/v1",apiKey:"lmstudio"})(t);default:throw Error(`Unknown provider type: ${e.type}`)}}function ov(e){switch(e){case"gemini":return["gemini-3-flash-preview","gemini-3-pro-preview","gemini-2.0-flash","gemini-2.0-pro-exp-02-05","gemini-1.5-pro"];case"openai":return["gpt-5.2","gpt-5.2-chat-latest","gpt-5.1","gpt-5","gpt-4o","o3-mini","o1"];case"anthropic":return["claude-opus-4-5-20251101","claude-sonnet-4-5-20250929","claude-haiku-4-5-20251001","claude-3-5-sonnet-20241022","claude-3-5-haiku-20241022"];case"ollama":return["llama3.2","llama3.1","codellama","mistral","phi3","qwen2.5"];case"lmstudio":return["deepseek-r1-distill-llama-8b","meta-llama-3.1-8b-instruct","qwen2.5-7b-instruct"];default:return[]}}e.s(["PROVIDER_NAMES",0,{gemini:"Google Gemini",openai:"OpenAI GPT",anthropic:"Anthropic Claude",ollama:"Ollama (Local)",lmstudio:"LMStudio (Local)"},"createAIProvider",()=>ob,"getAvailableModels",()=>ov],87633)}]);

//# sourceMappingURL=src_services_ai-providers_ts_f30e308f._.js.map
/**/;(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["chunks/node_modules_c144a9c7._.js",635,(e,t,r)=>{"use strict";var n=Object.defineProperty,a=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,s={},l={RequestCookies:()=>g,ResponseCookies:()=>m,parseCookie:()=>d,parseSetCookie:()=>f,stringifyCookie:()=>c};for(var u in l)n(s,u,{get:l[u],enumerable:!0});function c(e){var t;let r=["path"in e&&e.path&&`Path=${e.path}`,"expires"in e&&(e.expires||0===e.expires)&&`Expires=${("number"==typeof e.expires?new Date(e.expires):e.expires).toUTCString()}`,"maxAge"in e&&"number"==typeof e.maxAge&&`Max-Age=${e.maxAge}`,"domain"in e&&e.domain&&`Domain=${e.domain}`,"secure"in e&&e.secure&&"Secure","httpOnly"in e&&e.httpOnly&&"HttpOnly","sameSite"in e&&e.sameSite&&`SameSite=${e.sameSite}`,"partitioned"in e&&e.partitioned&&"Partitioned","priority"in e&&e.priority&&`Priority=${e.priority}`].filter(Boolean),n=`${e.name}=${encodeURIComponent(null!=(t=e.value)?t:"")}`;return 0===r.length?n:`${n}; ${r.join("; ")}`}function d(e){let t=new Map;for(let r of e.split(/; */)){if(!r)continue;let e=r.indexOf("=");if(-1===e){t.set(r,"true");continue}let[n,a]=[r.slice(0,e),r.slice(e+1)];try{t.set(n,decodeURIComponent(null!=a?a:"true"))}catch{}}return t}function f(e){if(!e)return;let[[t,r],...n]=d(e),{domain:a,expires:i,httponly:o,maxage:s,path:l,samesite:u,secure:c,partitioned:f,priority:g}=Object.fromEntries(n.map(([e,t])=>[e.toLowerCase().replace(/-/g,""),t]));{var m,y,v={name:t,value:decodeURIComponent(r),domain:a,...i&&{expires:new Date(i)},...o&&{httpOnly:!0},..."string"==typeof s&&{maxAge:Number(s)},path:l,...u&&{sameSite:h.includes(m=(m=u).toLowerCase())?m:void 0},...c&&{secure:!0},...g&&{priority:p.includes(y=(y=g).toLowerCase())?y:void 0},...f&&{partitioned:!0}};let e={};for(let t in v)v[t]&&(e[t]=v[t]);return e}}t.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))o.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=a(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var h=["strict","lax","none"],p=["low","medium","high"],g=class{constructor(e){this._parsed=new Map,this._headers=e;const t=e.get("cookie");if(t)for(const[e,r]of d(t))this._parsed.set(e,{name:e,value:r})}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed);if(!e.length)return r.map(([e,t])=>t);let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(([e])=>e===n).map(([e,t])=>t)}has(e){return this._parsed.has(e)}set(...e){let[t,r]=1===e.length?[e[0].name,e[0].value]:e,n=this._parsed;return n.set(t,{name:t,value:r}),this._headers.set("cookie",Array.from(n).map(([e,t])=>c(t)).join("; ")),this}delete(e){let t=this._parsed,r=Array.isArray(e)?e.map(e=>t.delete(e)):t.delete(e);return this._headers.set("cookie",Array.from(t).map(([e,t])=>c(t)).join("; ")),r}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(e=>`${e.name}=${encodeURIComponent(e.value)}`).join("; ")}},m=class{constructor(e){var t,r,n;this._parsed=new Map,this._headers=e;const a=null!=(n=null!=(r=null==(t=e.getSetCookie)?void 0:t.call(e))?r:e.get("set-cookie"))?n:[];for(const e of Array.isArray(a)?a:function(e){if(!e)return[];var t,r,n,a,i,o=[],s=0;function l(){for(;s<e.length&&/\s/.test(e.charAt(s));)s+=1;return s<e.length}for(;s<e.length;){for(t=s,i=!1;l();)if(","===(r=e.charAt(s))){for(n=s,s+=1,l(),a=s;s<e.length&&"="!==(r=e.charAt(s))&&";"!==r&&","!==r;)s+=1;s<e.length&&"="===e.charAt(s)?(i=!0,s=a,o.push(e.substring(t,n)),t=s):s=n+1}else s+=1;(!i||s>=e.length)&&o.push(e.substring(t,e.length))}return o}(a)){const t=f(e);t&&this._parsed.set(t.name,t)}}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed.values());if(!e.length)return r;let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(e=>e.name===n)}has(e){return this._parsed.has(e)}set(...e){let[t,r,n]=1===e.length?[e[0].name,e[0].value,e[0]]:e,a=this._parsed;return a.set(t,function(e={name:"",value:""}){return"number"==typeof e.expires&&(e.expires=new Date(e.expires)),e.maxAge&&(e.expires=new Date(Date.now()+1e3*e.maxAge)),(null===e.path||void 0===e.path)&&(e.path="/"),e}({name:t,value:r,...n})),function(e,t){for(let[,r]of(t.delete("set-cookie"),e)){let e=c(r);t.append("set-cookie",e)}}(a,this._headers),this}delete(...e){let[t,r]="string"==typeof e[0]?[e[0]]:[e[0].name,e[0]];return this.set({...r,name:t,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(c).join("; ")}}},32063,e=>{"use strict";var t,r,n,a,i,o,s,l=e.i(34529),u=l.ContextAPI.getInstance(),c=e.i(91008),d=c.DiagAPI.instance(),f=(t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,r)},function(e,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}),h=function(){function e(){}return e.prototype.createGauge=function(e,t){return C},e.prototype.createHistogram=function(e,t){return x},e.prototype.createCounter=function(e,t){return S},e.prototype.createUpDownCounter=function(e,t){return T},e.prototype.createObservableGauge=function(e,t){return O},e.prototype.createObservableCounter=function(e,t){return P},e.prototype.createObservableUpDownCounter=function(e,t){return A},e.prototype.addBatchObservableCallback=function(e,t){},e.prototype.removeBatchObservableCallback=function(e){},e}(),p=function(){},g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.add=function(e,t){},t}(p),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.add=function(e,t){},t}(p),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.record=function(e,t){},t}(p),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.record=function(e,t){},t}(p),b=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.removeCallback=function(e){},e}(),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t}(b),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t}(b),R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t}(b),w=new h,S=new g,C=new y,x=new v,T=new m,P=new E,O=new _,A=new R;function k(){return w}var N=new(function(){function e(){}return e.prototype.getMeter=function(e,t,r){return w},e}()),I=e.i(98688),$="metrics",D=(function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(e){return(0,I.registerGlobal)($,e,c.DiagAPI.instance())},e.prototype.getMeterProvider=function(){return(0,I.getGlobal)($)||N},e.prototype.getMeter=function(e,t,r){return this.getMeterProvider().getMeter(e,t,r)},e.prototype.disable=function(){(0,I.unregisterGlobal)($,c.DiagAPI.instance())},e})().getInstance(),j=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}(),M={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},U={set:function(e,t,r){null!=e&&(e[t]=r)}},L=e.i(24158),H=(0,L.createContextKey)("OpenTelemetry Baggage Key");function q(e){return e.getValue(H)||void 0}function F(){return q(l.ContextAPI.getInstance().active())}function X(e,t){return e.setValue(H,t)}function B(e){return e.deleteValue(H)}var G=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},z=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},W=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var t=G(e,2);return[t[0],t[1]]})},e.prototype.setEntry=function(t,r){var n=new e(this._entries);return n._entries.set(t,r),n},e.prototype.removeEntry=function(t){var r=new e(this._entries);return r._entries.delete(t),r},e.prototype.removeEntries=function(){for(var t,r,n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];var i=new e(this._entries);try{for(var o=z(n),s=o.next();!s.done;s=o.next()){var l=s.value;i._entries.delete(l)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},e.prototype.clear=function(){return new e},e}(),V=Symbol("BaggageEntryMetadata"),K=c.DiagAPI.instance();function Y(e){return void 0===e&&(e={}),new W(new Map(Object.entries(e)))}function J(e){return"string"!=typeof e&&(K.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:V,toString:function(){return e}}}var Q="propagation",Z=new j,ee=(function(){function e(){this.createBaggage=Y,this.getBaggage=q,this.getActiveBaggage=F,this.setBaggage=X,this.deleteBaggage=B}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return(0,I.registerGlobal)(Q,e,c.DiagAPI.instance())},e.prototype.inject=function(e,t,r){return void 0===r&&(r=U),this._getGlobalPropagator().inject(e,t,r)},e.prototype.extract=function(e,t,r){return void 0===r&&(r=M),this._getGlobalPropagator().extract(e,t,r)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){(0,I.unregisterGlobal)(Q,c.DiagAPI.instance())},e.prototype._getGlobalPropagator=function(){return(0,I.getGlobal)(Q)||Z},e})().getInstance(),et=e.i(94323);let er={context:u,diag:d,metrics:D,propagation:ee,trace:et.trace};e.s(["default",0,er],40290),e.i(40290);var en=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],ea=function(){for(var e=0;e<en.length;e++)this[en[e].n]=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(console){var n=console[e];if("function"!=typeof n&&(n=console.log),"function"==typeof n)return n.apply(console,t)}}}(en[e].c)},ei=e.i(63689);(r=i||(i={}))[r.INT=0]="INT",r[r.DOUBLE=1]="DOUBLE";var eo=e.i(68677),es=e.i(29322);(n=o||(o={}))[n.NOT_RECORD=0]="NOT_RECORD",n[n.RECORD=1]="RECORD",n[n.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED",(a=s||(s={}))[a.INTERNAL=0]="INTERNAL",a[a.SERVER=1]="SERVER",a[a.CLIENT=2]="CLIENT",a[a.PRODUCER=3]="PRODUCER",a[a.CONSUMER=4]="CONSUMER";var el=e.i(31232),eu=e.i(89622),ec="[_0-9a-z-*/]",ed=RegExp("^(?:[a-z]"+ec+"{0,255}|"+("[a-z0-9]"+ec+"{0,240}@[a-z]")+ec+"{0,13})$"),ef=/^[ -~]{0,255}[!-~]$/,eh=/,|=/,ep=function(){function e(e){this._internalState=new Map,e&&this._parse(e)}return e.prototype.set=function(e,t){var r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r},e.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},e.prototype.get=function(e){return this._internalState.get(e)},e.prototype.serialize=function(){var e=this;return this._keys().reduce(function(t,r){return t.push(r+"="+e.get(r)),t},[]).join(",")},e.prototype._parse=function(e){!(e.length>512)&&(this._internalState=e.split(",").reverse().reduce(function(e,t){var r=t.trim(),n=r.indexOf("=");if(-1!==n){var a=r.slice(0,n),i=r.slice(n+1,t.length);ed.test(a)&&ef.test(i)&&!eh.test(i)&&e.set(a,i)}return e},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}();function eg(e){return new ep(e)}var em=e.i(9729),ey=e.i(65839);e.s(["DiagConsoleLogger",()=>ea,"DiagLogLevel",()=>ei.DiagLogLevel,"INVALID_SPANID",()=>ey.INVALID_SPANID,"INVALID_SPAN_CONTEXT",()=>ey.INVALID_SPAN_CONTEXT,"INVALID_TRACEID",()=>ey.INVALID_TRACEID,"ProxyTracer",()=>eo.ProxyTracer,"ProxyTracerProvider",()=>es.ProxyTracerProvider,"ROOT_CONTEXT",()=>L.ROOT_CONTEXT,"SamplingDecision",()=>o,"SpanKind",()=>s,"SpanStatusCode",()=>el.SpanStatusCode,"TraceFlags",()=>eu.TraceFlags,"ValueType",()=>i,"baggageEntryMetadataFromString",()=>J,"context",()=>u,"createContextKey",()=>L.createContextKey,"createNoopMeter",()=>k,"createTraceState",()=>eg,"default",0,er,"defaultTextMapGetter",()=>M,"defaultTextMapSetter",()=>U,"diag",()=>d,"isSpanContextValid",()=>em.isSpanContextValid,"isValidSpanId",()=>em.isValidSpanId,"isValidTraceId",()=>em.isValidTraceId,"metrics",()=>D,"propagation",()=>ee,"trace",()=>et.trace],32063)},20678,(e,t,r)=>{(()=>{"use strict";"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab="/ROOT/node_modules/next/dist/compiled/cookie/");var e,r,n,a,i={};i.parse=function(t,r){if("string"!=typeof t)throw TypeError("argument str must be a string");for(var a={},i=t.split(n),o=(r||{}).decode||e,s=0;s<i.length;s++){var l=i[s],u=l.indexOf("=");if(!(u<0)){var c=l.substr(0,u).trim(),d=l.substr(++u,l.length).trim();'"'==d[0]&&(d=d.slice(1,-1)),void 0==a[c]&&(a[c]=function(e,t){try{return t(e)}catch(t){return e}}(d,o))}}return a},i.serialize=function(e,t,n){var i=n||{},o=i.encode||r;if("function"!=typeof o)throw TypeError("option encode is invalid");if(!a.test(e))throw TypeError("argument name is invalid");var s=o(t);if(s&&!a.test(s))throw TypeError("argument val is invalid");var l=e+"="+s;if(null!=i.maxAge){var u=i.maxAge-0;if(isNaN(u)||!isFinite(u))throw TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(u)}if(i.domain){if(!a.test(i.domain))throw TypeError("option domain is invalid");l+="; Domain="+i.domain}if(i.path){if(!a.test(i.path))throw TypeError("option path is invalid");l+="; Path="+i.path}if(i.expires){if("function"!=typeof i.expires.toUTCString)throw TypeError("option expires is invalid");l+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(l+="; HttpOnly"),i.secure&&(l+="; Secure"),i.sameSite)switch("string"==typeof i.sameSite?i.sameSite.toLowerCase():i.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return l},e=decodeURIComponent,r=encodeURIComponent,n=/; */,a=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,t.exports=i})()},70903,(e,t,r)=>{(()=>{"use strict";let e,r,n,a,i;var o={993:e=>{var t=Object.prototype.hasOwnProperty,r="~";function n(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(e,t,n,i,o){if("function"!=typeof n)throw TypeError("The listener must be a function");var s=new a(n,i||e,o),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),s.prototype.eventNames=function(){var e,n,a=[];if(0===this._eventsCount)return a;for(n in e=this._events)t.call(e,n)&&a.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},s.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var a=0,i=n.length,o=Array(i);a<i;a++)o[a]=n[a].fn;return o},s.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,a,i,o){var s=r?r+e:e;if(!this._events[s])return!1;var l,u,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,a),!0;case 5:return c.fn.call(c.context,t,n,a,i),!0;case 6:return c.fn.call(c.context,t,n,a,i,o),!0}for(u=1,l=Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var f,h=c.length;for(u=0;u<h;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,n);break;case 4:c[u].fn.call(c[u].context,t,n,a);break;default:if(!l)for(f=1,l=Array(d-1);f<d;f++)l[f-1]=arguments[f];c[u].fn.apply(c[u].context,l)}}return!0},s.prototype.on=function(e,t,r){return i(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return i(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,n,a){var i=r?r+e:e;if(!this._events[i])return this;if(!t)return o(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||a&&!s.once||n&&s.context!==n||o(this,i);else{for(var l=0,u=[],c=s.length;l<c;l++)(s[l].fn!==t||a&&!s[l].once||n&&s[l].context!==n)&&u.push(s[l]);u.length?this._events[i]=1===u.length?u[0]:u:o(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s},213:e=>{e.exports=(e,t)=>(t=t||(()=>{}),e.then(e=>new Promise(e=>{e(t())}).then(()=>e),e=>new Promise(e=>{e(t())}).then(()=>{throw e})))},574:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){let n=0,a=e.length;for(;a>0;){let i=a/2|0,o=n+i;0>=r(e[o],t)?(n=++o,a-=i+1):a=i}return n}},821:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});let n=r(574);t.default=class{constructor(){this._queue=[]}enqueue(e,t){let r={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(r);let a=n.default(this._queue,r,(e,t)=>t.priority-e.priority);this._queue.splice(a,0,r)}dequeue(){let e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter(t=>t.priority===e.priority).map(e=>e.run)}get size(){return this._queue.length}}},816:(e,t,r)=>{let n=r(213);class a extends Error{constructor(e){super(e),this.name="TimeoutError"}}let i=(e,t,r)=>new Promise((i,o)=>{if("number"!=typeof t||t<0)throw TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void i(e);let s=setTimeout(()=>{if("function"==typeof r){try{i(r())}catch(e){o(e)}return}let n="string"==typeof r?r:`Promise timed out after ${t} milliseconds`,s=r instanceof Error?r:new a(n);"function"==typeof e.cancel&&e.cancel(),o(s)},t);n(e.then(i,o),()=>{clearTimeout(s)})});e.exports=i,e.exports.default=i,e.exports.TimeoutError=a}},s={};function l(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}},n=!0;try{o[e](r,r.exports,l),n=!1}finally{n&&delete s[e]}return r.exports}l.ab="/ROOT/node_modules/next/dist/compiled/p-queue/";var u={};Object.defineProperty(u,"__esModule",{value:!0}),e=l(993),r=l(816),n=l(821),a=()=>{},i=new r.TimeoutError,u.default=class extends e{constructor(e){var t,r,i,o;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=a,this._resolveIdle=a,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:n.default},e)).intervalCap&&e.intervalCap>=1))throw TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!=(r=null==(t=e.intervalCap)?void 0:t.toString())?r:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!=(o=null==(i=e.interval)?void 0:i.toString())?o:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=a,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=a,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let e=Date.now();if(void 0===this._intervalId){let t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise((n,a)=>{let o=async()=>{this._pendingCount++,this._intervalCount++;try{let o=void 0===this._timeout&&void 0===t.timeout?e():r.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&a(i)});n(await o)}catch(e){a(e)}this._next()};this._queue.enqueue(o,t),this._tryToStartAnother(),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async e=>this.add(e,t)))}start(){return this._isPaused&&(this._isPaused=!1,this._processQueue()),this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise(e=>{let t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}})}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise(e=>{let t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}},t.exports=u})()},3949,e=>{"use strict";function t(){return{previewModeId:process.env.__NEXT_PREVIEW_MODE_ID||"",previewModeSigningKey:process.env.__NEXT_PREVIEW_MODE_SIGNING_KEY||"",previewModeEncryptionKey:process.env.__NEXT_PREVIEW_MODE_ENCRYPTION_KEY||""}}e.s(["getEdgePreviewProps",()=>t])},68709,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={getTestReqInfo:function(){return l},withRequest:function(){return s}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});let i=new(e.r(78500)).AsyncLocalStorage;function o(e,t){let r=t.header(e,"next-test-proxy-port");if(!r)return;let n=t.url(e);return{url:n,proxyPort:Number(r),testData:t.header(e,"next-test-data")||""}}function s(e,t,r){let n=o(e,t);return n?i.run(n,r):r()}function l(e,t){let r=i.getStore();return r||(e&&t?o(e,t):void 0)}},91794,(e,t,r)=>{"use strict";var n=e.i(51615);Object.defineProperty(r,"__esModule",{value:!0});var a={handleFetch:function(){return u},interceptFetch:function(){return c},reader:function(){return s}};for(var i in a)Object.defineProperty(r,i,{enumerable:!0,get:a[i]});let o=e.r(68709),s={url:e=>e.url,header:(e,t)=>e.headers.get(t)};async function l(e,t){let{url:r,method:a,headers:i,body:o,cache:s,credentials:l,integrity:u,mode:c,redirect:d,referrer:f,referrerPolicy:h}=t;return{testData:e,api:"fetch",request:{url:r,method:a,headers:[...Array.from(i),["next-test-stack",function(){let e=(Error().stack??"").split("\n");for(let t=1;t<e.length;t++)if(e[t].length>0){e=e.slice(t);break}return(e=(e=(e=e.filter(e=>!e.includes("/next/dist/"))).slice(0,5)).map(e=>e.replace("webpack-internal:///(rsc)/","").trim())).join("    ")}()]],body:o?n.Buffer.from(await t.arrayBuffer()).toString("base64"):null,cache:s,credentials:l,integrity:u,mode:c,redirect:d,referrer:f,referrerPolicy:h}}}async function u(e,t){let r=(0,o.getTestReqInfo)(t,s);if(!r)return e(t);let{testData:a,proxyPort:i}=r,u=await l(a,t),c=await e(`http://localhost:${i}`,{method:"POST",body:JSON.stringify(u),next:{internal:!0}});if(!c.ok)throw Object.defineProperty(Error(`Proxy request failed: ${c.status}`),"__NEXT_ERROR_CODE",{value:"E146",enumerable:!1,configurable:!0});let d=await c.json(),{api:f}=d;switch(f){case"continue":return e(t);case"abort":case"unhandled":throw Object.defineProperty(Error(`Proxy request aborted [${t.method} ${t.url}]`),"__NEXT_ERROR_CODE",{value:"E145",enumerable:!1,configurable:!0});case"fetch":return function(e){let{status:t,headers:r,body:a}=e.response;return new Response(a?n.Buffer.from(a,"base64"):null,{status:t,headers:new Headers(r)})}(d);default:return f}}function c(t){return e.g.fetch=function(e,r){var n;return(null==r||null==(n=r.next)?void 0:n.internal)?t(e,r):u(t,new Request(e,r))},()=>{e.g.fetch=t}}},98246,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={interceptTestApis:function(){return s},wrapRequestHandler:function(){return l}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});let i=e.r(68709),o=e.r(91794);function s(){return(0,o.interceptFetch)(e.g.fetch)}function l(e){return(t,r)=>(0,i.withRequest)(t,o.reader,()=>e(t,r))}},92192,(e,t,r)=>{!function(){"use strict";var e={114:function(e){function t(e){if("string"!=typeof e)throw TypeError("Path must be a string. Received "+JSON.stringify(e))}function r(e,t){for(var r,n="",a=0,i=-1,o=0,s=0;s<=e.length;++s){if(s<e.length)r=e.charCodeAt(s);else if(47===r)break;else r=47;if(47===r){if(i===s-1||1===o);else if(i!==s-1&&2===o){if(n.length<2||2!==a||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2)){if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){-1===l?(n="",a=0):a=(n=n.slice(0,l)).length-1-n.lastIndexOf("/"),i=s,o=0;continue}}else if(2===n.length||1===n.length){n="",a=0,i=s,o=0;continue}}t&&(n.length>0?n+="/..":n="..",a=2)}else n.length>0?n+="/"+e.slice(i+1,s):n=e.slice(i+1,s),a=s-i-1;i=s,o=0}else 46===r&&-1!==o?++o:o=-1}return n}var n={resolve:function(){for(var e,n,a="",i=!1,o=arguments.length-1;o>=-1&&!i;o--)o>=0?n=arguments[o]:(void 0===e&&(e=""),n=e),t(n),0!==n.length&&(a=n+"/"+a,i=47===n.charCodeAt(0));if(a=r(a,!i),i)if(a.length>0)return"/"+a;else return"/";return a.length>0?a:"."},normalize:function(e){if(t(e),0===e.length)return".";var n=47===e.charCodeAt(0),a=47===e.charCodeAt(e.length-1);return(0!==(e=r(e,!n)).length||n||(e="."),e.length>0&&a&&(e+="/"),n)?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0==arguments.length)return".";for(var e,r=0;r<arguments.length;++r){var a=arguments[r];t(a),a.length>0&&(void 0===e?e=a:e+="/"+a)}return void 0===e?".":n.normalize(e)},relative:function(e,r){if(t(e),t(r),e===r||(e=n.resolve(e))===(r=n.resolve(r)))return"";for(var a=1;a<e.length&&47===e.charCodeAt(a);++a);for(var i=e.length,o=i-a,s=1;s<r.length&&47===r.charCodeAt(s);++s);for(var l=r.length-s,u=o<l?o:l,c=-1,d=0;d<=u;++d){if(d===u){if(l>u){if(47===r.charCodeAt(s+d))return r.slice(s+d+1);else if(0===d)return r.slice(s+d)}else o>u&&(47===e.charCodeAt(a+d)?c=d:0===d&&(c=0));break}var f=e.charCodeAt(a+d);if(f!==r.charCodeAt(s+d))break;47===f&&(c=d)}var h="";for(d=a+c+1;d<=i;++d)(d===i||47===e.charCodeAt(d))&&(0===h.length?h+="..":h+="/..");return h.length>0?h+r.slice(s+c):(s+=c,47===r.charCodeAt(s)&&++s,r.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var r=e.charCodeAt(0),n=47===r,a=-1,i=!0,o=e.length-1;o>=1;--o)if(47===(r=e.charCodeAt(o))){if(!i){a=o;break}}else i=!1;return -1===a?n?"/":".":n&&1===a?"//":e.slice(0,a)},basename:function(e,r){if(void 0!==r&&"string"!=typeof r)throw TypeError('"ext" argument must be a string');t(e);var n,a=0,i=-1,o=!0;if(void 0!==r&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var s=r.length-1,l=-1;for(n=e.length-1;n>=0;--n){var u=e.charCodeAt(n);if(47===u){if(!o){a=n+1;break}}else -1===l&&(o=!1,l=n+1),s>=0&&(u===r.charCodeAt(s)?-1==--s&&(i=n):(s=-1,i=l))}return a===i?i=l:-1===i&&(i=e.length),e.slice(a,i)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!o){a=n+1;break}}else -1===i&&(o=!1,i=n+1);return -1===i?"":e.slice(a,i)},extname:function(e){t(e);for(var r=-1,n=0,a=-1,i=!0,o=0,s=e.length-1;s>=0;--s){var l=e.charCodeAt(s);if(47===l){if(!i){n=s+1;break}continue}-1===a&&(i=!1,a=s+1),46===l?-1===r?r=s:1!==o&&(o=1):-1!==r&&(o=-1)}return -1===r||-1===a||0===o||1===o&&r===a-1&&r===n+1?"":e.slice(r,a)},format:function(e){var t,r;if(null===e||"object"!=typeof e)throw TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return t=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||""),t?t===e.root?t+r:t+"/"+r:r},parse:function(e){t(e);var r,n={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return n;var a=e.charCodeAt(0),i=47===a;i?(n.root="/",r=1):r=0;for(var o=-1,s=0,l=-1,u=!0,c=e.length-1,d=0;c>=r;--c){if(47===(a=e.charCodeAt(c))){if(!u){s=c+1;break}continue}-1===l&&(u=!1,l=c+1),46===a?-1===o?o=c:1!==d&&(d=1):-1!==o&&(d=-1)}return -1===o||-1===l||0===d||1===d&&o===l-1&&o===s+1?-1!==l&&(0===s&&i?n.base=n.name=e.slice(1,l):n.base=n.name=e.slice(s,l)):(0===s&&i?(n.name=e.slice(1,o),n.base=e.slice(1,l)):(n.name=e.slice(s,o),n.base=e.slice(s,l)),n.ext=e.slice(o,l)),s>0?n.dir=e.slice(0,s-1):i&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};n.posix=n,e.exports=n}},r={};function n(t){var a=r[t];if(void 0!==a)return a.exports;var i=r[t]={exports:{}},o=!0;try{e[t](i,i.exports,n),o=!1}finally{o&&delete r[t]}return i.exports}n.ab="/ROOT/node_modules/next/dist/compiled/path-browserify/",t.exports=n(114)}()},82023,(e,t,r)=>{t.exports=e.r(92192)},24916,(e,t,r)=>{(()=>{"use strict";"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab="/ROOT/node_modules/next/dist/compiled/path-to-regexp/");var e={};(()=>{function t(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var n=e[r];if("*"===n||"+"===n||"?"===n){t.push({type:"MODIFIER",index:r,value:e[r++]});continue}if("\\"===n){t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});continue}if("{"===n){t.push({type:"OPEN",index:r,value:e[r++]});continue}if("}"===n){t.push({type:"CLOSE",index:r,value:e[r++]});continue}if(":"===n){for(var a="",i=r+1;i<e.length;){var o=e.charCodeAt(i);if(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122||95===o){a+=e[i++];continue}break}if(!a)throw TypeError("Missing parameter name at ".concat(r));t.push({type:"NAME",index:r,value:a}),r=i;continue}if("("===n){var s=1,l="",i=r+1;if("?"===e[i])throw TypeError('Pattern cannot start with "?" at '.concat(i));for(;i<e.length;){if("\\"===e[i]){l+=e[i++]+e[i++];continue}if(")"===e[i]){if(0==--s){i++;break}}else if("("===e[i]&&(s++,"?"!==e[i+1]))throw TypeError("Capturing groups are not allowed at ".concat(i));l+=e[i++]}if(s)throw TypeError("Unbalanced pattern at ".concat(r));if(!l)throw TypeError("Missing pattern at ".concat(r));t.push({type:"PATTERN",index:r,value:l}),r=i;continue}t.push({type:"CHAR",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),n=t.prefixes,i=void 0===n?"./":n,o=t.delimiter,s=void 0===o?"/#?":o,l=[],u=0,c=0,d="",f=function(e){if(c<r.length&&r[c].type===e)return r[c++].value},h=function(e){var t=f(e);if(void 0!==t)return t;var n=r[c],a=n.type,i=n.index;throw TypeError("Unexpected ".concat(a," at ").concat(i,", expected ").concat(e))},p=function(){for(var e,t="";e=f("CHAR")||f("ESCAPED_CHAR");)t+=e;return t},g=function(e){for(var t=0;t<s.length;t++){var r=s[t];if(e.indexOf(r)>-1)return!0}return!1},m=function(e){var t=l[l.length-1],r=e||(t&&"string"==typeof t?t:"");if(t&&!r)throw TypeError('Must have text between two parameters, missing text after "'.concat(t.name,'"'));return!r||g(r)?"[^".concat(a(s),"]+?"):"(?:(?!".concat(a(r),")[^").concat(a(s),"])+?")};c<r.length;){var y=f("CHAR"),v=f("NAME"),b=f("PATTERN");if(v||b){var E=y||"";-1===i.indexOf(E)&&(d+=E,E=""),d&&(l.push(d),d=""),l.push({name:v||u++,prefix:E,suffix:"",pattern:b||m(E),modifier:f("MODIFIER")||""});continue}var _=y||f("ESCAPED_CHAR");if(_){d+=_;continue}if(d&&(l.push(d),d=""),f("OPEN")){var E=p(),R=f("NAME")||"",w=f("PATTERN")||"",S=p();h("CLOSE"),l.push({name:R||(w?u++:""),pattern:R&&!w?m(E):w,prefix:E,suffix:S,modifier:f("MODIFIER")||""});continue}h("END")}return l}function r(e,t){void 0===t&&(t={});var r=i(t),n=t.encode,a=void 0===n?function(e){return e}:n,o=t.validate,s=void 0===o||o,l=e.map(function(e){if("object"==typeof e)return new RegExp("^(?:".concat(e.pattern,")$"),r)});return function(t){for(var r="",n=0;n<e.length;n++){var i=e[n];if("string"==typeof i){r+=i;continue}var o=t?t[i.name]:void 0,u="?"===i.modifier||"*"===i.modifier,c="*"===i.modifier||"+"===i.modifier;if(Array.isArray(o)){if(!c)throw TypeError('Expected "'.concat(i.name,'" to not repeat, but got an array'));if(0===o.length){if(u)continue;throw TypeError('Expected "'.concat(i.name,'" to not be empty'))}for(var d=0;d<o.length;d++){var f=a(o[d],i);if(s&&!l[n].test(f))throw TypeError('Expected all "'.concat(i.name,'" to match "').concat(i.pattern,'", but got "').concat(f,'"'));r+=i.prefix+f+i.suffix}continue}if("string"==typeof o||"number"==typeof o){var f=a(String(o),i);if(s&&!l[n].test(f))throw TypeError('Expected "'.concat(i.name,'" to match "').concat(i.pattern,'", but got "').concat(f,'"'));r+=i.prefix+f+i.suffix;continue}if(!u){var h=c?"an array":"a string";throw TypeError('Expected "'.concat(i.name,'" to be ').concat(h))}}return r}}function n(e,t,r){void 0===r&&(r={});var n=r.decode,a=void 0===n?function(e){return e}:n;return function(r){var n=e.exec(r);if(!n)return!1;for(var i=n[0],o=n.index,s=Object.create(null),l=1;l<n.length;l++)!function(e){if(void 0!==n[e]){var r=t[e-1];"*"===r.modifier||"+"===r.modifier?s[r.name]=n[e].split(r.prefix+r.suffix).map(function(e){return a(e,r)}):s[r.name]=a(n[e],r)}}(l);return{path:i,index:o,params:s}}}function a(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function i(e){return e&&e.sensitive?"":"i"}function o(e,t,r){void 0===r&&(r={});for(var n=r.strict,o=void 0!==n&&n,s=r.start,l=r.end,u=r.encode,c=void 0===u?function(e){return e}:u,d=r.delimiter,f=r.endsWith,h="[".concat(a(void 0===f?"":f),"]|$"),p="[".concat(a(void 0===d?"/#?":d),"]"),g=void 0===s||s?"^":"",m=0;m<e.length;m++){var y=e[m];if("string"==typeof y)g+=a(c(y));else{var v=a(c(y.prefix)),b=a(c(y.suffix));if(y.pattern)if(t&&t.push(y),v||b)if("+"===y.modifier||"*"===y.modifier){var E="*"===y.modifier?"?":"";g+="(?:".concat(v,"((?:").concat(y.pattern,")(?:").concat(b).concat(v,"(?:").concat(y.pattern,"))*)").concat(b,")").concat(E)}else g+="(?:".concat(v,"(").concat(y.pattern,")").concat(b,")").concat(y.modifier);else{if("+"===y.modifier||"*"===y.modifier)throw TypeError('Can not repeat "'.concat(y.name,'" without a prefix and suffix'));g+="(".concat(y.pattern,")").concat(y.modifier)}else g+="(?:".concat(v).concat(b,")").concat(y.modifier)}}if(void 0===l||l)o||(g+="".concat(p,"?")),g+=r.endsWith?"(?=".concat(h,")"):"$";else{var _=e[e.length-1],R="string"==typeof _?p.indexOf(_[_.length-1])>-1:void 0===_;o||(g+="(?:".concat(p,"(?=").concat(h,"))?")),R||(g+="(?=".concat(p,"|").concat(h,")"))}return new RegExp(g,i(r))}function s(e,r,n){if(e instanceof RegExp){var a;if(!r)return e;for(var l=/\((?:\?<(.*?)>)?(?!\?)/g,u=0,c=l.exec(e.source);c;)r.push({name:c[1]||u++,prefix:"",suffix:"",modifier:"",pattern:""}),c=l.exec(e.source);return e}return Array.isArray(e)?(a=e.map(function(e){return s(e,r,n).source}),new RegExp("(?:".concat(a.join("|"),")"),i(n))):o(t(e,n),r,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.pathToRegexp=e.tokensToRegexp=e.regexpToFunction=e.match=e.tokensToFunction=e.compile=e.parse=void 0,e.parse=t,e.compile=function(e,n){return r(t(e,n),n)},e.tokensToFunction=r,e.match=function(e,t){var r=[];return n(s(e,r,t),r,t)},e.regexpToFunction=n,e.tokensToRegexp=o,e.pathToRegexp=s})(),t.exports=e})()},87297,(e,t,r)=>{t.exports=["chrome 111","edge 111","firefox 111","safari 16.4"]},37018,(e,t,r)=>{"use strict";var n={H:null,A:null};function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=Array.isArray;function o(){}var s=Symbol.for("react.transitional.element"),l=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),y=Symbol.for("react.view_transition"),v=Symbol.iterator,b=Object.prototype.hasOwnProperty,E=Object.assign;function _(e,t,r){var n=r.ref;return{$$typeof:s,type:e,key:t,ref:void 0!==n?n:null,props:r}}function R(e){return"object"==typeof e&&null!==e&&e.$$typeof===s}var w=/\/+/g;function S(e,t){var r,n;return"object"==typeof e&&null!==e&&null!=e.key?(r=""+e.key,n={"=":"=0",":":"=2"},"$"+r.replace(/[=:]/g,function(e){return n[e]})):t.toString(36)}function C(e,t,r){if(null==e)return e;var n=[],u=0;return!function e(t,r,n,u,c){var d,f,h,p=typeof t;("undefined"===p||"boolean"===p)&&(t=null);var m=!1;if(null===t)m=!0;else switch(p){case"bigint":case"string":case"number":m=!0;break;case"object":switch(t.$$typeof){case s:case l:m=!0;break;case g:return e((m=t._init)(t._payload),r,n,u,c)}}if(m)return c=c(t),m=""===u?"."+S(t,0):u,i(c)?(n="",null!=m&&(n=m.replace(w,"$&/")+"/"),e(c,r,n,"",function(e){return e})):null!=c&&(R(c)&&(d=c,f=n+(null==c.key||t&&t.key===c.key?"":(""+c.key).replace(w,"$&/")+"/")+m,c=_(d.type,f,d.props)),r.push(c)),1;m=0;var y=""===u?".":u+":";if(i(t))for(var b=0;b<t.length;b++)p=y+S(u=t[b],b),m+=e(u,r,n,p,c);else if("function"==typeof(b=null===(h=t)||"object"!=typeof h?null:"function"==typeof(h=v&&h[v]||h["@@iterator"])?h:null))for(t=b.call(t),b=0;!(u=t.next()).done;)p=y+S(u=u.value,b++),m+=e(u,r,n,p,c);else if("object"===p){if("function"==typeof t.then)return e(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(o,o):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(t),r,n,u,c);throw Error(a(31,"[object Object]"===(r=String(t))?"object with keys {"+Object.keys(t).join(", ")+"}":r))}return m}(e,n,"","",function(e){return t.call(r,e,u++)}),n}function x(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){(0===e._status||-1===e._status)&&(e._status=1,e._result=t)},function(t){(0===e._status||-1===e._status)&&(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}function T(){return new WeakMap}function P(){return{s:0,v:void 0,o:null,p:null}}r.Activity=m,r.Children={map:C,forEach:function(e,t,r){C(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return C(e,function(){t++}),t},toArray:function(e){return C(e,function(e){return e})||[]},only:function(e){if(!R(e))throw Error(a(143));return e}},r.Fragment=u,r.Profiler=d,r.StrictMode=c,r.Suspense=h,r.ViewTransition=y,r.__SERVER_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,r.cache=function(e){return function(){var t=n.A;if(!t)return e.apply(null,arguments);var r=t.getCacheForType(T);void 0===(t=r.get(e))&&(t=P(),r.set(e,t)),r=0;for(var a=arguments.length;r<a;r++){var i=arguments[r];if("function"==typeof i||"object"==typeof i&&null!==i){var o=t.o;null===o&&(t.o=o=new WeakMap),void 0===(t=o.get(i))&&(t=P(),o.set(i,t))}else null===(o=t.p)&&(t.p=o=new Map),void 0===(t=o.get(i))&&(t=P(),o.set(i,t))}if(1===t.s)return t.v;if(2===t.s)throw t.v;try{var s=e.apply(null,arguments);return(r=t).s=1,r.v=s}catch(e){throw(s=t).s=2,s.v=e,e}}},r.cacheSignal=function(){var e=n.A;return e?e.cacheSignal():null},r.captureOwnerStack=function(){return null},r.cloneElement=function(e,t,r){if(null==e)throw Error(a(267,e));var n=E({},e.props),i=e.key;if(null!=t)for(o in void 0!==t.key&&(i=""+t.key),t)b.call(t,o)&&"key"!==o&&"__self"!==o&&"__source"!==o&&("ref"!==o||void 0!==t.ref)&&(n[o]=t[o]);var o=arguments.length-2;if(1===o)n.children=r;else if(1<o){for(var s=Array(o),l=0;l<o;l++)s[l]=arguments[l+2];n.children=s}return _(e.type,i,n)},r.createElement=function(e,t,r){var n,a={},i=null;if(null!=t)for(n in void 0!==t.key&&(i=""+t.key),t)b.call(t,n)&&"key"!==n&&"__self"!==n&&"__source"!==n&&(a[n]=t[n]);var o=arguments.length-2;if(1===o)a.children=r;else if(1<o){for(var s=Array(o),l=0;l<o;l++)s[l]=arguments[l+2];a.children=s}if(e&&e.defaultProps)for(n in o=e.defaultProps)void 0===a[n]&&(a[n]=o[n]);return _(e,i,a)},r.createRef=function(){return{current:null}},r.forwardRef=function(e){return{$$typeof:f,render:e}},r.isValidElement=R,r.lazy=function(e){return{$$typeof:g,_payload:{_status:-1,_result:e},_init:x}},r.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},r.use=function(e){return n.H.use(e)},r.useCallback=function(e,t){return n.H.useCallback(e,t)},r.useDebugValue=function(){},r.useId=function(){return n.H.useId()},r.useMemo=function(e,t){return n.H.useMemo(e,t)},r.version="19.3.0-canary-f93b9fd4-20251217"},34392,(e,t,r)=>{"use strict";t.exports=e.r(37018)},92480,5809,87167,51720,93764,81527,75454,14327,63402,83978,75601,94706,19805,3661,43820,85867,49783,8900,55468,47986,546,68045,93441,72445,66401,66011,72451,49316,79698,12112,88154,11573,78116,74715,34277,4842,59106,83877,13651,23646,27064,60130,18215,65832,12239,53369,2635,14766,27934,99888,82233,69297,13714,88503,25249,10824,92879,68270,99690,21170,32995,e=>{"use strict";let t,r,n,a;class i extends Error{constructor(e,t){super(`Invariant: ${e.endsWith(".")?e:e+"."} This is a bug in Next.js.`,t),this.name="InvariantError"}}function o(e){return e.startsWith("/")?e:`/${e}`}function s(e){return o(e.split("/").reduce((e,t,r,n)=>t?"("===t[0]&&t.endsWith(")")||"@"===t[0]||("page"===t||"route"===t)&&r===n.length-1?e:`${e}/${t}`:e,""))}function l(e){return e.replace(/\.rsc($|\?)/,"$1")}function u(e){let t=e.indexOf("#"),r=e.indexOf("?"),n=r>-1&&(t<0||r<t);return n||t>-1?{pathname:e.substring(0,n?r:t),query:n?e.substring(r,t>-1?t:void 0):"",hash:t>-1?e.slice(t):""}:{pathname:e,query:"",hash:""}}function c(e,t){if("string"!=typeof e)return!1;let{pathname:r}=u(e);return r===t||r.startsWith(t+"/")}function d(e,t){if(!c(e,t))return e;let r=e.slice(t.length);return r.startsWith("/")?r:`/${r}`}e.s(["InvariantError",()=>i],5809),e.s(["normalizeAppPath",()=>s,"normalizeRscURL",()=>l],87167),e.s(["pathHasPrefix",()=>c],51720),e.s(["removePathPrefix",()=>d],93764),e.i(13477),e.s([],81527);var f,h,p,g,m,y,v,b,E,_,R,w,S,C,x,T,P,O,A=e.i(68644);let k=Symbol.for("next.server.manifests"),N=globalThis;function I({page:e,clientReferenceManifest:t,serverActionsManifest:r}){let n=N[k];if(n)n.clientReferenceManifestsPerRoute.set(s(e),t),n.serverActionsManifest=r;else{let n,a=new Map([[s(e),t]]),o=(n=new Map,new Proxy({},{get(e,t){let r=A.workAsyncStorage.getStore();switch(t){case"moduleLoading":case"entryCSSFiles":case"entryJSFiles":{if(!r)throw Object.defineProperty(new i(`Cannot access "${t}" without a work store.`),"__NEXT_ERROR_CODE",{value:"E952",enumerable:!1,configurable:!0});let e=a.get(r.route);if(!e)throw Object.defineProperty(new i(`The client reference manifest for route "${r.route}" does not exist.`),"__NEXT_ERROR_CODE",{value:"E951",enumerable:!1,configurable:!0});return e[t]}case"clientModules":case"rscModuleMapping":case"edgeRscModuleMapping":case"ssrModuleMapping":case"edgeSSRModuleMapping":{let e=n.get(t);!e&&(e=new Proxy({},{get(e,r){let n=A.workAsyncStorage.getStore();if(n){let e=a.get(n.route);if(null==e?void 0:e[t][r])return e[t][r]}else for(let e of a.values()){let n=e[t][r];if(void 0!==n)return n}}}),n.set(t,e));return e}default:throw Object.defineProperty(new i(`This is a proxied client reference manifest. The property "${String(t)}" is not handled.`),"__NEXT_ERROR_CODE",{value:"E953",enumerable:!1,configurable:!0})}}}));N[k]={clientReferenceManifestsPerRoute:a,proxiedClientReferenceManifest:o,serverActionsManifest:r,serverModuleMap:new Proxy({},{get:(e,t)=>{var r,n,a;let o,s=null==(n=function(){let e=N[k];if(!e)throw Object.defineProperty(new i("The manifests singleton was not initialized."),"__NEXT_ERROR_CODE",{value:"E950",enumerable:!1,configurable:!0});return e}().serverActionsManifest.edge)||null==(r=n[t])?void 0:r.workers;if(!s)return;let l=A.workAsyncStorage.getStore();if(!(o=l?s[c(a=l.page,"app")?a:"app"+a]:Object.values(s).at(0)))return;let{moduleId:u,async:d}=o;return{id:u,name:t,chunks:[],async:d}}})}}}e.s(["setManifestsSingleton",()=>I],92480);class $ extends Error{constructor({page:e}){super(`The middleware "${e}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class D extends Error{constructor(){super(`The request.page has been deprecated in favour of \`URLPattern\`.
  Read more: https://nextjs.org/docs/messages/middleware-request-page
  `)}}class j extends Error{constructor(){super(`The request.ua has been removed in favour of \`userAgent\` function.
  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent
  `)}}e.s(["PageSignatureError",()=>$,"RemovedPageError",()=>D,"RemovedUAError",()=>j],75454);let M="text/html; charset=utf-8",U="nxtP",L="nxtI",H="x-prerender-revalidate",q="x-prerender-revalidate-if-generated",F=".segments",X=".segment.rsc",B=".rsc",G=".json",z=".meta",W="x-next-cache-tags",V="x-next-revalidated-tags",K="x-next-revalidate-tag-token",Y="_N_T_",J={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",apiNode:"api-node",apiEdge:"api-edge",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",pagesDirBrowser:"pages-dir-browser",pagesDirEdge:"pages-dir-edge",pagesDirNode:"pages-dir-node"};function Q(e){let t=new Headers;for(let[r,n]of Object.entries(e))for(let e of Array.isArray(n)?n:[n])void 0!==e&&("number"==typeof e&&(e=e.toString()),t.append(r,e));return t}function Z(e){var t,r,n,a,i,o=[],s=0;function l(){for(;s<e.length&&/\s/.test(e.charAt(s));)s+=1;return s<e.length}for(;s<e.length;){for(t=s,i=!1;l();)if(","===(r=e.charAt(s))){for(n=s,s+=1,l(),a=s;s<e.length&&"="!==(r=e.charAt(s))&&";"!==r&&","!==r;)s+=1;s<e.length&&"="===e.charAt(s)?(i=!0,s=a,o.push(e.substring(t,n)),t=s):s=n+1}else s+=1;(!i||s>=e.length)&&o.push(e.substring(t,e.length))}return o}function ee(e){let t={},r=[];if(e)for(let[n,a]of e.entries())"set-cookie"===n.toLowerCase()?(r.push(...Z(a)),t[n]=1===r.length?r[0]:r):t[n]=a;return t}function et(e){try{return String(new URL(String(e)))}catch(t){throw Object.defineProperty(Error(`URL is malformed "${String(e)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:t}),"__NEXT_ERROR_CODE",{value:"E61",enumerable:!1,configurable:!0})}}function er(e){for(let t of[U,L])if(e!==t&&e.startsWith(t))return e.substring(t.length);return null}function en(e,t,r){if(e){for(let n of(r&&(r=r.toLowerCase()),e))if(t===n.domain?.split(":",1)[0].toLowerCase()||r===n.defaultLocale.toLowerCase()||n.locales?.some(e=>e.toLowerCase()===r))return n}}function ea(e){return e.replace(/\/$/,"")||"/"}function ei(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:a}=u(e);return`${t}${r}${n}${a}`}function eo(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:a}=u(e);return`${r}${t}${n}${a}`}function es(e,t){let r;if(t?.host&&!Array.isArray(t.host))r=t.host.toString().split(":",1)[0];else{if(!e.hostname)return;r=e.hostname}return r.toLowerCase()}J.reactServerComponents,J.actionBrowser,J.reactServerComponents,J.actionBrowser,J.instrument,J.middleware,J.apiNode,J.apiEdge,J.serverSideRendering,J.appPagesBrowser,J.reactServerComponents,J.actionBrowser,J.serverSideRendering,J.appPagesBrowser,J.shared,J.instrument,J.middleware,J.reactServerComponents,J.serverSideRendering,J.appPagesBrowser,J.actionBrowser,e.s(["CACHE_ONE_YEAR",0,31536e3,"HTML_CONTENT_TYPE_HEADER",0,M,"INFINITE_CACHE",0,0xfffffffe,"NEXT_CACHE_IMPLICIT_TAG_ID",0,Y,"NEXT_CACHE_REVALIDATED_TAGS_HEADER",0,V,"NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER",0,K,"NEXT_CACHE_TAGS_HEADER",0,W,"NEXT_CACHE_TAG_MAX_ITEMS",0,128,"NEXT_CACHE_TAG_MAX_LENGTH",0,256,"NEXT_DATA_SUFFIX",0,G,"NEXT_INTERCEPTION_MARKER_PREFIX",0,L,"NEXT_META_SUFFIX",0,z,"NEXT_QUERY_PARAM_PREFIX",0,U,"PRERENDER_REVALIDATE_HEADER",0,H,"PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER",0,q,"RSC_SEGMENTS_DIR_SUFFIX",0,F,"RSC_SEGMENT_SUFFIX",0,X,"RSC_SUFFIX",0,B],14327),e.s(["fromNodeOutgoingHttpHeaders",()=>Q,"normalizeNextQueryParam",()=>er,"splitCookiesString",()=>Z,"toNodeOutgoingHttpHeaders",()=>ee,"validateURL",()=>et],63402),e.s(["detectDomainLocale",()=>en],83978),e.s(["removeTrailingSlash",()=>ea],75601),e.s(["getHostname",()=>es],94706);let el=new WeakMap;function eu(e,t){let r;if(!t)return{pathname:e};let n=el.get(t);n||(n=t.map(e=>e.toLowerCase()),el.set(t,n));let a=e.split("/",2);if(!a[1])return{pathname:e};let i=a[1].toLowerCase(),o=n.indexOf(i);return o<0?{pathname:e}:(r=t[o],{pathname:e=e.slice(r.length+1)||"/",detectedLocale:r})}e.s(["normalizeLocalePath",()=>eu],19805);let ec=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function ed(e,t){return new URL(String(e).replace(ec,"localhost"),t&&String(t).replace(ec,"localhost"))}let ef=Symbol("NextURLInternal");class eh{constructor(e,t,r){let n,a;"object"==typeof t&&"pathname"in t||"string"==typeof t?(n=t,a=r||{}):a=r||t||{},this[ef]={url:ed(e,n??a.base),options:a,basePath:""},this.analyze()}analyze(){var e,t,r,n,a;let i=function(e,t){let{basePath:r,i18n:n,trailingSlash:a}=t.nextConfig??{},i={pathname:e,trailingSlash:"/"!==e?e.endsWith("/"):a};r&&c(i.pathname,r)&&(i.pathname=d(i.pathname,r),i.basePath=r);let o=i.pathname;if(i.pathname.startsWith("/_next/data/")&&i.pathname.endsWith(".json")){let e=i.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/");i.buildId=e[0],o="index"!==e[1]?`/${e.slice(1).join("/")}`:"/",!0===t.parseData&&(i.pathname=o)}if(n){let e=t.i18nProvider?t.i18nProvider.analyze(i.pathname):eu(i.pathname,n.locales);i.locale=e.detectedLocale,i.pathname=e.pathname??i.pathname,!e.detectedLocale&&i.buildId&&(e=t.i18nProvider?t.i18nProvider.analyze(o):eu(o,n.locales)).detectedLocale&&(i.locale=e.detectedLocale)}return i}(this[ef].url.pathname,{nextConfig:this[ef].options.nextConfig,parseData:!0,i18nProvider:this[ef].options.i18nProvider}),o=es(this[ef].url,this[ef].options.headers);this[ef].domainLocale=this[ef].options.i18nProvider?this[ef].options.i18nProvider.detectDomainLocale(o):en(null==(t=this[ef].options.nextConfig)||null==(e=t.i18n)?void 0:e.domains,o);let s=(null==(r=this[ef].domainLocale)?void 0:r.defaultLocale)||(null==(a=this[ef].options.nextConfig)||null==(n=a.i18n)?void 0:n.defaultLocale);this[ef].url.pathname=i.pathname,this[ef].defaultLocale=s,this[ef].basePath=i.basePath??"",this[ef].buildId=i.buildId,this[ef].locale=i.locale??s,this[ef].trailingSlash=i.trailingSlash}formatPathname(){var e;let t;return t=function(e,t,r,n){if(!t||t===r)return e;let a=e.toLowerCase();return!n&&(c(a,"/api")||c(a,`/${t.toLowerCase()}`))?e:ei(e,`/${t}`)}((e={basePath:this[ef].basePath,buildId:this[ef].buildId,defaultLocale:this[ef].options.forceLocale?void 0:this[ef].defaultLocale,locale:this[ef].locale,pathname:this[ef].url.pathname,trailingSlash:this[ef].trailingSlash}).pathname,e.locale,e.buildId?void 0:e.defaultLocale,e.ignorePrefix),(e.buildId||!e.trailingSlash)&&(t=ea(t)),e.buildId&&(t=eo(ei(t,`/_next/data/${e.buildId}`),"/"===e.pathname?"index.json":".json")),t=ei(t,e.basePath),!e.buildId&&e.trailingSlash?t.endsWith("/")?t:eo(t,"/"):ea(t)}formatSearch(){return this[ef].url.search}get buildId(){return this[ef].buildId}set buildId(e){this[ef].buildId=e}get locale(){return this[ef].locale??""}set locale(e){var t,r;if(!this[ef].locale||!(null==(r=this[ef].options.nextConfig)||null==(t=r.i18n)?void 0:t.locales.includes(e)))throw Object.defineProperty(TypeError(`The NextURL configuration includes no locale "${e}"`),"__NEXT_ERROR_CODE",{value:"E597",enumerable:!1,configurable:!0});this[ef].locale=e}get defaultLocale(){return this[ef].defaultLocale}get domainLocale(){return this[ef].domainLocale}get searchParams(){return this[ef].url.searchParams}get host(){return this[ef].url.host}set host(e){this[ef].url.host=e}get hostname(){return this[ef].url.hostname}set hostname(e){this[ef].url.hostname=e}get port(){return this[ef].url.port}set port(e){this[ef].url.port=e}get protocol(){return this[ef].url.protocol}set protocol(e){this[ef].url.protocol=e}get href(){let e=this.formatPathname(),t=this.formatSearch();return`${this.protocol}//${this.host}${e}${t}${this.hash}`}set href(e){this[ef].url=ed(e),this.analyze()}get origin(){return this[ef].url.origin}get pathname(){return this[ef].url.pathname}set pathname(e){this[ef].url.pathname=e}get hash(){return this[ef].url.hash}set hash(e){this[ef].url.hash=e}get search(){return this[ef].url.search}set search(e){this[ef].url.search=e}get password(){return this[ef].url.password}set password(e){this[ef].url.password=e}get username(){return this[ef].url.username}set username(e){this[ef].url.username=e}get basePath(){return this[ef].basePath}set basePath(e){this[ef].basePath=e.startsWith("/")?e:`/${e}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new eh(String(this),this[ef].options)}}e.s(["NextURL",()=>eh],3661);var ep=e.i(635);e.s([],43820);let eg=Symbol("internal request");class em extends Request{constructor(e,t={}){const r="string"!=typeof e&&"url"in e?e.url:String(e);et(r),e instanceof Request?super(e,t):super(r,t);const n=new eh(r,{headers:ee(this.headers),nextConfig:t.nextConfig});this[eg]={cookies:new ep.RequestCookies(this.headers),nextUrl:n,url:n.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[eg].cookies}get nextUrl(){return this[eg].nextUrl}get page(){throw new D}get ua(){throw new j}get url(){return this[eg].url}}e.s(["NextRequest",()=>em],85867);class ey{static get(e,t,r){let n=Reflect.get(e,t,r);return"function"==typeof n?n.bind(e):n}static set(e,t,r,n){return Reflect.set(e,t,r,n)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}e.s(["ReflectAdapter",()=>ey],49783);let ev="next-router-prefetch",eb=["rsc","next-router-state-tree",ev,"next-hmr-refresh","next-router-segment-prefetch"];e.s(["ACTION_HEADER",0,"next-action","FLIGHT_HEADERS",0,eb,"NEXT_REWRITTEN_PATH_HEADER",0,"x-nextjs-rewritten-path","NEXT_REWRITTEN_QUERY_HEADER",0,"x-nextjs-rewritten-query","NEXT_ROUTER_PREFETCH_HEADER",0,ev,"NEXT_RSC_UNION_QUERY",0,"_rsc","RSC_HEADER",0,"rsc"],8900);class eE extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new eE}}class e_ extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,n){if("symbol"==typeof r)return ey.get(t,r,n);let a=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===a);if(void 0!==i)return ey.get(t,i,n)},set(t,r,n,a){if("symbol"==typeof r)return ey.set(t,r,n,a);let i=r.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===i);return ey.set(t,o??r,n,a)},has(t,r){if("symbol"==typeof r)return ey.has(t,r);let n=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===n);return void 0!==a&&ey.has(t,a)},deleteProperty(t,r){if("symbol"==typeof r)return ey.deleteProperty(t,r);let n=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===n);return void 0===a||ey.deleteProperty(t,a)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return eE.callable;default:return ey.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new e_(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,n]of this.entries())e.call(t,n,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}e.s(["HeadersAdapter",()=>e_],55468);class eR extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new eR}}class ew{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return eR.callable;default:return ey.get(e,t,r)}}})}}let eS=Symbol.for("next.mutated.cookies");function eC(e,t){let r,n=(r=t[eS])&&Array.isArray(r)&&0!==r.length?r:[];if(0===n.length)return!1;let a=new ep.ResponseCookies(e),i=a.getAll();for(let e of n)a.set(e);for(let e of i)a.set(e);return!0}class ex{static wrap(e,t){let r=new ep.ResponseCookies(new Headers);for(let t of e.getAll())r.set(t);let n=[],a=new Set,i=()=>{let e=A.workAsyncStorage.getStore();if(e&&(e.pathWasRevalidated=1),n=r.getAll().filter(e=>a.has(e.name)),t){let e=[];for(let t of n){let r=new ep.ResponseCookies(new Headers);r.set(t),e.push(r.toString())}t(e)}},o=new Proxy(r,{get(e,t,r){switch(t){case eS:return n;case"delete":return function(...t){a.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.delete(...t),o}finally{i()}};case"set":return function(...t){a.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t),o}finally{i()}};default:return ey.get(e,t,r)}}});return o}}function eT(e){let t=new Proxy(e.mutableCookies,{get(r,n,a){switch(n){case"delete":return function(...n){return eP(e,"cookies().delete"),r.delete(...n),t};case"set":return function(...n){return eP(e,"cookies().set"),r.set(...n),t};default:return ey.get(r,n,a)}}});return t}function eP(e,t){if("action"!==e.phase)throw new eR}e.s(["MutableRequestCookiesAdapter",()=>ex,"RequestCookiesAdapter",()=>ew,"appendMutableCookies",()=>eC,"createCookiesWithMutableAccessCheck",()=>eT],47986);var eO=((f=eO||{}).handleRequest="BaseServer.handleRequest",f.run="BaseServer.run",f.pipe="BaseServer.pipe",f.getStaticHTML="BaseServer.getStaticHTML",f.render="BaseServer.render",f.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",f.renderToResponse="BaseServer.renderToResponse",f.renderToHTML="BaseServer.renderToHTML",f.renderError="BaseServer.renderError",f.renderErrorToResponse="BaseServer.renderErrorToResponse",f.renderErrorToHTML="BaseServer.renderErrorToHTML",f.render404="BaseServer.render404",f),eA=((h=eA||{}).loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",h.loadComponents="LoadComponents.loadComponents",h),ek=((p=ek||{}).getRequestHandler="NextServer.getRequestHandler",p.getRequestHandlerWithMetadata="NextServer.getRequestHandlerWithMetadata",p.getServer="NextServer.getServer",p.getServerRequestHandler="NextServer.getServerRequestHandler",p.createServer="createServer.createServer",p),eN=((g=eN||{}).compression="NextNodeServer.compression",g.getBuildId="NextNodeServer.getBuildId",g.createComponentTree="NextNodeServer.createComponentTree",g.clientComponentLoading="NextNodeServer.clientComponentLoading",g.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",g.generateStaticRoutes="NextNodeServer.generateStaticRoutes",g.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",g.generatePublicRoutes="NextNodeServer.generatePublicRoutes",g.generateImageRoutes="NextNodeServer.generateImageRoutes.route",g.sendRenderResult="NextNodeServer.sendRenderResult",g.proxyRequest="NextNodeServer.proxyRequest",g.runApi="NextNodeServer.runApi",g.render="NextNodeServer.render",g.renderHTML="NextNodeServer.renderHTML",g.imageOptimizer="NextNodeServer.imageOptimizer",g.getPagePath="NextNodeServer.getPagePath",g.getRoutesManifest="NextNodeServer.getRoutesManifest",g.findPageComponents="NextNodeServer.findPageComponents",g.getFontManifest="NextNodeServer.getFontManifest",g.getServerComponentManifest="NextNodeServer.getServerComponentManifest",g.getRequestHandler="NextNodeServer.getRequestHandler",g.renderToHTML="NextNodeServer.renderToHTML",g.renderError="NextNodeServer.renderError",g.renderErrorToHTML="NextNodeServer.renderErrorToHTML",g.render404="NextNodeServer.render404",g.startResponse="NextNodeServer.startResponse",g.route="route",g.onProxyReq="onProxyReq",g.apiResolver="apiResolver",g.internalFetch="internalFetch",g),eI=((m=eI||{}).startServer="startServer.startServer",m),e$=((y=e$||{}).getServerSideProps="Render.getServerSideProps",y.getStaticProps="Render.getStaticProps",y.renderToString="Render.renderToString",y.renderDocument="Render.renderDocument",y.createBodyResult="Render.createBodyResult",y),eD=((v=eD||{}).renderToString="AppRender.renderToString",v.renderToReadableStream="AppRender.renderToReadableStream",v.getBodyResult="AppRender.getBodyResult",v.fetch="AppRender.fetch",v),ej=((b=ej||{}).executeRoute="Router.executeRoute",b),eM=((E=eM||{}).runHandler="Node.runHandler",E),eU=((_=eU||{}).runHandler="AppRouteRouteHandlers.runHandler",_),eL=((R=eL||{}).generateMetadata="ResolveMetadata.generateMetadata",R.generateViewport="ResolveMetadata.generateViewport",R),eH=((w=eH||{}).execute="Middleware.execute",w);let eq=new Set(["Middleware.execute","BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.createComponentTree","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule","NextNodeServer.startResponse","NextNodeServer.clientComponentLoading"]),eF=new Set(["NextNodeServer.findPageComponents","NextNodeServer.createComponentTree","NextNodeServer.clientComponentLoading"]);function eX(e){return null!==e&&"object"==typeof e&&"then"in e&&"function"==typeof e.then}e.s(["AppRenderSpan",()=>eD,"AppRouteRouteHandlersSpan",()=>eU,"BaseServerSpan",()=>eO,"LogSpanAllowList",0,eF,"MiddlewareSpan",()=>eH,"NextNodeServerSpan",()=>eN,"NextVanillaSpanAllowlist",0,eq],546);let eB=process.env.NEXT_OTEL_PERFORMANCE_PREFIX,{context:eG,propagation:ez,trace:eW,SpanStatusCode:eV,SpanKind:eK,ROOT_CONTEXT:eY}=t=e.r(32063);class eJ extends Error{constructor(e,t){super(),this.bubble=e,this.result=t}}let eQ=(e,t)=>{"object"==typeof t&&null!==t&&t instanceof eJ&&t.bubble?e.setAttribute("next.bubble",!0):(t&&(e.recordException(t),e.setAttribute("error.type",t.name)),e.setStatus({code:eV.ERROR,message:null==t?void 0:t.message})),e.end()},eZ=new Map,e0=t.createContextKey("next.rootSpanId"),e1=0,e2={set(e,t,r){e.push({key:t,value:r})}},e4=(a=new class e{getTracerInstance(){return eW.getTracer("next.js","0.0.1")}getContext(){return eG}getTracePropagationData(){let e=eG.active(),t=[];return ez.inject(e,t,e2),t}getActiveScopeSpan(){return eW.getSpan(null==eG?void 0:eG.active())}withPropagatedContext(e,t,r){let n=eG.active();if(eW.getSpanContext(n))return t();let a=ez.extract(n,e,r);return eG.with(a,t)}trace(...e){let[t,r,n]=e,{fn:a,options:i}="function"==typeof r?{fn:r,options:{}}:{fn:n,options:{...r}},o=i.spanName??t;if(!eq.has(t)&&"1"!==process.env.NEXT_OTEL_VERBOSE||i.hideSpan)return a();let s=this.getSpanContext((null==i?void 0:i.parentSpan)??this.getActiveScopeSpan());s||(s=(null==eG?void 0:eG.active())??eY);let l=s.getValue(e0),u="number"!=typeof l||!eZ.has(l),c=e1++;return i.attributes={"next.span_name":o,"next.span_type":t,...i.attributes},eG.with(s.setValue(e0,c),()=>this.getTracerInstance().startActiveSpan(o,i,e=>{let r;eB&&t&&eF.has(t)&&(r="performance"in globalThis&&"measure"in performance?globalThis.performance.now():void 0);let n=!1,o=()=>{!n&&(n=!0,eZ.delete(c),r&&performance.measure(`${eB}:next-${(t.split(".").pop()||"").replace(/[A-Z]/g,e=>"-"+e.toLowerCase())}`,{start:r,end:performance.now()}))};if(u&&eZ.set(c,new Map(Object.entries(i.attributes??{}))),a.length>1)try{return a(e,t=>eQ(e,t))}catch(t){throw eQ(e,t),t}finally{o()}try{let t=a(e);if(eX(t))return t.then(t=>(e.end(),t)).catch(t=>{throw eQ(e,t),t}).finally(o);return e.end(),o(),t}catch(t){throw eQ(e,t),o(),t}}))}wrap(...e){let t=this,[r,n,a]=3===e.length?e:[e[0],{},e[1]];return eq.has(r)||"1"===process.env.NEXT_OTEL_VERBOSE?function(){let e=n;"function"==typeof e&&"function"==typeof a&&(e=e.apply(this,arguments));let i=arguments.length-1,o=arguments[i];if("function"!=typeof o)return t.trace(r,e,()=>a.apply(this,arguments));{let n=t.getContext().bind(eG.active(),o);return t.trace(r,e,(e,t)=>(arguments[i]=function(e){return null==t||t(e),n.apply(this,arguments)},a.apply(this,arguments)))}}:a}startSpan(...e){let[t,r]=e,n=this.getSpanContext((null==r?void 0:r.parentSpan)??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(t,r,n)}getSpanContext(e){return e?eW.setSpan(eG.active(),e):void 0}getRootSpanAttributes(){let e=eG.active().getValue(e0);return eZ.get(e)}setRootSpanAttribute(e,t){let r=eG.active().getValue(e0),n=eZ.get(r);n&&!n.has(e)&&n.set(e,t)}withSpan(e,t){let r=eW.setSpan(eG.active(),e);return eG.with(r,t)}},()=>a);function e3(e,t){let r=e_.from(e.headers);return{isOnDemandRevalidate:r.get(H)===t.previewModeId,revalidateOnlyGenerated:r.has(q)}}e.s(["SpanKind",()=>eK,"getTracer",()=>e4],68045);let e6="__prerender_bypass";Symbol("__next_preview_data");let e9=Symbol(e6);e.s(["COOKIE_NAME_PRERENDER_BYPASS",0,e6,"SYMBOL_CLEARED_COOKIES",0,e9,"checkIsOnDemandRevalidate",()=>e3],93441);class e8{constructor(e,t,r,n){var a;const i=e&&e3(t,e).isOnDemandRevalidate,o=null==(a=r.get(e6))?void 0:a.value;this._isEnabled=!!(!i&&o&&e&&o===e.previewModeId),this._previewModeId=null==e?void 0:e.previewModeId,this._mutableCookies=n}get isEnabled(){return this._isEnabled}enable(){if(!this._previewModeId)throw Object.defineProperty(Error("Invariant: previewProps missing previewModeId this should never happen"),"__NEXT_ERROR_CODE",{value:"E93",enumerable:!1,configurable:!0});this._mutableCookies.set({name:e6,value:this._previewModeId,httpOnly:!0,sameSite:"none",secure:!0,path:"/"}),this._isEnabled=!0}disable(){this._mutableCookies.set({name:e6,value:"",httpOnly:!0,sameSite:"none",secure:!0,path:"/",expires:new Date(0)}),this._isEnabled=!1}}function e7(e,t){if("x-middleware-set-cookie"in e.headers&&"string"==typeof e.headers["x-middleware-set-cookie"]){let r=e.headers["x-middleware-set-cookie"],n=new Headers;for(let e of Z(r))n.append("set-cookie",e);for(let e of new ep.ResponseCookies(n).getAll())t.set(e)}}function e5(e,t,r,n,a){return function(e,t,r,n,a,i,o,s,l,u,c,d){function f(e){r&&r.setHeader("Set-Cookie",e)}let h={};return{type:"request",phase:e,implicitTags:i,url:{pathname:n.pathname,search:n.search??""},rootParams:a,get headers(){return h.headers||(h.headers=function(e){let t=e_.from(e);for(let e of eb)t.delete(e);return e_.seal(t)}(t.headers)),h.headers},get cookies(){if(!h.cookies){let e=new ep.RequestCookies(e_.from(t.headers));e7(t,e),h.cookies=ew.seal(e)}return h.cookies},set cookies(value){h.cookies=value},get mutableCookies(){if(!h.mutableCookies){var p,g;let e,n=(p=t.headers,g=o||(r?f:void 0),e=new ep.RequestCookies(e_.from(p)),ex.wrap(e,g));e7(t,n),h.mutableCookies=n}return h.mutableCookies},get userspaceMutableCookies(){return h.userspaceMutableCookies||(h.userspaceMutableCookies=eT(this)),h.userspaceMutableCookies},get draftMode(){return h.draftMode||(h.draftMode=new e8(l,t,this.cookies,this.mutableCookies)),h.draftMode},renderResumeDataCache:null,isHmrRefresh:u,serverComponentsHmrCache:c||globalThis.__serverComponentsHmrCache,devFallbackParams:null}}("action",e,void 0,t,{},r,n,null,a,!1,void 0,null)}function te(e){throw Object.defineProperty(Error(`\`${e}\` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context`),"__NEXT_ERROR_CODE",{value:"E251",enumerable:!1,configurable:!0})}function tt(){throw Object.defineProperty(new i("Expected workUnitAsyncStorage to have a store."),"__NEXT_ERROR_CODE",{value:"E696",enumerable:!1,configurable:!0})}function tr(e){switch(e.type){case"prerender":case"prerender-runtime":case"prerender-ppr":case"prerender-client":return e.prerenderResumeDataCache;case"request":if(e.prerenderResumeDataCache)return e.prerenderResumeDataCache;case"prerender-legacy":case"cache":case"private-cache":case"unstable-cache":return null;default:return e}}function tn(e){switch(e.type){case"request":case"prerender":case"prerender-runtime":case"prerender-client":if(e.renderResumeDataCache)return e.renderResumeDataCache;case"prerender-ppr":return e.prerenderResumeDataCache??null;case"cache":case"private-cache":case"unstable-cache":case"prerender-legacy":return null;default:return e}}function ta(e){switch(e.type){case"prerender":case"prerender-client":case"prerender-runtime":return e.cacheSignal;case"request":if(e.cacheSignal)return e.cacheSignal;case"prerender-ppr":case"prerender-legacy":case"cache":case"private-cache":case"unstable-cache":return null;default:return e}}e.s(["createRequestStoreForAPI",()=>e5],72445),e.i(85021),e.s(["getCacheSignal",()=>ta,"getPrerenderResumeDataCache",()=>tr,"getRenderResumeDataCache",()=>tn,"throwForMissingRequestStore",()=>te,"throwInvariantForMissingStore",()=>tt],66401);var ti=e.i(70903),to=e.i(51615);class ts{constructor(e,t,r){this.prev=null,this.next=null,this.key=e,this.data=t,this.size=r}}class tl{constructor(){this.prev=null,this.next=null}}class tu{constructor(e,t){this.cache=new Map,this.totalSize=0,this.maxSize=e,this.calculateSize=t,this.head=new tl,this.tail=new tl,this.head.next=this.tail,this.tail.prev=this.head}addToHead(e){e.prev=this.head,e.next=this.head.next,this.head.next.prev=e,this.head.next=e}removeNode(e){e.prev.next=e.next,e.next.prev=e.prev}moveToHead(e){this.removeNode(e),this.addToHead(e)}removeTail(){let e=this.tail.prev;return this.removeNode(e),e}set(e,t){let r=(null==this.calculateSize?void 0:this.calculateSize.call(this,t))??1;if(r>this.maxSize)return void console.warn("Single item size exceeds maxSize");let n=this.cache.get(e);if(n)n.data=t,this.totalSize=this.totalSize-n.size+r,n.size=r,this.moveToHead(n);else{let n=new ts(e,t,r);this.cache.set(e,n),this.addToHead(n),this.totalSize+=r}for(;this.totalSize>this.maxSize&&this.cache.size>0;){let e=this.removeTail();this.cache.delete(e.key),this.totalSize-=e.size}}has(e){return this.cache.has(e)}get(e){let t=this.cache.get(e);if(t)return this.moveToHead(t),t.data}*[Symbol.iterator](){let e=this.head.next;for(;e&&e!==this.tail;){let t=e;yield[t.key,t.data],e=e.next}}remove(e){let t=this.cache.get(e);t&&(this.removeNode(t),this.cache.delete(e),this.totalSize-=t.size)}get size(){return this.cache.size}get currentSize(){return this.totalSize}}e.s(["LRUCache",()=>tu],66011);let tc=new Map,td=(e,t)=>{for(let r of e){let e=tc.get(r),n=null==e?void 0:e.expired;if("number"==typeof n&&n<=Date.now()&&n>t)return!0}return!1},tf=(e,t)=>{for(let r of e){let e=tc.get(r),n=(null==e?void 0:e.stale)??0;if("number"==typeof n&&n>t)return!0}return!1};process.env.NEXT_PRIVATE_DEBUG_CACHE,Symbol.for("@next/cache-handlers");let th=Symbol.for("@next/cache-handlers-map"),tp=Symbol.for("@next/cache-handlers-set"),tg=globalThis;function tm(){if(tg[tp])return tg[tp].values()}function ty(){if(tg[th])return tg[th].entries()}async function tv(e,t){if(!e)return t();let r=tb(e);try{return await t()}finally{var n,a;let t,i,o=(n=r,a=tb(e),t=new Set(n.pendingRevalidatedTags.map(e=>{let t="object"==typeof e.profile?JSON.stringify(e.profile):e.profile||"";return`${e.tag}:${t}`})),i=new Set(n.pendingRevalidateWrites),{pendingRevalidatedTags:a.pendingRevalidatedTags.filter(e=>{let r="object"==typeof e.profile?JSON.stringify(e.profile):e.profile||"";return!t.has(`${e.tag}:${r}`)}),pendingRevalidates:Object.fromEntries(Object.entries(a.pendingRevalidates).filter(([e])=>!(e in n.pendingRevalidates))),pendingRevalidateWrites:a.pendingRevalidateWrites.filter(e=>!i.has(e))});await t_(e,o)}}function tb(e){return{pendingRevalidatedTags:e.pendingRevalidatedTags?[...e.pendingRevalidatedTags]:[],pendingRevalidates:{...e.pendingRevalidates},pendingRevalidateWrites:e.pendingRevalidateWrites?[...e.pendingRevalidateWrites]:[]}}async function tE(e,t,r){if(0===e.length)return;let n=tm(),a=[],i=new Map;for(let t of e){let e,r=t.profile;for(let[t]of i)if("string"==typeof t&&"string"==typeof r&&t===r||"object"==typeof t&&"object"==typeof r&&JSON.stringify(t)===JSON.stringify(r)||t===r){e=t;break}let n=e||r;i.has(n)||i.set(n,[]),i.get(n).push(t.tag)}for(let[e,s]of i){let i;if(e){let t;if("object"==typeof e)t=e;else if("string"==typeof e){var o;if(!(t=null==r||null==(o=r.cacheLifeProfiles)?void 0:o[e]))throw Object.defineProperty(Error(`Invalid profile provided "${e}" must be configured under cacheLife in next.config or be "max"`),"__NEXT_ERROR_CODE",{value:"E873",enumerable:!1,configurable:!0})}t&&(i={expire:t.expire})}for(let t of n||[])e?a.push(null==t.updateTags?void 0:t.updateTags.call(t,s,i)):a.push(null==t.updateTags?void 0:t.updateTags.call(t,s));t&&a.push(t.revalidateTag(s,i))}await Promise.all(a)}async function t_(e,t){let r=(null==t?void 0:t.pendingRevalidatedTags)??e.pendingRevalidatedTags??[],n=(null==t?void 0:t.pendingRevalidates)??e.pendingRevalidates??{},a=(null==t?void 0:t.pendingRevalidateWrites)??e.pendingRevalidateWrites??[];return Promise.all([tE(r,e.incrementalCache,e),...Object.values(n),...a])}e.s(["getCacheHandlerEntries",()=>ty,"getCacheHandlers",()=>tm],72451),e.s(["executeRevalidates",()=>t_,"withExecuteRevalidates",()=>tv],49316);let tR=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class tw{disable(){throw tR}getStore(){}run(){throw tR}exit(){throw tR}enterWith(){throw tR}static bind(e){return e}}let tS="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function tC(e){return tS?tS.bind(e):tw.bind(e)}function tx(){return tS?tS.snapshot():function(e,...t){return e(...t)}}e.s(["bindSnapshot",()=>tC,"createSnapshot",()=>tx],79698);var tT=e.i(18904);e.i(34953),e.s([],12112);var tP=e.i(85105);class tO{constructor({waitUntil:e,onClose:t,onTaskError:r}){this.workUnitStores=new Set,this.waitUntil=e,this.onClose=t,this.onTaskError=r,this.callbackQueue=new ti.default,this.callbackQueue.pause()}after(e){if(eX(e))this.waitUntil||tA(),this.waitUntil(e.catch(e=>this.reportTaskError("promise",e)));else if("function"==typeof e)this.addCallback(e);else throw Object.defineProperty(Error("`after()`: Argument must be a promise or a function"),"__NEXT_ERROR_CODE",{value:"E50",enumerable:!1,configurable:!0})}addCallback(e){this.waitUntil||tA();let t=tT.workUnitAsyncStorage.getStore();t&&this.workUnitStores.add(t);let r=tP.afterTaskAsyncStorage.getStore(),n=r?r.rootTaskSpawnPhase:null==t?void 0:t.phase;this.runCallbacksOnClosePromise||(this.runCallbacksOnClosePromise=this.runCallbacksOnClose(),this.waitUntil(this.runCallbacksOnClosePromise));let a=tC(async()=>{try{await tP.afterTaskAsyncStorage.run({rootTaskSpawnPhase:n},()=>e())}catch(e){this.reportTaskError("function",e)}});this.callbackQueue.add(a)}async runCallbacksOnClose(){return await new Promise(e=>this.onClose(e)),this.runCallbacks()}async runCallbacks(){if(0===this.callbackQueue.size)return;for(let e of this.workUnitStores)e.phase="after";let e=A.workAsyncStorage.getStore();if(!e)throw Object.defineProperty(new i("Missing workStore in AfterContext.runCallbacks"),"__NEXT_ERROR_CODE",{value:"E547",enumerable:!1,configurable:!0});return tv(e,()=>(this.callbackQueue.start(),this.callbackQueue.onIdle()))}reportTaskError(e,t){if(console.error("promise"===e?"A promise passed to `after()` rejected:":"An error occurred in a function passed to `after()`:",t),this.onTaskError)try{null==this.onTaskError||this.onTaskError.call(this,t)}catch(e){console.error(Object.defineProperty(new i("`onTaskError` threw while handling an error thrown from an `after` task",{cause:e}),"__NEXT_ERROR_CODE",{value:"E569",enumerable:!1,configurable:!0}))}}}function tA(){throw Object.defineProperty(Error("`after()` will not work correctly, because `waitUntil` is not available in the current environment."),"__NEXT_ERROR_CODE",{value:"E91",enumerable:!1,configurable:!0})}function tk(e){let t,r={then:(n,a)=>(t||(t=Promise.resolve(e())),t.then(e=>{r.value=e}).catch(()=>{}),t.then(n,a))};return r}function tN({page:e,renderOpts:t,isPrefetchRequest:r,buildId:n,previouslyRevalidatedTags:a,nonce:i}){let o=!t.shouldWaitOnAllReady&&!t.supportsDynamicResponse&&!t.isDraftMode&&!t.isPossibleServerAction,l=t.dev??!1,u=l||o&&(!!process.env.NEXT_DEBUG_BUILD||"1"===process.env.NEXT_SSG_FETCH_METRICS),c={isStaticGeneration:o,page:e,route:s(e),incrementalCache:t.incrementalCache||globalThis.__incrementalCache,cacheLifeProfiles:t.cacheLifeProfiles,isBuildTimePrerendering:t.nextExport,hasReadableErrorStacks:t.hasReadableErrorStacks,fetchCache:t.fetchCache,isOnDemandRevalidate:t.isOnDemandRevalidate,isDraftMode:t.isDraftMode,isPrefetchRequest:r,buildId:n,reactLoadableManifest:(null==t?void 0:t.reactLoadableManifest)||{},assetPrefix:(null==t?void 0:t.assetPrefix)||"",nonce:i,afterContext:function(e){let{waitUntil:t,onClose:r,onAfterTaskError:n}=e;return new tO({waitUntil:t,onClose:r,onTaskError:n})}(t),cacheComponentsEnabled:t.cacheComponents,dev:l,previouslyRevalidatedTags:a,refreshTagsByCacheKind:function(){let e=new Map,t=ty();if(t)for(let[r,n]of t)"refreshTags"in n&&e.set(r,tk(async()=>n.refreshTags()));return e}(),runInCleanSnapshot:tx(),shouldTrackFetchMetrics:u,reactServerErrorsByDigest:new Map};return t.store=c,c}async function tI(e,t,r){let n=new Set;for(let t of(e=>{let t=["/layout"];if(e.startsWith("/")){let r=e.split("/");for(let e=1;e<r.length+1;e++){let n=r.slice(0,e).join("/");n&&(n.endsWith("/page")||n.endsWith("/route")||(n=`${n}${!n.endsWith("/")?"/":""}layout`),t.push(n))}}return t})(e))t=`${Y}${t}`,n.add(t);if(t.pathname&&(!r||0===r.size)){let e=`${Y}${t.pathname}`;n.add(e)}n.has(`${Y}/`)&&n.add(`${Y}/index`),n.has(`${Y}/index`)&&n.add(`${Y}/`);let a=Array.from(n);return{tags:a,expirationsByCacheKind:function(e){let t=new Map,r=ty();if(r)for(let[n,a]of r)"getExpiration"in a&&t.set(n,tk(async()=>a.getExpiration(e)));return t}(a)}}e.s(["createWorkStore",()=>tN],88154),e.s(["getImplicitTags",()=>tI],11573);class t${constructor(){let e,t;this.promise=new Promise((r,n)=>{e=r,t=n}),this.resolve=e,this.reject=t}}e.s(["DetachedPromise",()=>t$],78116);class tD{constructor(e,t=e=>e()){this.cacheKeyFn=e,this.schedulerFn=t,this.pending=new Map}static create(e){return new tD(null==e?void 0:e.cacheKeyFn,null==e?void 0:e.schedulerFn)}async batch(e,t){let r=this.cacheKeyFn?await this.cacheKeyFn(e):e;if(null===r)return t({resolve:e=>Promise.resolve(e),key:e});let n=this.pending.get(r);if(n)return n;let{promise:a,resolve:i,reject:o}=new t$;return this.pending.set(r,a),this.schedulerFn(async()=>{try{let r=await t({resolve:i,key:e});i(r)}catch(e){o(e)}finally{this.pending.delete(r)}}),a}}let tj=e=>{Promise.resolve().then(()=>{setTimeout(e,0)})};e.s(["scheduleImmediate",0,e=>{setTimeout(e,0)},"scheduleOnNextTick",0,tj],74715);var tM=((S={}).APP_PAGE="APP_PAGE",S.APP_ROUTE="APP_ROUTE",S.PAGES="PAGES",S.FETCH="FETCH",S.REDIRECT="REDIRECT",S.IMAGE="IMAGE",S),tU=((C={}).APP_PAGE="APP_PAGE",C.APP_ROUTE="APP_ROUTE",C.PAGES="PAGES",C.FETCH="FETCH",C.IMAGE="IMAGE",C);function tL(){}e.s(["CachedRouteKind",()=>tM,"IncrementalCacheKind",()=>tU],34277),new Uint8Array([60,104,116,109,108]),new Uint8Array([60,98,111,100,121]),new Uint8Array([60,47,104,101,97,100,62]),new Uint8Array([60,47,98,111,100,121,62]),new Uint8Array([60,47,104,116,109,108,62]),new Uint8Array([60,47,98,111,100,121,62,60,47,104,116,109,108,62]),new Uint8Array([60,109,101,116,97,32,110,97,109,101,61,34,194,171,110,120,116,45,105,99,111,110,194,187,34]);let tH=new TextEncoder;function tq(e){return new ReadableStream({start(t){t.enqueue(tH.encode(e)),t.close()}})}function tF(e){return new ReadableStream({start(t){t.enqueue(e),t.close()}})}async function tX(e,t){let r=new TextDecoder("utf-8",{fatal:!0}),n="";for await(let a of e){if(null==t?void 0:t.aborted)return n;n+=r.decode(a,{stream:!0})}return n+r.decode()}let tB=Symbol.for("NextInternalRequestMeta");function tG(e,t){let r=e[tB]||{};return"string"==typeof t?r[t]:r}function tz(e,t,r){let n=tG(e);return n[t]=r,e[tB]=n,n}e.s(["NEXT_REQUEST_META",0,tB,"addRequestMeta",()=>tz,"getRequestMeta",()=>tG],4842);let tW=e=>!0;e.s(["isNodeNextRequest",0,e=>!1,"isNodeNextResponse",0,e=>!1,"isWebNextRequest",0,tW],59106);let tV="ResponseAborted";class tK extends Error{constructor(...e){super(...e),this.name=tV}}function tY(e){let t=new AbortController;return e.once("close",()=>{e.writableFinished||t.abort(new tK)}),t}function tJ(e){let{errored:t,destroyed:r}=e;if(t||r)return AbortSignal.abort(t??new tK);let{signal:n}=tY(e);return n}class tQ{static fromBaseNextRequest(e,t){if(tW(e))return tQ.fromWebNextRequest(e);throw Object.defineProperty(Error("Invariant: Unsupported NextRequest type"),"__NEXT_ERROR_CODE",{value:"E345",enumerable:!1,configurable:!0})}static fromNodeNextRequest(e,t){let r,n=null;if("GET"!==e.method&&"HEAD"!==e.method&&e.body&&(n=e.body),e.url.startsWith("http"))r=new URL(e.url);else{let t=tG(e,"initURL");r=t&&t.startsWith("http")?new URL(e.url,t):new URL(e.url,"http://n")}return new em(r,{method:e.method,headers:Q(e.headers),duplex:"half",signal:t,...t.aborted?{}:{body:n}})}static fromWebNextRequest(e){let t=null;return"GET"!==e.method&&"HEAD"!==e.method&&(t=e.body),new em(e.url,{method:e.method,headers:Q(e.headers),duplex:"half",signal:e.request.signal,...e.request.signal.aborted?{}:{body:t}})}}e.s(["NextRequestAdapter",()=>tQ,"ResponseAbortedName",0,tV,"createAbortController",()=>tY,"signalFromNodeResponse",()=>tJ],83877);let tZ=0,t0=0,t1=0;function t2(e){return(null==e?void 0:e.name)==="AbortError"||(null==e?void 0:e.name)===tV}async function t4(e,t,r){try{let{errored:n,destroyed:a}=t;if(n||a)return;let i=tY(t),o=function(e,t){let r=!1,n=new t$;function a(){n.resolve()}e.on("drain",a),e.once("close",()=>{e.off("drain",a),n.resolve()});let i=new t$;return e.once("finish",()=>{i.resolve()}),new WritableStream({write:async t=>{if(!r){if(r=!0,"performance"in globalThis&&process.env.NEXT_OTEL_PERFORMANCE_PREFIX){let e=function(e={}){let t=0===tZ?void 0:{clientComponentLoadStart:tZ,clientComponentLoadTimes:t0,clientComponentLoadCount:t1};return e.reset&&(tZ=0,t0=0,t1=0),t}();e&&performance.measure(`${process.env.NEXT_OTEL_PERFORMANCE_PREFIX}:next-client-component-loading`,{start:e.clientComponentLoadStart,end:e.clientComponentLoadStart+e.clientComponentLoadTimes})}e.flushHeaders(),e4().trace(eN.startResponse,{spanName:"start response"},()=>void 0)}try{let r=e.write(t);"flush"in e&&"function"==typeof e.flush&&e.flush(),r||(await n.promise,n=new t$)}catch(t){throw e.end(),Object.defineProperty(Error("failed to write chunk to response",{cause:t}),"__NEXT_ERROR_CODE",{value:"E321",enumerable:!1,configurable:!0})}},abort:t=>{e.writableFinished||e.destroy(t)},close:async()=>{if(t&&await t,!e.writableFinished)return e.end(),i.promise}})}(t,r);await e.pipeTo(o,{signal:i.signal})}catch(e){if(t2(e))return;throw Object.defineProperty(Error("failed to pipe response",{cause:e}),"__NEXT_ERROR_CODE",{value:"E180",enumerable:!1,configurable:!0})}}e.s(["isAbortError",()=>t2,"pipeToNodeResponse",()=>t4],13651);class t3{static #e=this.EMPTY=new t3(null,{metadata:{},contentType:null});static fromStatic(e,t){return new t3(e,{metadata:{},contentType:t})}constructor(e,{contentType:t,waitUntil:r,metadata:n}){this.response=e,this.contentType=t,this.metadata=n,this.waitUntil=r}assignMetadata(e){Object.assign(this.metadata,e)}get isNull(){return null===this.response}get isDynamic(){return"string"!=typeof this.response}toUnchunkedString(e=!1){if(null===this.response)return"";if("string"!=typeof this.response){if(!e)throw Object.defineProperty(new i("dynamic responses cannot be unchunked. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E732",enumerable:!1,configurable:!0});return tX(this.readable)}return this.response}get readable(){return null===this.response?new ReadableStream({start(e){e.close()}}):"string"==typeof this.response?tq(this.response):to.Buffer.isBuffer(this.response)?tF(this.response):Array.isArray(this.response)?function(...e){if(0===e.length)return new ReadableStream({start(e){e.close()}});if(1===e.length)return e[0];let{readable:t,writable:r}=new TransformStream,n=e[0].pipeTo(r,{preventClose:!0}),a=1;for(;a<e.length-1;a++){let t=e[a];n=n.then(()=>t.pipeTo(r,{preventClose:!0}))}let i=e[a];return(n=n.then(()=>i.pipeTo(r))).catch(tL),t}(...this.response):this.response}coerce(){return null===this.response?[]:"string"==typeof this.response?[tq(this.response)]:Array.isArray(this.response)?this.response:to.Buffer.isBuffer(this.response)?[tF(this.response)]:[this.response]}unshift(e){this.response=this.coerce(),this.response.unshift(e)}push(e){this.response=this.coerce(),this.response.push(e)}async pipeTo(e){try{await this.readable.pipeTo(e,{preventClose:!0}),this.waitUntil&&await this.waitUntil,await e.close()}catch(t){if(t2(t))return void await e.abort(t);throw t}}async pipeToNodeResponse(e){await t4(this.readable,e,this.waitUntil)}}var t6=((x={}).PAGES="PAGES",x.PAGES_API="PAGES_API",x.APP_PAGE="APP_PAGE",x.APP_ROUTE="APP_ROUTE",x.IMAGE="IMAGE",x);async function t9(e){var t,r;return{...e,value:(null==(t=e.value)?void 0:t.kind)===tM.PAGES?{kind:tM.PAGES,html:await e.value.html.toUnchunkedString(!0),pageData:e.value.pageData,headers:e.value.headers,status:e.value.status}:(null==(r=e.value)?void 0:r.kind)===tM.APP_PAGE?{kind:tM.APP_PAGE,html:await e.value.html.toUnchunkedString(!0),postponed:e.value.postponed,rscData:e.value.rscData,headers:e.value.headers,status:e.value.status,segmentData:e.value.segmentData}:e.value}}async function t8(e){var t,r;return e?{isMiss:e.isMiss,isStale:e.isStale,cacheControl:e.cacheControl,value:(null==(t=e.value)?void 0:t.kind)===tM.PAGES?{kind:tM.PAGES,html:t3.fromStatic(e.value.html,M),pageData:e.value.pageData,headers:e.value.headers,status:e.value.status}:(null==(r=e.value)?void 0:r.kind)===tM.APP_PAGE?{kind:tM.APP_PAGE,html:t3.fromStatic(e.value.html,M),rscData:e.value.rscData,headers:e.value.headers,status:e.value.status,postponed:e.value.postponed,segmentData:e.value.segmentData}:e.value}:null}e.s(["RouteKind",()=>t6],23646);class t7{constructor(e){this.getBatcher=tD.create({cacheKeyFn:({key:e,isOnDemandRevalidate:t})=>`${e}-${t?"1":"0"}`,schedulerFn:tj}),this.revalidateBatcher=tD.create({schedulerFn:tj}),this.minimal_mode=e}async get(e,t,r){var n;if(!e)return t({hasResolved:!1,previousCacheEntry:null});if(this.minimal_mode&&(null==(n=this.previousCacheItem)?void 0:n.key)===e&&this.previousCacheItem.expiresAt>Date.now())return t8(this.previousCacheItem.entry);let{incrementalCache:a,isOnDemandRevalidate:i=!1,isFallback:o=!1,isRoutePPREnabled:s=!1,isPrefetch:l=!1,waitUntil:u,routeKind:c}=r;return t8(await this.getBatcher.batch({key:e,isOnDemandRevalidate:i},({resolve:r})=>{let n=this.handleGet(e,t,{incrementalCache:a,isOnDemandRevalidate:i,isFallback:o,isRoutePPREnabled:s,isPrefetch:l,routeKind:c},r);return u&&u(n),n}))}async handleGet(e,t,r,n){let a=null,i=!1;try{if((a=this.minimal_mode?null:await r.incrementalCache.get(e,{kind:function(e){switch(e){case t6.PAGES:return tU.PAGES;case t6.APP_PAGE:return tU.APP_PAGE;case t6.IMAGE:return tU.IMAGE;case t6.APP_ROUTE:return tU.APP_ROUTE;case t6.PAGES_API:throw Object.defineProperty(Error(`Unexpected route kind ${e}`),"__NEXT_ERROR_CODE",{value:"E64",enumerable:!1,configurable:!0});default:return e}}(r.routeKind),isRoutePPREnabled:r.isRoutePPREnabled,isFallback:r.isFallback}))&&!r.isOnDemandRevalidate&&(n(a),i=!0,!a.isStale||r.isPrefetch))return a;let o=await this.revalidate(e,r.incrementalCache,r.isRoutePPREnabled,r.isFallback,t,a,null!==a&&!r.isOnDemandRevalidate);if(!o)return this.minimal_mode&&(this.previousCacheItem=void 0),null;return r.isOnDemandRevalidate,o}catch(e){if(i)return console.error(e),null;throw e}}async revalidate(e,t,r,n,a,i,o,s){return this.revalidateBatcher.batch(e,()=>{let l=this.handleRevalidate(e,t,r,n,a,i,o);return s&&s(l),l})}async handleRevalidate(e,t,r,n,a,i,o){try{let s=await a({hasResolved:o,previousCacheEntry:i,isRevalidating:!0});if(!s)return null;let l=await t9({...s,isMiss:!i});return l.cacheControl&&(this.minimal_mode?this.previousCacheItem={key:e,entry:l,expiresAt:Date.now()+1e3}:await t.set(e,l.value,{cacheControl:l.cacheControl,isRoutePPREnabled:r,isFallback:n})),l}catch(a){if(null==i?void 0:i.cacheControl){let a=Math.min(Math.max(i.cacheControl.revalidate||3,3),30),o=void 0===i.cacheControl.expire?void 0:Math.max(a+3,i.cacheControl.expire);await t.set(e,i.value,{cacheControl:{revalidate:a,expire:o},isRoutePPREnabled:r,isFallback:n})}throw a}}}e.s(["default",()=>t7],27064);var t5=e.i(82023);class re{constructor(e){this.fs=e,this.tasks=[]}findOrCreateTask(e){for(let t of this.tasks)if(t[0]===e)return t;let t=this.fs.mkdir(e);t.catch(()=>{});let r=[e,t,[]];return this.tasks.push(r),r}append(e,t){let r=this.findOrCreateTask(t5.default.dirname(e)),n=r[1].then(()=>this.fs.writeFile(e,t));n.catch(()=>{}),r[2].push(n)}wait(){return Promise.all(this.tasks.flatMap(e=>e[2]))}}class rt{static #e=this.debug=!!process.env.NEXT_PRIVATE_DEBUG_CACHE;constructor(e){if(this.fs=e.fs,this.flushToDisk=e.flushToDisk,this.serverDistDir=e.serverDistDir,this.revalidatedTags=e.revalidatedTags,e.maxMemoryCacheSize)if(rt.memoryCache)rt.debug&&console.log("FileSystemCache: memory store already initialized");else{var t;rt.debug&&console.log("FileSystemCache: using memory store for fetch cache"),t=e.maxMemoryCacheSize,r||(r=new tu(t,function({value:e}){var t;if(!e)return 25;if(e.kind===tM.REDIRECT)return JSON.stringify(e.props).length;if(e.kind===tM.IMAGE)throw Object.defineProperty(Error("invariant image should not be incremental-cache"),"__NEXT_ERROR_CODE",{value:"E501",enumerable:!1,configurable:!0});if(e.kind===tM.FETCH)return JSON.stringify(e.data||"").length;if(e.kind===tM.APP_ROUTE)return e.body.length;return e.html.length+((null==(t=JSON.stringify(e.kind===tM.APP_PAGE?e.rscData:e.pageData))?void 0:t.length)||0)})),rt.memoryCache=r}else rt.debug&&console.log("FileSystemCache: not using memory store for fetch cache")}resetRequestCache(){}async revalidateTag(e,t){if(e="string"==typeof e?[e]:e,rt.debug&&console.log("FileSystemCache: revalidateTag",e,t),0===e.length)return;let r=Date.now();for(let n of e){let e=tc.get(n)||{};if(t){let a={...e};a.stale=r,void 0!==t.expire&&(a.expired=r+1e3*t.expire),tc.set(n,a)}else tc.set(n,{...e,expired:r})}}async get(...e){var t,r,n,a,i,o;let[s,l]=e,{kind:u}=l,c=null==(t=rt.memoryCache)?void 0:t.get(s);if(rt.debug&&(u===tU.FETCH?console.log("FileSystemCache: get",s,l.tags,u,!!c):console.log("FileSystemCache: get",s,u,!!c)),(null==c||null==(r=c.value)?void 0:r.kind)===tM.APP_PAGE||(null==c||null==(n=c.value)?void 0:n.kind)===tM.APP_ROUTE||(null==c||null==(a=c.value)?void 0:a.kind)===tM.PAGES){let e=null==(o=c.value.headers)?void 0:o[W];if("string"==typeof e){let t=e.split(",");if(t.length>0&&td(t,c.lastModified))return rt.debug&&console.log("FileSystemCache: expired tags",t),null}}else if((null==c||null==(i=c.value)?void 0:i.kind)===tM.FETCH){let e=l.kind===tU.FETCH?[...l.tags||[],...l.softTags||[]]:[];if(e.some(e=>this.revalidatedTags.includes(e)))return rt.debug&&console.log("FileSystemCache: was revalidated",e),null;if(td(e,c.lastModified))return rt.debug&&console.log("FileSystemCache: expired tags",e),null}return c??null}async set(e,t,r){var n;if(null==(n=rt.memoryCache)||n.set(e,{value:t,lastModified:Date.now()}),rt.debug&&console.log("FileSystemCache: set",e),!this.flushToDisk||!t)return;let a=new re(this.fs);if(t.kind===tM.APP_ROUTE){let r=this.getFilePath(`${e}.body`,tU.APP_ROUTE);a.append(r,t.body);let n={headers:t.headers,status:t.status,postponed:void 0,segmentPaths:void 0};a.append(r.replace(/\.body$/,z),JSON.stringify(n,null,2))}else if(t.kind===tM.PAGES||t.kind===tM.APP_PAGE){let n=t.kind===tM.APP_PAGE,i=this.getFilePath(`${e}.html`,n?tU.APP_PAGE:tU.PAGES);if(a.append(i,t.html),r.fetchCache||r.isFallback||r.isRoutePPREnabled||a.append(this.getFilePath(`${e}${n?B:G}`,n?tU.APP_PAGE:tU.PAGES),n?t.rscData:JSON.stringify(t.pageData)),(null==t?void 0:t.kind)===tM.APP_PAGE){let e;if(t.segmentData){e=[];let r=i.replace(/\.html$/,F);for(let[n,i]of t.segmentData){e.push(n);let t=r+n+X;a.append(t,i)}}let r={headers:t.headers,status:t.status,postponed:t.postponed,segmentPaths:e};a.append(i.replace(/\.html$/,z),JSON.stringify(r))}}else if(t.kind===tM.FETCH){let n=this.getFilePath(e,tU.FETCH);a.append(n,JSON.stringify({...t,tags:r.fetchCache?r.tags:[]}))}await a.wait()}getFilePath(e,t){switch(t){case tU.FETCH:return t5.default.join(this.serverDistDir,"..","cache","fetch-cache",e);case tU.PAGES:return t5.default.join(this.serverDistDir,"pages",e);case tU.IMAGE:case tU.APP_PAGE:case tU.APP_ROUTE:return t5.default.join(this.serverDistDir,"app",e);default:throw Object.defineProperty(Error(`Unexpected file path kind: ${t}`),"__NEXT_ERROR_CODE",{value:"E479",enumerable:!1,configurable:!0})}}}let rr=["(..)(..)","(.)","(..)","(...)"];function rn(e){return void 0!==e.split("/").find(e=>rr.find(t=>e.startsWith(t)))}function ra(e){let t,r,n;for(let a of e.split("/"))if(r=rr.find(e=>a.startsWith(e))){[t,n]=e.split(r,2);break}if(!t||!r||!n)throw Object.defineProperty(Error(`Invalid interception route: ${e}. Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>`),"__NEXT_ERROR_CODE",{value:"E269",enumerable:!1,configurable:!0});switch(t=s(t),r){case"(.)":n="/"===t?`/${n}`:t+"/"+n;break;case"(..)":if("/"===t)throw Object.defineProperty(Error(`Invalid interception route: ${e}. Cannot use (..) marker at the root level, use (.) instead.`),"__NEXT_ERROR_CODE",{value:"E207",enumerable:!1,configurable:!0});n=t.split("/").slice(0,-1).concat(n).join("/");break;case"(...)":n="/"+n;break;case"(..)(..)":let a=t.split("/");if(a.length<=2)throw Object.defineProperty(Error(`Invalid interception route: ${e}. Cannot use (..)(..) marker at the root level or one level up.`),"__NEXT_ERROR_CODE",{value:"E486",enumerable:!1,configurable:!0});n=a.slice(0,-2).concat(n).join("/");break;default:throw Object.defineProperty(Error("Invariant: unexpected marker"),"__NEXT_ERROR_CODE",{value:"E112",enumerable:!1,configurable:!0})}return{interceptingRoute:t,interceptedRoute:n}}e.s(["INTERCEPTION_ROUTE_MARKERS",0,rr,"extractInterceptionRouteInformation",()=>ra,"isInterceptionRouteAppPath",()=>rn],60130);let ri=/\/[^/]*\[[^/]+\][^/]*(?=\/|$)/,ro=/\/\[[^/]+\](?=\/|$)/;function rs(e,t=!0){return(rn(e)&&(e=ra(e).interceptedRoute),t)?ro.test(e):ri.test(e)}e.s(["isDynamicRoute",()=>rs],18215),e.s([],65832),"undefined"!=typeof performance&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class rl extends Error{}function ru(e){return/^\/index(\/|$)/.test(e)&&!rs(e)?`/index${e}`:"/"===e?"/index":o(e)}function rc(e){return e.replace(/(?:\/index)?\/?$/,"")||"/"}e.s(["DecodeError",()=>rl],12239),e.s(["normalizePagePath",()=>ru],53369);class rd{static #e=this.cacheControls=new Map;constructor(e){this.prerenderManifest=e}get(e){let t=rd.cacheControls.get(e);if(t)return t;let r=this.prerenderManifest.routes[e];if(r){let{initialRevalidateSeconds:e,initialExpireSeconds:t}=r;if(void 0!==e)return{revalidate:e,expire:t}}let n=this.prerenderManifest.dynamicRoutes[e];if(n){let{fallbackRevalidate:e,fallbackExpire:t}=n;if(void 0!==e)return{revalidate:e,expire:t}}}set(e,t){rd.cacheControls.set(e,t)}clear(){rd.cacheControls.clear()}}var rf=e.i(24916);let rh=/[|\\{}()[\]^$+*?.-]/,rp=/[|\\{}()[\]^$+*?.-]/g;function rg(e){return rh.test(e)?e.replace(rp,"\\$&"):e}let rm=/^([^[]*)\[((?:\[[^\]]*\])|[^\]]+)\](.*)$/;function ry(e){let t=e.startsWith("[")&&e.endsWith("]");t&&(e=e.slice(1,-1));let r=e.startsWith("...");return r&&(e=e.slice(3)),{key:e,repeat:r,optional:t}}function rv(e,{includeSuffix:t=!1,includePrefix:r=!1,excludeOptionalTrailingSlash:n=!1}={}){let{parameterizedRoute:a,groups:i}=function(e,t,r){let n={},a=1,i=[];for(let o of ea(e).slice(1).split("/")){let e=rr.find(e=>o.startsWith(e)),s=o.match(rm);if(e&&s&&s[2]){let{key:t,optional:r,repeat:o}=ry(s[2]);n[t]={pos:a++,repeat:o,optional:r},i.push(`/${rg(e)}([^/]+?)`)}else if(s&&s[2]){let{key:e,repeat:t,optional:o}=ry(s[2]);n[e]={pos:a++,repeat:t,optional:o},r&&s[1]&&i.push(`/${rg(s[1])}`);let l=t?o?"(?:/(.+?))?":"/(.+?)":"/([^/]+?)";r&&s[1]&&(l=l.substring(1)),i.push(l)}else i.push(`/${rg(o)}`);t&&s&&s[3]&&i.push(rg(s[3]))}return{parameterizedRoute:i.join(""),groups:n}}(e,t,r),o=a;return n||(o+="(?:/)?"),{re:RegExp(`^${o}$`),groups:i}}function rb({interceptionMarker:e,getSafeRouteKey:t,segment:r,routeKeys:n,keyPrefix:a,backreferenceDuplicateKeys:i}){let o,{key:s,optional:l,repeat:u}=ry(r),c=s.replace(/\W/g,"");a&&(c=`${a}${c}`);let d=!1;(0===c.length||c.length>30)&&(d=!0),isNaN(parseInt(c.slice(0,1)))||(d=!0),d&&(c=t());let f=c in n;a?n[c]=`${a}${s}`:n[c]=s;let h=e?rg(e):"";return o=f&&i?`\\k<${c}>`:u?`(?<${c}>.+?)`:`(?<${c}>[^/]+?)`,{key:s,pattern:l?`(?:/${h}${o})?`:`/${h}${o}`,cleanedKey:c,optional:l,repeat:u}}function rE(e,t){let r=function(e,t,r,n,a,i={names:{},intercepted:{}}){let o,s=(o=0,()=>{let e="",t=++o;for(;t>0;)e+=String.fromCharCode(97+(t-1)%26),t=Math.floor((t-1)/26);return e}),l={},u=[],c=[];for(let o of(i=structuredClone(i),ea(e).slice(1).split("/"))){let e,d=rr.some(e=>o.startsWith(e)),f=o.match(rm),h=d?f?.[1]:void 0;if(h&&f?.[2]?(e=t?L:void 0,i.intercepted[f[2]]=h):e=f?.[2]&&i.intercepted[f[2]]?t?L:void 0:t?U:void 0,h&&f&&f[2]){let{key:t,pattern:r,cleanedKey:n,repeat:o,optional:d}=rb({getSafeRouteKey:s,interceptionMarker:h,segment:f[2],routeKeys:l,keyPrefix:e,backreferenceDuplicateKeys:a});u.push(r),c.push(`/${f[1]}:${i.names[t]??n}${o?d?"*":"+":""}`),i.names[t]??=n}else if(f&&f[2]){n&&f[1]&&(u.push(`/${rg(f[1])}`),c.push(`/${f[1]}`));let{key:t,pattern:r,cleanedKey:o,repeat:d,optional:h}=rb({getSafeRouteKey:s,segment:f[2],routeKeys:l,keyPrefix:e,backreferenceDuplicateKeys:a}),p=r;n&&f[1]&&(p=p.substring(1)),u.push(p),c.push(`/:${i.names[t]??o}${d?h?"*":"+":""}`),i.names[t]??=o}else u.push(`/${rg(o)}`),c.push(`/${o}`);r&&f&&f[3]&&(u.push(rg(f[3])),c.push(f[3]))}return{namedParameterizedRoute:u.join(""),routeKeys:l,pathToRegexpPattern:c.join(""),reference:i}}(e,t.prefixRouteKeys,t.includeSuffix??!1,t.includePrefix??!1,t.backreferenceDuplicateKeys??!1,t.reference),n=r.namedParameterizedRoute;return t.excludeOptionalTrailingSlash||(n+="(?:/)?"),{...rv(e,t),namedRegex:`^${n}$`,routeKeys:r.routeKeys,pathToRegexpPattern:r.pathToRegexpPattern,reference:r.reference}}e.s(["getNamedRouteRegex",()=>rE,"getRouteRegex",()=>rv],2635);let r_="_NEXTSEP_";function rR(e){return"string"==typeof e&&!!(/\/\(\.{1,3}\):[^/\s]+/.test(e)||/:[a-zA-Z_][a-zA-Z0-9_]*:[a-zA-Z_][a-zA-Z0-9_]*/.test(e))}function rw(e){let t=e;return(t=t.replace(/(\([^)]*\)):([^/\s]+)/g,`$1${r_}:$2`)).replace(/:([^:/\s)]+)(?=:)/g,`:$1${r_}`)}function rS(e){return e.replace(RegExp(`\\)${r_}`,"g"),")")}function rC(e,t,r){if("string"!=typeof e)return(0,rf.pathToRegexp)(e,t,r);let n=rR(e),a=n?rw(e):e;try{return(0,rf.pathToRegexp)(a,t,r)}catch(a){if(!n)try{let n=rw(e);return(0,rf.pathToRegexp)(n,t,r)}catch(e){}throw a}}function rx(e,t){let r=rR(e),n=r?rw(e):e;try{let e=(0,rf.compile)(n,t);if(r)return t=>rS(e(t));return e}catch(n){if(!r)try{let r=rw(e),n=(0,rf.compile)(r,t);return e=>rS(n(e))}catch(e){}throw n}}function rT({re:e,groups:t}){var r;return r=r=>{let n=e.exec(r);if(!n)return!1;let a=e=>{try{return decodeURIComponent(e)}catch{throw Object.defineProperty(new rl("failed to decode param"),"__NEXT_ERROR_CODE",{value:"E528",enumerable:!1,configurable:!0})}},i={};for(let[e,r]of Object.entries(t)){let t=n[r.pos];void 0!==t&&(r.repeat?i[e]=t.split("/").map(e=>a(e)):i[e]=a(t))}return i},e=>{let t=r(e);if(!t)return!1;let n={};for(let[e,r]of Object.entries(t))"string"==typeof r?n[e]=r.replace(RegExp(`^${r_}`),""):Array.isArray(r)?n[e]=r.map(e=>"string"==typeof e?e.replace(RegExp(`^${r_}`),""):e):n[e]=r;return n}}function rP(e){let t={};for(let[r,n]of e.entries()){let e=t[r];void 0===e?t[r]=n:Array.isArray(e)?e.push(n):t[r]=[e,n]}return t}function rO(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function rA(e){let t=new URLSearchParams;for(let[r,n]of Object.entries(e))if(Array.isArray(n))for(let e of n)t.append(r,rO(e));else t.set(r,rO(n));return t}function rk(t){return function(){let{cookie:r}=t;if(!r)return{};let{parse:n}=e.r(20678);return n(Array.isArray(r)?r.join("; "):r)}}function rN(e){return e.replace(/__ESC_COLON_/gi,":")}function rI(e,t){if(!e.includes(":"))return e;for(let r of Object.keys(t))e.includes(`:${r}`)&&(e=e.replace(RegExp(`:${r}\\*`,"g"),`:${r}--ESCAPED_PARAM_ASTERISKS`).replace(RegExp(`:${r}\\?`,"g"),`:${r}--ESCAPED_PARAM_QUESTION`).replace(RegExp(`:${r}\\+`,"g"),`:${r}--ESCAPED_PARAM_PLUS`).replace(RegExp(`:${r}(?!\\w)`,"g"),`--ESCAPED_PARAM_COLON${r}`));return e=e.replace(/(:|\*|\?|\+|\(|\)|\{|\})/g,"\\$1").replace(/--ESCAPED_PARAM_PLUS/g,"+").replace(/--ESCAPED_PARAM_COLON/g,":").replace(/--ESCAPED_PARAM_QUESTION/g,"?").replace(/--ESCAPED_PARAM_ASTERISKS/g,"*"),rx(`/${e}`,{validate:!1})(t).slice(1)}function r$(e){try{return decodeURIComponent(e)}catch{return e}}function rD(e){let t=function(e){let t;try{t=new URL(e,"http://n")}catch{}return t}(e);if(!t)return;let r={};for(let e of t.searchParams.keys()){let n=t.searchParams.getAll(e);r[e]=n.length>1?n:n[0]}return{query:r,hash:t.hash,search:t.search,path:t.pathname,pathname:t.pathname,href:`${t.pathname}${t.search}${t.hash}`,host:"",hostname:"",auth:"",protocol:"",slashes:null,port:""}}e.s(["getRouteMatcher",()=>rT],14766),e.s(["searchParamsToUrlQuery",()=>rP,"urlQueryToSearchParams",()=>rA],27934),e.s(["getCookieParser",()=>rk],99888),e.s(["parseReqUrl",()=>rD],82233);let rj=/https?|ftp|gopher|file/;function rM(e,t){for(let r in delete e.nextInternalLocale,e){let n=r!==U&&r.startsWith(U),a=r!==L&&r.startsWith(L);(n||a||t.includes(r))&&delete e[r]}}function rU({page:e,i18n:t,basePath:r,rewrites:n,pageIsDynamic:a,trailingSlash:i,caseSensitive:o}){let s,u,c;return a&&(c=(u=rT(s=rE(e,{prefixRouteKeys:!1})))(e)),{handleRewrites:function(s,l){let c=structuredClone(l),d={},f=c.pathname,h=n=>{var l,h;let p,g,m,y=(l=n.source+(i?"(/)?":""),h={removeUnnamedParams:!0,strict:!0,sensitive:!!o},p=[],g=(0,rf.pathToRegexp)(l,p,{delimiter:"/",sensitive:"boolean"==typeof h?.sensitive&&h.sensitive,strict:h?.strict}),m=(0,rf.regexpToFunction)(h?.regexModifier?new RegExp(h.regexModifier(g.source),g.flags):g,p),(e,t)=>{if("string"!=typeof e)return!1;let r=m(e);if(!r)return!1;if(h?.removeUnnamedParams)for(let e of p)"number"==typeof e.name&&delete r.params[e.name];return{...t,...r.params}});if(!c.pathname)return!1;let v=y(c.pathname);if((n.has||n.missing)&&v){let e=function(e,t,r=[],n=[]){let a={},i=r=>{let n,i=r.key;switch(r.type){case"header":i=i.toLowerCase(),n=e.headers[i];break;case"cookie":n="cookies"in e?e.cookies[r.key]:rk(e.headers)()[r.key];break;case"query":n=t[i];break;case"host":{let{host:t}=e?.headers||{};n=t?.split(":",1)[0].toLowerCase()}}if(!r.value&&n)return a[function(e){let t="";for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);(n>64&&n<91||n>96&&n<123)&&(t+=e[r])}return t}(i)]=n,!0;if(n){let e=RegExp(`^${r.value}$`),t=Array.isArray(n)?n.slice(-1)[0].match(e):n.match(e);if(t)return Array.isArray(t)&&(t.groups?Object.keys(t.groups).forEach(e=>{a[e]=t.groups[e]}):"host"===r.type&&t[0]&&(a.host=t[0])),!0}return!1};return!(!r.every(e=>i(e))||n.some(e=>i(e)))&&a}(s,c.query,n.has,n.missing);e?Object.assign(v,e):v=!1}if(v){let{parsedDestination:i,destQuery:o}=function(e){let t,r,n=function(e){let t=e.destination;for(let r of Object.keys({...e.params,...e.query}))r&&(t=t.replace(RegExp(`:${rg(r)}`,"g"),`__ESC_COLON_${r}`));let r=function(e){if(e.startsWith("/"))return function(e,t,r=!0){let n=new URL("http://n"),a=e.startsWith(".")?new URL("http://n"):n,{pathname:i,searchParams:o,search:s,hash:l,href:u,origin:c}=new URL(e,a);if(c!==n.origin)throw Object.defineProperty(Error(`invariant: invalid relative URL, router received ${e}`),"__NEXT_ERROR_CODE",{value:"E159",enumerable:!1,configurable:!0});return{pathname:i,query:r?rP(o):void 0,search:s,hash:l,href:u.slice(c.length),slashes:void 0}}(e);let t=new URL(e);return{hash:t.hash,hostname:t.hostname,href:t.href,pathname:t.pathname,port:t.port,protocol:t.protocol,query:rP(t.searchParams),search:t.search,origin:t.origin,slashes:"//"===t.href.slice(t.protocol.length,t.protocol.length+2)}}(t),n=r.pathname;n&&(n=rN(n));let a=r.href;a&&(a=rN(a));let i=r.hostname;i&&(i=rN(i));let o=r.hash;o&&(o=rN(o));let s=r.search;s&&(s=rN(s));let l=r.origin;return l&&(l=rN(l)),{...r,pathname:n,hostname:i,href:a,hash:o,search:s,origin:l}}(e),{hostname:a,query:i,search:o}=n,s=n.pathname;n.hash&&(s=`${s}${n.hash}`);let l=[],u=[];for(let e of(rC(s,u),u))l.push(e.name);if(a){let e=[];for(let t of(rC(a,e),e))l.push(t.name)}let c=rx(s,{validate:!1});for(let[r,n]of(a&&(t=rx(a,{validate:!1})),Object.entries(i)))Array.isArray(n)?i[r]=n.map(t=>rI(rN(t),e.params)):"string"==typeof n&&(i[r]=rI(rN(n),e.params));let d=Object.keys(e.params).filter(e=>"nextInternalLocale"!==e);if(e.appendParamsToQuery&&!d.some(e=>l.includes(e)))for(let t of d)t in i||(i[t]=e.params[t]);if(rn(s))for(let t of s.split("/")){let r=rr.find(e=>t.startsWith(e));if(r){"(..)(..)"===r?(e.params["0"]="(..)",e.params["1"]="(..)"):e.params["0"]=r;break}}try{let[a,i]=(r=c(e.params)).split("#",2);t&&(n.hostname=t(e.params)),n.pathname=a,n.hash=`${i?"#":""}${i||""}`,n.search=o?rI(o,e.params):""}catch(e){if(e.message.match(/Expected .*? to not repeat, but got an array/))throw Object.defineProperty(Error("To use a multi-match in the destination you must add `*` at the end of the param name to signify it should repeat. https://nextjs.org/docs/messages/invalid-multi-match"),"__NEXT_ERROR_CODE",{value:"E329",enumerable:!1,configurable:!0});throw e}return n.query={...e.query,...n.query},{newUrl:r,destQuery:i,parsedDestination:n}}({appendParamsToQuery:!0,destination:n.destination,params:v,query:c.query});if(i.protocol)return!0;if(Object.assign(d,o,v),Object.assign(c.query,i.query),delete i.query,Object.assign(c,i),!(f=c.pathname))return!1;if(r&&(f=f.replace(RegExp(`^${r}`),"")||"/"),t){let e=eu(f,t.locales);f=e.pathname,c.query.nextInternalLocale=e.detectedLocale||v.nextInternalLocale}if(f===e)return!0;if(a&&u){let e=u(f);if(e)return c.query={...c.query,...e},!0}}return!1};for(let e of n.beforeFiles||[])h(e);if(f!==e){let t,r=!1;for(let e of n.afterFiles||[])if(r=h(e))break;if(!r&&!((t=ea(f||""))===ea(e)||(null==u?void 0:u(t)))){for(let e of n.fallback||[])if(r=h(e))break}}return{rewriteParams:d,rewrittenParsedUrl:c}},defaultRouteRegex:s,dynamicRouteMatcher:u,defaultRouteMatches:c,normalizeQueryParams:function(e,t){for(let[r,n]of(delete e.nextInternalLocale,Object.entries(e))){let a=er(r);a&&(delete e[r],t.add(a),void 0!==n&&(e[a]=Array.isArray(n)?n.map(e=>r$(e)):r$(n)))}},getParamsFromRouteMatches:function(e){if(!s)return null;let{groups:t,routeKeys:r}=s,n=rT({re:{exec:e=>{let n=Object.fromEntries(new URLSearchParams(e));for(let[e,t]of Object.entries(n)){let r=er(e);r&&(n[r]=t,delete n[e])}let a={};for(let e of Object.keys(r)){let i=r[e];if(!i)continue;let o=t[i],s=n[e];if(!o.optional&&!s)return null;a[o.pos]=s}return a}},groups:t})(e);return n||null},normalizeDynamicRouteParams:(e,t)=>{if(!s||!c)return{params:{},hasValidParams:!1};var r=s,n=c;let a={};for(let i of Object.keys(r.groups)){let o=e[i];"string"==typeof o?o=l(o):Array.isArray(o)&&(o=o.map(l));let s=n[i],u=r.groups[i].optional;if((Array.isArray(s)?s.some(e=>Array.isArray(o)?o.some(t=>t.includes(e)):null==o?void 0:o.includes(e)):null==o?void 0:o.includes(s))||void 0===o&&!(u&&t))return{params:{},hasValidParams:!1};u&&(!o||Array.isArray(o)&&1===o.length&&("index"===o[0]||o[0]===`[[...${i}]]`)||"index"===o||o===`[[...${i}]]`)&&(o=void 0,delete e[i]),o&&"string"==typeof o&&r.groups[i].repeat&&(o=o.split("/")),o&&(a[i]=o)}return{params:a,hasValidParams:!0}},normalizeCdnUrl:(e,t)=>(function(e,t){let r=rD(e.url);if(!r)return e.url;delete r.search,rM(r.query,t),e.url=function(e){let{auth:t,hostname:r}=e,n=e.protocol||"",a=e.pathname||"",i=e.hash||"",o=e.query||"",s=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?s=t+e.host:r&&(s=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(s+=":"+e.port)),o&&"object"==typeof o&&(o=String(rA(o)));let l=e.search||o&&`?${o}`||"";return n&&!n.endsWith(":")&&(n+=":"),e.slashes||(!n||rj.test(n))&&!1!==s?(s="//"+(s||""),a&&"/"!==a[0]&&(a="/"+a)):s||(s=""),i&&"#"!==i[0]&&(i="#"+i),l&&"?"!==l[0]&&(l="?"+l),a=a.replace(/[?#]/g,encodeURIComponent),l=l.replace("#","%23"),`${n}${s}${a}${l}${i}`}(r)})(e,t),interpolateDynamicPath:(e,t)=>(function(e,t,r){if(!r)return e;for(let n of Object.keys(r.groups)){let a,{optional:i,repeat:o}=r.groups[n],s=`[${o?"...":""}${n}]`;i&&(s=`[${s}]`);let l=t[n];((a=Array.isArray(l)?l.map(e=>e&&encodeURIComponent(e)).join("/"):l?encodeURIComponent(l):"")||i)&&(e=e.replaceAll(s,a))}return e})(e,t,s),filterInternalQuery:(e,t)=>rM(e,t)}}function rL(e,t){return"string"==typeof e[V]&&e[K]===t?e[V].split(","):[]}e.s(["getPreviouslyRevalidatedTags",()=>rL,"getServerUtils",()=>rU],69297);class rH{static #e=this.debug=!!process.env.NEXT_PRIVATE_DEBUG_CACHE;constructor({fs:e,dev:t,flushToDisk:r,minimalMode:n,serverDistDir:a,requestHeaders:i,maxMemoryCacheSize:o,getPrerenderManifest:s,fetchCacheKeyPrefix:l,CurCacheHandler:u,allowedRevalidateHeaderKeys:c}){var d,f,h,p;this.locks=new Map,this.hasCustomCacheHandler=!!u;const g=Symbol.for("@next/cache-handlers"),m=globalThis;if(u)rH.debug&&console.log("IncrementalCache: using custom cache handler",u.name);else{const t=m[g];(null==t?void 0:t.FetchCache)?(u=t.FetchCache,rH.debug&&console.log("IncrementalCache: using global FetchCache cache handler")):e&&a&&(rH.debug&&console.log("IncrementalCache: using filesystem cache handler"),u=rt)}process.env.__NEXT_TEST_MAX_ISR_CACHE&&(o=parseInt(process.env.__NEXT_TEST_MAX_ISR_CACHE,10)),this.dev=t,this.disableForTestmode="true"===process.env.NEXT_PRIVATE_TEST_PROXY,this.minimalMode=n,this.requestHeaders=i,this.allowedRevalidateHeaderKeys=c,this.prerenderManifest=s(),this.cacheControls=new rd(this.prerenderManifest),this.fetchCacheKeyPrefix=l;let y=[];i[H]===(null==(f=this.prerenderManifest)||null==(d=f.preview)?void 0:d.previewModeId)&&(this.isOnDemandRevalidate=!0),n&&(y=this.revalidatedTags=rL(i,null==(p=this.prerenderManifest)||null==(h=p.preview)?void 0:h.previewModeId)),u&&(this.cacheHandler=new u({dev:t,fs:e,flushToDisk:r,serverDistDir:a,revalidatedTags:y,maxMemoryCacheSize:o,_requestHeaders:i,fetchCacheKeyPrefix:l}))}calculateRevalidate(e,t,r,n){if(r)return Math.floor(performance.timeOrigin+performance.now()-1e3);let a=this.cacheControls.get(rc(e)),i=a?a.revalidate:!n&&1;return"number"==typeof i?1e3*i+t:i}_getPathname(e,t){return t?e:ru(e)}resetRequestCache(){var e,t;null==(t=this.cacheHandler)||null==(e=t.resetRequestCache)||e.call(t)}async lock(e){for(;;){let t=this.locks.get(e);if(rH.debug&&console.log("IncrementalCache: lock get",e,!!t),!t)break;await t}let{resolve:t,promise:r}=new t$;return rH.debug&&console.log("IncrementalCache: successfully locked",e),this.locks.set(e,r),()=>{t(),this.locks.delete(e)}}async revalidateTag(e,t){var r;return null==(r=this.cacheHandler)?void 0:r.revalidateTag(e,t)}async generateCacheKey(e,t={}){let r=[],n=new TextEncoder,a=new TextDecoder;if(t.body)if(t.body instanceof Uint8Array)r.push(a.decode(t.body)),t._ogBody=t.body;else if("function"==typeof t.body.getReader){let e=t.body,i=[];try{await e.pipeTo(new WritableStream({write(e){"string"==typeof e?(i.push(n.encode(e)),r.push(e)):(i.push(e),r.push(a.decode(e,{stream:!0})))}})),r.push(a.decode());let o=i.reduce((e,t)=>e+t.length,0),s=new Uint8Array(o),l=0;for(let e of i)s.set(e,l),l+=e.length;t._ogBody=s}catch(e){console.error("Problem reading body",e)}}else if("function"==typeof t.body.keys){let e=t.body;for(let n of(t._ogBody=t.body,new Set([...e.keys()]))){let t=e.getAll(n);r.push(`${n}=${(await Promise.all(t.map(async e=>"string"==typeof e?e:await e.text()))).join(",")}`)}}else if("function"==typeof t.body.arrayBuffer){let e=t.body,n=await e.arrayBuffer();r.push(await e.text()),t._ogBody=new Blob([n],{type:e.type})}else"string"==typeof t.body&&(r.push(t.body),t._ogBody=t.body);let i="function"==typeof(t.headers||{}).keys?Object.fromEntries(t.headers):Object.assign({},t.headers);"traceparent"in i&&delete i.traceparent,"tracestate"in i&&delete i.tracestate;let o=JSON.stringify(["v3",this.fetchCacheKeyPrefix||"",e,t.method,i,t.mode,t.redirect,t.credentials,t.referrer,t.referrerPolicy,t.integrity,t.cache,r]);{var s;let e=n.encode(o);return s=await crypto.subtle.digest("SHA-256",e),Array.prototype.map.call(new Uint8Array(s),e=>e.toString(16).padStart(2,"0")).join("")}}async get(e,t){var r,n,a,o,s,l,u;let c,d;if(t.kind===tU.FETCH){let t=tT.workUnitAsyncStorage.getStore(),r=t?tn(t):null;if(r){let t=r.fetch.get(e);if((null==t?void 0:t.kind)===tM.FETCH)return rH.debug&&console.log("IncrementalCache: rdc:hit",e),{isStale:!1,value:t};rH.debug&&console.log("IncrementalCache: rdc:miss",e)}else rH.debug&&console.log("IncrementalCache: rdc:no-resume-data")}if(this.disableForTestmode||this.dev&&(t.kind!==tU.FETCH||"no-cache"===this.requestHeaders["cache-control"]))return null;e=this._getPathname(e,t.kind===tU.FETCH);let f=await (null==(r=this.cacheHandler)?void 0:r.get(e,t));if(t.kind===tU.FETCH){if(!f)return null;if((null==(a=f.value)?void 0:a.kind)!==tM.FETCH)throw Object.defineProperty(new i(`Expected cached value for cache key ${JSON.stringify(e)} to be a "FETCH" kind, got ${JSON.stringify(null==(o=f.value)?void 0:o.kind)} instead.`),"__NEXT_ERROR_CODE",{value:"E653",enumerable:!1,configurable:!0});let r=A.workAsyncStorage.getStore(),n=[...t.tags||[],...t.softTags||[]];if(n.some(e=>{var t,n;return(null==(t=this.revalidatedTags)?void 0:t.includes(e))||(null==r||null==(n=r.pendingRevalidatedTags)?void 0:n.some(t=>t.tag===e))}))return rH.debug&&console.log("IncrementalCache: expired tag",e),null;let s=tT.workUnitAsyncStorage.getStore();if(s){let t=tr(s);t&&(rH.debug&&console.log("IncrementalCache: rdc:set",e),t.fetch.set(e,f.value))}let l=t.revalidate||f.value.revalidate,u=(performance.timeOrigin+performance.now()-(f.lastModified||0))/1e3>l,c=f.value.data;return td(n,f.lastModified)?null:(tf(n,f.lastModified)&&(u=!0),{isStale:u,value:{kind:tM.FETCH,data:c,revalidate:l}})}if((null==f||null==(n=f.value)?void 0:n.kind)===tM.FETCH)throw Object.defineProperty(new i(`Expected cached value for cache key ${JSON.stringify(e)} not to be a ${JSON.stringify(t.kind)} kind, got "FETCH" instead.`),"__NEXT_ERROR_CODE",{value:"E652",enumerable:!1,configurable:!0});let h=null,p=this.cacheControls.get(rc(e));if((null==f?void 0:f.lastModified)===-1)c=-1,d=-31536e3;else{let r=performance.timeOrigin+performance.now(),n=(null==f?void 0:f.lastModified)||r;if(void 0===(c=!1!==(d=this.calculateRevalidate(e,n,this.dev??!1,t.isFallback))&&d<r||void 0)&&((null==f||null==(s=f.value)?void 0:s.kind)===tM.APP_PAGE||(null==f||null==(l=f.value)?void 0:l.kind)===tM.APP_ROUTE)){let e=null==(u=f.value.headers)?void 0:u[W];if("string"==typeof e){let t=e.split(",");t.length>0&&(td(t,n)?c=-1:tf(t,n)&&(c=!0))}}}return f&&(h={isStale:c,cacheControl:p,revalidateAfter:d,value:f.value}),!f&&this.prerenderManifest.notFoundRoutes.includes(e)&&(h={isStale:c,value:null,cacheControl:p,revalidateAfter:d},this.set(e,h.value,{...t,cacheControl:p})),h}async set(e,t,r){if((null==t?void 0:t.kind)===tM.FETCH){let r=tT.workUnitAsyncStorage.getStore(),n=r?tr(r):null;n&&(rH.debug&&console.log("IncrementalCache: rdc:set",e),n.fetch.set(e,t))}if(this.disableForTestmode||this.dev&&!r.fetchCache)return;e=this._getPathname(e,r.fetchCache);let n=JSON.stringify(t).length;if(r.fetchCache&&n>2097152&&!this.hasCustomCacheHandler&&!r.isImplicitBuildTimeCache){let t=`Failed to set Next.js data cache for ${r.fetchUrl||e}, items over 2MB can not be cached (${n} bytes)`;if(this.dev)throw Object.defineProperty(Error(t),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});console.warn(t);return}try{var a;!r.fetchCache&&r.cacheControl&&this.cacheControls.set(rc(e),r.cacheControl),await (null==(a=this.cacheHandler)?void 0:a.set(e,t,r))}catch(t){console.warn("Failed to update prerender cache for",e,t)}}}e.s(["IncrementalCache",()=>rH],13714);var rq=((T={})[T.SeeOther=303]="SeeOther",T[T.TemporaryRedirect=307]="TemporaryRedirect",T[T.PermanentRedirect=308]="PermanentRedirect",T);e.s(["RedirectStatusCode",()=>rq],88503);var rF=e.i(34392);let rX="DYNAMIC_SERVER_USAGE";class rB extends Error{constructor(e){super(`Dynamic server usage: ${e}`),this.description=e,this.digest=rX}}function rG(e){return"object"==typeof e&&null!==e&&"digest"in e&&"string"==typeof e.digest&&e.digest===rX}e.s(["DynamicServerError",()=>rB,"isDynamicServerError",()=>rG],25249);class rz extends Error{constructor(...e){super(...e),this.code="NEXT_STATIC_GEN_BAILOUT"}}e.s(["StaticGenBailoutError",()=>rz],10824);class rW extends Error{constructor(e,t){super(`During prerendering, ${t} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${t} to a different context by using \`setTimeout\`, \`after\`, or similar functions you may observe this error and you should handle it in that context. This occurred at route "${e}".`),this.route=e,this.expression=t,this.digest="HANGING_PROMISE_REJECTION"}}let rV=new WeakMap;function rK(e,t,r){if(e.aborted)return Promise.reject(new rW(t,r));{let n=new Promise((n,a)=>{let i=a.bind(null,new rW(t,r)),o=rV.get(e);if(o)o.push(i);else{let t=[i];rV.set(e,t),e.addEventListener("abort",()=>{for(let e=0;e<t.length;e++)t[e]()},{once:!0})}});return n.catch(rY),n}}function rY(){}function rJ(e,t,r){return t.stagedRendering?t.stagedRendering.delayUntilStage(r,void 0,e):new Promise(t=>{setTimeout(()=>{t(e)},0)})}function rQ(e){return"object"==typeof e&&null!==e&&"digest"in e&&"BAILOUT_TO_CLIENT_SIDE_RENDERING"===e.digest}e.s(["makeDevtoolsIOAwarePromise",()=>rJ,"makeHangingPromise",()=>rK],92879),e.s(["isBailoutToCSRError",()=>rQ],68270);let rZ="function"==typeof rF.default.unstable_postpone;function r0(e){return{isDebugDynamicAccesses:e,dynamicAccesses:[],syncDynamicErrorWithStack:null}}function r1(e){var t;return null==(t=e.dynamicAccesses[0])?void 0:t.expression}function r2(e,t,r){if(t)switch(t.type){case"cache":case"unstable-cache":case"private-cache":return}if(!e.forceDynamic&&!e.forceStatic){if(e.dynamicShouldError)throw Object.defineProperty(new rz(`Route ${e.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${r}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(t)switch(t.type){case"prerender-ppr":return r9(e.route,r,t.dynamicTracking);case"prerender-legacy":t.revalidate=0;let n=Object.defineProperty(new rB(`Route ${e.route} couldn't be rendered statically because it used ${r}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E550",enumerable:!1,configurable:!0});throw e.dynamicUsageDescription=r,e.dynamicUsageStack=n.stack,n}}}function r4(e,t,r){let n=Object.defineProperty(new rB(`Route ${t.route} couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw r.revalidate=0,t.dynamicUsageDescription=e,t.dynamicUsageStack=n.stack,n}function r3(e){switch(e.type){case"cache":case"unstable-cache":case"private-cache":return}}function r6(e,t,r,n){if(!1===n.controller.signal.aborted){let a,i;a=r5(`Route ${e} needs to bail out of prerendering at this point because it used ${t}.`),n.controller.abort(a),(i=n.dynamicTracking)&&i.dynamicAccesses.push({stack:i.isDebugDynamicAccesses?Error().stack:void 0,expression:t});let o=n.dynamicTracking;o&&null===o.syncDynamicErrorWithStack&&(o.syncDynamicErrorWithStack=r)}throw r5(`Route ${e} needs to bail out of prerendering at this point because it used ${t}.`)}function r9(e,t,r){(function(){if(!rZ)throw Object.defineProperty(Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E224",enumerable:!1,configurable:!0})})(),r&&r.dynamicAccesses.push({stack:r.isDebugDynamicAccesses?Error().stack:void 0,expression:t}),rF.default.unstable_postpone(r8(e,t))}function r8(e,t){return`Route ${e} needs to bail out of prerendering at this point because it used ${t}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`}if(!1===((P=r8("%%%","^^^")).includes("needs to bail out of prerendering at this point because it used")&&P.includes("Learn more: https://nextjs.org/docs/messages/ppr-caught-error")))throw Object.defineProperty(Error("Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E296",enumerable:!1,configurable:!0});let r7="NEXT_PRERENDER_INTERRUPTED";function r5(e){let t=Object.defineProperty(Error(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t.digest=r7,t}function ne(e){return"object"==typeof e&&null!==e&&e.digest===r7&&"name"in e&&"message"in e&&e instanceof Error}function nt(e,t){return e.runtimeStagePromise?e.runtimeStagePromise.then(()=>t):t}RegExp(`\\n\\s+at Suspense \\(<anonymous>\\)(?:(?!\\n\\s+at (?:body|div|main|section|article|aside|header|footer|nav|form|p|span|h1|h2|h3|h4|h5|h6) \\(<anonymous>\\))[\\s\\S])*?\\n\\s+at __next_root_layout_boundary__ \\([^\\n]*\\)`),RegExp(`\\n\\s+at __next_metadata_boundary__[\\n\\s]`),RegExp(`\\n\\s+at __next_viewport_boundary__[\\n\\s]`),RegExp(`\\n\\s+at __next_outlet_boundary__[\\n\\s]`),e.s(["abortAndThrowOnSynchronousRequestDataAccess",()=>r6,"createDynamicTrackingState",()=>r0,"delayUntilRuntimeStage",()=>nt,"getFirstDynamicReason",()=>r1,"isPrerenderInterruptedError",()=>ne,"markCurrentScopeAsDynamic",()=>r2,"postponeWithTracking",()=>r9,"throwToInterruptStaticGeneration",()=>r4,"trackDynamicDataInDynamicRender",()=>r3],99690);let nr=()=>{};function nn(e){if(!e.body)return[e,e];let[t,r]=e.body.tee(),a=new Response(t,{status:e.status,statusText:e.statusText,headers:e.headers});Object.defineProperty(a,"url",{value:e.url,configurable:!0,enumerable:!0,writable:!1}),n&&a.body&&n.register(a,new WeakRef(a.body));let i=new Response(r,{status:e.status,statusText:e.statusText,headers:e.headers});return Object.defineProperty(i,"url",{value:e.url,configurable:!0,enumerable:!0,writable:!1}),[a,i]}globalThis.FinalizationRegistry&&(n=new FinalizationRegistry(e=>{let t=e.deref();t&&!t.locked&&t.cancel("Response object has been garbage collected").then(nr)}));let na=new Set(["traceparent","tracestate"]);var ni=((O={})[O.Before=1]="Before",O[O.Static=2]="Static",O[O.Runtime=3]="Runtime",O[O.Dynamic=4]="Dynamic",O[O.Abandoned=5]="Abandoned",O);e.s(["RenderStage",()=>ni],21170);let no=Symbol.for("next-patch");function ns(e,t){e.shouldTrackFetchMetrics&&(e.fetchMetrics??=[],e.fetchMetrics.push({...t,end:performance.timeOrigin+performance.now(),idx:e.nextFetchId||0}))}async function nl(e,t,r,n,a,i){let o=await e.arrayBuffer(),s={headers:Object.fromEntries(e.headers.entries()),body:to.Buffer.from(o).toString("base64"),status:e.status,url:e.url};return r&&await n.set(t,{kind:tM.FETCH,data:s,revalidate:a},r),await i(),new Response(o,{headers:e.headers,status:e.status,statusText:e.statusText})}async function nu(e,t,r,n,a,i,o,s,l){let[u,c]=nn(t),d=u.arrayBuffer().then(async e=>{let t=to.Buffer.from(e),s={headers:Object.fromEntries(u.headers.entries()),body:t.toString("base64"),status:u.status,url:u.url};null==i||i.set(r,s),n&&await a.set(r,{kind:tM.FETCH,data:s,revalidate:o},n)}).catch(e=>console.warn("Failed to set fetch cache",s,e)).finally(l),f=`cache-set-${r}`,h=e.pendingRevalidates??={},p=Promise.resolve();return f in h&&(p=h[f]),h[f]=p.then(()=>d).finally(()=>{(null==h?void 0:h[f])&&delete h[f]}),c}function nc(e){var t;let r;if(!0===globalThis[no])return;let n=(t=globalThis.fetch,r=rF.cache(e=>[]),function(e,n){let a,o;if(n&&n.signal)return t(e,n);if("string"!=typeof e||n){let r,i="string"==typeof e||e instanceof URL?new Request(e,n):e;if("GET"!==i.method&&"HEAD"!==i.method||i.keepalive)return t(e,n);r=Array.from(i.headers.entries()).filter(([e])=>!na.has(e.toLowerCase())),o=JSON.stringify([i.method,r,i.mode,i.redirect,i.credentials,i.referrer,i.referrerPolicy,i.integrity]),a=i.url}else o='["GET",[],null,"follow",null,null,null,null]',a=e;let s=r(a);for(let e=0,t=s.length;e<t;e+=1){let[t,r]=s[e];if(t===o)return r.then(()=>{let t=s[e][2];if(!t)throw Object.defineProperty(new i("No cached response"),"__NEXT_ERROR_CODE",{value:"E579",enumerable:!1,configurable:!0});let[r,n]=nn(t);return s[e][2]=n,r})}let l=t(e,n),u=[o,l,null];return s.push(u),l.then(e=>{let[t,r]=nn(e);return u[2]=r,t})});globalThis.fetch=function(e,{workAsyncStorage:t,workUnitAsyncStorage:r}){let n=async function(n,a){var i,o;let s;try{(s=new URL(n instanceof Request?n.url:n)).username="",s.password=""}catch{s=void 0}let l=(null==s?void 0:s.href)??"",u=(null==a||null==(i=a.method)?void 0:i.toUpperCase())||"GET",c=(null==a||null==(o=a.next)?void 0:o.internal)===!0,d="1"===process.env.NEXT_OTEL_FETCH_DISABLED,f=c?void 0:performance.timeOrigin+performance.now(),h=t.getStore(),p=r.getStore(),g=p?ta(p):null;g&&g.beginRead();let m=e4().trace(c?eN.internalFetch:eD.fetch,{hideSpan:d,kind:eK.CLIENT,spanName:["fetch",u,l].filter(Boolean).join(" "),attributes:{"http.url":l,"http.method":u,"net.peer.name":null==s?void 0:s.hostname,"net.peer.port":(null==s?void 0:s.port)||void 0}},async()=>{var t;let r,i,o,s,u,d;if(c||!h||h.isDraftMode)return e(n,a);let m=n&&"object"==typeof n&&"string"==typeof n.method,y=e=>(null==a?void 0:a[e])||(m?n[e]:null),v=e=>{var t,r,i;return void 0!==(null==a||null==(t=a.next)?void 0:t[e])?null==a||null==(r=a.next)?void 0:r[e]:m?null==(i=n.next)?void 0:i[e]:void 0},b=v("revalidate"),E=b,_=function(e,t){let r=[],n=[];for(let a=0;a<e.length;a++){let i=e[a];if("string"!=typeof i?n.push({tag:i,reason:"invalid type, must be a string"}):i.length>256?n.push({tag:i,reason:"exceeded max length of 256"}):r.push(i),r.length>128){console.warn(`Warning: exceeded max tag count for ${t}, dropped tags:`,e.slice(a).join(", "));break}}if(n.length>0)for(let{tag:e,reason:r}of(console.warn(`Warning: invalid tags passed to ${t}: `),n))console.log(`tag: "${e}" ${r}`);return r}(v("tags")||[],`fetch ${n.toString()}`);if(p)switch(p.type){case"prerender":case"prerender-runtime":case"prerender-client":case"prerender-ppr":case"prerender-legacy":case"cache":case"private-cache":r=p}if(r&&Array.isArray(_)){let e=r.tags??(r.tags=[]);for(let t of _)e.includes(t)||e.push(t)}let R=null==p?void 0:p.implicitTags,w=h.fetchCache;p&&"unstable-cache"===p.type&&(w="force-no-store");let S=!!h.isUnstableNoStore,C=y("cache"),x="";"string"==typeof C&&void 0!==E&&("force-cache"===C&&0===E||"no-store"===C&&(E>0||!1===E))&&(i=`Specified "cache: ${C}" and "revalidate: ${E}", only one should be specified.`,C=void 0,E=void 0);let T="no-cache"===C||"no-store"===C||"force-no-store"===w||"only-no-store"===w,P=!w&&!C&&!E&&h.forceDynamic;"force-cache"===C&&void 0===E?E=!1:(T||P)&&(E=0),("no-cache"===C||"no-store"===C)&&(x=`cache: ${C}`),d=function(e,t){try{let r;if(!1===e)r=0xfffffffe;else if("number"==typeof e&&!isNaN(e)&&e>-1)r=e;else if(void 0!==e)throw Object.defineProperty(Error(`Invalid revalidate value "${e}" on "${t}", must be a non-negative number or false`),"__NEXT_ERROR_CODE",{value:"E179",enumerable:!1,configurable:!0});return r}catch(e){if(e instanceof Error&&e.message.includes("Invalid revalidate"))throw e;return}}(E,h.route);let O=y("headers"),A="function"==typeof(null==O?void 0:O.get)?O:new Headers(O||{}),k=A.get("authorization")||A.get("cookie"),N=!["get","head"].includes((null==(t=y("method"))?void 0:t.toLowerCase())||"get"),I=void 0==w&&(void 0==C||"default"===C)&&void 0==E,$=!!((k||N)&&(null==r?void 0:r.revalidate)===0),D=!1;if(!$&&I&&(h.isBuildTimePrerendering?D=!0:$=!0),I&&void 0!==p)switch(p.type){case"prerender":case"prerender-runtime":case"prerender-client":return g&&(g.endRead(),g=null),rK(p.renderSignal,h.route,"fetch()")}switch(w){case"force-no-store":x="fetchCache = force-no-store";break;case"only-no-store":if("force-cache"===C||void 0!==d&&d>0)throw Object.defineProperty(Error(`cache: 'force-cache' used on fetch for ${l} with 'export const fetchCache = 'only-no-store'`),"__NEXT_ERROR_CODE",{value:"E448",enumerable:!1,configurable:!0});x="fetchCache = only-no-store";break;case"only-cache":if("no-store"===C)throw Object.defineProperty(Error(`cache: 'no-store' used on fetch for ${l} with 'export const fetchCache = 'only-cache'`),"__NEXT_ERROR_CODE",{value:"E521",enumerable:!1,configurable:!0});break;case"force-cache":(void 0===E||0===E)&&(x="fetchCache = force-cache",d=0xfffffffe)}if(void 0===d?"default-cache"!==w||S?"default-no-store"===w?(d=0,x="fetchCache = default-no-store"):S?(d=0,x="noStore call"):$?(d=0,x="auto no cache"):(x="auto cache",d=r?r.revalidate:0xfffffffe):(d=0xfffffffe,x="fetchCache = default-cache"):x||(x=`revalidate: ${d}`),!(h.forceStatic&&0===d)&&!$&&r&&d<r.revalidate){if(0===d){if(p)switch(p.type){case"prerender":case"prerender-client":case"prerender-runtime":return g&&(g.endRead(),g=null),rK(p.renderSignal,h.route,"fetch()")}r2(h,p,`revalidate: 0 fetch ${n} ${h.route}`)}r&&b===d&&(r.revalidate=d)}let j="number"==typeof d&&d>0,{incrementalCache:M}=h,U=!1;if(p)switch(p.type){case"request":case"cache":case"private-cache":U=p.isHmrRefresh??!1,s=p.serverComponentsHmrCache}if(M&&(j||s))try{o=await M.generateCacheKey(l,m?n:a)}catch(e){console.error("Failed to generate cache key for",n)}let L=h.nextFetchId??1;h.nextFetchId=L+1;let H=()=>{},q=async(t,r)=>{let u=["cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","window","duplex",...t?[]:["signal"]];if(m){let e=n,t={body:e._ogBody||e.body};for(let r of u)t[r]=e[r];n=new Request(e.url,t)}else if(a){let{_ogBody:e,body:r,signal:n,...i}=a;a={...i,body:e||r,signal:t?void 0:n}}let c={...a,next:{...null==a?void 0:a.next,fetchType:"origin",fetchIdx:L}};return e(n,c).then(async e=>{if(!t&&f&&ns(h,{start:f,url:l,cacheReason:r||x,cacheStatus:0===d||r?"skip":"miss",cacheWarning:i,status:e.status,method:c.method||"GET"}),200===e.status&&M&&o&&(j||s)){let t=d>=0xfffffffe?31536e3:d,r=j?{fetchCache:!0,fetchUrl:l,fetchIdx:L,tags:_,isImplicitBuildTimeCache:D}:void 0;switch(null==p?void 0:p.type){case"prerender":case"prerender-client":case"prerender-runtime":return nl(e,o,r,M,t,H);case"request":case"prerender-ppr":case"prerender-legacy":case"cache":case"private-cache":case"unstable-cache":case void 0:return nu(h,e,o,r,M,s,t,n,H)}}return await H(),e}).catch(e=>{throw H(),e})},F=!1,X=!1;if(o&&M){let e;if(U&&s&&(e=s.get(o),X=!0),j&&!e){H=await M.lock(o);let t=h.isOnDemandRevalidate?null:await M.get(o,{kind:tU.FETCH,revalidate:d,fetchUrl:l,fetchIdx:L,tags:_,softTags:null==R?void 0:R.tags});if(I&&p)switch(p.type){case"prerender":case"prerender-client":case"prerender-runtime":await (nd||(nd=new Promise(e=>{setTimeout(()=>{nd=null,e()},0)})),nd)}if(t?await H():u="cache-control: no-cache (hard refresh)",(null==t?void 0:t.value)&&t.value.kind===tM.FETCH)if(h.isStaticGeneration&&t.isStale)F=!0;else{if(t.isStale&&(h.pendingRevalidates??={},!h.pendingRevalidates[o])){let e=q(!0).then(async e=>({body:await e.arrayBuffer(),headers:e.headers,status:e.status,statusText:e.statusText})).finally(()=>{h.pendingRevalidates??={},delete h.pendingRevalidates[o||""]});e.catch(console.error),h.pendingRevalidates[o]=e}e=t.value.data}}if(e){f&&ns(h,{start:f,url:l,cacheReason:x,cacheStatus:X?"hmr":"hit",cacheWarning:i,status:e.status||200,method:(null==a?void 0:a.method)||"GET"});let t=new Response(to.Buffer.from(e.body,"base64"),{headers:e.headers,status:e.status});return Object.defineProperty(t,"url",{value:e.url}),t}}if(h.isStaticGeneration&&a&&"object"==typeof a){let{cache:e}=a;if(delete a.cache,"no-store"===e){if(p)switch(p.type){case"prerender":case"prerender-client":case"prerender-runtime":return g&&(g.endRead(),g=null),rK(p.renderSignal,h.route,"fetch()")}r2(h,p,`no-store fetch ${n} ${h.route}`)}let t="next"in a,{next:i={}}=a;if("number"==typeof i.revalidate&&r&&i.revalidate<r.revalidate){if(0===i.revalidate){if(p)switch(p.type){case"prerender":case"prerender-client":case"prerender-runtime":return rK(p.renderSignal,h.route,"fetch()")}r2(h,p,`revalidate: 0 fetch ${n} ${h.route}`)}h.forceStatic&&0===i.revalidate||(r.revalidate=i.revalidate)}t&&delete a.next}if(!o||!F)return q(!1,u);{let e=o;h.pendingRevalidates??={};let t=h.pendingRevalidates[e];if(t){let e=await t;return new Response(e.body,{headers:e.headers,status:e.status,statusText:e.statusText})}let r=q(!0,u).then(nn);return(t=r.then(async e=>{let t=e[0];return{body:await t.arrayBuffer(),headers:t.headers,status:t.status,statusText:t.statusText}}).finally(()=>{var t;(null==(t=h.pendingRevalidates)?void 0:t[e])&&delete h.pendingRevalidates[e]})).catch(()=>{}),h.pendingRevalidates[e]=t,r.then(e=>e[1])}});if(g)try{return await m}finally{g&&g.endRead()}return m};return n.__nextPatched=!0,n.__nextGetStaticStore=()=>t,n._nextOriginalFetch=e,globalThis[no]=!0,Object.defineProperty(n,"name",{value:"fetch",writable:!1}),n}(n,e)}let nd=null;e.s(["patchFetch",()=>nc],32995)},84610,(e,t,r)=>{(()=>{"use strict";var e={328:e=>{e.exports=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0}}},r={};function n(t){var a=r[t];if(void 0!==a)return a.exports;var i=r[t]={exports:{}},o=!0;try{e[t](i,i.exports,n),o=!1}finally{o&&delete r[t]}return i.exports}n.ab="/ROOT/node_modules/next/dist/compiled/string-hash/",t.exports=n(328)})()},26086,e=>{"use strict";e.i(89610),e.s([])},29058,(e,t,r)=>{"use strict";var n=e.r(34392);function a(){}var i={d:{f:a,r:function(){throw Error("Invalid form element. requestFormReset must be passed a form that was rendered by React.")},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null};if(!n.__SERVER_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE)throw Error('The "react" package in this environment is not configured correctly. The "react-server" condition must be enabled in any environment that runs React Server Components.');function o(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,r.preconnect=function(e,t){"string"==typeof e&&(t=t?"string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:null,i.d.C(e,t))},r.prefetchDNS=function(e){"string"==typeof e&&i.d.D(e)},r.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var r=t.as,n=o(r,t.crossOrigin),a="string"==typeof t.integrity?t.integrity:void 0,s="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===r?i.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:n,integrity:a,fetchPriority:s}):"script"===r&&i.d.X(e,{crossOrigin:n,integrity:a,fetchPriority:s,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},r.preinitModule=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var r=o(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:r,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&i.d.M(e)},r.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var r=t.as,n=o(r,t.crossOrigin);i.d.L(e,r,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},r.preloadModule=function(e,t){if("string"==typeof e)if(t){var r=o(t.as,t.crossOrigin);i.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:r,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else i.d.m(e)},r.version="19.3.0-canary-f93b9fd4-20251217"},93773,(e,t,r)=>{"use strict";t.exports=e.r(29058)},44520,(e,t,r)=>{"use strict";var n=e.r(93773),a=e.r(34392),i=Symbol.for("react.element"),o=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.memo_cache_sentinel"),g=Symbol.for("react.view_transition"),m=Symbol.iterator;function y(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=m&&e[m]||e["@@iterator"])?e:null}var v=Symbol.asyncIterator,b=Symbol.for("react.optimistic_key");function E(e){setTimeout(function(){throw e})}var _=Promise,R="function"==typeof queueMicrotask?queueMicrotask:function(e){_.resolve(null).then(e).catch(E)},w=null,S=0;function C(e,t){if(0!==t.byteLength)if(4096<t.byteLength)0<S&&(e.enqueue(new Uint8Array(w.buffer,0,S)),w=new Uint8Array(4096),S=0),e.enqueue(t);else{var r=w.length-S;r<t.byteLength&&(0===r?e.enqueue(w):(w.set(t.subarray(0,r),S),e.enqueue(w),t=t.subarray(r)),w=new Uint8Array(4096),S=0),w.set(t,S),S+=t.byteLength}return!0}var x=new TextEncoder;function T(e){return x.encode(e)}function P(e){return e.byteLength}function O(e,t){"function"==typeof e.error?e.error(t):e.close()}var A=Symbol.for("react.client.reference"),k=Symbol.for("react.server.reference");function N(e,t,r){return Object.defineProperties(e,{$$typeof:{value:A},$$id:{value:t},$$async:{value:r}})}var I=Function.prototype.bind,$=Array.prototype.slice;function D(){var e=I.apply(this,arguments);if(this.$$typeof===k){var t=$.call(arguments,1);return Object.defineProperties(e,{$$typeof:{value:k},$$id:{value:this.$$id},$$bound:t={value:this.$$bound?this.$$bound.concat(t):t},bind:{value:D,configurable:!0}})}return e}var j={value:function(){return"function () { [omitted code] }"},configurable:!0,writable:!0},M=Promise.prototype,U={get:function(e,t){switch(t){case"$$typeof":return e.$$typeof;case"$$id":return e.$$id;case"$$async":return e.$$async;case"name":return e.name;case"displayName":case"defaultProps":case"_debugInfo":case"toJSON":return;case Symbol.toPrimitive:return Object.prototype[Symbol.toPrimitive];case Symbol.toStringTag:return Object.prototype[Symbol.toStringTag];case"Provider":throw Error("Cannot render a Client Context Provider on the Server. Instead, you can export a Client Component wrapper that itself renders a Client Context Provider.");case"then":throw Error("Cannot await or return from a thenable. You cannot await a client module from a server component.")}throw Error("Cannot access "+String(e.name)+"."+String(t)+" on the server. You cannot dot into a client module from a server component. You can only pass the imported name through.")},set:function(){throw Error("Cannot assign to a client module from a server module.")}};function L(e,t){switch(t){case"$$typeof":return e.$$typeof;case"$$id":return e.$$id;case"$$async":return e.$$async;case"name":return e.name;case"defaultProps":case"_debugInfo":case"toJSON":return;case Symbol.toPrimitive:return Object.prototype[Symbol.toPrimitive];case Symbol.toStringTag:return Object.prototype[Symbol.toStringTag];case"__esModule":var r=e.$$id;return e.default=N(function(){throw Error("Attempted to call the default export of "+r+" from the server but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},e.$$id+"#",e.$$async),!0;case"then":if(e.then)return e.then;if(e.$$async)return;var n=N({},e.$$id,!0),a=new Proxy(n,H);return e.status="fulfilled",e.value=a,e.then=N(function(e){return Promise.resolve(e(a))},e.$$id+"#then",!1)}if("symbol"==typeof t)throw Error("Cannot read Symbol exports. Only named exports are supported on a client module imported on the server.");return(n=e[t])||(Object.defineProperty(n=N(function(){throw Error("Attempted to call "+String(t)+"() from the server but "+String(t)+" is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},e.$$id+"#"+t,e.$$async),"name",{value:t}),n=e[t]=new Proxy(n,U)),n}var H={get:function(e,t){return L(e,t)},getOwnPropertyDescriptor:function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return r||(r={value:L(e,t),writable:!1,configurable:!1,enumerable:!1},Object.defineProperty(e,t,r)),r},getPrototypeOf:function(){return M},set:function(){throw Error("Cannot assign to a client module from a server module.")}},q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=q.d;function X(e,t,r){if("string"==typeof e){var n=eR();if(n){var a=n.hints,i="L";if("image"===t&&r){var o=r.imageSrcSet,s=r.imageSizes,l="";"string"==typeof o&&""!==o?(l+="["+o+"]","string"==typeof s&&(l+="["+s+"]")):l+="[][]"+e,i+="[image]"+l}else i+="["+t+"]"+e;a.has(i)||(a.add(i),(r=G(r))?eS(n,"L",[e,t,r]):eS(n,"L",[e,t]))}else F.L(e,t,r)}}function B(e,t){if("string"==typeof e){var r=eR();if(r){var n=r.hints,a="m|"+e;if(n.has(a))return;return n.add(a),(t=G(t))?eS(r,"m",[e,t]):eS(r,"m",e)}F.m(e,t)}}function G(e){if(null==e)return null;var t,r=!1,n={};for(t in e)null!=e[t]&&(r=!0,n[t]=e[t]);return r?n:null}q.d={f:F.f,r:F.r,D:function(e){if("string"==typeof e&&e){var t=eR();if(t){var r=t.hints,n="D|"+e;r.has(n)||(r.add(n),eS(t,"D",e))}else F.D(e)}},C:function(e,t){if("string"==typeof e){var r=eR();if(r){var n=r.hints,a="C|"+(null==t?"null":t)+"|"+e;n.has(a)||(n.add(a),"string"==typeof t?eS(r,"C",[e,t]):eS(r,"C",e))}else F.C(e,t)}},L:X,m:B,X:function(e,t){if("string"==typeof e){var r=eR();if(r){var n=r.hints,a="X|"+e;if(n.has(a))return;return n.add(a),(t=G(t))?eS(r,"X",[e,t]):eS(r,"X",e)}F.X(e,t)}},S:function(e,t,r){if("string"==typeof e){var n=eR();if(n){var a=n.hints,i="S|"+e;if(a.has(i))return;return a.add(i),(r=G(r))?eS(n,"S",[e,"string"==typeof t?t:0,r]):"string"==typeof t?eS(n,"S",[e,t]):eS(n,"S",e)}F.S(e,t,r)}},M:function(e,t){if("string"==typeof e){var r=eR();if(r){var n=r.hints,a="M|"+e;if(n.has(a))return;return n.add(a),(t=G(t))?eS(r,"M",[e,t]):eS(r,"M",e)}F.M(e,t)}}};var z="function"==typeof AsyncLocalStorage,W=z?new AsyncLocalStorage:null,V=Symbol.for("react.temporary.reference"),K={get:function(e,t){switch(t){case"$$typeof":return e.$$typeof;case"name":case"displayName":case"defaultProps":case"_debugInfo":case"toJSON":return;case Symbol.toPrimitive:return Object.prototype[Symbol.toPrimitive];case Symbol.toStringTag:return Object.prototype[Symbol.toStringTag];case"Provider":throw Error("Cannot render a Client Context Provider on the Server. Instead, you can export a Client Component wrapper that itself renders a Client Context Provider.");case"then":return}throw Error("Cannot access "+String(t)+" on the server. You cannot dot into a temporary client reference from a server component. You can only pass the value through to the client.")},set:function(){throw Error("Cannot assign to a temporary client reference from a server module.")}};function Y(){}var J=Error("Suspense Exception: This is not a real error! It's an implementation detail of `use` to interrupt the current render. You must either rethrow it immediately, or move the `use` call outside of the `try/catch` block. Capturing without rethrowing will lead to unexpected behavior.\n\nTo handle async errors, wrap your component in an error boundary, or call the promise's `.catch` method and pass the result to `use`."),Q=null;function Z(){if(null===Q)throw Error("Expected a suspended thenable. This is a bug in React. Please file an issue.");var e=Q;return Q=null,e}var ee=null,et=0,er=null;function en(){var e=er||[];return er=null,e}var ea={readContext:es,use:function(e){if(null!==e&&"object"==typeof e||"function"==typeof e){if("function"==typeof e.then){var t=et;et+=1,null===er&&(er=[]);var r=er,n=e,a=t;switch(void 0===(a=r[a])?r.push(n):a!==n&&(n.then(Y,Y),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw n.reason;default:switch("string"==typeof n.status?n.then(Y,Y):((r=n).status="pending",r.then(function(e){if("pending"===n.status){var t=n;t.status="fulfilled",t.value=e}},function(e){if("pending"===n.status){var t=n;t.status="rejected",t.reason=e}})),n.status){case"fulfilled":return n.value;case"rejected":throw n.reason}throw Q=n,J}}e.$$typeof===l&&es()}if(e.$$typeof===A){if(null!=e.value&&e.value.$$typeof===l)throw Error("Cannot read a Client Context from a Server Component.");throw Error("Cannot use() an already resolved Client Reference.")}throw Error("An unsupported type was passed to use(): "+String(e))},useCallback:function(e){return e},useContext:es,useEffect:ei,useImperativeHandle:ei,useLayoutEffect:ei,useInsertionEffect:ei,useMemo:function(e){return e()},useReducer:ei,useRef:ei,useState:ei,useDebugValue:function(){},useDeferredValue:ei,useTransition:ei,useSyncExternalStore:ei,useId:function(){if(null===ee)throw Error("useId can only be used while React is rendering");var e=ee.identifierCount++;return"_"+ee.identifierPrefix+"S_"+e.toString(32)+"_"},useHostTransitionStatus:ei,useFormState:ei,useActionState:ei,useOptimistic:ei,useMemoCache:function(e){for(var t=Array(e),r=0;r<e;r++)t[r]=p;return t},useCacheRefresh:function(){return eo}};function ei(){throw Error("This Hook is not supported in Server Components.")}function eo(){throw Error("Refreshing the cache is not supported in Server Components.")}function es(){throw Error("Cannot read a Client Context from a Server Component.")}ea.useEffectEvent=ei;var el={getCacheForType:function(e){var t=(t=eR())?t.cache:new Map,r=t.get(e);return void 0===r&&(r=e(),t.set(e,r)),r},cacheSignal:function(){var e=eR();return e?e.cacheController.signal:null}},eu=a.__SERVER_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;if(!eu)throw Error('The "react" package in this environment is not configured correctly. The "react-server" condition must be enabled in any environment that runs React Server Components.');var ec=Array.isArray,ed=Object.getPrototypeOf;function ef(e){return(e=Object.prototype.toString.call(e)).slice(8,e.length-1)}function eh(e){switch(typeof e){case"string":return JSON.stringify(10>=e.length?e:e.slice(0,10)+"...");case"object":if(ec(e))return"[...]";if(null!==e&&e.$$typeof===ep)return"client";return"Object"===(e=ef(e))?"{...}":e;case"function":return e.$$typeof===ep?"client":(e=e.displayName||e.name)?"function "+e:"function";default:return String(e)}}var ep=Symbol.for("react.client.reference");function eg(e,t){var r=ef(e);if("Object"!==r&&"Array"!==r)return r;r=-1;var n=0;if(ec(e)){for(var a="[",i=0;i<e.length;i++){0<i&&(a+=", ");var s=e[i];s="object"==typeof s&&null!==s?eg(s):eh(s),""+i===t?(r=a.length,n=s.length,a+=s):a=10>s.length&&40>a.length+s.length?a+s:a+"..."}a+="]"}else if(e.$$typeof===o)a="<"+function e(t){if("string"==typeof t)return t;switch(t){case c:return"Suspense";case d:return"SuspenseList";case g:return"ViewTransition"}if("object"==typeof t)switch(t.$$typeof){case u:return e(t.render);case f:return e(t.type);case h:var r=t._payload;t=t._init;try{return e(t(r))}catch(e){}}return""}(e.type)+"/>";else{if(e.$$typeof===ep)return"client";for(s=0,a="{",i=Object.keys(e);s<i.length;s++){0<s&&(a+=", ");var l=i[s],p=JSON.stringify(l);a+=('"'+l+'"'===p?l:p)+": ",p="object"==typeof(p=e[l])&&null!==p?eg(p):eh(p),l===t?(r=a.length,n=p.length,a+=p):a=10>p.length&&40>a.length+p.length?a+p:a+"..."}a+="}"}return void 0===t?a:-1<r&&0<n?"\n  "+a+"\n  "+(e=" ".repeat(r)+"^".repeat(n)):"\n  "+a}var em=Object.prototype.hasOwnProperty,ey=Object.prototype,ev=JSON.stringify;function eb(e){console.error(e)}function eE(e,t,r,n,a,i,o,s){if(null!==eu.A&&eu.A!==el)throw Error("Currently React only supports one RSC renderer at a time.");eu.A=el;var l=new Set,u=[],c=new Set;this.type=e,this.status=10,this.flushScheduled=!1,this.destination=this.fatalError=null,this.bundlerConfig=r,this.cache=new Map,this.cacheController=new AbortController,this.pendingChunks=this.nextChunkId=0,this.hints=c,this.abortableTasks=l,this.pingedTasks=u,this.completedImportChunks=[],this.completedHintChunks=[],this.completedRegularChunks=[],this.completedErrorChunks=[],this.writtenSymbols=new Map,this.writtenClientReferences=new Map,this.writtenServerReferences=new Map,this.writtenObjects=new WeakMap,this.temporaryReferences=s,this.identifierPrefix=o||"",this.identifierCount=1,this.taintCleanupQueue=[],this.onError=void 0===n?eb:n,this.onAllReady=a,this.onFatalError=i,u.push(e=eN(this,t,null,!1,0,l))}var e_=null;function eR(){if(e_)return e_;if(z){var e=W.getStore();if(e)return e}return null}function ew(e,t,r){var n=eN(e,r,t.keyPath,t.implicitSlot,t.formatContext,e.abortableTasks);switch(r.status){case"fulfilled":return n.model=r.value,ek(e,n),n.id;case"rejected":return eV(e,n,r.reason),n.id;default:if(12===e.status)return e.abortableTasks.delete(n),21===e.type?(e1(n),e2(n,e)):(t=e.fatalError,eZ(n),e0(n,e,t)),n.id;"string"!=typeof r.status&&(r.status="pending",r.then(function(e){"pending"===r.status&&(r.status="fulfilled",r.value=e)},function(e){"pending"===r.status&&(r.status="rejected",r.reason=e)}))}return r.then(function(t){n.model=t,ek(e,n)},function(t){0===n.status&&(eV(e,n,t),e6(e))}),n.id}function eS(e,t,r){t=T(":H"+t+(r=ev(r))+"\n"),e.completedHintChunks.push(t),e6(e)}function eC(e){if("fulfilled"===e.status)return e.value;if("rejected"===e.status)throw e.reason;throw e}function ex(){}function eT(e,t,r,n,a){var i=t.thenableState;if(t.thenableState=null,et=0,er=i,a=n(a,void 0),12===e.status)throw"object"==typeof a&&null!==a&&"function"==typeof a.then&&a.$$typeof!==A&&a.then(ex,ex),null;return a=function(e,t,r,n){if("object"!=typeof n||null===n||n.$$typeof===A)return n;if("function"==typeof n.then){switch(n.status){case"fulfilled":return n.value;case"rejected":break;default:"string"!=typeof n.status&&(n.status="pending",n.then(function(e){"pending"===n.status&&(n.status="fulfilled",n.value=e)},function(e){"pending"===n.status&&(n.status="rejected",n.reason=e)}))}return{$$typeof:h,_payload:n,_init:eC}}var a=y(n);return a?((e={})[Symbol.iterator]=function(){return a.call(n)},e):"function"!=typeof n[v]||"function"==typeof ReadableStream&&n instanceof ReadableStream?n:((e={})[v]=function(){return n[v]()},e)}(e,0,0,a),n=t.keyPath,i=t.implicitSlot,null!==r?t.keyPath=r===b||n===b?b:null===n?r:n+","+r:null===n&&(t.implicitSlot=!0),e=eH(e,t,eK,"",a),t.keyPath=n,t.implicitSlot=i,e}function eP(e,t,r){return null!==t.keyPath?(e=[o,s,t.keyPath,{children:r}],t.implicitSlot?[e]:e):r}var eO=0;function eA(e,t){return t=eN(e,t.model,t.keyPath,t.implicitSlot,t.formatContext,e.abortableTasks),ek(e,t),e$(t.id)}function ek(e,t){var r=e.pingedTasks;r.push(t),1===r.length&&(e.flushScheduled=null!==e.destination,21===e.type||10===e.status?R(function(){return eQ(e)}):setTimeout(function(){return eQ(e)},0))}function eN(e,t,r,n,a,i){e.pendingChunks++;var s=e.nextChunkId++;"object"!=typeof t||null===t||null!==r||n||e.writtenObjects.set(t,eI(s));var l={id:s,status:0,model:t,keyPath:r,implicitSlot:n,formatContext:a,ping:function(){return ek(e,l)},toJSON:function(t,r){eO+=t.length;var n=l.keyPath,a=l.implicitSlot;try{var i=eH(e,l,this,t,r)}catch(u){if(t="object"==typeof(t=l.model)&&null!==t&&(t.$$typeof===o||t.$$typeof===h),12===e.status)l.status=3,21===e.type?(n=e.nextChunkId++,i=n=t?e$(n):eI(n)):(n=e.fatalError,i=t?e$(n):eI(n));else if("object"==typeof(r=u===J?Z():u)&&null!==r&&"function"==typeof r.then){var s=(i=eN(e,l.model,l.keyPath,l.implicitSlot,l.formatContext,e.abortableTasks)).ping;r.then(s,s),i.thenableState=en(),l.keyPath=n,l.implicitSlot=a,i=t?e$(i.id):eI(i.id)}else l.keyPath=n,l.implicitSlot=a,e.pendingChunks++,n=e.nextChunkId++,a=eq(e,r,l),eX(e,n,a),i=t?e$(n):eI(n)}return i},thenableState:null};return i.add(l),l}function eI(e){return"$"+e.toString(16)}function e$(e){return"$L"+e.toString(16)}function eD(e,t,r){return e=ev(r),T(t=t.toString(16)+":"+e+"\n")}function ej(e,t,r,n){var a=n.$$async?n.$$id+"#async":n.$$id,i=e.writtenClientReferences,s=i.get(a);if(void 0!==s)return t[0]===o&&"1"===r?e$(s):eI(s);try{var l=e.bundlerConfig,u=n.$$id;s="";var c=l[u];if(c)s=c.name;else{var d=u.lastIndexOf("#");if(-1!==d&&(s=u.slice(d+1),c=l[u.slice(0,d)]),!c)throw Error('Could not find the module "'+u+'" in the React Client Manifest. This is probably a bug in the React Server Components bundler.')}if(!0===c.async&&!0===n.$$async)throw Error('The module "'+u+'" is marked as an async ESM module but was loaded as a CJS proxy. This is probably a bug in the React Server Components bundler.');var f=!0===c.async||!0===n.$$async?[c.id,c.chunks,s,1]:[c.id,c.chunks,s];e.pendingChunks++;var h=e.nextChunkId++,p=ev(f),g=h.toString(16)+":I"+p+"\n",m=T(g);return e.completedImportChunks.push(m),i.set(a,h),t[0]===o&&"1"===r?e$(h):eI(h)}catch(n){return e.pendingChunks++,t=e.nextChunkId++,r=eq(e,n,null),eX(e,t,r),eI(t)}}function eM(e,t,r){return t=eN(e,t,null,!1,r,e.abortableTasks),eY(e,t),t.id}function eU(e,t,r){e.pendingChunks++;var n=e.nextChunkId++;return eG(e,n,t,r,!1),eI(n)}var eL=!1;function eH(e,t,r,n,a){if(t.model=a,a===o)return"$";if(null===a)return null;if("object"==typeof a){switch(a.$$typeof){case o:var l=null,c=e.writtenObjects;if(null===t.keyPath&&!t.implicitSlot){var d=c.get(a);if(void 0!==d)if(eL!==a)return d;else eL=null;else -1===n.indexOf(":")&&void 0!==(r=c.get(r))&&(l=r+":"+n,c.set(a,l))}if(3200<eO)return eA(e,t);return r=(n=a.props).ref,"object"==typeof(e=function e(t,r,n,a,i,l){if(null!=i)throw Error("Refs cannot be used in Server Components, nor passed to Client Components.");if("function"==typeof n&&n.$$typeof!==A&&n.$$typeof!==V)return eT(t,r,a,n,l);if(n===s&&null===a)return n=r.implicitSlot,null===r.keyPath&&(r.implicitSlot=!0),l=eH(t,r,eK,"",l.children),r.implicitSlot=n,l;if(null!=n&&"object"==typeof n&&n.$$typeof!==A)switch(n.$$typeof){case h:var c=n._init;if(n=c(n._payload),12===t.status)throw null;return e(t,r,n,a,i,l);case u:return eT(t,r,a,n.render,l);case f:return e(t,r,n.type,a,i,l)}else"string"==typeof n&&(c=function(e,t,r){switch(t){case"img":t=r.src;var n=r.srcSet;if(!("lazy"===r.loading||!t&&!n||"string"!=typeof t&&null!=t||"string"!=typeof n&&null!=n||"low"===r.fetchPriority||3&e)&&("string"!=typeof t||":"!==t[4]||"d"!==t[0]&&"D"!==t[0]||"a"!==t[1]&&"A"!==t[1]||"t"!==t[2]&&"T"!==t[2]||"a"!==t[3]&&"A"!==t[3])&&("string"!=typeof n||":"!==n[4]||"d"!==n[0]&&"D"!==n[0]||"a"!==n[1]&&"A"!==n[1]||"t"!==n[2]&&"T"!==n[2]||"a"!==n[3]&&"A"!==n[3])){var a="string"==typeof r.sizes?r.sizes:void 0,i=r.crossOrigin;X(t||"","image",{imageSrcSet:n,imageSizes:a,crossOrigin:"string"==typeof i?"use-credentials"===i?i:"":void 0,integrity:r.integrity,type:r.type,fetchPriority:r.fetchPriority,referrerPolicy:r.referrerPolicy})}return e;case"link":if(t=r.rel,n=r.href,!(1&e||null!=r.itemProp||"string"!=typeof t||"string"!=typeof n||""===n))switch(t){case"preload":X(n,r.as,{crossOrigin:r.crossOrigin,integrity:r.integrity,nonce:r.nonce,type:r.type,fetchPriority:r.fetchPriority,referrerPolicy:r.referrerPolicy,imageSrcSet:r.imageSrcSet,imageSizes:r.imageSizes,media:r.media});break;case"modulepreload":B(n,{as:r.as,crossOrigin:r.crossOrigin,integrity:r.integrity,nonce:r.nonce});break;case"stylesheet":X(n,"style",{crossOrigin:r.crossOrigin,integrity:r.integrity,nonce:r.nonce,type:r.type,fetchPriority:r.fetchPriority,referrerPolicy:r.referrerPolicy,media:r.media})}return e;case"picture":return 2|e;case"noscript":return 1|e;default:return e}}(i=r.formatContext,n,l),i!==c&&null!=l.children&&eM(t,l.children,c));return t=a,a=r.keyPath,null===t?t=a:null!==a&&(t=a===b||t===b?b:a+","+t),l=[o,n,t,l],r=r.implicitSlot&&null!==t?[l]:l}(e,t,a.type,a.key,void 0!==r?r:null,n))&&null!==e&&null!==l&&(c.has(e)||c.set(e,l)),e;case h:if(3200<eO)return eA(e,t);if(t.thenableState=null,a=(n=a._init)(a._payload),12===e.status)throw null;return eH(e,t,eK,"",a);case i:throw Error('A React Element from an older version of React was rendered. This is not supported. It can happen if:\n- Multiple copies of the "react" package is used.\n- A library pre-bundled an old copy of "react" or "react/jsx-runtime".\n- A compiler tries to "inline" JSX instead of using the runtime.')}if(a.$$typeof===A)return ej(e,r,n,a);if(void 0!==e.temporaryReferences&&void 0!==(l=e.temporaryReferences.get(a)))return"$T"+l;if(c=(l=e.writtenObjects).get(a),"function"==typeof a.then){if(void 0!==c){if(null!==t.keyPath||t.implicitSlot)return"$@"+ew(e,t,a).toString(16);if(eL!==a)return c;eL=null}return e="$@"+ew(e,t,a).toString(16),l.set(a,e),e}if(void 0!==c)if(eL!==a)return c;else{if(c!==eI(t.id))return c;eL=null}else if(-1===n.indexOf(":")&&void 0!==(c=l.get(r))){if(d=n,ec(r)&&r[0]===o)switch(n){case"1":d="type";break;case"2":d="key";break;case"3":d="props";break;case"4":d="_owner"}l.set(a,c+":"+d)}if(ec(a))return eP(e,t,a);if(a instanceof Map)return"$Q"+eM(e,a=Array.from(a),0).toString(16);if(a instanceof Set)return"$W"+eM(e,a=Array.from(a),0).toString(16);if("function"==typeof FormData&&a instanceof FormData)return"$K"+eM(e,a=Array.from(a.entries()),0).toString(16);if(a instanceof Error)return"$Z";if(a instanceof ArrayBuffer)return eU(e,"A",new Uint8Array(a));if(a instanceof Int8Array)return eU(e,"O",a);if(a instanceof Uint8Array)return eU(e,"o",a);if(a instanceof Uint8ClampedArray)return eU(e,"U",a);if(a instanceof Int16Array)return eU(e,"S",a);if(a instanceof Uint16Array)return eU(e,"s",a);if(a instanceof Int32Array)return eU(e,"L",a);if(a instanceof Uint32Array)return eU(e,"l",a);if(a instanceof Float32Array)return eU(e,"G",a);if(a instanceof Float64Array)return eU(e,"g",a);if(a instanceof BigInt64Array)return eU(e,"M",a);if(a instanceof BigUint64Array)return eU(e,"m",a);if(a instanceof DataView)return eU(e,"V",a);if("function"==typeof Blob&&a instanceof Blob)return function(e,t){function r(t){0===i.status&&(e.cacheController.signal.removeEventListener("abort",n),eV(e,i,t),e6(e),o.cancel(t).then(r,r))}function n(){if(0===i.status){var t=e.cacheController.signal;t.removeEventListener("abort",n),t=t.reason,21===e.type?(e.abortableTasks.delete(i),e1(i),e2(i,e)):(eV(e,i,t),e6(e)),o.cancel(t).then(r,r)}}var a=[t.type],i=eN(e,a,null,!1,0,e.abortableTasks),o=t.stream().getReader();return e.cacheController.signal.addEventListener("abort",n),o.read().then(function t(s){if(0===i.status)if(!s.done)return a.push(s.value),o.read().then(t).catch(r);else e.cacheController.signal.removeEventListener("abort",n),ek(e,i)}).catch(r),"$B"+i.id.toString(16)}(e,a);if(l=y(a))return(n=l.call(a))===a?"$i"+eM(e,a=Array.from(n),0).toString(16):eP(e,t,Array.from(n));if("function"==typeof ReadableStream&&a instanceof ReadableStream)return function(e,t,r){function n(t){0===l.status&&(e.cacheController.signal.removeEventListener("abort",a),eV(e,l,t),e6(e),s.cancel(t).then(n,n))}function a(){if(0===l.status){var t=e.cacheController.signal;t.removeEventListener("abort",a),t=t.reason,21===e.type?(e.abortableTasks.delete(l),e1(l),e2(l,e)):(eV(e,l,t),e6(e)),s.cancel(t).then(n,n)}}var i=r.supportsBYOB;if(void 0===i)try{r.getReader({mode:"byob"}).releaseLock(),i=!0}catch(e){i=!1}var o=i,s=r.getReader(),l=eN(e,t.model,t.keyPath,t.implicitSlot,t.formatContext,e.abortableTasks);return e.pendingChunks++,t=l.id.toString(16)+":"+(o?"r":"R")+"\n",e.completedRegularChunks.push(T(t)),e.cacheController.signal.addEventListener("abort",a),s.read().then(function t(r){if(0===l.status)if(r.done)l.status=1,r=l.id.toString(16)+":C\n",e.completedRegularChunks.push(T(r)),e.abortableTasks.delete(l),e.cacheController.signal.removeEventListener("abort",a),e6(e),e9(e);else try{e.pendingChunks++,l.model=r.value,o?eG(e,l.id,"b",l.model,!1):eJ(e,l),e6(e),s.read().then(t,n)}catch(e){n(e)}},n),eI(l.id)}(e,t,a);if("function"==typeof(l=a[v]))return null!==t.keyPath?(e=[o,s,t.keyPath,{children:a}],e=t.implicitSlot?[e]:e):(n=l.call(a),e=function(e,t,r,n){function a(t){0===o.status&&(e.cacheController.signal.removeEventListener("abort",i),eV(e,o,t),e6(e),"function"==typeof n.throw&&n.throw(t).then(a,a))}function i(){if(0===o.status){var t=e.cacheController.signal;t.removeEventListener("abort",i);var r=t.reason;21===e.type?(e.abortableTasks.delete(o),e1(o),e2(o,e)):(eV(e,o,t.reason),e6(e)),"function"==typeof n.throw&&n.throw(r).then(a,a)}}r=r===n;var o=eN(e,t.model,t.keyPath,t.implicitSlot,t.formatContext,e.abortableTasks);return e.pendingChunks++,t=o.id.toString(16)+":"+(r?"x":"X")+"\n",e.completedRegularChunks.push(T(t)),e.cacheController.signal.addEventListener("abort",i),n.next().then(function t(r){if(0===o.status)if(r.done){if(o.status=1,void 0===r.value)var s=o.id.toString(16)+":C\n";else try{var l=eM(e,r.value,0);s=o.id.toString(16)+":C"+ev(eI(l))+"\n"}catch(e){a(e);return}e.completedRegularChunks.push(T(s)),e.abortableTasks.delete(o),e.cacheController.signal.removeEventListener("abort",i),e6(e),e9(e)}else try{o.model=r.value,e.pendingChunks++,eJ(e,o),e6(e),n.next().then(t,a)}catch(e){a(e)}},a),eI(o.id)}(e,t,a,n)),e;if(a instanceof Date)return"$D"+a.toJSON();if((e=ed(a))!==ey&&(null===e||null!==ed(e)))throw Error("Only plain objects, and a few built-ins, can be passed to Client Components from Server Components. Classes or null prototypes are not supported."+eg(r,n));return a}if("string"==typeof a)return(eO+=a.length,"Z"===a[a.length-1]&&r[n]instanceof Date)?"$D"+a:1024<=a.length&&null!==P?(e.pendingChunks++,t=e.nextChunkId++,ez(e,t,a,!1),eI(t)):e="$"===a[0]?"$"+a:a;if("boolean"==typeof a)return a;if("number"==typeof a)return Number.isFinite(a)?0===a&&-1/0==1/a?"$-0":a:1/0===a?"$Infinity":-1/0===a?"$-Infinity":"$NaN";if(void 0===a)return"$undefined";if("function"==typeof a){if(a.$$typeof===A)return ej(e,r,n,a);if(a.$$typeof===k)return void 0!==(n=(t=e.writtenServerReferences).get(a))?e="$h"+n.toString(16):(n=null===(n=a.$$bound)?null:Promise.resolve(n),e=eM(e,{id:a.$$id,bound:n},0),t.set(a,e),e="$h"+e.toString(16)),e;if(void 0!==e.temporaryReferences&&void 0!==(e=e.temporaryReferences.get(a)))return"$T"+e;if(a.$$typeof===V)throw Error("Could not reference an opaque temporary reference. This is likely due to misconfiguring the temporaryReferences options on the server.");if(/^on[A-Z]/.test(n))throw Error("Event handlers cannot be passed to Client Component props."+eg(r,n)+"\nIf you need interactivity, consider converting part of this to a Client Component.");throw Error('Functions cannot be passed directly to Client Components unless you explicitly expose it by marking it with "use server". Or maybe you meant to call this function rather than return it.'+eg(r,n))}if("symbol"==typeof a){if(void 0!==(l=(t=e.writtenSymbols).get(a)))return eI(l);if(Symbol.for(l=a.description)!==a)throw Error("Only global symbols received from Symbol.for(...) can be passed to Client Components. The symbol Symbol.for("+a.description+") cannot be found among global symbols."+eg(r,n));return e.pendingChunks++,n=e.nextChunkId++,r=eD(e,n,"$S"+l),e.completedImportChunks.push(r),t.set(a,n),eI(n)}if("bigint"==typeof a)return"$n"+a.toString(10);throw Error("Type "+typeof a+" is not supported in Client Component props."+eg(r,n))}function eq(e,t){var r=e_;e_=null;try{var n=e.onError,a=z?W.run(void 0,n,t):n(t)}finally{e_=r}if(null!=a&&"string"!=typeof a)throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof a+'" instead');return a||""}function eF(e,t){(0,e.onFatalError)(t),null!==e.destination?(e.status=14,O(e.destination,t)):(e.status=13,e.fatalError=t),e.cacheController.abort(Error("The render was aborted due to a fatal error.",{cause:t}))}function eX(e,t,r){r={digest:r},t=T(t=t.toString(16)+":E"+ev(r)+"\n"),e.completedErrorChunks.push(t)}function eB(e,t,r){t=T(t=t.toString(16)+":"+r+"\n"),e.completedRegularChunks.push(t)}function eG(e,t,r,n,a){a?e.pendingDebugChunks++:e.pendingChunks++,a=(n=new Uint8Array(n.buffer,n.byteOffset,n.byteLength)).byteLength,t=T(t=t.toString(16)+":"+r+a.toString(16)+","),e.completedRegularChunks.push(t,n)}function ez(e,t,r,n){if(null===P)throw Error("Existence of byteLengthOfChunk should have already been checked. This is a bug in React.");n?e.pendingDebugChunks++:e.pendingChunks++,n=(r=T(r)).byteLength,t=T(t=t.toString(16)+":T"+n.toString(16)+","),e.completedRegularChunks.push(t,r)}function eW(e,t,r){var n=t.id;"string"==typeof r&&null!==P?ez(e,n,r,!1):r instanceof ArrayBuffer?eG(e,n,"A",new Uint8Array(r),!1):r instanceof Int8Array?eG(e,n,"O",r,!1):r instanceof Uint8Array?eG(e,n,"o",r,!1):r instanceof Uint8ClampedArray?eG(e,n,"U",r,!1):r instanceof Int16Array?eG(e,n,"S",r,!1):r instanceof Uint16Array?eG(e,n,"s",r,!1):r instanceof Int32Array?eG(e,n,"L",r,!1):r instanceof Uint32Array?eG(e,n,"l",r,!1):r instanceof Float32Array?eG(e,n,"G",r,!1):r instanceof Float64Array?eG(e,n,"g",r,!1):r instanceof BigInt64Array?eG(e,n,"M",r,!1):r instanceof BigUint64Array?eG(e,n,"m",r,!1):r instanceof DataView?eG(e,n,"V",r,!1):(r=ev(r,t.toJSON),eB(e,t.id,r))}function eV(e,t,r){t.status=4,r=eq(e,r,t),eX(e,t.id,r),e.abortableTasks.delete(t),e9(e)}var eK={};function eY(e,t){if(0===t.status){t.status=5;var r=eO;try{eL=t.model;var n=eH(e,t,eK,"",t.model);if(eL=n,t.keyPath=null,t.implicitSlot=!1,"object"==typeof n&&null!==n)e.writtenObjects.set(n,eI(t.id)),eW(e,t,n);else{var a=ev(n);eB(e,t.id,a)}t.status=1,e.abortableTasks.delete(t),e9(e)}catch(r){if(12===e.status)if(e.abortableTasks.delete(t),t.status=0,21===e.type)e1(t),e2(t,e);else{var i=e.fatalError;eZ(t),e0(t,e,i)}else{var o=r===J?Z():r;if("object"==typeof o&&null!==o&&"function"==typeof o.then){t.status=0,t.thenableState=en();var s=t.ping;o.then(s,s)}else eV(e,t,o)}}finally{eO=r}}}function eJ(e,t){var r=eO;try{eW(e,t,t.model)}finally{eO=r}}function eQ(e){var t=eu.H;eu.H=ea;var r=e_;ee=e_=e;try{var n=e.pingedTasks;e.pingedTasks=[];for(var a=0;a<n.length;a++)eY(e,n[a]);e4(e)}catch(t){eq(e,t,null),eF(e,t)}finally{eu.H=t,ee=null,e_=r}}function eZ(e){0===e.status&&(e.status=3)}function e0(e,t,r){3===e.status&&(r=eI(r),e=eD(t,e.id,r),t.completedErrorChunks.push(e))}function e1(e){0===e.status&&(e.status=3)}function e2(e,t){3===e.status&&t.pendingChunks--}function e4(e){var t=e.destination;if(null!==t){w=new Uint8Array(4096),S=0;try{for(var r=e.completedImportChunks,n=0;n<r.length;n++)e.pendingChunks--,C(t,r[n]);r.splice(0,n);var a=e.completedHintChunks;for(n=0;n<a.length;n++)C(t,a[n]);a.splice(0,n);var i=e.completedRegularChunks;for(n=0;n<i.length;n++)e.pendingChunks--,C(t,i[n]);i.splice(0,n);var o=e.completedErrorChunks;for(n=0;n<o.length;n++)e.pendingChunks--,C(t,o[n]);o.splice(0,n)}finally{e.flushScheduled=!1,w&&0<S&&(t.enqueue(new Uint8Array(w.buffer,0,S)),w=null,S=0)}}0===e.pendingChunks&&(12>e.status&&e.cacheController.abort(Error("This render completed successfully. All cacheSignals are now aborted to allow clean up of any unused resources.")),null!==e.destination&&(e.status=14,e.destination.close(),e.destination=null))}function e3(e){e.flushScheduled=null!==e.destination,z?R(function(){W.run(e,eQ,e)}):R(function(){return eQ(e)}),setTimeout(function(){10===e.status&&(e.status=11)},0)}function e6(e){!1===e.flushScheduled&&0===e.pingedTasks.length&&null!==e.destination&&(e.flushScheduled=!0,setTimeout(function(){e.flushScheduled=!1,e4(e)},0))}function e9(e){0===e.abortableTasks.size&&(e=e.onAllReady)()}function e8(e,t){if(13===e.status)e.status=14,O(t,e.fatalError);else if(14!==e.status&&null===e.destination){e.destination=t;try{e4(e)}catch(t){eq(e,t,null),eF(e,t)}}}function e7(e,t){if(!(11<e.status))try{e.status=12,e.cacheController.abort(t);var r=e.abortableTasks;if(0<r.size)if(21===e.type)r.forEach(function(t){return e1(t,e)}),setTimeout(function(){try{r.forEach(function(t){return e2(t,e)}),(0,e.onAllReady)(),e4(e)}catch(t){eq(e,t,null),eF(e,t)}},0);else{var n=void 0===t?Error("The render was aborted by the server without a reason."):"object"==typeof t&&null!==t&&"function"==typeof t.then?Error("The render was aborted by the server with a promise."):t,a=eq(e,n,null),i=e.nextChunkId++;e.fatalError=i,e.pendingChunks++,eX(e,i,a,n,!1,null),r.forEach(function(t){return eZ(t,e,i)}),setTimeout(function(){try{r.forEach(function(t){return e0(t,e,i)}),(0,e.onAllReady)(),e4(e)}catch(t){eq(e,t,null),eF(e,t)}},0)}else(0,e.onAllReady)(),e4(e)}catch(t){eq(e,t,null),eF(e,t)}}function e5(e,t){var r="",n=e[t];if(n)r=n.name;else{var a=t.lastIndexOf("#");if(-1!==a&&(r=t.slice(a+1),n=e[t.slice(0,a)]),!n)throw Error('Could not find the module "'+t+'" in the React Server Manifest. This is probably a bug in the React Server Components bundler.')}return n.async?[n.id,n.chunks,r,1]:[n.id,n.chunks,r]}function te(e){var t=globalThis.__next_require__(e);return"function"!=typeof t.then||"fulfilled"===t.status?null:(t.then(function(e){t.status="fulfilled",t.value=e},function(e){t.status="rejected",t.reason=e}),t)}var tt=new WeakSet,tr=new WeakSet;function tn(){}function ta(e){for(var t=e[1],r=[],n=0;n<t.length;n++){var a=globalThis.__next_chunk_load__(t[n]);if(tr.has(a)||r.push(a),!tt.has(a)){var i=tr.add.bind(tr,a);a.then(i,tn),tt.add(a)}}return 4===e.length?0===r.length?te(e[0]):Promise.all(r).then(function(){return te(e[0])}):0<r.length?Promise.all(r):null}function ti(e){var t=globalThis.__next_require__(e[0]);if(4===e.length&&"function"==typeof t.then)if("fulfilled"===t.status)t=t.value;else throw t.reason;return"*"===e[2]?t:""===e[2]?t.__esModule?t.default:t:em.call(t,e[2])?t[e[2]]:void 0}var to=Symbol();function ts(e,t,r){this.status=e,this.value=t,this.reason=r}ts.prototype=Object.create(Promise.prototype),ts.prototype.then=function(e,t){switch("resolved_model"===this.status&&tb(this),this.status){case"fulfilled":if("function"==typeof e){for(var r=this.value,n=0,a=new Set;r instanceof ts;){if(n++,r===this||a.has(r)||1e3<n){"function"==typeof t&&t(Error("Cannot have cyclic thenables."));return}if(a.add(r),"fulfilled"===r.status)r=r.value;else break}e(this.value)}break;case"pending":case"blocked":"function"==typeof e&&(null===this.value&&(this.value=[]),this.value.push(e)),"function"==typeof t&&(null===this.reason&&(this.reason=[]),this.reason.push(t));break;default:"function"==typeof t&&t(this.reason)}};var tl=Object.prototype,tu=Array.prototype;function tc(e,t,r){for(var n=0;n<t.length;n++){var a=t[n];"function"==typeof a?a(r):tR(e,a,r)}}function td(e,t,r){for(var n=0;n<t.length;n++){var a=t[n];"function"==typeof a?a(r):tw(e,a.handler,r)}}function tf(e,t,r){if("pending"!==t.status&&"blocked"!==t.status)t.reason.error(r);else{var n=t.reason;t.status="rejected",t.reason=r,null!==n&&td(e,n,r)}}function th(e,t,r){var n={};return new ts("resolved_model",t,(n.id=r,n[to]=e,n))}function tp(e,t,r,n){if("pending"!==t.status)t=t.reason,"C"===r[0]?t.close("C"===r?'"$undefined"':r.slice(1)):t.enqueueModel(r);else{var a=t.value,i=t.reason;if(t.status="resolved_model",t.value=r,r={},t.reason=(r.id=n,r[to]=e,r),null!==a)e:switch(tb(t),t.status){case"fulfilled":tc(e,a,t.value);break;case"blocked":for(r=0;r<a.length;r++)if("function"!=typeof(n=a[r])){var o=function e(t,r){var n=r.handler.chunk;if(null===n)return null;if(n===t)return r.handler;if(null!==(r=n.value))for(n=0;n<r.length;n++){var a=r[n];if("function"!=typeof a&&null!==(a=e(t,a)))return a}return null}(t,n);if(null!==o)switch(tR(e,n,o.value),a.splice(r,1),r--,null!==i&&-1!==(n=i.indexOf(n))&&i.splice(n,1),t.status){case"fulfilled":tc(e,a,t.value);break e;case"rejected":null!==i&&td(e,i,t.reason);break e}}case"pending":if(t.value)for(e=0;e<a.length;e++)t.value.push(a[e]);else t.value=a;if(t.reason){if(i)for(a=0;a<i.length;a++)t.reason.push(i[a])}else t.reason=i;break;case"rejected":i&&tc(e,i,t.reason)}}}function tg(e,t,r){var n={};return new ts("resolved_model",(r?'{"done":true,"value":':'{"done":false,"value":')+t+"}",(n.id=-1,n[to]=e,n))}function tm(e,t,r,n){tp(e,t,(n?'{"done":true,"value":':'{"done":false,"value":')+r+"}",-1)}function ty(e,t,r,n){var a=t.id;if("string"!=typeof a||"then"===n)return null;var i=e5(e._bundlerConfig,a);a=t.bound;var o=ta(i);if(o)a instanceof ts&&(o=Promise.all([o,a]));else{if(!(a instanceof ts))return ti(i);o=Promise.resolve(a)}if(tv){var s=tv;s.deps++}else s=tv={chunk:null,value:null,reason:null,deps:1,errored:!1};return o.then(function(){var a=ti(i);if(t.bound){var o=t.bound.value;(o=Array.isArray(o)?o.slice(0):[]).unshift(null),a=a.bind.apply(a,o)}r[n]=a,""===n&&null===s.value&&(s.value=a),s.deps--,0===s.deps&&null!==(a=s.chunk)&&"blocked"===a.status&&(o=a.value,a.status="fulfilled",a.value=s.value,a.reason=null,null!==o&&tc(e,o,s.value))},function(t){if(!s.errored){s.errored=!0,s.value=null,s.reason=t;var r=s.chunk;null!==r&&"blocked"===r.status&&tf(e,r,t)}}),null}var tv=null;function tb(e){var t=tv;tv=null;var r=e.reason,n=r[to];r=-1===(r=r.id)?void 0:r.toString(16);var a=e.value;e.status="blocked",e.value=null,e.reason=null;try{var i=JSON.parse(a),o=function e(t,r,n,a,i){if("string"==typeof a)return function(e,t,r,n,a){if("$"===n[0]){switch(n[1]){case"$":return n.slice(1);case"@":return t_(e,t=parseInt(n.slice(2),16));case"h":return tS(e,n=n.slice(2),t,r,ty);case"T":var i,o;if(void 0===a||void 0===e._temporaryReferences)throw Error("Could not reference an opaque temporary reference. This is likely due to misconfiguring the temporaryReferences options on the server.");return i=e._temporaryReferences,o=new Proxy(o=Object.defineProperties(function(){throw Error("Attempted to call a temporary Client Reference from the server but it is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},{$$typeof:{value:V}}),K),i.set(o,a),o;case"Q":return tS(e,n=n.slice(2),t,r,tC);case"W":return tS(e,n=n.slice(2),t,r,tx);case"K":t=n.slice(2);var s=e._prefix+t+"_",l=new FormData;return e._formData.forEach(function(e,t){t.startsWith(s)&&l.append(t.slice(s.length),e)}),l;case"i":return tS(e,n=n.slice(2),t,r,tT);case"I":return 1/0;case"-":return"$-0"===n?-0:-1/0;case"N":return NaN;case"u":return;case"D":return new Date(Date.parse(n.slice(2)));case"n":return BigInt(n.slice(2))}switch(n[1]){case"A":return tO(e,n,ArrayBuffer,1,t,r);case"O":return tO(e,n,Int8Array,1,t,r);case"o":return tO(e,n,Uint8Array,1,t,r);case"U":return tO(e,n,Uint8ClampedArray,1,t,r);case"S":return tO(e,n,Int16Array,2,t,r);case"s":return tO(e,n,Uint16Array,2,t,r);case"L":return tO(e,n,Int32Array,4,t,r);case"l":return tO(e,n,Uint32Array,4,t,r);case"G":return tO(e,n,Float32Array,4,t,r);case"g":return tO(e,n,Float64Array,8,t,r);case"M":return tO(e,n,BigInt64Array,8,t,r);case"m":return tO(e,n,BigUint64Array,8,t,r);case"V":return tO(e,n,DataView,1,t,r);case"B":return t=parseInt(n.slice(2),16),e._formData.get(e._prefix+t)}switch(n[1]){case"R":return tk(e,n,void 0);case"r":return tk(e,n,"bytes");case"X":return tI(e,n,!1);case"x":return tI(e,n,!0)}return tS(e,n=n.slice(1),t,r,tP)}return n}(t,r,n,a,i);if("object"==typeof a&&null!==a)if(void 0!==i&&void 0!==t._temporaryReferences&&t._temporaryReferences.set(a,i),Array.isArray(a))for(var o=0;o<a.length;o++)a[o]=e(t,a,""+o,a[o],void 0!==i?i+":"+o:void 0);else for(o in a)em.call(a,o)&&(r=void 0!==i&&-1===o.indexOf(":")?i+":"+o:void 0,void 0!==(r=e(t,a,o,a[o],r))||"__proto__"===o?a[o]=r:delete a[o]);return a}(n,{"":i},"",i,r),s=e.value;if(null!==s)for(e.value=null,e.reason=null,i=0;i<s.length;i++){var l=s[i];"function"==typeof l?l(o):tR(n,l,o)}if(null!==tv){if(tv.errored)throw tv.reason;if(0<tv.deps){tv.value=o,tv.chunk=e;return}}e.status="fulfilled",e.value=o,e.reason=null}catch(t){e.status="rejected",e.reason=t}finally{tv=t}}function tE(e,t){e._closed=!0,e._closedReason=t,e._chunks.forEach(function(r){"pending"===r.status?tf(e,r,t):"fulfilled"===r.status&&null!==r.reason&&r.reason.error(t)})}function t_(e,t){var r=e._chunks,n=r.get(t);return n||(n="string"==typeof(n=e._formData.get(e._prefix+t))?th(e,n,t):e._closed?new ts("rejected",null,e._closedReason):new ts("pending",null,null),r.set(t,n)),n}function tR(e,t,r){var n=t.handler,a=t.parentObject,i=t.key,o=t.map,s=t.path;try{for(var l=1;l<s.length;l++){var u=s[l];if("object"!=typeof r||null===r||ed(r)!==tl&&ed(r)!==tu||!em.call(r,u))throw Error("Invalid reference.");r=r[u]}var c=o(e,r,a,i);a[i]=c,""===i&&null===n.value&&(n.value=c)}catch(r){tw(e,t.handler,r);return}n.deps--,0===n.deps&&null!==(t=n.chunk)&&"blocked"===t.status&&(r=t.value,t.status="fulfilled",t.value=n.value,t.reason=n.reason,null!==r&&tc(e,r,n.value))}function tw(e,t,r){t.errored||(t.errored=!0,t.value=null,t.reason=r,null!==(t=t.chunk)&&"blocked"===t.status&&tf(e,t,r))}function tS(e,t,r,n,a){var i=parseInt((t=t.split(":"))[0],16);switch("resolved_model"===(i=t_(e,i)).status&&tb(i),i.status){case"fulfilled":i=i.value;for(var o=1;o<t.length;o++){var s=t[o];if("object"!=typeof i||null===i||ed(i)!==tl&&ed(i)!==tu||!em.call(i,s))throw Error("Invalid reference.");i=i[s]}return a(e,i,r,n);case"pending":case"blocked":return tv?(e=tv,e.deps++):e=tv={chunk:null,value:null,reason:null,deps:1,errored:!1},r={handler:e,parentObject:r,key:n,map:a,path:t},null===i.value?i.value=[r]:i.value.push(r),null===i.reason?i.reason=[r]:i.reason.push(r),null;default:return tv?(tv.errored=!0,tv.value=null,tv.reason=i.reason):tv={chunk:null,value:null,reason:i.reason,deps:0,errored:!0},null}}function tC(e,t){return new Map(t)}function tx(e,t){return new Set(t)}function tT(e,t){return t[Symbol.iterator]()}function tP(e,t,r,n){return"then"===n&&"function"==typeof t?null:t}function tO(e,t,r,n,a,i){if(t=parseInt(t.slice(2),16),n=e._prefix+t,e._chunks.has(t))throw Error("Already initialized typed array.");if(t=e._formData.get(n).arrayBuffer(),tv){var o=tv;o.deps++}else o=tv={chunk:null,value:null,reason:null,deps:1,errored:!1};return t.then(function(t){if(t=r===ArrayBuffer?t:new r(t),a[i]=t,""===i&&null===o.value&&(o.value=t),o.deps--,0===o.deps&&null!==(t=o.chunk)&&"blocked"===t.status){var n=t.value;t.status="fulfilled",t.value=o.value,t.reason=null,null!==n&&tc(e,n,o.value)}},function(t){if(!o.errored){o.errored=!0,o.value=null,o.reason=t;var r=o.chunk;null!==r&&"blocked"===r.status&&tf(e,r,t)}}),null}function tA(e,t,r,n){var a=e._chunks;for(r=new ts("fulfilled",r,n),a.set(t,r),e=e._formData.getAll(e._prefix+t),t=0;t<e.length;t++)"string"==typeof(a=e[t])&&("C"===a[0]?n.close("C"===a?'"$undefined"':a.slice(1)):n.enqueueModel(a))}function tk(e,t,r){if(t=parseInt(t.slice(2),16),e._chunks.has(t))throw Error("Already initialized stream.");var n=null,a=!1;r=new ReadableStream({type:r,start:function(e){n=e}});var i=null;return tA(e,t,r,{enqueueModel:function(t){if(null===i){var r=th(e,t,-1);tb(r),"fulfilled"===r.status?n.enqueue(r.value):(r.then(function(e){return n.enqueue(e)},function(e){return n.error(e)}),i=r)}else{r=i;var a=new ts("pending",null,null);a.then(function(e){return n.enqueue(e)},function(e){return n.error(e)}),i=a,r.then(function(){i===a&&(i=null),tp(e,a,t,-1)})}},close:function(){if(!a)if(a=!0,null===i)n.close();else{var e=i;i=null,e.then(function(){return n.close()})}},error:function(e){if(!a)if(a=!0,null===i)n.error(e);else{var t=i;i=null,t.then(function(){return n.error(e)})}}}),r}function tN(){return this}function tI(e,t,r){if(t=parseInt(t.slice(2),16),e._chunks.has(t))throw Error("Already initialized stream.");var n=[],a=!1,i=0,o={};return o[v]=function(){var e,t=0;return(e={next:e=function(e){if(void 0!==e)throw Error("Values cannot be passed to next() of AsyncIterables passed to Client Components.");if(t===n.length){if(a)return new ts("fulfilled",{done:!0,value:void 0},null);n[t]=new ts("pending",null,null)}return n[t++]}})[v]=tN,e},tA(e,t,r=r?o[v]():o,{enqueueModel:function(t){i===n.length?n[i]=tg(e,t,!1):tm(e,n[i],t,!1),i++},close:function(t){if(!a)for(a=!0,i===n.length?n[i]=tg(e,t,!0):tm(e,n[i],t,!0),i++;i<n.length;)tm(e,n[i++],'"$undefined"',!0)},error:function(t){if(!a)for(a=!0,i===n.length&&(n[i]=new ts("pending",null,null));i<n.length;)tf(e,n[i++],t)}}),r}function t$(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:new FormData;return{_bundlerConfig:e,_prefix:t,_formData:n,_chunks:new Map,_closed:!1,_closedReason:null,_temporaryReferences:r}}function tD(e){tE(e,Error("Connection closed."))}function tj(e,t,r){var n=e5(e,t);return e=ta(n),r?Promise.all([r,e]).then(function(e){e=e[0];var t=ti(n);return t.bind.apply(t,[null].concat(e))}):e?Promise.resolve(e).then(function(){return ti(n)}):Promise.resolve(ti(n))}function tM(e,t,r){if(tD(e=t$(t,r,void 0,e)),(e=t_(e,0)).then(function(){}),"fulfilled"!==e.status)throw e.reason;return e.value}r.createClientModuleProxy=function(e){return new Proxy(e=N({},e,!1),H)},r.createTemporaryReferenceSet=function(){return new WeakMap},r.decodeAction=function(e,t){var r=new FormData,n=null;return e.forEach(function(a,i){i.startsWith("$ACTION_")?i.startsWith("$ACTION_REF_")?(a=tM(e,t,a="$ACTION_"+i.slice(12)+":"),n=tj(t,a.id,a.bound)):i.startsWith("$ACTION_ID_")&&(n=tj(t,a=i.slice(11),null)):r.append(i,a)}),null===n?null:n.then(function(e){return e.bind(null,r)})},r.decodeFormState=function(e,t,r){var n=t.get("$ACTION_KEY");if("string"!=typeof n)return Promise.resolve(null);var a=null;if(t.forEach(function(e,n){n.startsWith("$ACTION_REF_")&&(a=tM(t,r,"$ACTION_"+n.slice(12)+":"))}),null===a)return Promise.resolve(null);var i=a.id;return Promise.resolve(a.bound).then(function(t){return null===t?null:[e,n,i,t.length-1]})},r.decodeReply=function(e,t,r){if("string"==typeof e){var n=new FormData;n.append("0",e),e=n}return t=t_(e=t$(t,"",r?r.temporaryReferences:void 0,e),0),tD(e),t},r.decodeReplyFromAsyncIterable=function(e,t,r){function n(e){tE(i,e),"function"==typeof a.throw&&a.throw(e).then(n,n)}var a=e[v](),i=t$(t,"",r?r.temporaryReferences:void 0);return a.next().then(function e(t){if(t.done)tD(i);else{var r=(t=t.value)[0];if("string"==typeof(t=t[1])){i._formData.append(r,t);var o=i._prefix;if(r.startsWith(o)){var s=i._chunks;r=+r.slice(o.length),(s=s.get(r))&&tp(i,s,t,r)}}else i._formData.append(r,t);a.next().then(e,n)}},n),t_(i,0)},r.prerender=function(e,t,r){return new Promise(function(n,a){var i=new eE(21,e,t,r?r.onError:void 0,function(){n({prelude:new ReadableStream({type:"bytes",pull:function(e){e8(i,e)},cancel:function(e){i.destination=null,e7(i,e)}},{highWaterMark:0})})},a,r?r.identifierPrefix:void 0,r?r.temporaryReferences:void 0);if(r&&r.signal){var o=r.signal;if(o.aborted)e7(i,o.reason);else{var s=function(){e7(i,o.reason),o.removeEventListener("abort",s)};o.addEventListener("abort",s)}}e3(i)})},r.registerClientReference=function(e,t,r){return N(e,t+"#"+r,!1)},r.registerServerReference=function(e,t,r){return Object.defineProperties(e,{$$typeof:{value:k},$$id:{value:null===r?t:t+"#"+r,configurable:!0},$$bound:{value:null,configurable:!0},bind:{value:D,configurable:!0},toString:j})},r.renderToReadableStream=function(e,t,r){var n=new eE(20,e,t,r?r.onError:void 0,Y,Y,r?r.identifierPrefix:void 0,r?r.temporaryReferences:void 0);if(r&&r.signal){var a=r.signal;if(a.aborted)e7(n,a.reason);else{var i=function(){e7(n,a.reason),a.removeEventListener("abort",i)};a.addEventListener("abort",i)}}return new ReadableStream({type:"bytes",start:function(){e3(n)},pull:function(e){e8(n,e)},cancel:function(e){n.destination=null,e7(n,e)}},{highWaterMark:0})}},52105,(e,t,r)=>{"use strict";var n;r.renderToReadableStream=(n=e.r(44520)).renderToReadableStream,r.decodeReply=n.decodeReply,r.decodeReplyFromAsyncIterable=n.decodeReplyFromAsyncIterable,r.decodeAction=n.decodeAction,r.decodeFormState=n.decodeFormState,r.registerServerReference=n.registerServerReference,r.registerClientReference=n.registerClientReference,r.createClientModuleProxy=n.createClientModuleProxy,r.createTemporaryReferenceSet=n.createTemporaryReferenceSet},52627,(e,t,r)=>{let{createClientModuleProxy:n}=e.r(52105);e.n(n("[project]/node_modules/next/dist/shared/lib/app-router-context.shared-runtime.js <module evaluation>"))},22286,(e,t,r)=>{let{createClientModuleProxy:n}=e.r(52105);e.n(n("[project]/node_modules/next/dist/shared/lib/app-router-context.shared-runtime.js"))},77471,e=>{"use strict";e.i(52627);var t=e.i(22286);e.n(t)},35695,e=>{"use strict";e.i(26086);var t=e.i(89610);e.s(["actionAsyncStorage",()=>t.actionAsyncStorageInstance])},804,e=>{"use strict";e.i(87297);[...process?.features?.typescript?["next.config.mts"]:[]],Symbol("polyfills");var t,r,n=e.i(82233),a=e.i(19805);e.i(65832);var i=e.i(18215),o=e.i(93764),s=e.i(69297),l=e.i(83978),u=e.i(94706),c=e.i(93441),d=e.i(51720);function f(e){return(0,d.pathHasPrefix)(e||"/","/_next/data")&&"/index"===(e=e.replace(/\/_next\/data\/[^/]{1,}/,"").replace(/\.json$/,""))?"/":e}var h=e.i(4842);e.i(53369);var p=e.i(87167);e.i(13714),e.i(72451);var g=e.i(23646),m=e.i(27064);let y=Symbol.for("@next/router-server-methods"),v=globalThis;var b=e.i(12239),E=e.i(75601),_=e.i(8900);e.i(60130),e.i(2635);class R{constructor({userland:e,definition:t,distDir:r,relativeProjectDir:n}){this.userland=e,this.definition=t,this.isDev=!1,this.distDir=r,this.relativeProjectDir=n}async instrumentationOnRequestError(t,...r){{let{getEdgeInstrumentationModule:t}=await Promise.resolve().then(()=>e.i(84256)),n=await t();n&&await (null==n.onRequestError?void 0:n.onRequestError.call(n,...r))}}loadManifests(t,r){let n;{var a;let{getEdgePreviewProps:r}=e.r(3949),i=e=>e?JSON.parse(e):void 0;n={buildId:process.env.__NEXT_BUILD_ID||"",buildManifest:self.__BUILD_MANIFEST,fallbackBuildManifest:{},reactLoadableManifest:i(self.__REACT_LOADABLE_MANIFEST),nextFontManifest:i(self.__NEXT_FONT_MANIFEST),prerenderManifest:{routes:{},dynamicRoutes:{},notFoundRoutes:[],version:4,preview:r()},routesManifest:{version:4,caseSensitive:!1,basePath:"",rewrites:{beforeFiles:[],afterFiles:[],fallback:[]},redirects:[],headers:[],i18n:void 0,skipProxyUrlNormalize:!1},serverFilesManifest:self.__SERVER_FILES_MANIFEST,clientReferenceManifest:null==(a=self.__RSC_MANIFEST)?void 0:a[t],serverActionsManifest:i(self.__RSC_SERVER_MANIFEST),subresourceIntegrityManifest:i(self.__SUBRESOURCE_INTEGRITY_MANIFEST),dynamicCssManifest:i(self.__DYNAMIC_CSS_MANIFEST),interceptionRoutePatterns:(i(self.__INTERCEPTION_ROUTE_REWRITE_MANIFEST)??[]).map(e=>new RegExp(e.regex))}}return n}async loadCustomCacheHandlers(e,t){}async getIncrementalCache(e,t,r,n){return globalThis.__incrementalCache}async onRequestError(e,t,r,n,a){n||((null==a?void 0:a.logErrorWithOriginalStack)?a.logErrorWithOriginalStack(t,"app-dir"):console.error(t)),await this.instrumentationOnRequestError(e,t,{path:e.url||"/",headers:e.headers,method:e.method||"GET"},r)}getNextConfigEdge(e){var t,r;let n,a=self.__SERVER_FILES_MANIFEST,i=(0,h.getRequestMeta)(e,"relativeProjectDir")||this.relativeProjectDir,o=null==(t=v[y])?void 0:t[i],s=(null==o?void 0:o.nextConfig)||(null==a?void 0:a.config);if(!s)throw Object.defineProperty(Error("Invariant: nextConfig couldn't be loaded"),"__NEXT_ERROR_CODE",{value:"E969",enumerable:!1,configurable:!0});if(null==(r=s.experimental)?void 0:r.runtimeServerDeploymentId)throw Object.defineProperty(Error("process.env.NEXT_DEPLOYMENT_ID is missing but runtimeServerDeploymentId is enabled"),"__NEXT_ERROR_CODE",{value:"E970",enumerable:!1,configurable:!0});return n=s.deploymentId||"",{nextConfig:s,deploymentId:n}}async prepare(e,t,{srcPage:r,multiZoneDraftMode:m}){var _,R;let w,S,C,x,T,P=await this.loadManifests(r,w),{routesManifest:O,prerenderManifest:A,serverFilesManifest:k}=P,{basePath:N,i18n:I,rewrites:$}=O;N&&(e.url=(0,o.removePathPrefix)(e.url||"/",N));let D=(0,n.parseReqUrl)(e.url||"/");if(!D)return;let j=!1;(0,d.pathHasPrefix)(D.pathname||"/","/_next/data")&&(j=!0,D.pathname=f(D.pathname||"/"));let M=D.pathname||"/",U={...D.query},L=(0,i.isDynamicRoute)(r);I&&(S=(0,a.normalizeLocalePath)(D.pathname||"/",I.locales)).detectedLocale&&(e.url=`${S.pathname}${D.search}`,M=S.pathname,C||(C=S.detectedLocale));let H=(0,p.normalizeAppPath)(r),q=(0,s.getServerUtils)({page:H,i18n:I,basePath:N,rewrites:$,pageIsDynamic:L,trailingSlash:!1,caseSensitive:!!O.caseSensitive}),F=(0,l.detectDomainLocale)(null==I?void 0:I.domains,(0,u.getHostname)(D,e.headers),C);(0,h.addRequestMeta)(e,"isLocaleDomain",!!F);let X=(null==F?void 0:F.defaultLocale)||(null==I?void 0:I.defaultLocale);X&&!C&&(D.pathname=`/${X}${"/"===D.pathname?"":D.pathname}`);let B=(0,h.getRequestMeta)(e,"locale")||C||X,{rewriteParams:G,rewrittenParsedUrl:z}=q.handleRewrites(e,D),W=Object.keys(G);Object.assign(D.query,z.query),I&&(D.pathname=(0,a.normalizeLocalePath)(D.pathname||"/",I.locales).pathname,z.pathname=(0,a.normalizeLocalePath)(z.pathname||"/",I.locales).pathname);let V=(0,h.getRequestMeta)(e,"params");if(!V&&q.dynamicRouteMatcher){let e=q.dynamicRouteMatcher(f((null==z?void 0:z.pathname)||D.pathname||"/")),t=q.normalizeDynamicRouteParams(e||{},!0);t.hasValidParams&&(V=t.params)}let K=(0,h.getRequestMeta)(e,"query")||{...D.query},Y=new Set,J=[];if(this.definition.kind===g.RouteKind.PAGES||this.definition.kind===g.RouteKind.PAGES_API)for(let e of[...W,...Object.keys(q.defaultRouteMatches||{})]){let t=Array.isArray(U[e])?U[e].join(""):U[e],r=Array.isArray(K[e])?K[e].join(""):K[e];e in U&&t!==r||J.push(e)}if(q.normalizeCdnUrl(e,J),q.normalizeQueryParams(K,Y),q.filterInternalQuery(U,J),L){let t,r=q.normalizeDynamicRouteParams(K,!0),n=q.normalizeDynamicRouteParams(V||{},!0);if(K&&V&&n.hasValidParams&&r.hasValidParams&&Object.keys(n.params).length<Object.keys(r.params).length?(t=r.params,V=Object.assign(r.params)):t=n.hasValidParams&&V?V:r.hasValidParams?K:{},e.url=q.interpolateDynamicPath(e.url||"/",t),D.pathname=q.interpolateDynamicPath(D.pathname||"/",t),M=q.interpolateDynamicPath(M,t),!V)if(r.hasValidParams)for(let e in V=Object.assign({},r.params),q.defaultRouteMatches)delete K[e];else{let e=null==q.dynamicRouteMatcher?void 0:q.dynamicRouteMatcher.call(q,f((null==S?void 0:S.pathname)||D.pathname||"/"));e&&(V=Object.assign({},e))}}for(let e of Y)e in U||delete K[e];let{isOnDemandRevalidate:Q,revalidateOnlyGenerated:Z}=(0,c.checkIsOnDemandRevalidate)(e,A.preview),ee=(0,h.getRequestMeta)(e,"relativeProjectDir")||this.relativeProjectDir,et=null==(_=v[y])?void 0:_[ee],er=(null==et?void 0:et.nextConfig)||(null==k?void 0:k.config);if(!er)throw Object.defineProperty(Error("Invariant: nextConfig couldn't be loaded"),"__NEXT_ERROR_CODE",{value:"E969",enumerable:!1,configurable:!0});let en=H;(0,i.isDynamicRoute)(en)&&V&&(en=q.interpolateDynamicPath(en,V)),"/index"===en&&(en="/");let ea=en;try{en=en.split("/").map(e=>{try{var t;t=decodeURIComponent(e),e=t.replace(RegExp("([/#?]|%(2f|23|3f|5c))","gi"),e=>encodeURIComponent(e))}catch(e){throw Object.defineProperty(new b.DecodeError("Failed to decode path param(s)."),"__NEXT_ERROR_CODE",{value:"E539",enumerable:!1,configurable:!0})}return e}).join("/")}catch(e){}if(en=(0,E.removeTrailingSlash)(en),null==(R=er.experimental)?void 0:R.runtimeServerDeploymentId)throw Object.defineProperty(Error("process.env.NEXT_DEPLOYMENT_ID is missing but runtimeServerDeploymentId is enabled"),"__NEXT_ERROR_CODE",{value:"E970",enumerable:!1,configurable:!0});return T=er.deploymentId||"",{query:K,originalQuery:U,originalPathname:M,params:V,parsedUrl:D,locale:B,isNextDataRequest:j,locales:null==I?void 0:I.locales,defaultLocale:X,isDraftMode:!1,previewData:x,pageIsDynamic:L,resolvedPathname:en,encodedResolvedPathname:ea,isOnDemandRevalidate:Q,revalidateOnlyGenerated:Z,...P,nextConfig:er,routerServerContext:et,deploymentId:T}}getResponseCache(e){if(!this.responseCache){let t=(0,h.getRequestMeta)(e,"minimalMode")??!1;this.responseCache=new m.default(t)}return this.responseCache}async handleResponse({req:e,nextConfig:t,cacheKey:r,routeKind:n,isFallback:a,prerenderManifest:i,isRoutePPREnabled:o,isOnDemandRevalidate:s,revalidateOnlyGenerated:l,responseGenerator:u,waitUntil:c,isMinimalMode:d}){let f=this.getResponseCache(e),h=await f.get(r,u,{routeKind:n,isFallback:a,isRoutePPREnabled:o,isOnDemandRevalidate:s,isPrefetch:"prefetch"===e.headers.purpose,incrementalCache:await this.getIncrementalCache(e,t,i,d),waitUntil:c});if(!h&&r&&!(s&&l))throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return h}}var w=e.i(72445),S=e.i(88154);let C=["GET","HEAD","OPTIONS","POST","PUT","DELETE","PATCH"];var x=e.i(11573),T=e.i(32995),P=e.i(68045),O=e.i(546);let{env:A,stdout:k}=(null==(r=globalThis)?void 0:r.process)??{},N=A&&!A.NO_COLOR&&(A.FORCE_COLOR||(null==k?void 0:k.isTTY)&&!A.CI&&"dumb"!==A.TERM),I=(e,t,r,n)=>{let a=e.substring(0,n)+r,i=e.substring(n+t.length),o=i.indexOf(t);return~o?a+I(i,t,r,o):a+i},$=(e,t,r=e)=>N?n=>{let a=""+n,i=a.indexOf(t,e.length);return~i?e+I(a,t,r,i)+t:e+a+t}:String,D=$("\x1b[1m","\x1b[22m","\x1b[22m\x1b[1m");$("\x1b[2m","\x1b[22m","\x1b[22m\x1b[2m"),$("\x1b[3m","\x1b[23m"),$("\x1b[4m","\x1b[24m"),$("\x1b[7m","\x1b[27m"),$("\x1b[8m","\x1b[28m"),$("\x1b[9m","\x1b[29m"),$("\x1b[30m","\x1b[39m");let j=$("\x1b[31m","\x1b[39m"),M=$("\x1b[32m","\x1b[39m"),U=$("\x1b[33m","\x1b[39m");$("\x1b[34m","\x1b[39m");let L=$("\x1b[35m","\x1b[39m");$("\x1b[38;2;173;127;168m","\x1b[39m"),$("\x1b[36m","\x1b[39m");let H=$("\x1b[37m","\x1b[39m");$("\x1b[90m","\x1b[39m"),$("\x1b[40m","\x1b[49m"),$("\x1b[41m","\x1b[49m"),$("\x1b[42m","\x1b[49m"),$("\x1b[43m","\x1b[49m"),$("\x1b[44m","\x1b[49m"),$("\x1b[45m","\x1b[49m"),$("\x1b[46m","\x1b[49m"),$("\x1b[47m","\x1b[49m");var q=e.i(66011);H(D("")),j(D("")),U(D("")),H(D(" ")),M(D("")),L(D("")),new q.LRUCache(1e4,e=>e.length),new q.LRUCache(1e4,e=>e.length);let F=["HEAD","OPTIONS"];function X(){return new Response(null,{status:405})}var B=e.i(47986),G=e.i(55468);e.i(84610),e.i(13651);var z=e.i(68270),W=e.i(25249);let V=new Set(Object.values({NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401}));function K(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r]=e.digest.split(";");return"NEXT_HTTP_ERROR_FALLBACK"===t&&V.has(Number(r))}var Y=e.i(88503);function J(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let t=e.digest.split(";"),[r,n]=t,a=t.slice(2,-2).join(";"),i=Number(t.at(-2));return"NEXT_REDIRECT"===r&&("replace"===n||"push"===n)&&"string"==typeof a&&!isNaN(i)&&i in Y.RedirectStatusCode}var Q=e.i(99690),Z=((t={}).ProspectiveRender="the prospective render",t.SegmentCollection="segment collection",t);function ee(e,t,r){let n;if(!function(e){if((0,z.isBailoutToCSRError)(e)||J(e)||K(e)||(0,W.isDynamicServerError)(e)||(0,Q.isPrerenderInterruptedError)(e))return e.digest}(e)){if("object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message&&e.message.startsWith("This rendered a large document (>"))return void console.error(e);if("object"==typeof e&&null!==e&&"string"==typeof e.message){if(n=e.message,"string"==typeof e.stack){let a=e.stack,i=a.indexOf("\n");if(i>-1){let e=Object.defineProperty(Error(`Route ${t} errored during ${r}. These errors are normally ignored and may not prevent the route from prerendering but are logged here because build debugging is enabled.
          
Original Error: ${n}`),"__NEXT_ERROR_CODE",{value:"E949",enumerable:!1,configurable:!0});e.stack="Error: "+e.message+a.slice(i),console.error(e);return}}}else"string"==typeof e&&(n=e);if(n)return void console.error(`Route ${t} errored during ${r}. These errors are normally ignored and may not prevent the route from prerendering but are logged here because build debugging is enabled. No stack was provided.
          
Original Message: ${n}`);console.error(`Route ${t} errored during ${r}. These errors are normally ignored and may not prevent the route from prerendering but are logged here because build debugging is enabled. The thrown value is logged just following this message`),console.error(e)}}e.i(81527);var et=e.i(68644),er=e.i(66401),en=e.i(18904);e.i(26086);var ea=e.i(70438),ei=e.i(77471);e.s([],19871),e.i(19871),e.s(["appRouterContext",0,ei],43844);var eo=e.i(43844),es=e.i(635),el=e.i(10824),eu=e.i(49783),ec=e.i(5809);class ed{constructor(){throw this.count=0,this.earlyListeners=[],this.listeners=[],this.tickPending=!1,this.pendingTimeoutCleanup=null,this.subscribedSignals=null,this.invokeListenersIfNoPendingReads=()=>{if(this.pendingTimeoutCleanup=null,0===this.count){for(let e=0;e<this.listeners.length;e++)this.listeners[e]();this.listeners.length=0}},Object.defineProperty(new ec.InvariantError("CacheSignal cannot be used in the edge runtime, because `cacheComponents` does not support it."),"__NEXT_ERROR_CODE",{value:"E728",enumerable:!1,configurable:!0})}noMorePendingCaches(){var e;let t,r;this.tickPending||(this.tickPending=!0,queueMicrotask(()=>process.nextTick(()=>{if(this.tickPending=!1,0===this.count){for(let e=0;e<this.earlyListeners.length;e++)this.earlyListeners[e]();this.earlyListeners.length=0}}))),this.pendingTimeoutCleanup&&this.pendingTimeoutCleanup(),this.pendingTimeoutCleanup=(e=this.invokeListenersIfNoPendingReads,r=setImmediate(()=>{t=clearTimeout.bind(null,setTimeout(e,0))}),t=clearImmediate.bind(null,r),()=>t())}inputReady(){return new Promise(e=>{this.earlyListeners.push(e),0===this.count&&this.noMorePendingCaches()})}cacheReady(){return new Promise(e=>{this.listeners.push(e),0===this.count&&this.noMorePendingCaches()})}beginRead(){if(this.count++,this.pendingTimeoutCleanup&&(this.pendingTimeoutCleanup(),this.pendingTimeoutCleanup=null),null!==this.subscribedSignals)for(let e of this.subscribedSignals)e.beginRead()}endRead(){if(0===this.count)throw Object.defineProperty(new ec.InvariantError("CacheSignal got more endRead() calls than beginRead() calls"),"__NEXT_ERROR_CODE",{value:"E678",enumerable:!1,configurable:!0});if(this.count--,0===this.count&&this.noMorePendingCaches(),null!==this.subscribedSignals)for(let e of this.subscribedSignals)e.endRead()}hasPendingReads(){return this.count>0}trackRead(e){this.beginRead();let t=this.endRead.bind(this);return e.then(t,t),e}subscribeToReads(e){if(e===this)throw Object.defineProperty(new ec.InvariantError("A CacheSignal cannot subscribe to itself"),"__NEXT_ERROR_CODE",{value:"E679",enumerable:!1,configurable:!0});null===this.subscribedSignals&&(this.subscribedSignals=new Set),this.subscribedSignals.add(e);for(let t=0;t<this.count;t++)e.beginRead();return this.unsubscribeFromReads.bind(this,e)}unsubscribeFromReads(e){this.subscribedSignals&&this.subscribedSignals.delete(e)}}var ef=e.i(74715);let eh=/^[A-Za-z_$][A-Za-z0-9_$]*$/,ep=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","valueOf","toLocaleString","then","catch","finally","status","displayName","_debugInfo","toJSON","$$typeof","__esModule"]);var eg=e.i(92879),em=e.i(34392);let ey={current:null},ev="function"==typeof em.cache?em.cache:e=>e,eb=console.warn;ev(e=>{try{eb(ey.current)}finally{ey.current=null}}),e.i(34080);var eE=e.i(35171);e.i(21170);let e_=new WeakMap,eR={get:function(e,t,r){if("then"===t||"catch"===t||"finally"===t){let n=eu.ReflectAdapter.get(e,t,r);return({[t]:(...t)=>{let r=eE.dynamicAccessAsyncStorage.getStore();return r&&r.abortController.abort(Object.defineProperty(Error("Accessed fallback `params` during prerendering."),"__NEXT_ERROR_CODE",{value:"E691",enumerable:!1,configurable:!0})),new Proxy(n.apply(e,t),eR)}})[t]}return eu.ReflectAdapter.get(e,t,r)}};function ew(e){let t=e_.get(e);if(t)return t;let r=Promise.resolve(e);return e_.set(e,r),r}e.r(35695).actionAsyncStorage;var eS=e.i(14327),eC=e.i(49316),ex=e.i(69568);e.i(92480);class eT{constructor(e,t){this.error=e,this.headers=t}}class eP extends R{static #e=this.sharedModules=eo;constructor({userland:e,definition:t,distDir:r,relativeProjectDir:n,resolvedPagePath:a,nextConfigOutput:i}){if(super({userland:e,definition:t,distDir:r,relativeProjectDir:n}),this.workUnitAsyncStorage=en.workUnitAsyncStorage,this.workAsyncStorage=et.workAsyncStorage,this.serverHooks=W,this.actionAsyncStorage=ea.actionAsyncStorage,this.resolvedPagePath=a,this.nextConfigOutput=i,this.methods=function(e){let t=C.reduce((t,r)=>({...t,[r]:e[r]??X}),{}),r=new Set(C.filter(t=>e[t]));for(let n of F.filter(e=>!r.has(e))){if("HEAD"===n){e.GET&&(t.HEAD=e.GET,r.add("HEAD"));continue}if("OPTIONS"===n){let e=["OPTIONS",...r];!r.has("HEAD")&&r.has("GET")&&e.push("HEAD");let n={Allow:e.sort().join(", ")};t.OPTIONS=()=>new Response(null,{status:204,headers:n}),r.add("OPTIONS");continue}throw Object.defineProperty(Error(`Invariant: should handle all automatic implementable methods, got method: ${n}`),"__NEXT_ERROR_CODE",{value:"E211",enumerable:!1,configurable:!0})}return t}(e),this.hasNonStaticMethods=eO(e),this.dynamic=this.userland.dynamic,"export"===this.nextConfigOutput)if("force-dynamic"===this.dynamic)throw Object.defineProperty(Error(`export const dynamic = "force-dynamic" on page "${t.pathname}" cannot be used with "output: export". See more info here: https://nextjs.org/docs/advanced-features/static-html-export`),"__NEXT_ERROR_CODE",{value:"E278",enumerable:!1,configurable:!0});else if(!function(e){return"force-static"===e.dynamic||"error"===e.dynamic||!1===e.revalidate||void 0!==e.revalidate&&e.revalidate>0||"function"==typeof e.generateStaticParams}(this.userland)&&this.userland.GET)throw Object.defineProperty(Error(`export const dynamic = "force-static"/export const revalidate not configured on route "${t.pathname}" with "output: export". See more info here: https://nextjs.org/docs/advanced-features/static-html-export`),"__NEXT_ERROR_CODE",{value:"E301",enumerable:!1,configurable:!0});else this.dynamic="error"}resolve(e){return C.includes(e)?this.methods[e]:()=>new Response(null,{status:400})}async do(e,t,r,n,a,i,o){var s;let l,u=r.isStaticGeneration,c=!!o.renderOpts.cacheComponents;(0,T.patchFetch)({workAsyncStorage:this.workAsyncStorage,workUnitAsyncStorage:this.workUnitAsyncStorage});let d={params:o.params?function(e,t){let r=en.workUnitAsyncStorage.getStore();if(r)switch(r.type){case"prerender":case"prerender-client":case"prerender-ppr":case"prerender-legacy":var n,a,i=e,o=t,s=r;switch(s.type){case"prerender":case"prerender-client":{let e=s.fallbackRouteParams;if(e){for(let t in i)if(e.has(t))return function(e,t,r){let n=e_.get(e);if(n)return n;let a=new Proxy((0,eg.makeHangingPromise)(r.renderSignal,t.route,"`params`"),eR);return e_.set(e,a),a}(i,o,s)}break}case"prerender-ppr":{let e=s.fallbackRouteParams;if(e){for(let t in i)if(e.has(t))return function(e,t,r,n){let a=e_.get(e);if(a)return a;let i={...e},o=Promise.resolve(i);return e_.set(e,o),Object.keys(e).forEach(e=>{ep.has(e)||t.has(e)&&Object.defineProperty(i,e,{get(){var t;let a=(t="params",eh.test(e)?`\`${t}.${e}\``:`\`${t}[${JSON.stringify(e)}]\``);"prerender-ppr"===n.type?(0,Q.postponeWithTracking)(r.route,a,n.dynamicTracking):(0,Q.throwToInterruptStaticGeneration)(a,r,n)},enumerable:!0})}),o}(i,e,o,s)}}}return ew(i);case"cache":case"private-cache":case"unstable-cache":throw Object.defineProperty(new ec.InvariantError("createServerParamsForRoute should not be called in cache contexts."),"__NEXT_ERROR_CODE",{value:"E738",enumerable:!1,configurable:!0});case"prerender-runtime":return n=e,a=r,(0,Q.delayUntilRuntimeStage)(a,ew(n));case"request":return ew(e)}(0,er.throwInvariantForMissingStore)()}(function(e){let t={};for(let[r,n]of Object.entries(e))void 0!==n&&(t[r]=n);return t}(o.params),r):void 0},f=()=>{o.renderOpts.pendingWaitUntil=(0,eC.executeRevalidates)(r).finally(()=>{process.env.NEXT_PRIVATE_DEBUG_CACHE&&console.log("pending revalidates promise finished for:",n.url)})},h=null;try{if(u){let t=this.userland.revalidate,n=!1===t||void 0===t?eS.INFINITE_CACHE:t;if(c){let t,o=new AbortController,s=!1,u=new ed,c=(0,Q.createDynamicTrackingState)(void 0),f={cache:new Map,fetch:new Map,encryptedBoundArgs:new Map,decryptedBoundArgs:new Map},p=h={type:"prerender",phase:"action",rootParams:{},fallbackRouteParams:null,implicitTags:a,renderSignal:o.signal,controller:o,cacheSignal:u,dynamicTracking:c,allowEmptyStaticShell:!1,revalidate:n,expire:eS.INFINITE_CACHE,stale:eS.INFINITE_CACHE,tags:[...a.tags],prerenderResumeDataCache:f,renderResumeDataCache:null,hmrRefreshHash:void 0};try{t=this.workUnitAsyncStorage.run(p,e,i,d)}catch(e){o.signal.aborted?s=!0:(process.env.NEXT_DEBUG_BUILD||process.env.__NEXT_VERBOSE_LOGGING)&&ee(e,r.route,Z.ProspectiveRender)}if("object"==typeof t&&null!==t&&"function"==typeof t.then&&t.then(()=>{},e=>{o.signal.aborted?s=!0:process.env.NEXT_DEBUG_BUILD&&ee(e,r.route,Z.ProspectiveRender)}),(0,ex.trackPendingModules)(u),await u.cacheReady(),s){let e=(0,Q.getFirstDynamicReason)(c);if(e)throw Object.defineProperty(new W.DynamicServerError(`Route ${r.route} couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw console.error("Expected Next.js to keep track of reason for opting out of static rendering but one was not found. This is a bug in Next.js"),Object.defineProperty(new W.DynamicServerError(`Route ${r.route} couldn't be rendered statically because it used a dynamic API. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E577",enumerable:!1,configurable:!0})}let g=new AbortController;c=(0,Q.createDynamicTrackingState)(void 0);let m=h={type:"prerender",phase:"action",rootParams:{},fallbackRouteParams:null,implicitTags:a,renderSignal:g.signal,controller:g,cacheSignal:null,dynamicTracking:c,allowEmptyStaticShell:!1,revalidate:n,expire:eS.INFINITE_CACHE,stale:eS.INFINITE_CACHE,tags:[...a.tags],prerenderResumeDataCache:f,renderResumeDataCache:null,hmrRefreshHash:void 0},y=!1;if(l=await new Promise((t,n)=>{(0,ef.scheduleImmediate)(async()=>{try{let a=await this.workUnitAsyncStorage.run(m,e,i,d);if(y)return;if(!(a instanceof Response))return void t(a);y=!0;let o=!1;a.arrayBuffer().then(e=>{o||(o=!0,t(new Response(e,{headers:a.headers,status:a.status,statusText:a.statusText})))},n),(0,ef.scheduleImmediate)(()=>{o||(o=!0,g.abort(),n(eF(r.route)))})}catch(e){n(e)}}),(0,ef.scheduleImmediate)(()=>{y||(y=!0,g.abort(),n(eF(r.route)))})}),g.signal.aborted)throw eF(r.route);g.abort()}else h={type:"prerender-legacy",phase:"action",rootParams:{},implicitTags:a,revalidate:n,expire:eS.INFINITE_CACHE,stale:eS.INFINITE_CACHE,tags:[...a.tags]},l=await en.workUnitAsyncStorage.run(h,e,i,d)}else l=await en.workUnitAsyncStorage.run(n,e,i,d)}catch(e){if(J(e)){let r=J(e)?e.digest.split(";").slice(2,-2).join(";"):null;if(!r)throw Object.defineProperty(Error("Invariant: Unexpected redirect url format"),"__NEXT_ERROR_CODE",{value:"E399",enumerable:!1,configurable:!0});let a=new Headers({Location:r});return(0,B.appendMutableCookies)(a,n.mutableCookies),f(),new Response(null,{status:t.isAction?Y.RedirectStatusCode.SeeOther:function(e){if(!J(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(e.digest.split(";").at(-2))}(e),headers:a})}if(K(e))return new Response(null,{status:Number(e.digest.split(";")[1])});throw e}if(!(l instanceof Response))throw Object.defineProperty(Error(`No response is returned from route handler '${this.resolvedPagePath}'. Ensure you return a \`Response\` or a \`NextResponse\` in all branches of your handler.`),"__NEXT_ERROR_CODE",{value:"E325",enumerable:!1,configurable:!0});o.renderOpts.fetchMetrics=r.fetchMetrics,f(),h&&(o.renderOpts.collectedTags=null==(s=h.tags)?void 0:s.join(","),o.renderOpts.collectedRevalidate=h.revalidate,o.renderOpts.collectedExpire=h.expire,o.renderOpts.collectedStale=h.stale);let p=new Headers(l.headers);return(0,B.appendMutableCookies)(p,n.mutableCookies)?new Response(l.body,{status:l.status,statusText:l.statusText,headers:p}):l}async handle(e,t){let r,n,a,i,o,s=this.resolve(e.method),l={page:this.definition.page,renderOpts:t.renderOpts,buildId:t.sharedContext.buildId,previouslyRevalidatedTags:[]};l.renderOpts.fetchCache=this.userland.fetchCache;let u={isAppRoute:!0,isAction:(e.headers instanceof Headers?(r=e.headers.get(_.ACTION_HEADER)??null,n=e.headers.get("content-type")):(r=e.headers[_.ACTION_HEADER]??null,n=e.headers["content-type"]??null),a="POST"===e.method&&"application/x-www-form-urlencoded"===n,i=!!("POST"===e.method&&(null==n?void 0:n.startsWith("multipart/form-data"))),o=void 0!==r&&"string"==typeof r&&"POST"===e.method,{actionId:r,isURLEncodedAction:a,isMultipartAction:i,isFetchAction:o,isPossibleServerAction:!!(o||a||i)}).isPossibleServerAction},c=await (0,x.getImplicitTags)(this.definition.page,e.nextUrl,null),d=(0,w.createRequestStoreForAPI)(e,e.nextUrl,c,void 0,t.prerenderManifest.preview),f=(0,S.createWorkStore)(l),h=await this.actionAsyncStorage.run(u,()=>this.workUnitAsyncStorage.run(d,()=>this.workAsyncStorage.run(f,async()=>{if(this.hasNonStaticMethods&&f.isStaticGeneration){let e=Object.defineProperty(new W.DynamicServerError("Route is configured with methods that cannot be statically generated."),"__NEXT_ERROR_CODE",{value:"E582",enumerable:!1,configurable:!0});throw f.dynamicUsageDescription=e.message,f.dynamicUsageStack=e.stack,e}let r=e;switch(this.dynamic){case"force-dynamic":if(f.forceDynamic=!0,f.isStaticGeneration){let e=Object.defineProperty(new W.DynamicServerError("Route is configured with dynamic = error which cannot be statically generated."),"__NEXT_ERROR_CODE",{value:"E703",enumerable:!1,configurable:!0});throw f.dynamicUsageDescription=e.message,f.dynamicUsageStack=e.stack,e}break;case"force-static":f.forceStatic=!0,r=new Proxy(e,eU);break;case"error":f.dynamicShouldError=!0,f.isStaticGeneration&&(r=new Proxy(e,eH));break;case void 0:case"auto":var n,a;let i,o;n=e,a=f,i={get(e,t,r){switch(t){case"search":case"searchParams":case"url":case"href":case"toJSON":case"toString":case"origin":return eX(a,en.workUnitAsyncStorage.getStore(),`nextUrl.${t}`),eu.ReflectAdapter.get(e,t,r);case"clone":return e[eN]||(e[eN]=()=>new Proxy(e.clone(),i));default:return eu.ReflectAdapter.get(e,t,r)}}},o={get(e,t){switch(t){case"nextUrl":return e[eA]||(e[eA]=new Proxy(e.nextUrl,i));case"headers":case"cookies":case"url":case"body":case"blob":case"json":case"text":case"arrayBuffer":case"formData":return eX(a,en.workUnitAsyncStorage.getStore(),`request.${t}`),eu.ReflectAdapter.get(e,t,e);case"clone":return e[ek]||(e[ek]=()=>new Proxy(e.clone(),o));default:return eu.ReflectAdapter.get(e,t,e)}}},r=new Proxy(n,o);break;default:this.dynamic}let l=(0,P.getTracer)(),{pathname:h}=this.definition;return l.setRootSpanAttribute("next.route",h),l.trace(O.AppRouteRouteHandlersSpan.runHandler,{spanName:`executing api route (app) ${h}`,attributes:{"next.route":h}},async()=>this.do(s,u,f,d,c,r,t))})));if(!(h instanceof Response))return new Response(null,{status:500});if(h.headers.has("x-middleware-rewrite"))throw Object.defineProperty(Error("NextResponse.rewrite() was used in a app route handler, this is not currently supported. Please remove the invocation to continue."),"__NEXT_ERROR_CODE",{value:"E374",enumerable:!1,configurable:!0});if("1"===h.headers.get("x-middleware-next"))throw Object.defineProperty(Error("NextResponse.next() was used in a app route handler, this is not supported. See here for more info: https://nextjs.org/docs/messages/next-response-next-in-app-route-handler"),"__NEXT_ERROR_CODE",{value:"E385",enumerable:!1,configurable:!0});return h}}function eO(e){return!!e.POST||!!e.PUT||!!e.DELETE||!!e.PATCH||!!e.OPTIONS}let eA=Symbol("nextUrl"),ek=Symbol("clone"),eN=Symbol("clone"),eI=Symbol("searchParams"),e$=Symbol("href"),eD=Symbol("toString"),ej=Symbol("headers"),eM=Symbol("cookies"),eU={get(e,t,r){switch(t){case"headers":return e[ej]||(e[ej]=G.HeadersAdapter.seal(new Headers({})));case"cookies":return e[eM]||(e[eM]=B.RequestCookiesAdapter.seal(new es.RequestCookies(new Headers({}))));case"nextUrl":return e[eA]||(e[eA]=new Proxy(e.nextUrl,eL));case"url":return r.nextUrl.href;case"geo":case"ip":return;case"clone":return e[ek]||(e[ek]=()=>new Proxy(e.clone(),eU));default:return eu.ReflectAdapter.get(e,t,r)}}},eL={get(e,t,r){switch(t){case"search":return"";case"searchParams":return e[eI]||(e[eI]=new URLSearchParams);case"href":let n;return e[e$]||(e[e$]=((n=new URL(e.href)).host="localhost:3000",n.search="",n.protocol="http",n).href);case"toJSON":case"toString":return e[eD]||(e[eD]=()=>r.href);case"url":return;case"clone":return e[eN]||(e[eN]=()=>new Proxy(e.clone(),eL));default:return eu.ReflectAdapter.get(e,t,r)}}},eH={get(e,t,r){switch(t){case"nextUrl":return e[eA]||(e[eA]=new Proxy(e.nextUrl,eq));case"headers":case"cookies":case"url":case"body":case"blob":case"json":case"text":case"arrayBuffer":case"formData":throw Object.defineProperty(new el.StaticGenBailoutError(`Route ${e.nextUrl.pathname} with \`dynamic = "error"\` couldn't be rendered statically because it used \`request.${t}\`.`),"__NEXT_ERROR_CODE",{value:"E611",enumerable:!1,configurable:!0});case"clone":return e[ek]||(e[ek]=()=>new Proxy(e.clone(),eH));default:return eu.ReflectAdapter.get(e,t,r)}}},eq={get(e,t,r){switch(t){case"search":case"searchParams":case"url":case"href":case"toJSON":case"toString":case"origin":throw Object.defineProperty(new el.StaticGenBailoutError(`Route ${e.pathname} with \`dynamic = "error"\` couldn't be rendered statically because it used \`nextUrl.${t}\`.`),"__NEXT_ERROR_CODE",{value:"E575",enumerable:!1,configurable:!0});case"clone":return e[eN]||(e[eN]=()=>new Proxy(e.clone(),eq));default:return eu.ReflectAdapter.get(e,t,r)}}};function eF(e){return Object.defineProperty(new W.DynamicServerError(`Route ${e} couldn't be rendered statically because it used IO that was not cached. See more info here: https://nextjs.org/docs/messages/cache-components`),"__NEXT_ERROR_CODE",{value:"E727",enumerable:!1,configurable:!0})}function eX(e,t,r){if(e.dynamicShouldError)throw Object.defineProperty(new el.StaticGenBailoutError(`Route ${e.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${r}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(t)switch(t.type){case"cache":case"private-cache":throw Object.defineProperty(Error(`Route ${e.route} used "${r}" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "${r}" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E178",enumerable:!1,configurable:!0});case"unstable-cache":throw Object.defineProperty(Error(`Route ${e.route} used "${r}" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "${r}" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E133",enumerable:!1,configurable:!0});case"prerender":let n=Object.defineProperty(Error(`Route ${e.route} used ${r} without first calling \`await connection()\`. See more info here: https://nextjs.org/docs/messages/next-prerender-sync-request`),"__NEXT_ERROR_CODE",{value:"E261",enumerable:!1,configurable:!0});return(0,Q.abortAndThrowOnSynchronousRequestDataAccess)(e.route,r,n,t);case"prerender-client":throw Object.defineProperty(new ec.InvariantError("A client prerender store should not be used for a route handler."),"__NEXT_ERROR_CODE",{value:"E720",enumerable:!1,configurable:!0});case"prerender-runtime":throw Object.defineProperty(new ec.InvariantError("A runtime prerender store should not be used for a route handler."),"__NEXT_ERROR_CODE",{value:"E767",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,Q.postponeWithTracking)(e.route,r,t.dynamicTracking);case"prerender-legacy":t.revalidate=0;let a=Object.defineProperty(new W.DynamicServerError(`Route ${e.route} couldn't be rendered statically because it used \`${r}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw e.dynamicUsageDescription=r,e.dynamicUsageStack=a.stack,a}}e.s(["AppRouteRouteModule",()=>eP,"WrappedNextRouterError",()=>eT,"default",0,eP,"hasNonStaticMethods",()=>eO],804)},73246,(e,t,r)=>{t.exports=e.r(804)},87259,33088,20900,66163,16423,40409,80441,e=>{"use strict";var t,r=e.i(84256),n=e.i(75454),a=e.i(63402);let i=Symbol("response"),o=Symbol("passThrough"),s=Symbol("waitUntil");class l{constructor(e,t){this[o]=!1,this[s]=t?{kind:"external",function:t}:{kind:"internal",promises:[]}}respondWith(e){this[i]||(this[i]=Promise.resolve(e))}passThroughOnException(){this[o]=!0}waitUntil(e){if("external"===this[s].kind)return(0,this[s].function)(e);this[s].promises.push(e)}}class u extends l{constructor(e){var t;super(e.request,null==(t=e.context)?void 0:t.waitUntil),this.sourcePage=e.page}get request(){throw Object.defineProperty(new n.PageSignatureError({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}respondWith(){throw Object.defineProperty(new n.PageSignatureError({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}}var c=e.i(85867);e.i(43820);var d=e.i(635),f=e.i(3661),h=e.i(49783);let p=Symbol("internal response"),g=new Set([301,302,303,307,308]);function m(e,t){var r;if(null==e||null==(r=e.request)?void 0:r.headers){if(!(e.request.headers instanceof Headers))throw Object.defineProperty(Error("request.headers must be an instance of Headers"),"__NEXT_ERROR_CODE",{value:"E119",enumerable:!1,configurable:!0});let r=[];for(let[n,a]of e.request.headers)t.set("x-middleware-request-"+n,a),r.push(n);t.set("x-middleware-override-headers",r.join(","))}}class y extends Response{constructor(e,t={}){super(e,t);const r=this.headers,n=new Proxy(new d.ResponseCookies(r),{get(e,n,a){switch(n){case"delete":case"set":return(...a)=>{let i=Reflect.apply(e[n],e,a),o=new Headers(r);return i instanceof d.ResponseCookies&&r.set("x-middleware-set-cookie",i.getAll().map(e=>(0,d.stringifyCookie)(e)).join(",")),m(t,o),i};default:return h.ReflectAdapter.get(e,n,a)}}});this[p]={cookies:n,url:t.url?new f.NextURL(t.url,{headers:(0,a.toNodeOutgoingHttpHeaders)(r),nextConfig:t.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[p].cookies}static json(e,t){let r=Response.json(e,t);return new y(r.body,r)}static redirect(e,t){let r="number"==typeof t?t:(null==t?void 0:t.status)??307;if(!g.has(r))throw Object.defineProperty(RangeError('Failed to execute "redirect" on "response": Invalid status code'),"__NEXT_ERROR_CODE",{value:"E529",enumerable:!1,configurable:!0});let n="object"==typeof t?t:{},i=new Headers(null==n?void 0:n.headers);return i.set("Location",(0,a.validateURL)(e)),new y(null,{...n,headers:i,status:r})}static rewrite(e,t){let r=new Headers(null==t?void 0:t.headers);return r.set("x-middleware-rewrite",(0,a.validateURL)(e)),m(t,r),new y(null,{...t,headers:r})}static next(e){let t=new Headers(null==e?void 0:e.headers);return t.set("x-middleware-next","1"),m(e,t),new y(null,{...e,headers:t})}}function v(e,t){let r="string"==typeof t?new URL(t):t,n=new URL(e,t),a=n.origin===r.origin;return{url:a?n.toString().slice(r.origin.length):n.toString(),isRelative:a}}e.s(["NextResponse",()=>y],33088);var b=e.i(8900);b.NEXT_RSC_UNION_QUERY;var E=e.i(87167),_=e.i(72445);e.i(66401);var R=e.i(18904),w=e.i(88154);e.i(81527);var S=e.i(68644),C=e.i(68045),x=e.i(546);class T{onClose(e){if(this.isClosed)throw Object.defineProperty(Error("Cannot subscribe to a closed CloseController"),"__NEXT_ERROR_CODE",{value:"E365",enumerable:!1,configurable:!0});this.target.addEventListener("close",e),this.listeners++}dispatchClose(){if(this.isClosed)throw Object.defineProperty(Error("Cannot close a CloseController multiple times"),"__NEXT_ERROR_CODE",{value:"E229",enumerable:!1,configurable:!0});this.listeners>0&&this.target.dispatchEvent(new Event("close")),this.isClosed=!0}constructor(){this.target=new EventTarget,this.listeners=0,this.isClosed=!1}}var P=e.i(3949);e.i(79698);let O=Symbol.for("@next/request-context");var A=e.i(11573);class k extends c.NextRequest{constructor(e){super(e.input,e.init),this.sourcePage=e.page}get request(){throw Object.defineProperty(new n.PageSignatureError({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}respondWith(){throw Object.defineProperty(new n.PageSignatureError({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}waitUntil(){throw Object.defineProperty(new n.PageSignatureError({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}}let N={keys:e=>Array.from(e.keys()),get:(e,t)=>e.get(t)??void 0},I=(e,t)=>(0,C.getTracer)().withPropagatedContext(e.headers,t,N),$=!1;async function D(t){var n,i,o,l;let c,d,h,p,g;!function(){if(!$&&($=!0,"true"===process.env.NEXT_PRIVATE_TEST_PROXY)){let{interceptTestApis:t,wrapRequestHandler:r}=e.r(98246);t(),I=r(I)}}(),await (0,r.ensureInstrumentationRegistered)();let m=void 0!==globalThis.__BUILD_MANIFEST;t.request.url=(0,E.normalizeRscURL)(t.request.url);let N=t.bypassNextUrl?new URL(t.request.url):new f.NextURL(t.request.url,{headers:t.request.headers,nextConfig:t.request.nextConfig});for(let e of[...N.searchParams.keys()]){let t=N.searchParams.getAll(e),r=(0,a.normalizeNextQueryParam)(e);if(r){for(let e of(N.searchParams.delete(r),t))N.searchParams.append(r,e);N.searchParams.delete(e)}}let D=process.env.__NEXT_BUILD_ID||"";"buildId"in N&&(D=N.buildId||"",N.buildId="");let j=(0,a.fromNodeOutgoingHttpHeaders)(t.request.headers),M=j.has("x-nextjs-data"),U="1"===j.get(b.RSC_HEADER);M&&"/index"===N.pathname&&(N.pathname="/");let L=new Map;if(!m)for(let e of b.FLIGHT_HEADERS){let t=j.get(e);null!==t&&(L.set(e,t),j.delete(e))}let H=N.searchParams.get(b.NEXT_RSC_UNION_QUERY),q=new k({page:t.page,input:((p=(h="string"==typeof N)?new URL(N):N).searchParams.delete(b.NEXT_RSC_UNION_QUERY),h?p.toString():p).toString(),init:{body:t.request.body,headers:j,method:t.request.method,nextConfig:t.request.nextConfig,signal:t.request.signal}});M&&Object.defineProperty(q,"__isData",{enumerable:!1,value:!0}),!globalThis.__incrementalCacheShared&&t.IncrementalCache&&(globalThis.__incrementalCache=new t.IncrementalCache({CurCacheHandler:t.incrementalCacheHandler,minimalMode:!0,fetchCacheKeyPrefix:"",dev:!1,requestHeaders:t.request.headers,getPrerenderManifest:()=>({version:-1,routes:{},dynamicRoutes:{},notFoundRoutes:[],preview:(0,P.getEdgePreviewProps)()})}));let F=t.request.waitUntil??(null==(n=null==(g=globalThis[O])?void 0:g.get())?void 0:n.waitUntil),X=new u({request:q,page:t.page,context:F?{waitUntil:F}:void 0});if((c=await I(q,()=>{if("/middleware"===t.page||"/src/middleware"===t.page||"/proxy"===t.page||"/src/proxy"===t.page){let e=X.waitUntil.bind(X),r=new T;return(0,C.getTracer)().trace(x.MiddlewareSpan.execute,{spanName:`middleware ${q.method}`,attributes:{"http.target":q.nextUrl.pathname,"http.method":q.method}},async()=>{try{var n,a,i,o;let s=(0,P.getEdgePreviewProps)(),l=await (0,A.getImplicitTags)("/",q.nextUrl,null),u=(0,_.createRequestStoreForAPI)(q,q.nextUrl,l,e=>{d=e},s),c=(0,w.createWorkStore)({page:"/",renderOpts:{cacheLifeProfiles:null==(a=t.request.nextConfig)||null==(n=a.experimental)?void 0:n.cacheLife,cacheComponents:!1,experimental:{isRoutePPREnabled:!1,authInterrupts:!!(null==(o=t.request.nextConfig)||null==(i=o.experimental)?void 0:i.authInterrupts)},supportsDynamicResponse:!0,waitUntil:e,onClose:r.onClose.bind(r),onAfterTaskError:void 0},isPrefetchRequest:"1"===q.headers.get(b.NEXT_ROUTER_PREFETCH_HEADER),buildId:D??"",previouslyRevalidatedTags:[]});return await S.workAsyncStorage.run(c,()=>R.workUnitAsyncStorage.run(u,t.handler,q,X))}finally{setTimeout(()=>{r.dispatchClose()},0)}})}return t.handler(q,X)}))&&!(c instanceof Response))throw Object.defineProperty(TypeError("Expected an instance of Response to be returned"),"__NEXT_ERROR_CODE",{value:"E567",enumerable:!1,configurable:!0});c&&d&&c.headers.set("set-cookie",d);let B=null==c?void 0:c.headers.get("x-middleware-rewrite");if(c&&B&&(U||!m)){let e=new f.NextURL(B,{forceLocale:!0,headers:t.request.headers,nextConfig:t.request.nextConfig});m||e.host!==q.nextUrl.host||(e.buildId=D||e.buildId,c.headers.set("x-middleware-rewrite",String(e)));let{url:r,isRelative:n}=v(e.toString(),N.toString());!m&&M&&c.headers.set("x-nextjs-rewrite",r);let a=!n&&(null==(l=t.request.nextConfig)||null==(o=l.experimental)||null==(i=o.clientParamParsingOrigins)?void 0:i.some(t=>new RegExp(t).test(e.origin)));U&&(n||a)&&(N.pathname!==e.pathname&&c.headers.set(b.NEXT_REWRITTEN_PATH_HEADER,e.pathname),N.search!==e.search&&c.headers.set(b.NEXT_REWRITTEN_QUERY_HEADER,e.search.slice(1)))}if(c&&B&&U&&H){let e=new URL(B);e.searchParams.has(b.NEXT_RSC_UNION_QUERY)||(e.searchParams.set(b.NEXT_RSC_UNION_QUERY,H),c.headers.set("x-middleware-rewrite",e.toString()))}let G=null==c?void 0:c.headers.get("Location");if(c&&G&&!m){let e=new f.NextURL(G,{forceLocale:!1,headers:t.request.headers,nextConfig:t.request.nextConfig});c=new Response(c.body,c),e.host===N.host&&(e.buildId=D||e.buildId,c.headers.set("Location",e.toString())),M&&(c.headers.delete("Location"),c.headers.set("x-nextjs-redirect",v(e.toString(),N.toString()).url))}let z=c||y.next(),W=z.headers.get("x-middleware-override-headers"),V=[];if(W){for(let[e,t]of L)z.headers.set(`x-middleware-request-${e}`,t),V.push(e);V.length>0&&z.headers.set("x-middleware-override-headers",W+","+V.join(","))}return{response:z,waitUntil:("internal"===X[s].kind?Promise.all(X[s].promises).then(()=>{}):void 0)??Promise.resolve(),fetchMetrics:q.fetchMetrics}}var j=e.i(13714);e.i(65832);var M=e.i(18215),U=e.i(14766),L=e.i(2635);class H{constructor(e){this.definition=e,(0,M.isDynamicRoute)(e.pathname)&&(this.dynamic=(0,U.getRouteMatcher)((0,L.getRouteRegex)(e.pathname)))}get identity(){return this.definition.pathname}get isDynamic(){return void 0!==this.dynamic}match(e){let t=this.test(e);return t?{definition:this.definition,params:t.params}:null}test(e){if(this.dynamic){let t=this.dynamic(e);return t?{params:t}:null}return e===this.definition.pathname?{}:null}}let q=Symbol.for("__next_internal_waitUntil__"),F=globalThis[q]||(globalThis[q]={waitUntilCounter:0,waitUntilResolve:void 0,waitUntilPromise:null});var X=e.i(69297),B=e.i(27934),G=e.i(88503),z=e.i(99888);class W{constructor(e,t,r){this.method=e,this.url=t,this.body=r}get cookies(){return this._cookies?this._cookies:this._cookies=(0,z.getCookieParser)(this.headers)()}}class V{constructor(e){this.destination=e}redirect(e,t){return this.setHeader("Location",e),this.statusCode=t,t===G.RedirectStatusCode.PermanentRedirect&&this.setHeader("Refresh",`0;url=${e}`),this}}e.i(78116),e.i(5809);class K extends W{constructor(e){const t=new URL(e.url);for(const[r,n]of(super(e.method,t.href.slice(t.origin.length),e.clone().body),this.request=e,this.fetchMetrics=e.fetchMetrics,this.headers={},e.headers.entries()))this.headers[r]=n}async parseBody(e){throw Object.defineProperty(Error("parseBody is not implemented in the web runtime"),"__NEXT_ERROR_CODE",{value:"E213",enumerable:!1,configurable:!0})}}class Y{constructor(e){this.routeModule=e,this.matcher=new H(e.definition)}static wrap(e,t){let r=new Y(e);return e=>D({...e,IncrementalCache:j.IncrementalCache,handler:r.handler.bind(r),page:t.page})}async handler(e,t){let r=(0,X.getServerUtils)({pageIsDynamic:this.matcher.isDynamic,page:this.matcher.definition.pathname,basePath:e.nextUrl.basePath,rewrites:{},caseSensitive:!1}),{nextConfig:n}=this.routeModule.getNextConfigEdge(new K(e)),{params:a}=r.normalizeDynamicRouteParams((0,B.searchParamsToUrlQuery)(e.nextUrl.searchParams),!1),i=t.waitUntil.bind(t),o=new T,s={params:a,prerenderManifest:{version:4,routes:{},dynamicRoutes:{},preview:(0,P.getEdgePreviewProps)(),notFoundRoutes:[]},renderOpts:{supportsDynamicResponse:!0,waitUntil:i,onClose:o.onClose.bind(o),onAfterTaskError:void 0,cacheComponents:!1,experimental:{authInterrupts:!1},cacheLifeProfiles:n.cacheLife},sharedContext:{buildId:""}},l=await this.routeModule.handle(e,s),u=[F.waitUntilPromise];if(s.renderOpts.pendingWaitUntil&&u.push(s.renderOpts.pendingWaitUntil),t.waitUntil(Promise.all(u)),l.body){var c,d;let e,t;l=new Response((c=l.body,d=()=>o.dispatchClose(),e=new TransformStream,t=()=>d(),c.pipeTo(e.writable).then(t,t),e.readable),{status:l.status,statusText:l.statusText,headers:l.headers})}else setTimeout(()=>o.dispatchClose(),0);return l}}e.s(["EdgeRouteModuleWrapper",()=>Y],87259);var J=e.i(93441),Q=e.i(4842);class Z extends W{static #e=t=Q.NEXT_REQUEST_META;constructor(e){var r;super(e.method.toUpperCase(),e.url,e),this._req=e,this.headers=this._req.headers,this.fetchMetrics=null==(r=this._req)?void 0:r.fetchMetrics,this[t]=this._req[Q.NEXT_REQUEST_META]||{},this.streaming=!1}get originalRequest(){return this._req[Q.NEXT_REQUEST_META]=this[Q.NEXT_REQUEST_META],this._req.url=this.url,this._req.cookies=this.cookies,this._req}set originalRequest(e){this._req=e}stream(){if(this.streaming)throw Object.defineProperty(Error("Invariant: NodeNextRequest.stream() can only be called once"),"__NEXT_ERROR_CODE",{value:"E467",enumerable:!1,configurable:!0});return this.streaming=!0,new ReadableStream({start:e=>{this._req.on("data",t=>{e.enqueue(new Uint8Array(t))}),this._req.on("end",()=>{e.close()}),this._req.on("error",t=>{e.error(t)})}})}}class ee extends V{get originalResponse(){return J.SYMBOL_CLEARED_COOKIES in this&&(this._res[J.SYMBOL_CLEARED_COOKIES]=this[J.SYMBOL_CLEARED_COOKIES]),this._res}constructor(e){super(e),this._res=e,this.textBody=void 0}get sent(){return this._res.finished||this._res.headersSent}get statusCode(){return this._res.statusCode}set statusCode(e){this._res.statusCode=e}get statusMessage(){return this._res.statusMessage}set statusMessage(e){this._res.statusMessage=e}setHeader(e,t){return this._res.setHeader(e,t),this}removeHeader(e){return this._res.removeHeader(e),this}getHeaderValues(e){let t=this._res.getHeader(e);if(void 0!==t)return(Array.isArray(t)?t:[t]).map(e=>e.toString())}hasHeader(e){return this._res.hasHeader(e)}getHeader(e){let t=this.getHeaderValues(e);return Array.isArray(t)?t.join(","):void 0}getHeaders(){return this._res.getHeaders()}appendHeader(e,t){let r=this.getHeaderValues(e)??[];return r.includes(t)||this._res.setHeader(e,[...r,t]),this}body(e){return this.textBody=e,this}send(){this._res.end(this.textBody)}onClose(e){this.originalResponse.on("close",e)}}function et(e){return e.isOnDemandRevalidate?"on-demand":e.isStaticGeneration?"stale":void 0}async function er(e,t,r,n){}e.s(["NodeNextRequest",()=>Z,"NodeNextResponse",()=>ee],20900),e.s(["getRevalidateReason",()=>et],66163),e.i(59106),e.i(13651),e.s(["sendResponse",()=>er],16423);var en=e.i(14327);function ea({revalidate:e,expire:t}){let r="number"==typeof e&&void 0!==t&&e<t?`, stale-while-revalidate=${t-e}`:"";return 0===e?"private, no-cache, no-store, max-age=0, must-revalidate":"number"==typeof e?`s-maxage=${e}${r}`:`s-maxage=${en.CACHE_ONE_YEAR}${r}`}e.s(["getCacheControlHeader",()=>ea],40409);class ei extends Error{constructor(){super(),this.message="Internal: NoFallbackError"}}e.s(["NoFallbackError",()=>ei],80441)}]);

//# sourceMappingURL=node_modules_c144a9c7._.js.map
/**/;(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["chunks/node_modules_a458cac4._.js",27396,(e,t,a)=>{"use strict";var r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,n=Object.prototype.hasOwnProperty,i={},l={SYMBOL_FOR_REQ_CONTEXT:()=>p,getContext:()=>d};for(var u in l)r(i,u,{get:l[u],enumerable:!0});t.exports=((e,t,a,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of s(t))n.call(e,a)||void 0===a||r(e,a,{get:()=>t[a],enumerable:!(i=o(t,a))||i.enumerable});return e})(r({},"__esModule",{value:!0}),i);let p=Symbol.for("@vercel/request-context");function d(){let e=globalThis;return e[p]?.get?.()??{}}},17063,(e,t,a)=>{"use strict";var r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,n=Object.prototype.hasOwnProperty,i={},l={getContext:()=>p.getContext,getVercelOidcToken:()=>d,getVercelOidcTokenSync:()=>c};for(var u in l)r(i,u,{get:l[u],enumerable:!0});t.exports=((e,t,a,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of s(t))n.call(e,a)||void 0===a||r(e,a,{get:()=>t[a],enumerable:!(i=o(t,a))||i.enumerable});return e})(r({},"__esModule",{value:!0}),i);var p=e.r(27396);async function d(){return""}function c(){return""}},97804,28729,e=>{"use strict";var t,a,r,o,s,n,i,l,u,p,d,c,m,h,g,f,v,y,w,b,I,T,x,S,E,M,z,k,R,C=e.i(51615),N=e.i(66125),_=e.i(8715);e.i(6508);var A=e.i(39017),O=e.i(17063),j=Symbol.for("vercel.ai.gateway.error"),q=class e extends(a=Error,t=j,a){constructor({message:e,statusCode:a=500,cause:r}){super(e),this[t]=!0,this.statusCode=a,this.cause=r}static isInstance(t){return e.hasMarker(t)}static hasMarker(e){return"object"==typeof e&&null!==e&&j in e&&!0===e[j]}},P="GatewayAuthenticationError",D=Symbol.for(`vercel.ai.gateway.error.${P}`),U=class e extends(o=q,r=D,o){constructor({message:e="Authentication failed",statusCode:t=401,cause:a}={}){super({message:e,statusCode:t,cause:a}),this[r]=!0,this.name=P,this.type="authentication_error"}static isInstance(e){return q.hasMarker(e)&&D in e}static createContextualError({apiKeyProvided:t,oidcTokenProvided:a,message:r="Authentication failed",statusCode:o=401,cause:s}){return new e({message:t?`AI Gateway authentication failed: Invalid API key.

Create a new API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys

Provide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.`:a?`AI Gateway authentication failed: Invalid OIDC token.

Run 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.

Alternatively, use an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys`:`AI Gateway authentication failed: No authentication provided.

Option 1 - API key:
Create an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys
Provide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.

Option 2 - OIDC token:
Run 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.`,statusCode:o,cause:s})}},$="GatewayInvalidRequestError",F=Symbol.for(`vercel.ai.gateway.error.${$}`),J=class extends(n=q,s=F,n){constructor({message:e="Invalid request",statusCode:t=400,cause:a}={}){super({message:e,statusCode:t,cause:a}),this[s]=!0,this.name=$,this.type="invalid_request_error"}static isInstance(e){return q.hasMarker(e)&&F in e}},V="GatewayRateLimitError",G=Symbol.for(`vercel.ai.gateway.error.${V}`),L=class extends(l=q,i=G,l){constructor({message:e="Rate limit exceeded",statusCode:t=429,cause:a}={}){super({message:e,statusCode:t,cause:a}),this[i]=!0,this.name=V,this.type="rate_limit_exceeded"}static isInstance(e){return q.hasMarker(e)&&G in e}},K="GatewayModelNotFoundError",B=Symbol.for(`vercel.ai.gateway.error.${K}`),W=(0,N.lazySchema)(()=>(0,N.zodSchema)(A.z.object({modelId:A.z.string()}))),H=class extends(p=q,u=B,p){constructor({message:e="Model not found",statusCode:t=404,modelId:a,cause:r}={}){super({message:e,statusCode:t,cause:r}),this[u]=!0,this.name=K,this.type="model_not_found",this.modelId=a}static isInstance(e){return q.hasMarker(e)&&B in e}},Y="GatewayInternalServerError",Q=Symbol.for(`vercel.ai.gateway.error.${Y}`),X=class extends(c=q,d=Q,c){constructor({message:e="Internal server error",statusCode:t=500,cause:a}={}){super({message:e,statusCode:t,cause:a}),this[d]=!0,this.name=Y,this.type="internal_server_error"}static isInstance(e){return q.hasMarker(e)&&Q in e}},Z="GatewayResponseError",ee=Symbol.for(`vercel.ai.gateway.error.${Z}`),et=class extends(h=q,m=ee,h){constructor({message:e="Invalid response from Gateway",statusCode:t=502,response:a,validationError:r,cause:o}={}){super({message:e,statusCode:t,cause:o}),this[m]=!0,this.name=Z,this.type="response_error",this.response=a,this.validationError=r}static isInstance(e){return q.hasMarker(e)&&ee in e}};async function ea({response:e,statusCode:t,defaultMessage:a="Gateway request failed",cause:r,authMethod:o}){let s=await (0,N.safeValidateTypes)({value:e,schema:er});if(!s.success)return new et({message:`Invalid error response format: ${a}`,statusCode:t,response:e,validationError:s.error,cause:r});let n=s.value,i=n.error.type,l=n.error.message;switch(i){case"authentication_error":return U.createContextualError({apiKeyProvided:"api-key"===o,oidcTokenProvided:"oidc"===o,statusCode:t,cause:r});case"invalid_request_error":return new J({message:l,statusCode:t,cause:r});case"rate_limit_exceeded":return new L({message:l,statusCode:t,cause:r});case"model_not_found":{let e=await (0,N.safeValidateTypes)({value:n.error.param,schema:W});return new H({message:l,statusCode:t,modelId:e.success?e.value.modelId:void 0,cause:r})}default:return new X({message:l,statusCode:t,cause:r})}}var er=(0,N.lazySchema)(()=>(0,N.zodSchema)(A.z.object({error:A.z.object({message:A.z.string(),type:A.z.string().nullish(),param:A.z.unknown().nullish(),code:A.z.union([A.z.string(),A.z.number()]).nullish()})})));function eo(e,t){var a;return q.isInstance(e)?e:_.APICallError.isInstance(e)?ea({response:function(e){if(void 0!==e.data)return e.data;if(null!=e.responseBody)try{return JSON.parse(e.responseBody)}catch(t){return e.responseBody}return{}}(e),statusCode:null!=(a=e.statusCode)?a:500,defaultMessage:"Gateway request failed",cause:e,authMethod:t}):ea({response:{},statusCode:500,defaultMessage:e instanceof Error?`Gateway request failed: ${e.message}`:"Unknown Gateway error",cause:e,authMethod:t})}var es="ai-gateway-auth-method";async function en(e){let t=await (0,N.safeValidateTypes)({value:e[es],schema:ei});return t.success?t.value:void 0}var ei=(0,N.lazySchema)(()=>(0,N.zodSchema)(A.z.union([A.z.literal("api-key"),A.z.literal("oidc")]))),el=class{constructor(e){this.config=e}async getAvailableModels(){try{let{value:e}=await (0,N.getFromApi)({url:`${this.config.baseURL}/config`,headers:await (0,N.resolve)(this.config.headers()),successfulResponseHandler:(0,N.createJsonResponseHandler)(eu),failedResponseHandler:(0,N.createJsonErrorResponseHandler)({errorSchema:A.z.any(),errorToMessage:e=>e}),fetch:this.config.fetch});return e}catch(e){throw await eo(e)}}async getCredits(){try{let e=new URL(this.config.baseURL),{value:t}=await (0,N.getFromApi)({url:`${e.origin}/v1/credits`,headers:await (0,N.resolve)(this.config.headers()),successfulResponseHandler:(0,N.createJsonResponseHandler)(ep),failedResponseHandler:(0,N.createJsonErrorResponseHandler)({errorSchema:A.z.any(),errorToMessage:e=>e}),fetch:this.config.fetch});return t}catch(e){throw await eo(e)}}},eu=(0,N.lazySchema)(()=>(0,N.zodSchema)(A.z.object({models:A.z.array(A.z.object({id:A.z.string(),name:A.z.string(),description:A.z.string().nullish(),pricing:A.z.object({input:A.z.string(),output:A.z.string(),input_cache_read:A.z.string().nullish(),input_cache_write:A.z.string().nullish()}).transform(({input:e,output:t,input_cache_read:a,input_cache_write:r})=>({input:e,output:t,...a?{cachedInputTokens:a}:{},...r?{cacheCreationInputTokens:r}:{}})).nullish(),specification:A.z.object({specificationVersion:A.z.literal("v3"),provider:A.z.string(),modelId:A.z.string()}),modelType:A.z.enum(["language","embedding","image"]).nullish()}))}))),ep=(0,N.lazySchema)(()=>(0,N.zodSchema)(A.z.object({balance:A.z.string(),total_used:A.z.string()}).transform(({balance:e,total_used:t})=>({balance:e,totalUsed:t})))),ed=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v3",this.supportedUrls={"*/*":[/.*/]}}get provider(){return this.config.provider}async getArgs(e){let{abortSignal:t,...a}=e;return{args:this.maybeEncodeFileParts(a),warnings:[]}}async doGenerate(e){let{args:t,warnings:a}=await this.getArgs(e),{abortSignal:r}=e,o=await (0,N.resolve)(this.config.headers());try{let{responseHeaders:s,value:n,rawValue:i}=await (0,N.postJsonToApi)({url:this.getUrl(),headers:(0,N.combineHeaders)(o,e.headers,this.getModelConfigHeaders(this.modelId,!1),await (0,N.resolve)(this.config.o11yHeaders)),body:t,successfulResponseHandler:(0,N.createJsonResponseHandler)(A.z.any()),failedResponseHandler:(0,N.createJsonErrorResponseHandler)({errorSchema:A.z.any(),errorToMessage:e=>e}),...r&&{abortSignal:r},fetch:this.config.fetch});return{...n,request:{body:t},response:{headers:s,body:i},warnings:a}}catch(e){throw await eo(e,await en(o))}}async doStream(e){let{args:t,warnings:a}=await this.getArgs(e),{abortSignal:r}=e,o=await (0,N.resolve)(this.config.headers());try{let{value:s,responseHeaders:n}=await (0,N.postJsonToApi)({url:this.getUrl(),headers:(0,N.combineHeaders)(o,e.headers,this.getModelConfigHeaders(this.modelId,!0),await (0,N.resolve)(this.config.o11yHeaders)),body:t,successfulResponseHandler:(0,N.createEventSourceResponseHandler)(A.z.any()),failedResponseHandler:(0,N.createJsonErrorResponseHandler)({errorSchema:A.z.any(),errorToMessage:e=>e}),...r&&{abortSignal:r},fetch:this.config.fetch});return{stream:s.pipeThrough(new TransformStream({start(e){a.length>0&&e.enqueue({type:"stream-start",warnings:a})},transform(t,a){if(t.success){let r=t.value;("raw"!==r.type||e.includeRawChunks)&&("response-metadata"===r.type&&r.timestamp&&"string"==typeof r.timestamp&&(r.timestamp=new Date(r.timestamp)),a.enqueue(r))}else a.error(t.error)}})),request:{body:t},response:{headers:n}}}catch(e){throw await eo(e,await en(o))}}isFilePart(e){return e&&"object"==typeof e&&"type"in e&&"file"===e.type}maybeEncodeFileParts(e){for(let t of e.prompt)for(let e of t.content)if(this.isFilePart(e)&&e.data instanceof Uint8Array){let t=Uint8Array.from(e.data),a=C.Buffer.from(t).toString("base64");e.data=new URL(`data:${e.mediaType||"application/octet-stream"};base64,${a}`)}return e}getUrl(){return`${this.config.baseURL}/language-model`}getModelConfigHeaders(e,t){return{"ai-language-model-specification-version":"2","ai-language-model-id":e,"ai-language-model-streaming":String(t)}}},ec=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v3",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:a,providerOptions:r}){var o;let s=await (0,N.resolve)(this.config.headers());try{let{responseHeaders:n,value:i,rawValue:l}=await (0,N.postJsonToApi)({url:this.getUrl(),headers:(0,N.combineHeaders)(s,null!=t?t:{},this.getModelConfigHeaders(),await (0,N.resolve)(this.config.o11yHeaders)),body:{values:e,...r?{providerOptions:r}:{}},successfulResponseHandler:(0,N.createJsonResponseHandler)(em),failedResponseHandler:(0,N.createJsonErrorResponseHandler)({errorSchema:A.z.any(),errorToMessage:e=>e}),...a&&{abortSignal:a},fetch:this.config.fetch});return{embeddings:i.embeddings,usage:null!=(o=i.usage)?o:void 0,providerMetadata:i.providerMetadata,response:{headers:n,body:l},warnings:[]}}catch(e){throw await eo(e,await en(s))}}getUrl(){return`${this.config.baseURL}/embedding-model`}getModelConfigHeaders(){return{"ai-embedding-model-specification-version":"2","ai-model-id":this.modelId}}},em=(0,N.lazySchema)(()=>(0,N.zodSchema)(A.z.object({embeddings:A.z.array(A.z.array(A.z.number())),usage:A.z.object({tokens:A.z.number()}).nullish(),providerMetadata:A.z.record(A.z.string(),A.z.record(A.z.string(),A.z.unknown())).optional()}))),eh=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v3",this.maxImagesPerCall=Number.MAX_SAFE_INTEGER}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:a,aspectRatio:r,seed:o,providerOptions:s,headers:n,abortSignal:i}){var l;let u=await (0,N.resolve)(this.config.headers());try{let{responseHeaders:p,value:d,rawValue:c}=await (0,N.postJsonToApi)({url:this.getUrl(),headers:(0,N.combineHeaders)(u,null!=n?n:{},this.getModelConfigHeaders(),await (0,N.resolve)(this.config.o11yHeaders)),body:{prompt:e,n:t,...a&&{size:a},...r&&{aspectRatio:r},...o&&{seed:o},...s&&{providerOptions:s}},successfulResponseHandler:(0,N.createJsonResponseHandler)(ef),failedResponseHandler:(0,N.createJsonErrorResponseHandler)({errorSchema:A.z.any(),errorToMessage:e=>e}),...i&&{abortSignal:i},fetch:this.config.fetch});return{images:d.images,warnings:null!=(l=d.warnings)?l:[],providerMetadata:d.providerMetadata,response:{timestamp:new Date,modelId:this.modelId,headers:p}}}catch(e){throw eo(e,await en(u))}}getUrl(){return`${this.config.baseURL}/image-model`}getModelConfigHeaders(){return{"ai-image-model-specification-version":"2","ai-model-id":this.modelId}}},eg=A.z.object({images:A.z.array(A.z.unknown()).optional()}).catchall(A.z.unknown()),ef=A.z.object({images:A.z.array(A.z.string()),warnings:A.z.array(A.z.object({type:A.z.literal("other"),message:A.z.string()})).optional(),providerMetadata:A.z.record(A.z.string(),eg).optional()});async function ev(){var e;return null==(e=(0,O.getContext)().headers)?void 0:e["x-vercel-id"]}function ey(e={}){var t,a;let r=null,o=null,s=null!=(t=e.metadataCacheRefreshMillis)?t:3e5,n=0,i=null!=(a=(0,N.withoutTrailingSlash)(e.baseURL))?a:"https://ai-gateway.vercel.sh/v3/ai",l=async()=>{let t=await eb(e);if(t)return(0,N.withUserAgentSuffix)({Authorization:`Bearer ${t.token}`,"ai-gateway-protocol-version":"0.0.1",[es]:t.authMethod,...e.headers},"ai-sdk/gateway/3.0.2");throw U.createContextualError({apiKeyProvided:!1,oidcTokenProvided:!1,statusCode:401})},u=()=>{let e=(0,N.loadOptionalSetting)({settingValue:void 0,environmentVariableName:"VERCEL_DEPLOYMENT_ID"}),t=(0,N.loadOptionalSetting)({settingValue:void 0,environmentVariableName:"VERCEL_ENV"}),a=(0,N.loadOptionalSetting)({settingValue:void 0,environmentVariableName:"VERCEL_REGION"});return async()=>{let r=await ev();return{...e&&{"ai-o11y-deployment-id":e},...t&&{"ai-o11y-environment":t},...a&&{"ai-o11y-region":a},...r&&{"ai-o11y-request-id":r}}}},p=t=>new ed(t,{provider:"gateway",baseURL:i,headers:l,fetch:e.fetch,o11yHeaders:u()}),d=async()=>{var t,a,u;let p=null!=(u=null==(a=null==(t=e._internal)?void 0:t.currentDate)?void 0:a.call(t).getTime())?u:Date.now();return(!r||p-n>s)&&(n=p,r=new el({baseURL:i,headers:l,fetch:e.fetch}).getAvailableModels().then(e=>(o=e,e)).catch(async e=>{throw await eo(e,await en(await l()))})),o?Promise.resolve(o):r},c=async()=>new el({baseURL:i,headers:l,fetch:e.fetch}).getCredits().catch(async e=>{throw await eo(e,await en(await l()))}),m=function(e){if(new.target)throw Error("The Gateway Provider model function cannot be called with the new keyword.");return p(e)};m.specificationVersion="v3",m.getAvailableModels=d,m.getCredits=c,m.imageModel=t=>new eh(t,{provider:"gateway",baseURL:i,headers:l,fetch:e.fetch,o11yHeaders:u()}),m.languageModel=p;let h=t=>new ec(t,{provider:"gateway",baseURL:i,headers:l,fetch:e.fetch,o11yHeaders:u()});return m.embeddingModel=h,m.textEmbeddingModel=h,m}var ew=ey();async function eb(e){let t=(0,N.loadOptionalSetting)({settingValue:e.apiKey,environmentVariableName:"AI_GATEWAY_API_KEY"});if(t)return{token:t,authMethod:"api-key"};try{return{token:await (0,O.getVercelOidcToken)(),authMethod:"oidc"}}catch(e){return null}}e.s(["GatewayAuthenticationError",()=>U,"createGateway",()=>ey,"gateway",()=>ew],28729);var eI=_,eT=e.i(94323),ex=e.i(31232),eS=Object.defineProperty,eE="AI_InvalidArgumentError",eM=`vercel.ai.error.${eE}`,ez=Symbol.for(eM),ek=class extends eI.AISDKError{constructor({parameter:e,value:t,message:a}){super({name:eE,message:`Invalid argument for parameter ${e}: ${a}`}),this[g]=!0,this.parameter=e,this.value=t}static isInstance(e){return eI.AISDKError.hasMarker(e,eM)}};g=ez;var eR="AI_InvalidStreamPartError",eC=`vercel.ai.error.${eR}`,eN=Symbol.for(eC),e_=class extends eI.AISDKError{constructor({chunk:e,message:t}){super({name:eR,message:t}),this[f]=!0,this.chunk=e}static isInstance(e){return eI.AISDKError.hasMarker(e,eC)}};f=eN;var eA="AI_InvalidToolApprovalError",eO=`vercel.ai.error.${eA}`,ej=Symbol.for(eO),eq=class extends eI.AISDKError{constructor({approvalId:e}){super({name:eA,message:`Tool approval response references unknown approvalId: "${e}". No matching tool-approval-request found in message history.`}),this[v]=!0,this.approvalId=e}static isInstance(e){return eI.AISDKError.hasMarker(e,eO)}};v=ej;var eP="AI_InvalidToolInputError",eD=`vercel.ai.error.${eP}`,eU=Symbol.for(eD),e$=class extends eI.AISDKError{constructor({toolInput:e,toolName:t,cause:a,message:r=`Invalid input for tool ${t}: ${(0,eI.getErrorMessage)(a)}`}){super({name:eP,message:r,cause:a}),this[y]=!0,this.toolInput=e,this.toolName=t}static isInstance(e){return eI.AISDKError.hasMarker(e,eD)}};y=eU;var eF="AI_ToolCallNotFoundForApprovalError",eJ=`vercel.ai.error.${eF}`,eV=Symbol.for(eJ),eG=class extends eI.AISDKError{constructor({toolCallId:e,approvalId:t}){super({name:eF,message:`Tool call "${e}" not found for approval request "${t}".`}),this[w]=!0,this.toolCallId=e,this.approvalId=t}static isInstance(e){return eI.AISDKError.hasMarker(e,eJ)}};w=eV;var eL="AI_NoImageGeneratedError",eK=`vercel.ai.error.${eL}`,eB=Symbol.for(eK),eW=class extends eI.AISDKError{constructor({message:e="No image generated.",cause:t,responses:a}){super({name:eL,message:e,cause:t}),this[b]=!0,this.responses=a}static isInstance(e){return eI.AISDKError.hasMarker(e,eK)}};b=eB;var eH="AI_NoObjectGeneratedError",eY=`vercel.ai.error.${eH}`,eQ=Symbol.for(eY),eX=class extends eI.AISDKError{constructor({message:e="No object generated.",cause:t,text:a,response:r,usage:o,finishReason:s}){super({name:eH,message:e,cause:t}),this[I]=!0,this.text=a,this.response=r,this.usage=o,this.finishReason=s}static isInstance(e){return eI.AISDKError.hasMarker(e,eY)}};I=eQ;var eZ="AI_NoOutputGeneratedError",e0=`vercel.ai.error.${eZ}`,e1=Symbol.for(e0),e2=class extends eI.AISDKError{constructor({message:e="No output generated.",cause:t}={}){super({name:eZ,message:e,cause:t}),this[T]=!0}static isInstance(e){return eI.AISDKError.hasMarker(e,e0)}};T=e1;var e3=class extends eI.AISDKError{constructor(e){super({name:"AI_NoSpeechGeneratedError",message:"No speech audio generated."}),this.responses=e.responses}},e6="AI_NoSuchToolError",e7=`vercel.ai.error.${e6}`,e4=Symbol.for(e7),e8=class extends eI.AISDKError{constructor({toolName:e,availableTools:t,message:a=`Model tried to call unavailable tool '${e}'. ${void 0===t?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:e6,message:a}),this[x]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return eI.AISDKError.hasMarker(e,e7)}};x=e4;var e5="AI_ToolCallRepairError",e9=`vercel.ai.error.${e5}`,te=Symbol.for(e9),tt=class extends eI.AISDKError{constructor({cause:e,originalError:t,message:a=`Error repairing tool call: ${(0,eI.getErrorMessage)(e)}`}){super({name:e5,message:a,cause:e}),this[S]=!0,this.originalError=t}static isInstance(e){return eI.AISDKError.hasMarker(e,e9)}};S=te;var ta=class extends eI.AISDKError{constructor(e){super({name:"AI_UnsupportedModelVersionError",message:`Unsupported model version ${e.version} for provider "${e.provider}" and model "${e.modelId}". AI SDK 5 only supports models that implement specification version "v2".`}),this.version=e.version,this.provider=e.provider,this.modelId=e.modelId}},tr="AI_InvalidDataContentError",to=`vercel.ai.error.${tr}`,ts=Symbol.for(to),tn=class extends eI.AISDKError{constructor({content:e,cause:t,message:a=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:tr,message:a,cause:t}),this[E]=!0,this.content=e}static isInstance(e){return eI.AISDKError.hasMarker(e,to)}};E=ts;var ti="AI_InvalidMessageRoleError",tl=`vercel.ai.error.${ti}`,tu=Symbol.for(tl),tp=class extends eI.AISDKError{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:ti,message:t}),this[M]=!0,this.role=e}static isInstance(e){return eI.AISDKError.hasMarker(e,tl)}};M=tu;var td="AI_MessageConversionError",tc=`vercel.ai.error.${td}`,tm=Symbol.for(tc),th=class extends eI.AISDKError{constructor({originalMessage:e,message:t}){super({name:td,message:t}),this[z]=!0,this.originalMessage=e}static isInstance(e){return eI.AISDKError.hasMarker(e,tc)}};z=tm;var tg="AI_RetryError",tf=`vercel.ai.error.${tg}`,tv=Symbol.for(tf),ty=class extends eI.AISDKError{constructor({message:e,reason:t,errors:a}){super({name:tg,message:e}),this[k]=!0,this.reason=t,this.errors=a,this.lastError=a[a.length-1]}static isInstance(e){return eI.AISDKError.hasMarker(e,tf)}};k=tv;var tw=!1,tb=e=>{if(0===e.warnings.length)return;let t=globalThis.AI_SDK_LOG_WARNINGS;if(!1!==t){if("function"==typeof t)return void t(e);for(let t of(tw||(tw=!0,console.info("AI SDK Warning System: To turn off warning logging, set the AI_SDK_LOG_WARNINGS global to false.")),e.warnings))console.warn(function({warning:e,provider:t,model:a}){let r=`AI SDK Warning (${t} / ${a}):`;switch(e.type){case"unsupported":{let t=`${r} The feature "${e.feature}" is not supported.`;return e.details&&(t+=` ${e.details}`),t}case"compatibility":{let t=`${r} The feature "${e.feature}" is used in a compatibility mode.`;return e.details&&(t+=` ${e.details}`),t}case"other":return`${r} ${e.message}`;default:return`${r} ${JSON.stringify(e,null,2)}`}}({warning:t,provider:e.provider,model:e.model}))}};function tI({provider:e,modelId:t}){tb({warnings:[{type:"compatibility",feature:"specificationVersion",details:"Using v2 specification compatibility mode. Some features may not be available."}],provider:e,model:t})}function tT(e){return"v3"===e.specificationVersion?e:(tI({provider:e.provider,modelId:e.modelId}),new Proxy(e,{get:(e,t)=>"specificationVersion"===t?"v3":e[t]}))}function tx(e){return"v3"===e.specificationVersion?e:(tI({provider:e.provider,modelId:e.modelId}),new Proxy(e,{get:(e,t)=>"specificationVersion"===t?"v3":e[t]}))}function tS(e){return"v3"===e.specificationVersion?e:(tI({provider:e.provider,modelId:e.modelId}),new Proxy(e,{get(e,t){switch(t){case"specificationVersion":return"v3";case"doGenerate":return async(...t)=>{let a=await e.doGenerate(...t);return{...a,finishReason:tE(a.finishReason),usage:tM(a.usage)}};case"doStream":return async(...t)=>{let a=await e.doStream(...t);return{...a,stream:a.stream.pipeThrough(new TransformStream({transform(e,t){"finish"===e.type?t.enqueue({...e,finishReason:tE(e.finishReason),usage:tM(e.usage)}):t.enqueue(e)}}))}};default:return e[t]}}}))}function tE(e){return{unified:"unknown"===e?"other":e,raw:void 0}}function tM(e){return{inputTokens:{total:e.inputTokens,noCache:void 0,cacheRead:e.cachedInputTokens,cacheWrite:void 0},outputTokens:{total:e.outputTokens,text:void 0,reasoning:e.reasoningTokens}}}function tz(e){return"v3"===e.specificationVersion?e:(tI({provider:e.provider,modelId:e.modelId}),new Proxy(e,{get:(e,t)=>"specificationVersion"===t?"v3":e[t]}))}function tk(e){return"v3"===e.specificationVersion?e:(tI({provider:e.provider,modelId:e.modelId}),new Proxy(e,{get:(e,t)=>"specificationVersion"===t?"v3":e[t]}))}function tR(e){if("string"!=typeof e){if("v3"!==e.specificationVersion&&"v2"!==e.specificationVersion)throw new ta({version:e.specificationVersion,provider:e.provider,modelId:e.modelId});return tS(e)}return tN().languageModel(e)}function tC(e){if("string"!=typeof e){if("v3"!==e.specificationVersion&&"v2"!==e.specificationVersion)throw new ta({version:e.specificationVersion,provider:e.provider,modelId:e.modelId});return tT(e)}return tN().embeddingModel(e)}function tN(){var e;return null!=(e=globalThis.AI_SDK_DEFAULT_PROVIDER)?e:ew}var t_=[{mediaType:"image/gif",bytesPrefix:[71,73,70]},{mediaType:"image/png",bytesPrefix:[137,80,78,71]},{mediaType:"image/jpeg",bytesPrefix:[255,216]},{mediaType:"image/webp",bytesPrefix:[82,73,70,70,null,null,null,null,87,69,66,80]},{mediaType:"image/bmp",bytesPrefix:[66,77]},{mediaType:"image/tiff",bytesPrefix:[73,73,42,0]},{mediaType:"image/tiff",bytesPrefix:[77,77,0,42]},{mediaType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102]},{mediaType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99]}],tA=[{mediaType:"audio/mpeg",bytesPrefix:[255,251]},{mediaType:"audio/mpeg",bytesPrefix:[255,250]},{mediaType:"audio/mpeg",bytesPrefix:[255,243]},{mediaType:"audio/mpeg",bytesPrefix:[255,242]},{mediaType:"audio/mpeg",bytesPrefix:[255,227]},{mediaType:"audio/mpeg",bytesPrefix:[255,226]},{mediaType:"audio/wav",bytesPrefix:[82,73,70,70,null,null,null,null,87,65,86,69]},{mediaType:"audio/ogg",bytesPrefix:[79,103,103,83]},{mediaType:"audio/flac",bytesPrefix:[102,76,97,67]},{mediaType:"audio/aac",bytesPrefix:[64,21,0,0]},{mediaType:"audio/mp4",bytesPrefix:[102,116,121,112]},{mediaType:"audio/webm",bytesPrefix:[26,69,223,163]}];function tO({data:e,signatures:t}){let a,r,o="string"==typeof e&&e.startsWith("SUQz")||"string"!=typeof e&&e.length>10&&73===e[0]&&68===e[1]&&51===e[2]?(r=(127&(a="string"==typeof e?(0,N.convertBase64ToUint8Array)(e):e)[6])<<21|(127&a[7])<<14|(127&a[8])<<7|127&a[9],a.slice(r+10)):e,s="string"==typeof o?(0,N.convertBase64ToUint8Array)(o.substring(0,Math.min(o.length,24))):o;for(let e of t)if(s.length>=e.bytesPrefix.length&&e.bytesPrefix.every((e,t)=>null===e||s[t]===e))return e.mediaType}var tj="6.0.3",tq=async({url:e})=>{var t;let a=e.toString();try{let e=await fetch(a,{headers:(0,N.withUserAgentSuffix)({},`ai-sdk/${tj}`,(0,N.getRuntimeEnvironmentUserAgent)())});if(!e.ok)throw new N.DownloadError({url:a,statusCode:e.status,statusText:e.statusText});return{data:new Uint8Array(await e.arrayBuffer()),mediaType:null!=(t=e.headers.get("content-type"))?t:void 0}}catch(e){if(N.DownloadError.isInstance(e))throw e;throw new N.DownloadError({url:a,cause:e})}};function tP(e){try{let[t,a]=e.split(",");return{mediaType:t.split(";")[0].split(":")[1],base64Content:a}}catch(e){return{mediaType:void 0,base64Content:void 0}}}var tD=A.z.union([A.z.string(),A.z.instanceof(Uint8Array),A.z.instanceof(ArrayBuffer),A.z.custom(e=>{var t,a;return null!=(a=null==(t=globalThis.Buffer)?void 0:t.isBuffer(e))&&a},{message:"Must be a Buffer"})]);function tU(e){if(e instanceof Uint8Array)return{data:e,mediaType:void 0};if(e instanceof ArrayBuffer)return{data:new Uint8Array(e),mediaType:void 0};if("string"==typeof e)try{e=new URL(e)}catch(e){}if(e instanceof URL&&"data:"===e.protocol){let{mediaType:t,base64Content:a}=tP(e.toString());if(null==t||null==a)throw new eI.AISDKError({name:"InvalidDataContentError",message:`Invalid data URL format in content ${e.toString()}`});return{data:a,mediaType:t}}return{data:e,mediaType:void 0}}function t$(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)try{return(0,N.convertBase64ToUint8Array)(e)}catch(t){throw new tn({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new tn({content:e})}function tF(e){return void 0===e?[]:Array.isArray(e)?e:[e]}async function tJ({prompt:e,supportedUrls:t,download:a=((e=tq)=>t=>Promise.all(t.map(async t=>t.isUrlSupportedByModel?null:e(t))))()}){let r=await tV(e.messages,a,t),o=[...null!=e.system?"string"==typeof e.system?[{role:"system",content:e.system}]:tF(e.system).map(e=>({role:"system",content:e.content,providerOptions:e.providerOptions})):[],...e.messages.map(e=>(function({message:e,downloadedAssets:t}){let a=e.role;switch(a){case"system":return{role:"system",content:e.content,providerOptions:e.providerOptions};case"user":if("string"==typeof e.content)return{role:"user",content:[{type:"text",text:e.content}],providerOptions:e.providerOptions};return{role:"user",content:e.content.map(e=>(function(e,t){var a;let r;if("text"===e.type)return{type:"text",text:e.text,providerOptions:e.providerOptions};let o=e.type;switch(o){case"image":r=e.image;break;case"file":r=e.data;break;default:throw Error(`Unsupported part type: ${o}`)}let{data:s,mediaType:n}=tU(r),i=null!=n?n:e.mediaType,l=s;if(l instanceof URL){let e=t[l.toString()];e&&(l=e.data,null!=i||(i=e.mediaType))}switch(o){case"image":return(l instanceof Uint8Array||"string"==typeof l)&&(i=null!=(a=tO({data:l,signatures:t_}))?a:i),{type:"file",mediaType:null!=i?i:"image/*",filename:void 0,data:l,providerOptions:e.providerOptions};case"file":if(null==i)throw Error("Media type is missing for file part");return{type:"file",mediaType:i,filename:e.filename,data:l,providerOptions:e.providerOptions}}})(e,t)).filter(e=>"text"!==e.type||""!==e.text),providerOptions:e.providerOptions};case"assistant":if("string"==typeof e.content)return{role:"assistant",content:[{type:"text",text:e.content}],providerOptions:e.providerOptions};return{role:"assistant",content:e.content.filter(e=>"text"!==e.type||""!==e.text||null!=e.providerOptions).filter(e=>"tool-approval-request"!==e.type).map(e=>{let t=e.providerOptions;switch(e.type){case"file":{let{data:a,mediaType:r}=tU(e.data);return{type:"file",data:a,filename:e.filename,mediaType:null!=r?r:e.mediaType,providerOptions:t}}case"reasoning":return{type:"reasoning",text:e.text,providerOptions:t};case"text":return{type:"text",text:e.text,providerOptions:t};case"tool-call":return{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,providerExecuted:e.providerExecuted,providerOptions:t};case"tool-result":return{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,output:tG(e.output),providerOptions:t}}}),providerOptions:e.providerOptions};case"tool":return{role:"tool",content:e.content.filter(e=>"tool-approval-response"!==e.type||e.providerExecuted).map(e=>{switch(e.type){case"tool-result":return{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,output:tG(e.output),providerOptions:e.providerOptions};case"tool-approval-response":return{type:"tool-approval-response",approvalId:e.approvalId,approved:e.approved,reason:e.reason}}}),providerOptions:e.providerOptions};default:throw new tp({role:a})}})({message:e,downloadedAssets:r}))],s=[];for(let e of o){if("tool"!==e.role){s.push(e);continue}let t=s.at(-1);(null==t?void 0:t.role)==="tool"?t.content.push(...e.content):s.push(e)}return s}async function tV(e,t,a){let r=e.filter(e=>"user"===e.role).map(e=>e.content).filter(e=>Array.isArray(e)).flat().filter(e=>"image"===e.type||"file"===e.type).map(e=>{var t;let a=null!=(t=e.mediaType)?t:"image"===e.type?"image/*":void 0,r="image"===e.type?e.image:e.data;if("string"==typeof r)try{r=new URL(r)}catch(e){}return{mediaType:a,data:r}}).filter(e=>e.data instanceof URL).map(e=>({url:e.data,isUrlSupportedByModel:null!=e.mediaType&&(0,N.isUrlSupported)({url:e.data.toString(),mediaType:e.mediaType,supportedUrls:a})}));return Object.fromEntries((await t(r)).map((e,t)=>null==e?null:[r[t].url.toString(),{data:e.data,mediaType:e.mediaType}]).filter(e=>null!=e))}function tG(e){return"content"!==e.type?e:{type:"content",value:e.value.map(e=>"media"!==e.type?e:e.mediaType.startsWith("image/")?{type:"image-data",data:e.data,mediaType:e.mediaType}:{type:"file-data",data:e.data,mediaType:e.mediaType})}}async function tL({toolCallId:e,input:t,output:a,tool:r,errorMode:o}){return"text"===o?{type:"error-text",value:(0,eI.getErrorMessage)(a)}:"json"===o?{type:"error-json",value:tK(a)}:(null==r?void 0:r.toModelOutput)?await r.toModelOutput({toolCallId:e,input:t,output:a}):"string"==typeof a?{type:"text",value:a}:{type:"json",value:tK(a)}}function tK(e){return void 0===e?null:e}function tB({maxOutputTokens:e,temperature:t,topP:a,topK:r,presencePenalty:o,frequencyPenalty:s,seed:n,stopSequences:i}){if(null!=e){if(!Number.isInteger(e))throw new ek({parameter:"maxOutputTokens",value:e,message:"maxOutputTokens must be an integer"});if(e<1)throw new ek({parameter:"maxOutputTokens",value:e,message:"maxOutputTokens must be >= 1"})}if(null!=t&&"number"!=typeof t)throw new ek({parameter:"temperature",value:t,message:"temperature must be a number"});if(null!=a&&"number"!=typeof a)throw new ek({parameter:"topP",value:a,message:"topP must be a number"});if(null!=r&&"number"!=typeof r)throw new ek({parameter:"topK",value:r,message:"topK must be a number"});if(null!=o&&"number"!=typeof o)throw new ek({parameter:"presencePenalty",value:o,message:"presencePenalty must be a number"});if(null!=s&&"number"!=typeof s)throw new ek({parameter:"frequencyPenalty",value:s,message:"frequencyPenalty must be a number"});if(null!=n&&!Number.isInteger(n))throw new ek({parameter:"seed",value:n,message:"seed must be an integer"});return{maxOutputTokens:e,temperature:t,topP:a,topK:r,presencePenalty:o,frequencyPenalty:s,stopSequences:i,seed:n}}async function tW({tools:e,toolChoice:t,activeTools:a}){if(!(null!=e&&Object.keys(e).length>0))return{tools:void 0,toolChoice:void 0};let r=null!=a?Object.entries(e).filter(([e])=>a.includes(e)):Object.entries(e),o=[];for(let[e,t]of r){let a=t.type;switch(a){case void 0:case"dynamic":case"function":o.push({type:"function",name:e,description:t.description,inputSchema:await (0,N.asSchema)(t.inputSchema).jsonSchema,...null!=t.inputExamples?{inputExamples:t.inputExamples}:{},providerOptions:t.providerOptions,...null!=t.strict?{strict:t.strict}:{}});break;case"provider":o.push({type:"provider",name:e,id:t.id,args:t.args});break;default:throw Error(`Unsupported tool type: ${a}`)}}return{tools:o,toolChoice:null==t?{type:"auto"}:"string"==typeof t?{type:t}:{type:"tool",toolName:t.toolName}}}var tH=A.z.lazy(()=>A.z.union([A.z.null(),A.z.string(),A.z.number(),A.z.boolean(),A.z.record(A.z.string(),tH.optional()),A.z.array(tH)])),tY=A.z.record(A.z.string(),A.z.record(A.z.string(),tH.optional())),tQ=A.z.object({type:A.z.literal("text"),text:A.z.string(),providerOptions:tY.optional()}),tX=A.z.object({type:A.z.literal("image"),image:A.z.union([tD,A.z.instanceof(URL)]),mediaType:A.z.string().optional(),providerOptions:tY.optional()}),tZ=A.z.object({type:A.z.literal("file"),data:A.z.union([tD,A.z.instanceof(URL)]),filename:A.z.string().optional(),mediaType:A.z.string(),providerOptions:tY.optional()}),t0=A.z.object({type:A.z.literal("reasoning"),text:A.z.string(),providerOptions:tY.optional()}),t1=A.z.object({type:A.z.literal("tool-call"),toolCallId:A.z.string(),toolName:A.z.string(),input:A.z.unknown(),providerOptions:tY.optional(),providerExecuted:A.z.boolean().optional()}),t2=A.z.discriminatedUnion("type",[A.z.object({type:A.z.literal("text"),value:A.z.string(),providerOptions:tY.optional()}),A.z.object({type:A.z.literal("json"),value:tH,providerOptions:tY.optional()}),A.z.object({type:A.z.literal("execution-denied"),reason:A.z.string().optional(),providerOptions:tY.optional()}),A.z.object({type:A.z.literal("error-text"),value:A.z.string(),providerOptions:tY.optional()}),A.z.object({type:A.z.literal("error-json"),value:tH,providerOptions:tY.optional()}),A.z.object({type:A.z.literal("content"),value:A.z.array(A.z.union([A.z.object({type:A.z.literal("text"),text:A.z.string(),providerOptions:tY.optional()}),A.z.object({type:A.z.literal("media"),data:A.z.string(),mediaType:A.z.string()}),A.z.object({type:A.z.literal("file-data"),data:A.z.string(),mediaType:A.z.string(),filename:A.z.string().optional(),providerOptions:tY.optional()}),A.z.object({type:A.z.literal("file-url"),url:A.z.string(),providerOptions:tY.optional()}),A.z.object({type:A.z.literal("file-id"),fileId:A.z.union([A.z.string(),A.z.record(A.z.string(),A.z.string())]),providerOptions:tY.optional()}),A.z.object({type:A.z.literal("image-data"),data:A.z.string(),mediaType:A.z.string(),providerOptions:tY.optional()}),A.z.object({type:A.z.literal("image-url"),url:A.z.string(),providerOptions:tY.optional()}),A.z.object({type:A.z.literal("image-file-id"),fileId:A.z.union([A.z.string(),A.z.record(A.z.string(),A.z.string())]),providerOptions:tY.optional()}),A.z.object({type:A.z.literal("custom"),providerOptions:tY.optional()})]))})]),t3=A.z.object({type:A.z.literal("tool-result"),toolCallId:A.z.string(),toolName:A.z.string(),output:t2,providerOptions:tY.optional()}),t6=A.z.object({type:A.z.literal("tool-approval-request"),approvalId:A.z.string(),toolCallId:A.z.string()}),t7=A.z.object({type:A.z.literal("tool-approval-response"),approvalId:A.z.string(),approved:A.z.boolean(),reason:A.z.string().optional()}),t4=A.z.object({role:A.z.literal("system"),content:A.z.string(),providerOptions:tY.optional()}),t8=A.z.object({role:A.z.literal("user"),content:A.z.union([A.z.string(),A.z.array(A.z.union([tQ,tX,tZ]))]),providerOptions:tY.optional()}),t5=A.z.object({role:A.z.literal("assistant"),content:A.z.union([A.z.string(),A.z.array(A.z.union([tQ,tZ,t0,t1,t3,t6]))]),providerOptions:tY.optional()}),t9=A.z.object({role:A.z.literal("tool"),content:A.z.array(A.z.union([t3,t7])),providerOptions:tY.optional()}),ae=A.z.union([t4,t8,t5,t9]);async function at(e){let t;if(null==e.prompt&&null==e.messages)throw new eI.InvalidPromptError({prompt:e,message:"prompt or messages must be defined"});if(null!=e.prompt&&null!=e.messages)throw new eI.InvalidPromptError({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(null!=e.system&&"string"!=typeof e.system&&!tF(e.system).every(e=>"object"==typeof e&&null!==e&&"role"in e&&"system"===e.role))throw new eI.InvalidPromptError({prompt:e,message:"system must be a string, SystemModelMessage, or array of SystemModelMessage"});if(null!=e.prompt&&"string"==typeof e.prompt)t=[{role:"user",content:e.prompt}];else if(null!=e.prompt&&Array.isArray(e.prompt))t=e.prompt;else if(null!=e.messages)t=e.messages;else throw new eI.InvalidPromptError({prompt:e,message:"prompt or messages must be defined"});if(0===t.length)throw new eI.InvalidPromptError({prompt:e,message:"messages must not be empty"});let a=await (0,N.safeValidateTypes)({value:t,schema:A.z.array(ae)});if(!a.success)throw new eI.InvalidPromptError({prompt:e,message:"The messages do not match the ModelMessage[] schema.",cause:a.error});return{messages:t,system:e.system}}function aa(e){if(!U.isInstance(e))return e;let t="https://ai-sdk.dev/unauthenticated-ai-gateway";return(null==process?void 0:"production")==="production"?new eI.AISDKError({name:"GatewayError",message:`Unauthenticated. Configure AI_GATEWAY_API_KEY or use a provider module. Learn more: ${t}`}):Object.assign(Error(`\x1b[1m\x1b[31mUnauthenticated request to AI Gateway.\x1b[0m

To authenticate, set the \x1b[33mAI_GATEWAY_API_KEY\x1b[0m environment variable with your API key.

Alternatively, you can use a provider module instead of the AI Gateway.

Learn more: \x1b[34m${t}\x1b[0m

`),{name:"GatewayAuthenticationError"})}function ar({operationId:e,telemetry:t}){return{"operation.name":`${e}${(null==t?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":null==t?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":null==t?void 0:t.functionId}}function ao({model:e,settings:t,telemetry:a,headers:r}){var o;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((e,[t,a])=>(e[`ai.settings.${t}`]=a,e),{}),...Object.entries(null!=(o=null==a?void 0:a.metadata)?o:{}).reduce((e,[t,a])=>(e[`ai.telemetry.metadata.${t}`]=a,e),{}),...Object.entries(null!=r?r:{}).reduce((e,[t,a])=>(void 0!==a&&(e[`ai.request.headers.${t}`]=a),e),{})}}var as={startSpan:()=>an,startActiveSpan:(e,t,a,r)=>"function"==typeof t?t(an):"function"==typeof a?a(an):"function"==typeof r?r(an):void 0},an={spanContext:()=>ai,setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording:()=>!1,recordException(){return this}},ai={traceId:"",spanId:"",traceFlags:0};function al({isEnabled:e=!1,tracer:t}={}){return e?t||eT.trace.getTracer("ai"):as}async function au({name:e,tracer:t,attributes:a,fn:r,endWhenDone:o=!0}){return t.startActiveSpan(e,{attributes:await a},async e=>{try{let t=await r(e);return o&&e.end(),t}catch(t){try{ap(e,t)}finally{e.end()}throw t}})}function ap(e,t){t instanceof Error?(e.recordException({name:t.name,message:t.message,stack:t.stack}),e.setStatus({code:ex.SpanStatusCode.ERROR,message:t.message})):e.setStatus({code:ex.SpanStatusCode.ERROR})}async function ad({telemetry:e,attributes:t}){if((null==e?void 0:e.isEnabled)!==!0)return{};let a={};for(let[r,o]of Object.entries(t))if(null!=o){if("object"==typeof o&&"input"in o&&"function"==typeof o.input){if((null==e?void 0:e.recordInputs)===!1)continue;let t=await o.input();null!=t&&(a[r]=t);continue}if("object"==typeof o&&"output"in o&&"function"==typeof o.output){if((null==e?void 0:e.recordOutputs)===!1)continue;let t=await o.output();null!=t&&(a[r]=t);continue}a[r]=o}return a}function ac(e){return JSON.stringify(e.map(e=>({...e,content:"string"==typeof e.content?e.content:e.content.map(e=>{var t;return"file"===e.type?{...e,data:e.data instanceof Uint8Array?"string"==typeof(t=e.data)?t:t instanceof ArrayBuffer?(0,N.convertUint8ArrayToBase64)(new Uint8Array(t)):(0,N.convertUint8ArrayToBase64)(t):e.data}:e})})))}function am(e){return{inputTokens:e.inputTokens.total,inputTokenDetails:{noCacheTokens:e.inputTokens.noCache,cacheReadTokens:e.inputTokens.cacheRead,cacheWriteTokens:e.inputTokens.cacheWrite},outputTokens:e.outputTokens.total,outputTokenDetails:{textTokens:e.outputTokens.text,reasoningTokens:e.outputTokens.reasoning},totalTokens:af(e.inputTokens.total,e.outputTokens.total),raw:e.raw,reasoningTokens:e.outputTokens.reasoning,cachedInputTokens:e.inputTokens.cacheRead}}function ah(){return{inputTokens:void 0,inputTokenDetails:{noCacheTokens:void 0,cacheReadTokens:void 0,cacheWriteTokens:void 0},outputTokens:void 0,outputTokenDetails:{textTokens:void 0,reasoningTokens:void 0},totalTokens:void 0,raw:void 0}}function ag(e,t){var a,r,o,s,n,i,l,u,p,d;return{inputTokens:af(e.inputTokens,t.inputTokens),inputTokenDetails:{noCacheTokens:af(null==(a=e.inputTokenDetails)?void 0:a.noCacheTokens,null==(r=t.inputTokenDetails)?void 0:r.noCacheTokens),cacheReadTokens:af(null==(o=e.inputTokenDetails)?void 0:o.cacheReadTokens,null==(s=t.inputTokenDetails)?void 0:s.cacheReadTokens),cacheWriteTokens:af(null==(n=e.inputTokenDetails)?void 0:n.cacheWriteTokens,null==(i=t.inputTokenDetails)?void 0:i.cacheWriteTokens)},outputTokens:af(e.outputTokens,t.outputTokens),outputTokenDetails:{textTokens:af(null==(l=e.outputTokenDetails)?void 0:l.textTokens,null==(u=t.outputTokenDetails)?void 0:u.textTokens),reasoningTokens:af(null==(p=e.outputTokenDetails)?void 0:p.reasoningTokens,null==(d=t.outputTokenDetails)?void 0:d.reasoningTokens)},totalTokens:af(e.totalTokens,t.totalTokens),reasoningTokens:af(e.reasoningTokens,t.reasoningTokens),cachedInputTokens:af(e.cachedInputTokens,t.cachedInputTokens)}}function af(e,t){return null==e&&null==t?void 0:(null!=e?e:0)+(null!=t?t:0)}function av(e,t){if(void 0===e&&void 0===t)return;if(void 0===e)return t;if(void 0===t)return e;let a={...e};for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)){let o=t[r];if(void 0===o)continue;let s=r in e?e[r]:void 0,n=null!==o&&"object"==typeof o&&!Array.isArray(o)&&!(o instanceof Date)&&!(o instanceof RegExp),i=null!=s&&"object"==typeof s&&!Array.isArray(s)&&!(s instanceof Date)&&!(s instanceof RegExp);n&&i?a[r]=av(s,o):a[r]=o}return a}async function ay(e,{maxRetries:t,delayInMs:a,backoffFactor:r,abortSignal:o},s=[]){try{return await e()}catch(u){if((0,N.isAbortError)(u)||0===t)throw u;let n=(0,N.getErrorMessage)(u),i=[...s,u],l=i.length;if(l>t)throw new ty({message:`Failed after ${l} attempts. Last error: ${n}`,reason:"maxRetriesExceeded",errors:i});if(u instanceof Error&&eI.APICallError.isInstance(u)&&!0===u.isRetryable&&l<=t)return await (0,N.delay)(function({error:e,exponentialBackoffDelay:t}){let a,r=e.responseHeaders;if(!r)return t;let o=r["retry-after-ms"];if(o){let e=parseFloat(o);Number.isNaN(e)||(a=e)}let s=r["retry-after"];if(s&&void 0===a){let e=parseFloat(s);a=Number.isNaN(e)?Date.parse(s)-Date.now():1e3*e}return null!=a&&!Number.isNaN(a)&&0<=a&&(a<6e4||a<t)?a:t}({error:u,exponentialBackoffDelay:a}),{abortSignal:o}),ay(e,{maxRetries:t,delayInMs:r*a,backoffFactor:r,abortSignal:o},i);if(1===l)throw u;throw new ty({message:`Failed after ${l} attempts with non-retryable error: '${n}'`,reason:"errorNotRetryable",errors:i})}}function aw({maxRetries:e,abortSignal:t}){if(null!=e){if(!Number.isInteger(e))throw new ek({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new ek({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}let a=null!=e?e:2;return{maxRetries:a,retry:(({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:a=2,abortSignal:r}={})=>async o=>ay(o,{maxRetries:e,delayInMs:t,backoffFactor:a,abortSignal:r}))({maxRetries:a,abortSignal:t})}}function ab({messages:e}){let t=e.at(-1);if((null==t?void 0:t.role)!="tool")return{approvedToolApprovals:[],deniedToolApprovals:[]};let a={};for(let t of e)if("assistant"===t.role&&"string"!=typeof t.content)for(let e of t.content)"tool-call"===e.type&&(a[e.toolCallId]=e);let r={};for(let t of e)if("assistant"===t.role&&"string"!=typeof t.content)for(let e of t.content)"tool-approval-request"===e.type&&(r[e.approvalId]=e);let o={};for(let e of t.content)"tool-result"===e.type&&(o[e.toolCallId]=e);let s=[],n=[];for(let e of t.content.filter(e=>"tool-approval-response"===e.type)){let t=r[e.approvalId];if(null==t)throw new eq({approvalId:e.approvalId});if(null!=o[t.toolCallId])continue;let i=a[t.toolCallId];if(null==i)throw new eG({toolCallId:t.toolCallId,approvalId:t.approvalId});let l={approvalRequest:t,approvalResponse:e,toolCall:i};e.approved?s.push(l):n.push(l)}return{approvedToolApprovals:s,deniedToolApprovals:n}}async function aI({toolCall:e,tools:t,tracer:a,telemetry:r,messages:o,abortSignal:s,experimental_context:n,onPreliminaryToolResult:i}){let{toolName:l,toolCallId:u,input:p}=e,d=null==t?void 0:t[l];if((null==d?void 0:d.execute)!=null)return au({name:"ai.toolCall",attributes:ad({telemetry:r,attributes:{...ar({operationId:"ai.toolCall",telemetry:r}),"ai.toolCall.name":l,"ai.toolCall.id":u,"ai.toolCall.args":{output:()=>JSON.stringify(p)}}}),tracer:a,fn:async t=>{let a;try{for await(let t of(0,N.executeTool)({execute:d.execute.bind(d),input:p,options:{toolCallId:u,messages:o,abortSignal:s,experimental_context:n}}))"preliminary"===t.type?null==i||i({...e,type:"tool-result",output:t.output,preliminary:!0}):a=t.output}catch(a){return ap(t,a),{type:"tool-error",toolCallId:u,toolName:l,input:p,error:a,dynamic:"dynamic"===d.type,...null!=e.providerMetadata?{providerMetadata:e.providerMetadata}:{}}}try{t.setAttributes(await ad({telemetry:r,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(a)}}}))}catch(e){}return{type:"tool-result",toolCallId:u,toolName:l,input:p,output:a,dynamic:"dynamic"===d.type,...null!=e.providerMetadata?{providerMetadata:e.providerMetadata}:{}}}})}function aT(e){let t=e.filter(e=>"text"===e.type);if(0!==t.length)return t.map(e=>e.text).join("")}var ax=class{constructor({data:e,mediaType:t}){const a=e instanceof Uint8Array;this.base64Data=a?void 0:e,this.uint8ArrayData=a?e:void 0,this.mediaType=t}get base64(){return null==this.base64Data&&(this.base64Data=(0,N.convertUint8ArrayToBase64)(this.uint8ArrayData)),this.base64Data}get uint8Array(){return null==this.uint8ArrayData&&(this.uint8ArrayData=(0,N.convertBase64ToUint8Array)(this.base64Data)),this.uint8ArrayData}},aS=class extends ax{constructor(e){super(e),this.type="file"}};async function aE({tool:e,toolCall:t,messages:a,experimental_context:r}){return null!=e.needsApproval&&("boolean"==typeof e.needsApproval?e.needsApproval:await e.needsApproval(t.input,{toolCallId:t.toolCallId,messages:a,experimental_context:r}))}var aM={},az={array:()=>a_,choice:()=>aA,json:()=>aO,object:()=>aN,text:()=>aC};for(var ak in az)eS(aM,ak,{get:az[ak],enumerable:!0});async function aR(e){if(void 0===e)return{value:void 0,state:"undefined-input"};let t=await (0,N.safeParseJSON)({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=await (0,N.safeParseJSON)({text:function(e){let t=["ROOT"],a=-1,r=null;function o(e,o,s){switch(e){case'"':a=o,t.pop(),t.push(s),t.push("INSIDE_STRING");break;case"f":case"t":case"n":a=o,r=o,t.pop(),t.push(s),t.push("INSIDE_LITERAL");break;case"-":t.pop(),t.push(s),t.push("INSIDE_NUMBER");break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":a=o,t.pop(),t.push(s),t.push("INSIDE_NUMBER");break;case"{":a=o,t.pop(),t.push(s),t.push("INSIDE_OBJECT_START");break;case"[":a=o,t.pop(),t.push(s),t.push("INSIDE_ARRAY_START")}}function s(e,r){switch(e){case",":t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break;case"}":a=r,t.pop()}}function n(e,r){switch(e){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":a=r,t.pop()}}for(let i=0;i<e.length;i++){let l=e[i];switch(t[t.length-1]){case"ROOT":o(l,i,"FINISH");break;case"INSIDE_OBJECT_START":switch(l){case'"':t.pop(),t.push("INSIDE_OBJECT_KEY");break;case"}":a=i,t.pop()}break;case"INSIDE_OBJECT_AFTER_COMMA":'"'===l&&(t.pop(),t.push("INSIDE_OBJECT_KEY"));break;case"INSIDE_OBJECT_KEY":'"'===l&&(t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY"));break;case"INSIDE_OBJECT_AFTER_KEY":":"===l&&(t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE"));break;case"INSIDE_OBJECT_BEFORE_VALUE":o(l,i,"INSIDE_OBJECT_AFTER_VALUE");break;case"INSIDE_OBJECT_AFTER_VALUE":s(l,i);break;case"INSIDE_STRING":switch(l){case'"':t.pop(),a=i;break;case"\\":t.push("INSIDE_STRING_ESCAPE");break;default:a=i}break;case"INSIDE_ARRAY_START":"]"===l?(a=i,t.pop()):(a=i,o(l,i,"INSIDE_ARRAY_AFTER_VALUE"));break;case"INSIDE_ARRAY_AFTER_VALUE":switch(l){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":a=i,t.pop();break;default:a=i}break;case"INSIDE_ARRAY_AFTER_COMMA":o(l,i,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_STRING_ESCAPE":t.pop(),a=i;break;case"INSIDE_NUMBER":switch(l){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":a=i;break;case"e":case"E":case"-":case".":break;case",":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&n(l,i),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&s(l,i);break;case"}":t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&s(l,i);break;case"]":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&n(l,i);break;default:t.pop()}break;case"INSIDE_LITERAL":{let o=e.substring(r,i+1);"false".startsWith(o)||"true".startsWith(o)||"null".startsWith(o)?a=i:(t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]?s(l,i):"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&n(l,i))}}}let i=e.slice(0,a+1);for(let a=t.length-1;a>=0;a--)switch(t[a]){case"INSIDE_STRING":i+='"';break;case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":i+="}";break;case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":i+="]";break;case"INSIDE_LITERAL":{let t=e.substring(r,e.length);"true".startsWith(t)?i+="true".slice(t.length):"false".startsWith(t)?i+="false".slice(t.length):"null".startsWith(t)&&(i+="null".slice(t.length))}}return i}(e)})).success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"}}var aC=()=>({responseFormat:Promise.resolve({type:"text"}),parseCompleteOutput:async({text:e})=>e,parsePartialOutput:async({text:e})=>({partial:e})}),aN=({schema:e,name:t,description:a})=>{let r=(0,N.asSchema)(e);return{responseFormat:(0,N.resolve)(r.jsonSchema).then(e=>({type:"json",schema:e,...null!=t&&{name:t},...null!=a&&{description:a}})),async parseCompleteOutput({text:e},t){let a=await (0,N.safeParseJSON)({text:e});if(!a.success)throw new eX({message:"No object generated: could not parse the response.",cause:a.error,text:e,response:t.response,usage:t.usage,finishReason:t.finishReason});let o=await (0,N.safeValidateTypes)({value:a.value,schema:r});if(!o.success)throw new eX({message:"No object generated: response did not match schema.",cause:o.error,text:e,response:t.response,usage:t.usage,finishReason:t.finishReason});return o.value},async parsePartialOutput({text:e}){let t=await aR(e);switch(t.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:t.value}}}}},a_=({element:e,name:t,description:a})=>{let r=(0,N.asSchema)(e);return{responseFormat:(0,N.resolve)(r.jsonSchema).then(e=>{let{$schema:r,...o}=e;return{type:"json",schema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{elements:{type:"array",items:o}},required:["elements"],additionalProperties:!1},...null!=t&&{name:t},...null!=a&&{description:a}}}),async parseCompleteOutput({text:e},t){let a=await (0,N.safeParseJSON)({text:e});if(!a.success)throw new eX({message:"No object generated: could not parse the response.",cause:a.error,text:e,response:t.response,usage:t.usage,finishReason:t.finishReason});let o=a.value;if(null==o||"object"!=typeof o||!("elements"in o)||!Array.isArray(o.elements))throw new eX({message:"No object generated: response did not match schema.",cause:new eI.TypeValidationError({value:o,cause:"response must be an object with an elements array"}),text:e,response:t.response,usage:t.usage,finishReason:t.finishReason});for(let a of o.elements){let o=await (0,N.safeValidateTypes)({value:a,schema:r});if(!o.success)throw new eX({message:"No object generated: response did not match schema.",cause:o.error,text:e,response:t.response,usage:t.usage,finishReason:t.finishReason})}return o.elements},async parsePartialOutput({text:e}){let t=await aR(e);switch(t.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":{let e=t.value;if(null==e||"object"!=typeof e||!("elements"in e)||!Array.isArray(e.elements))return;let a="repaired-parse"===t.state&&e.elements.length>0?e.elements.slice(0,-1):e.elements,o=[];for(let e of a){let t=await (0,N.safeValidateTypes)({value:e,schema:r});t.success&&o.push(t.value)}return{partial:o}}}}}},aA=({options:e,name:t,description:a})=>({responseFormat:Promise.resolve({type:"json",schema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{result:{type:"string",enum:e}},required:["result"],additionalProperties:!1},...null!=t&&{name:t},...null!=a&&{description:a}}),async parseCompleteOutput({text:t},a){let r=await (0,N.safeParseJSON)({text:t});if(!r.success)throw new eX({message:"No object generated: could not parse the response.",cause:r.error,text:t,response:a.response,usage:a.usage,finishReason:a.finishReason});let o=r.value;if(null==o||"object"!=typeof o||!("result"in o)||"string"!=typeof o.result||!e.includes(o.result))throw new eX({message:"No object generated: response did not match schema.",cause:new eI.TypeValidationError({value:o,cause:"response must be an object that contains a choice value."}),text:t,response:a.response,usage:a.usage,finishReason:a.finishReason});return o.result},async parsePartialOutput({text:t}){let a=await aR(t);switch(a.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":{let t=a.value;if(null==t||"object"!=typeof t||!("result"in t)||"string"!=typeof t.result)return;let r=e.filter(e=>e.startsWith(t.result));if("successful-parse"===a.state)return r.includes(t.result)?{partial:t.result}:void 0;return 1===r.length?{partial:r[0]}:void 0}}}}),aO=({name:e,description:t}={})=>({responseFormat:Promise.resolve({type:"json",...null!=e&&{name:e},...null!=t&&{description:t}}),async parseCompleteOutput({text:e},t){let a=await (0,N.safeParseJSON)({text:e});if(!a.success)throw new eX({message:"No object generated: could not parse the response.",cause:a.error,text:e,response:t.response,usage:t.usage,finishReason:t.finishReason});return a.value},async parsePartialOutput({text:e}){let t=await aR(e);switch(t.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return void 0===t.value?void 0:{partial:t.value}}}});async function aj({toolCall:e,tools:t,repairToolCall:a,system:r,messages:o}){var s;try{if(null==t){if(e.providerExecuted&&e.dynamic)return await aq(e);throw new e8({toolName:e.toolName})}try{return await aP({toolCall:e,tools:t})}catch(n){if(null==a||!(e8.isInstance(n)||e$.isInstance(n)))throw n;let s=null;try{s=await a({toolCall:e,tools:t,inputSchema:async({toolName:e})=>{let{inputSchema:a}=t[e];return await (0,N.asSchema)(a).jsonSchema},system:r,messages:o,error:n})}catch(e){throw new tt({cause:e,originalError:n})}if(null==s)throw n;return await aP({toolCall:s,tools:t})}}catch(o){let a=await (0,N.safeParseJSON)({text:e.input}),r=a.success?a.value:e.input;return{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:r,dynamic:!0,invalid:!0,error:o,title:null==(s=null==t?void 0:t[e.toolName])?void 0:s.title,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}}}async function aq(e){let t=""===e.input.trim()?{success:!0,value:{}}:await (0,N.safeParseJSON)({text:e.input});if(!1===t.success)throw new e$({toolName:e.toolName,toolInput:e.input,cause:t.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:t.value,providerExecuted:!0,dynamic:!0,providerMetadata:e.providerMetadata}}async function aP({toolCall:e,tools:t}){let a=e.toolName,r=t[a];if(null==r){if(e.providerExecuted&&e.dynamic)return await aq(e);throw new e8({toolName:e.toolName,availableTools:Object.keys(t)})}let o=(0,N.asSchema)(r.inputSchema),s=""===e.input.trim()?await (0,N.safeValidateTypes)({value:{},schema:o}):await (0,N.safeParseJSON)({text:e.input,schema:o});if(!1===s.success)throw new e$({toolName:a,toolInput:e.input,cause:s.error});return"dynamic"===r.type?{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:s.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata,dynamic:!0,title:r.title}:{type:"tool-call",toolCallId:e.toolCallId,toolName:a,input:s.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata,title:r.title}}var aD=class{constructor({content:e,finishReason:t,rawFinishReason:a,usage:r,warnings:o,request:s,response:n,providerMetadata:i}){this.content=e,this.finishReason=t,this.rawFinishReason=a,this.usage=r,this.warnings=o,this.request=s,this.response=n,this.providerMetadata=i}get text(){return this.content.filter(e=>"text"===e.type).map(e=>e.text).join("")}get reasoning(){return this.content.filter(e=>"reasoning"===e.type)}get reasoningText(){return 0===this.reasoning.length?void 0:this.reasoning.map(e=>e.text).join("")}get files(){return this.content.filter(e=>"file"===e.type).map(e=>e.file)}get sources(){return this.content.filter(e=>"source"===e.type)}get toolCalls(){return this.content.filter(e=>"tool-call"===e.type)}get staticToolCalls(){return this.toolCalls.filter(e=>!0!==e.dynamic)}get dynamicToolCalls(){return this.toolCalls.filter(e=>!0===e.dynamic)}get toolResults(){return this.content.filter(e=>"tool-result"===e.type)}get staticToolResults(){return this.toolResults.filter(e=>!0!==e.dynamic)}get dynamicToolResults(){return this.toolResults.filter(e=>!0===e.dynamic)}};function aU(e){return({steps:t})=>t.length===e}function a$(e){return({steps:t})=>{var a,r,o;return null!=(o=null==(r=null==(a=t[t.length-1])?void 0:a.toolCalls)?void 0:r.some(t=>t.toolName===e))&&o}}async function aF({stopConditions:e,steps:t}){return(await Promise.all(e.map(e=>e({steps:t})))).some(e=>e)}async function aJ({content:e,tools:t}){let a=[],r=[];for(let a of e)if("source"!==a.type&&("tool-result"!==a.type&&"tool-error"!==a.type||a.providerExecuted)&&("text"!==a.type||0!==a.text.length))switch(a.type){case"text":r.push({type:"text",text:a.text,providerOptions:a.providerMetadata});break;case"reasoning":r.push({type:"reasoning",text:a.text,providerOptions:a.providerMetadata});break;case"file":r.push({type:"file",data:a.file.base64,mediaType:a.file.mediaType,providerOptions:a.providerMetadata});break;case"tool-call":r.push({type:"tool-call",toolCallId:a.toolCallId,toolName:a.toolName,input:a.input,providerExecuted:a.providerExecuted,providerOptions:a.providerMetadata});break;case"tool-result":{let e=await tL({toolCallId:a.toolCallId,input:a.input,tool:null==t?void 0:t[a.toolName],output:a.output,errorMode:"none"});r.push({type:"tool-result",toolCallId:a.toolCallId,toolName:a.toolName,output:e,providerOptions:a.providerMetadata});break}case"tool-error":{let e=await tL({toolCallId:a.toolCallId,input:a.input,tool:null==t?void 0:t[a.toolName],output:a.error,errorMode:"json"});r.push({type:"tool-result",toolCallId:a.toolCallId,toolName:a.toolName,output:e,providerOptions:a.providerMetadata});break}case"tool-approval-request":r.push({type:"tool-approval-request",approvalId:a.approvalId,toolCallId:a.toolCall.toolCallId})}r.length>0&&a.push({role:"assistant",content:r});let o=[];for(let a of e){if("tool-result"!==a.type&&"tool-error"!==a.type||a.providerExecuted)continue;let e=await tL({toolCallId:a.toolCallId,input:a.input,tool:null==t?void 0:t[a.toolName],output:"tool-result"===a.type?a.output:a.error,errorMode:"tool-error"===a.type?"text":"none"});o.push({type:"tool-result",toolCallId:a.toolCallId,toolName:a.toolName,output:e,...null!=a.providerMetadata?{providerOptions:a.providerMetadata}:{}})}return o.length>0&&a.push({role:"tool",content:o}),a}var aV=(0,N.createIdGenerator)({prefix:"aitxt",size:24});async function aG({model:e,tools:t,toolChoice:a,system:r,prompt:o,messages:s,maxRetries:n,abortSignal:i,headers:l,stopWhen:u=aU(1),experimental_output:p,output:d=p,experimental_telemetry:c,providerOptions:m,experimental_activeTools:h,activeTools:g=h,experimental_prepareStep:f,prepareStep:v=f,experimental_repairToolCall:y,experimental_download:w,experimental_context:b,_internal:{generateId:I=aV,currentDate:T=()=>new Date}={},onStepFinish:x,onFinish:S,...E}){let M=tR(e),z=tF(u),{maxRetries:k,retry:R}=aw({maxRetries:n,abortSignal:i}),C=tB(E),_=(0,N.withUserAgentSuffix)(null!=l?l:{},`ai/${tj}`),A=ao({model:M,telemetry:c,headers:_,settings:{...C,maxRetries:k}}),O=await at({system:r,prompt:o,messages:s}),j=al(c);try{return await au({name:"ai.generateText",attributes:ad({telemetry:c,attributes:{...ar({operationId:"ai.generateText",telemetry:c}),...A,"ai.model.provider":M.provider,"ai.model.id":M.modelId,"ai.prompt":{input:()=>JSON.stringify({system:r,prompt:o,messages:s})}}}),tracer:j,fn:async e=>{var o,s,n,l,u,p,h,f;let k,C,q=O.messages,P=[],{approvedToolApprovals:D,deniedToolApprovals:U}=ab({messages:q}),$=D.filter(e=>!e.toolCall.providerExecuted);if(U.length>0||$.length>0){let e=await aL({toolCalls:$.map(e=>e.toolCall),tools:t,tracer:j,telemetry:c,messages:q,abortSignal:i,experimental_context:b}),a=[];for(let r of e){let e=await tL({toolCallId:r.toolCallId,input:r.input,tool:null==t?void 0:t[r.toolName],output:"tool-result"===r.type?r.output:r.error,errorMode:"tool-error"===r.type?"json":"none"});a.push({type:"tool-result",toolCallId:r.toolCallId,toolName:r.toolName,output:e})}for(let e of U)a.push({type:"tool-result",toolCallId:e.toolCall.toolCallId,toolName:e.toolCall.toolName,output:{type:"execution-denied",reason:e.approvalResponse.reason,...e.toolCall.providerExecuted&&{providerOptions:{openai:{approvalId:e.approvalResponse.approvalId}}}}});P.push({role:"tool",content:a})}let F=[...D,...U].filter(e=>e.toolCall.providerExecuted);F.length>0&&P.push({role:"tool",content:F.map(e=>({type:"tool-approval-response",approvalId:e.approvalResponse.approvalId,approved:e.approvalResponse.approved,reason:e.approvalResponse.reason,providerExecuted:!0}))});let J=tB(E),V=[],G=[],L=[],K=new Map;do{let e=[...q,...P],S=await (null==v?void 0:v({model:M,steps:L,stepNumber:L.length,messages:e,experimental_context:b})),z=tR(null!=(o=null==S?void 0:S.model)?o:M),C=await tJ({prompt:{system:null!=(s=null==S?void 0:S.system)?s:O.system,messages:null!=(n=null==S?void 0:S.messages)?n:e},supportedUrls:await z.supportedUrls,download:w});b=null!=(l=null==S?void 0:S.experimental_context)?l:b;let{toolChoice:D,tools:U}=await tW({tools:t,toolChoice:null!=(u=null==S?void 0:S.toolChoice)?u:a,activeTools:null!=(p=null==S?void 0:S.activeTools)?p:g});k=await R(()=>{var e;return au({name:"ai.generateText.doGenerate",attributes:ad({telemetry:c,attributes:{...ar({operationId:"ai.generateText.doGenerate",telemetry:c}),...A,"ai.model.provider":z.provider,"ai.model.id":z.modelId,"ai.prompt.messages":{input:()=>ac(C)},"ai.prompt.tools":{input:()=>null==U?void 0:U.map(e=>JSON.stringify(e))},"ai.prompt.toolChoice":{input:()=>null!=D?JSON.stringify(D):void 0},"gen_ai.system":z.provider,"gen_ai.request.model":z.modelId,"gen_ai.request.frequency_penalty":E.frequencyPenalty,"gen_ai.request.max_tokens":E.maxOutputTokens,"gen_ai.request.presence_penalty":E.presencePenalty,"gen_ai.request.stop_sequences":E.stopSequences,"gen_ai.request.temperature":null!=(e=E.temperature)?e:void 0,"gen_ai.request.top_k":E.topK,"gen_ai.request.top_p":E.topP}}),tracer:j,fn:async e=>{var t,a,r,o,s,n,l,u;let p=av(m,null==S?void 0:S.providerOptions),h=await z.doGenerate({...J,tools:U,toolChoice:D,responseFormat:await (null==d?void 0:d.responseFormat),prompt:C,providerOptions:p,abortSignal:i,headers:_}),g={id:null!=(a=null==(t=h.response)?void 0:t.id)?a:I(),timestamp:null!=(o=null==(r=h.response)?void 0:r.timestamp)?o:T(),modelId:null!=(n=null==(s=h.response)?void 0:s.modelId)?n:z.modelId,headers:null==(l=h.response)?void 0:l.headers,body:null==(u=h.response)?void 0:u.body};return e.setAttributes(await ad({telemetry:c,attributes:{"ai.response.finishReason":h.finishReason.unified,"ai.response.text":{output:()=>aT(h.content)},"ai.response.toolCalls":{output:()=>{let e=aB(h.content);return null==e?void 0:JSON.stringify(e)}},"ai.response.id":g.id,"ai.response.model":g.modelId,"ai.response.timestamp":g.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(h.providerMetadata),"ai.usage.promptTokens":h.usage.inputTokens.total,"ai.usage.completionTokens":h.usage.outputTokens.total,"gen_ai.response.finish_reasons":[h.finishReason.unified],"gen_ai.response.id":g.id,"gen_ai.response.model":g.modelId,"gen_ai.usage.input_tokens":h.usage.inputTokens.total,"gen_ai.usage.output_tokens":h.usage.outputTokens.total}})),{...h,response:g}}})});let $=await Promise.all(k.content.filter(e=>"tool-call"===e.type).map(a=>aj({toolCall:a,tools:t,repairToolCall:y,system:r,messages:e}))),F={};for(let a of $){if(a.invalid)continue;let r=null==t?void 0:t[a.toolName];null!=r&&((null==r?void 0:r.onInputAvailable)!=null&&await r.onInputAvailable({input:a.input,toolCallId:a.toolCallId,messages:e,abortSignal:i,experimental_context:b}),await aE({tool:r,toolCall:a,messages:e,experimental_context:b})&&(F[a.toolCallId]={type:"tool-approval-request",approvalId:I(),toolCall:a}))}let B=$.filter(e=>e.invalid&&e.dynamic);for(let e of(G=[],B))G.push({type:"tool-error",toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,error:(0,N.getErrorMessage)(e.error),dynamic:!0});for(let a of(V=$.filter(e=>!e.providerExecuted),null!=t&&G.push(...await aL({toolCalls:V.filter(e=>!e.invalid&&null==F[e.toolCallId]),tools:t,tracer:j,telemetry:c,messages:e,abortSignal:i,experimental_context:b})),$)){if(!a.providerExecuted)continue;let e=null==t?void 0:t[a.toolName];(null==e?void 0:e.type)==="provider"&&e.supportsDeferredResults&&(k.content.some(e=>"tool-result"===e.type&&e.toolCallId===a.toolCallId)||K.set(a.toolCallId,{toolName:a.toolName}))}for(let e of k.content)"tool-result"===e.type&&K.delete(e.toolCallId);let W=function({content:e,toolCalls:t,toolOutputs:a,toolApprovalRequests:r,tools:o}){let s=[];for(let a of e)switch(a.type){case"text":case"reasoning":case"source":s.push(a);break;case"file":s.push({type:"file",file:new ax(a),...null!=a.providerMetadata?{providerMetadata:a.providerMetadata}:{}});break;case"tool-call":s.push(t.find(e=>e.toolCallId===a.toolCallId));break;case"tool-result":{let e=t.find(e=>e.toolCallId===a.toolCallId);if(null==e){let e=null==o?void 0:o[a.toolName];if(!((null==e?void 0:e.type)==="provider"&&e.supportsDeferredResults))throw Error(`Tool call ${a.toolCallId} not found.`);a.isError?s.push({type:"tool-error",toolCallId:a.toolCallId,toolName:a.toolName,input:void 0,error:a.result,providerExecuted:!0,dynamic:a.dynamic}):s.push({type:"tool-result",toolCallId:a.toolCallId,toolName:a.toolName,input:void 0,output:a.result,providerExecuted:!0,dynamic:a.dynamic});break}a.isError?s.push({type:"tool-error",toolCallId:a.toolCallId,toolName:a.toolName,input:e.input,error:a.result,providerExecuted:!0,dynamic:e.dynamic}):s.push({type:"tool-result",toolCallId:a.toolCallId,toolName:a.toolName,input:e.input,output:a.result,providerExecuted:!0,dynamic:e.dynamic});break}case"tool-approval-request":{let e=t.find(e=>e.toolCallId===a.toolCallId);if(null==e)throw new eG({toolCallId:a.toolCallId,approvalId:a.approvalId});s.push({type:"tool-approval-request",approvalId:a.approvalId,toolCall:e})}}return[...s,...a,...r]}({content:k.content,toolCalls:$,toolOutputs:G,toolApprovalRequests:Object.values(F),tools:t});P.push(...await aJ({content:W,tools:t}));let H=new aD({content:W,finishReason:k.finishReason.unified,rawFinishReason:k.finishReason.raw,usage:am(k.usage),warnings:k.warnings,providerMetadata:k.providerMetadata,request:null!=(h=k.request)?h:{},response:{...k.response,messages:structuredClone(P)}});tb({warnings:null!=(f=k.warnings)?f:[],provider:z.provider,model:z.modelId}),L.push(H),await (null==x?void 0:x(H))}while((V.length>0&&G.length===V.length||K.size>0)&&!await aF({stopConditions:z,steps:L}))e.setAttributes(await ad({telemetry:c,attributes:{"ai.response.finishReason":k.finishReason.unified,"ai.response.text":{output:()=>aT(k.content)},"ai.response.toolCalls":{output:()=>{let e=aB(k.content);return null==e?void 0:JSON.stringify(e)}},"ai.response.providerMetadata":JSON.stringify(k.providerMetadata),"ai.usage.promptTokens":k.usage.inputTokens.total,"ai.usage.completionTokens":k.usage.outputTokens.total}}));let B=L[L.length-1],W=L.reduce((e,t)=>ag(e,t.usage),{inputTokens:void 0,outputTokens:void 0,totalTokens:void 0,reasoningTokens:void 0,cachedInputTokens:void 0});if(await (null==S?void 0:S({finishReason:B.finishReason,rawFinishReason:B.rawFinishReason,usage:B.usage,content:B.content,text:B.text,reasoningText:B.reasoningText,reasoning:B.reasoning,files:B.files,sources:B.sources,toolCalls:B.toolCalls,staticToolCalls:B.staticToolCalls,dynamicToolCalls:B.dynamicToolCalls,toolResults:B.toolResults,staticToolResults:B.staticToolResults,dynamicToolResults:B.dynamicToolResults,request:B.request,response:B.response,warnings:B.warnings,providerMetadata:B.providerMetadata,steps:L,totalUsage:W,experimental_context:b})),"stop"===B.finishReason){let e=null!=d?d:aC();C=await e.parseCompleteOutput({text:B.text},{response:B.response,usage:B.usage,finishReason:B.finishReason})}return new aK({steps:L,totalUsage:W,output:C})}})}catch(e){throw aa(e)}}async function aL({toolCalls:e,tools:t,tracer:a,telemetry:r,messages:o,abortSignal:s,experimental_context:n}){return(await Promise.all(e.map(async e=>aI({toolCall:e,tools:t,tracer:a,telemetry:r,messages:o,abortSignal:s,experimental_context:n})))).filter(e=>null!=e)}var aK=class{constructor(e){this.steps=e.steps,this._output=e.output,this.totalUsage=e.totalUsage}get finalStep(){return this.steps[this.steps.length-1]}get content(){return this.finalStep.content}get text(){return this.finalStep.text}get files(){return this.finalStep.files}get reasoningText(){return this.finalStep.reasoningText}get reasoning(){return this.finalStep.reasoning}get toolCalls(){return this.finalStep.toolCalls}get staticToolCalls(){return this.finalStep.staticToolCalls}get dynamicToolCalls(){return this.finalStep.dynamicToolCalls}get toolResults(){return this.finalStep.toolResults}get staticToolResults(){return this.finalStep.staticToolResults}get dynamicToolResults(){return this.finalStep.dynamicToolResults}get sources(){return this.finalStep.sources}get finishReason(){return this.finalStep.finishReason}get rawFinishReason(){return this.finalStep.rawFinishReason}get warnings(){return this.finalStep.warnings}get providerMetadata(){return this.finalStep.providerMetadata}get response(){return this.finalStep.response}get request(){return this.finalStep.request}get usage(){return this.finalStep.usage}get experimental_output(){return this.output}get output(){if(null==this._output)throw new e2;return this._output}};function aB(e){let t=e.filter(e=>"tool-call"===e.type);if(0!==t.length)return t.map(e=>({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input}))}function aW(e,t){let a=new Headers(null!=e?e:{});for(let[e,r]of Object.entries(t))a.has(e)||a.set(e,r);return a}function aH({status:e,statusText:t,headers:a,textStream:r}){return new Response(r.pipeThrough(new TextEncoderStream),{status:null!=e?e:200,statusText:t,headers:aW(a,{"content-type":"text/plain; charset=utf-8"})})}function aY({response:e,status:t,statusText:a,headers:r,stream:o}){let s=null!=t?t:200;void 0!==a?e.writeHead(s,a,r):e.writeHead(s,r);let n=o.getReader();(async()=>{try{for(;;){let{done:t,value:a}=await n.read();if(t)break;e.write(a)||await new Promise(t=>{e.once("drain",t)})}}catch(e){throw e}finally{e.end()}})()}function aQ({response:e,status:t,statusText:a,headers:r,textStream:o}){aY({response:e,status:t,statusText:a,headers:Object.fromEntries(aW(r,{"content-type":"text/plain; charset=utf-8"}).entries()),stream:o.pipeThrough(new TextEncoderStream)})}var aX=class extends TransformStream{constructor(){super({transform(e,t){t.enqueue(`data: ${JSON.stringify(e)}

`)},flush(e){e.enqueue("data: [DONE]\n\n")}})}},aZ={"content-type":"text/event-stream","cache-control":"no-cache",connection:"keep-alive","x-vercel-ai-ui-message-stream":"v1","x-accel-buffering":"no"};function a0({status:e,statusText:t,headers:a,stream:r,consumeSseStream:o}){let s=r.pipeThrough(new aX);if(o){let[e,t]=s.tee();s=e,o({stream:t})}return new Response(s.pipeThrough(new TextEncoderStream),{status:e,statusText:t,headers:aW(a,aZ)})}var a1=(0,N.lazySchema)(()=>(0,N.zodSchema)(A.z.union([A.z.strictObject({type:A.z.literal("text-start"),id:A.z.string(),providerMetadata:tY.optional()}),A.z.strictObject({type:A.z.literal("text-delta"),id:A.z.string(),delta:A.z.string(),providerMetadata:tY.optional()}),A.z.strictObject({type:A.z.literal("text-end"),id:A.z.string(),providerMetadata:tY.optional()}),A.z.strictObject({type:A.z.literal("error"),errorText:A.z.string()}),A.z.strictObject({type:A.z.literal("tool-input-start"),toolCallId:A.z.string(),toolName:A.z.string(),providerExecuted:A.z.boolean().optional(),dynamic:A.z.boolean().optional(),title:A.z.string().optional()}),A.z.strictObject({type:A.z.literal("tool-input-delta"),toolCallId:A.z.string(),inputTextDelta:A.z.string()}),A.z.strictObject({type:A.z.literal("tool-input-available"),toolCallId:A.z.string(),toolName:A.z.string(),input:A.z.unknown(),providerExecuted:A.z.boolean().optional(),providerMetadata:tY.optional(),dynamic:A.z.boolean().optional(),title:A.z.string().optional()}),A.z.strictObject({type:A.z.literal("tool-input-error"),toolCallId:A.z.string(),toolName:A.z.string(),input:A.z.unknown(),providerExecuted:A.z.boolean().optional(),providerMetadata:tY.optional(),dynamic:A.z.boolean().optional(),errorText:A.z.string(),title:A.z.string().optional()}),A.z.strictObject({type:A.z.literal("tool-approval-request"),approvalId:A.z.string(),toolCallId:A.z.string()}),A.z.strictObject({type:A.z.literal("tool-output-available"),toolCallId:A.z.string(),output:A.z.unknown(),providerExecuted:A.z.boolean().optional(),dynamic:A.z.boolean().optional(),preliminary:A.z.boolean().optional()}),A.z.strictObject({type:A.z.literal("tool-output-error"),toolCallId:A.z.string(),errorText:A.z.string(),providerExecuted:A.z.boolean().optional(),dynamic:A.z.boolean().optional()}),A.z.strictObject({type:A.z.literal("tool-output-denied"),toolCallId:A.z.string()}),A.z.strictObject({type:A.z.literal("reasoning-start"),id:A.z.string(),providerMetadata:tY.optional()}),A.z.strictObject({type:A.z.literal("reasoning-delta"),id:A.z.string(),delta:A.z.string(),providerMetadata:tY.optional()}),A.z.strictObject({type:A.z.literal("reasoning-end"),id:A.z.string(),providerMetadata:tY.optional()}),A.z.strictObject({type:A.z.literal("source-url"),sourceId:A.z.string(),url:A.z.string(),title:A.z.string().optional(),providerMetadata:tY.optional()}),A.z.strictObject({type:A.z.literal("source-document"),sourceId:A.z.string(),mediaType:A.z.string(),title:A.z.string(),filename:A.z.string().optional(),providerMetadata:tY.optional()}),A.z.strictObject({type:A.z.literal("file"),url:A.z.string(),mediaType:A.z.string(),providerMetadata:tY.optional()}),A.z.strictObject({type:A.z.custom(e=>"string"==typeof e&&e.startsWith("data-"),{message:'Type must start with "data-"'}),id:A.z.string().optional(),data:A.z.unknown(),transient:A.z.boolean().optional()}),A.z.strictObject({type:A.z.literal("start-step")}),A.z.strictObject({type:A.z.literal("finish-step")}),A.z.strictObject({type:A.z.literal("start"),messageId:A.z.string().optional(),messageMetadata:A.z.unknown().optional()}),A.z.strictObject({type:A.z.literal("finish"),finishReason:A.z.enum(["stop","length","content-filter","tool-calls","error","other"]).optional(),messageMetadata:A.z.unknown().optional()}),A.z.strictObject({type:A.z.literal("abort")}),A.z.strictObject({type:A.z.literal("message-metadata"),messageMetadata:A.z.unknown()})])));function a2(e){return e.type.startsWith("data-")}function a3(e){return"text"===e.type}function a6(e){return"file"===e.type}function a7(e){return"reasoning"===e.type}function a4(e){return e.type.startsWith("tool-")}function a8(e){return"dynamic-tool"===e.type}function a5(e){return a4(e)||a8(e)}function a9(e){return e.type.split("-").slice(1).join("-")}function re(e){return a8(e)?e.toolName:a9(e)}function rt({lastMessage:e,messageId:t}){return{message:(null==e?void 0:e.role)==="assistant"?e:{id:t,metadata:void 0,role:"assistant",parts:[]},activeTextParts:{},activeReasoningParts:{},partialToolCalls:{}}}function ra({stream:e,messageMetadataSchema:t,dataPartSchemas:a,runUpdateMessageJob:r,onError:o,onToolCall:s,onData:n}){return e.pipeThrough(new TransformStream({async transform(e,i){await r(async({state:r,write:l})=>{var u,p,d,c;function m(e){let t=r.message.parts.filter(a5).find(t=>t.toolCallId===e);if(null==t)throw Error(`no tool invocation found for tool call ${e}`);return t}function h(e){var t;let a=r.message.parts.find(t=>a4(t)&&t.toolCallId===e.toolCallId);null!=a?(a.state=e.state,a.input=e.input,a.output=e.output,a.errorText=e.errorText,a.rawInput=e.rawInput,a.preliminary=e.preliminary,void 0!==e.title&&(a.title=e.title),a.providerExecuted=null!=(t=e.providerExecuted)?t:a.providerExecuted,null!=e.providerMetadata&&"input-available"===a.state&&(a.callProviderMetadata=e.providerMetadata)):r.message.parts.push({type:`tool-${e.toolName}`,toolCallId:e.toolCallId,state:e.state,title:e.title,input:e.input,output:e.output,rawInput:e.rawInput,errorText:e.errorText,providerExecuted:e.providerExecuted,preliminary:e.preliminary,...null!=e.providerMetadata?{callProviderMetadata:e.providerMetadata}:{}})}function g(e){var t,a;let o=r.message.parts.find(t=>"dynamic-tool"===t.type&&t.toolCallId===e.toolCallId);null!=o?(o.state=e.state,o.toolName=e.toolName,o.input=e.input,o.output=e.output,o.errorText=e.errorText,o.rawInput=null!=(t=e.rawInput)?t:o.rawInput,o.preliminary=e.preliminary,void 0!==e.title&&(o.title=e.title),o.providerExecuted=null!=(a=e.providerExecuted)?a:o.providerExecuted,null!=e.providerMetadata&&"input-available"===o.state&&(o.callProviderMetadata=e.providerMetadata)):r.message.parts.push({type:"dynamic-tool",toolName:e.toolName,toolCallId:e.toolCallId,state:e.state,input:e.input,output:e.output,errorText:e.errorText,preliminary:e.preliminary,providerExecuted:e.providerExecuted,title:e.title,...null!=e.providerMetadata?{callProviderMetadata:e.providerMetadata}:{}})}async function f(e){if(null!=e){let a=null!=r.message.metadata?av(r.message.metadata,e):e;null!=t&&await (0,N.validateTypes)({value:a,schema:t}),r.message.metadata=a}}switch(e.type){case"text-start":{let t={type:"text",text:"",providerMetadata:e.providerMetadata,state:"streaming"};r.activeTextParts[e.id]=t,r.message.parts.push(t),l();break}case"text-delta":{let t=r.activeTextParts[e.id];t.text+=e.delta,t.providerMetadata=null!=(u=e.providerMetadata)?u:t.providerMetadata,l();break}case"text-end":{let t=r.activeTextParts[e.id];t.state="done",t.providerMetadata=null!=(p=e.providerMetadata)?p:t.providerMetadata,delete r.activeTextParts[e.id],l();break}case"reasoning-start":{let t={type:"reasoning",text:"",providerMetadata:e.providerMetadata,state:"streaming"};r.activeReasoningParts[e.id]=t,r.message.parts.push(t),l();break}case"reasoning-delta":{let t=r.activeReasoningParts[e.id];t.text+=e.delta,t.providerMetadata=null!=(d=e.providerMetadata)?d:t.providerMetadata,l();break}case"reasoning-end":{let t=r.activeReasoningParts[e.id];t.providerMetadata=null!=(c=e.providerMetadata)?c:t.providerMetadata,t.state="done",delete r.activeReasoningParts[e.id],l();break}case"file":r.message.parts.push({type:"file",mediaType:e.mediaType,url:e.url}),l();break;case"source-url":r.message.parts.push({type:"source-url",sourceId:e.sourceId,url:e.url,title:e.title,providerMetadata:e.providerMetadata}),l();break;case"source-document":r.message.parts.push({type:"source-document",sourceId:e.sourceId,mediaType:e.mediaType,title:e.title,filename:e.filename,providerMetadata:e.providerMetadata}),l();break;case"tool-input-start":{let t=r.message.parts.filter(a4);r.partialToolCalls[e.toolCallId]={text:"",toolName:e.toolName,index:t.length,dynamic:e.dynamic,title:e.title},e.dynamic?g({toolCallId:e.toolCallId,toolName:e.toolName,state:"input-streaming",input:void 0,providerExecuted:e.providerExecuted,title:e.title}):h({toolCallId:e.toolCallId,toolName:e.toolName,state:"input-streaming",input:void 0,providerExecuted:e.providerExecuted,title:e.title}),l();break}case"tool-input-delta":{let t=r.partialToolCalls[e.toolCallId];t.text+=e.inputTextDelta;let{value:a}=await aR(t.text);t.dynamic?g({toolCallId:e.toolCallId,toolName:t.toolName,state:"input-streaming",input:a,title:t.title}):h({toolCallId:e.toolCallId,toolName:t.toolName,state:"input-streaming",input:a,title:t.title}),l();break}case"tool-input-available":e.dynamic?g({toolCallId:e.toolCallId,toolName:e.toolName,state:"input-available",input:e.input,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata,title:e.title}):h({toolCallId:e.toolCallId,toolName:e.toolName,state:"input-available",input:e.input,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata,title:e.title}),l(),s&&!e.providerExecuted&&await s({toolCall:e});break;case"tool-input-error":e.dynamic?g({toolCallId:e.toolCallId,toolName:e.toolName,state:"output-error",input:e.input,errorText:e.errorText,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}):h({toolCallId:e.toolCallId,toolName:e.toolName,state:"output-error",input:void 0,rawInput:e.input,errorText:e.errorText,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}),l();break;case"tool-approval-request":{let t=m(e.toolCallId);t.state="approval-requested",t.approval={id:e.approvalId},l();break}case"tool-output-denied":m(e.toolCallId).state="output-denied",l();break;case"tool-output-available":{let t=m(e.toolCallId);"dynamic-tool"===t.type?g({toolCallId:e.toolCallId,toolName:t.toolName,state:"output-available",input:t.input,output:e.output,preliminary:e.preliminary,providerExecuted:e.providerExecuted,title:t.title}):h({toolCallId:e.toolCallId,toolName:a9(t),state:"output-available",input:t.input,output:e.output,providerExecuted:e.providerExecuted,preliminary:e.preliminary,title:t.title}),l();break}case"tool-output-error":{let t=m(e.toolCallId);"dynamic-tool"===t.type?g({toolCallId:e.toolCallId,toolName:t.toolName,state:"output-error",input:t.input,errorText:e.errorText,providerExecuted:e.providerExecuted,title:t.title}):h({toolCallId:e.toolCallId,toolName:a9(t),state:"output-error",input:t.input,rawInput:t.rawInput,errorText:e.errorText,providerExecuted:e.providerExecuted,title:t.title}),l();break}case"start-step":r.message.parts.push({type:"step-start"});break;case"finish-step":r.activeTextParts={},r.activeReasoningParts={};break;case"start":null!=e.messageId&&(r.message.id=e.messageId),await f(e.messageMetadata),(null!=e.messageId||null!=e.messageMetadata)&&l();break;case"finish":null!=e.finishReason&&(r.finishReason=e.finishReason),await f(e.messageMetadata),null!=e.messageMetadata&&l();break;case"message-metadata":await f(e.messageMetadata),null!=e.messageMetadata&&l();break;case"error":null==o||o(Error(e.errorText));break;default:if(e.type.startsWith("data-")){if((null==a?void 0:a[e.type])!=null&&await (0,N.validateTypes)({value:e.data,schema:a[e.type]}),e.transient){null==n||n(e);break}let t=null!=e.id?r.message.parts.find(t=>e.type===t.type&&e.id===t.id):void 0;null!=t?t.data=e.data:r.message.parts.push(e),null==n||n(e),l()}}i.enqueue(e)})}}))}function rr({messageId:e,originalMessages:t=[],onFinish:a,onError:r,stream:o}){let s=null==t?void 0:t[t.length-1];(null==s?void 0:s.role)!=="assistant"?s=void 0:e=s.id;let n=!1,i=o.pipeThrough(new TransformStream({transform(t,a){"start"===t.type&&null==t.messageId&&null!=e&&(t.messageId=e),"abort"===t.type&&(n=!0),a.enqueue(t)}}));if(null==a)return i;let l=rt({lastMessage:s?structuredClone(s):void 0,messageId:null!=e?e:""}),u=!1,p=async()=>{if(u||!a)return;u=!0;let e=l.message.id===(null==s?void 0:s.id);await a({isAborted:n,isContinuation:e,responseMessage:l.message,messages:[...e?t.slice(0,-1):t,l.message],finishReason:l.finishReason})};return ra({stream:i,runUpdateMessageJob:async e=>{await e({state:l,write:()=>{}})},onError:r}).pipeThrough(new TransformStream({transform(e,t){t.enqueue(e)},async cancel(){await p()},async flush(){await p()}}))}function ro({response:e,status:t,statusText:a,headers:r,stream:o,consumeSseStream:s}){let n=o.pipeThrough(new aX);if(s){let[e,t]=n.tee();n=e,s({stream:t})}aY({response:e,status:t,statusText:a,headers:Object.fromEntries(aW(r,aZ).entries()),stream:n.pipeThrough(new TextEncoderStream)})}function rs(e){let t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=function(){let e=this.getReader(),t=!1;async function a(a){var r;t=!0;try{a&&await (null==(r=e.cancel)?void 0:r.call(e))}finally{try{e.releaseLock()}catch(e){}}}return{async next(){if(t)return{done:!0,value:void 0};let{done:r,value:o}=await e.read();return r?(await a(!0),{done:!0,value:void 0}):{done:!1,value:o}},return:async()=>(await a(!0),{done:!0,value:void 0}),async throw(e){throw await a(!0),e}}},t}async function rn({stream:e,onError:t}){let a=e.getReader();try{for(;;){let{done:e}=await a.read();if(e)break}}catch(e){null==t||t(e)}finally{a.releaseLock()}}function ri(){let e,t;return{promise:new Promise((a,r)=>{e=a,t=r}),resolve:e,reject:t}}function rl(){let e=[],t=null,a=!1,r=ri(),o=()=>{a=!0,r.resolve(),e.forEach(e=>e.cancel()),e=[],null==t||t.close()},s=async()=>{if(a&&0===e.length){null==t||t.close();return}if(0===e.length)return r=ri(),await r.promise,s();try{let{value:r,done:o}=await e[0].read();o?(e.shift(),0===e.length&&a?null==t||t.close():await s()):null==t||t.enqueue(r)}catch(a){null==t||t.error(a),e.shift(),o()}};return{stream:new ReadableStream({start(e){t=e},pull:s,async cancel(){for(let t of e)await t.cancel();e=[],a=!0}}),addStream:t=>{if(a)throw Error("Cannot add inner stream: outer stream is closed");e.push(t.getReader()),r.resolve()},close:()=>{a=!0,r.resolve(),0===e.length&&(null==t||t.close())},terminate:o}}function ru(){var e,t;return null!=(t=null==(e=null==globalThis?void 0:globalThis.performance)?void 0:e.now())?t:Date.now()}var rp=(0,N.createIdGenerator)({prefix:"aitxt",size:24});function rd({model:e,tools:t,toolChoice:a,system:r,prompt:o,messages:s,maxRetries:n,abortSignal:i,headers:l,stopWhen:u=aU(1),experimental_output:p,output:d=p,experimental_telemetry:c,prepareStep:m,providerOptions:h,experimental_activeTools:g,activeTools:f=g,experimental_repairToolCall:v,experimental_transform:y,experimental_download:w,includeRawChunks:b=!1,onChunk:I,onError:T=({error:e})=>{console.error(e)},onFinish:x,onAbort:S,onStepFinish:E,experimental_context:M,_internal:{now:z=ru,generateId:k=rp,currentDate:R=()=>new Date}={},...C}){return new rc({model:tR(e),telemetry:c,headers:l,settings:C,maxRetries:n,abortSignal:i,system:r,prompt:o,messages:s,tools:t,toolChoice:a,transforms:tF(y),activeTools:f,repairToolCall:v,stopConditions:tF(u),output:d,providerOptions:h,prepareStep:m,includeRawChunks:b,onChunk:I,onError:T,onFinish:x,onAbort:S,onStepFinish:E,now:z,currentDate:R,generateId:k,experimental_context:M,download:w})}var rc=class{constructor({model:e,telemetry:t,headers:a,settings:r,maxRetries:o,abortSignal:s,system:n,prompt:i,messages:l,tools:u,toolChoice:p,transforms:d,activeTools:c,repairToolCall:m,stopConditions:h,output:g,providerOptions:f,prepareStep:v,includeRawChunks:y,now:w,currentDate:b,generateId:I,onChunk:T,onError:x,onFinish:S,onAbort:E,onStepFinish:M,experimental_context:z,download:k}){let R,C,_,A,O;this._totalUsage=new N.DelayedPromise,this._finishReason=new N.DelayedPromise,this._rawFinishReason=new N.DelayedPromise,this._steps=new N.DelayedPromise,this.outputSpecification=g,this.includeRawChunks=y,this.tools=u;let j=[];const q=[];let P={},D=[];const U=[],$=new Map;let F={},J={};const V=new TransformStream({async transform(t,a){var r,o,s,n;a.enqueue(t);let{part:i}=t;if(("text-delta"===i.type||"reasoning-delta"===i.type||"source"===i.type||"tool-call"===i.type||"tool-result"===i.type||"tool-input-start"===i.type||"tool-input-delta"===i.type||"raw"===i.type)&&await (null==T?void 0:T({chunk:i})),"error"===i.type&&await x({error:aa(i.error)}),"text-start"===i.type&&(F[i.id]={type:"text",text:"",providerMetadata:i.providerMetadata},j.push(F[i.id])),"text-delta"===i.type){let e=F[i.id];if(null==e)return void a.enqueue({part:{type:"error",error:`text part ${i.id} not found`},partialOutput:void 0});e.text+=i.text,e.providerMetadata=null!=(r=i.providerMetadata)?r:e.providerMetadata}if("text-end"===i.type){let e=F[i.id];if(null==e)return void a.enqueue({part:{type:"error",error:`text part ${i.id} not found`},partialOutput:void 0});e.providerMetadata=null!=(o=i.providerMetadata)?o:e.providerMetadata,delete F[i.id]}if("reasoning-start"===i.type&&(J[i.id]={type:"reasoning",text:"",providerMetadata:i.providerMetadata},j.push(J[i.id])),"reasoning-delta"===i.type){let e=J[i.id];if(null==e)return void a.enqueue({part:{type:"error",error:`reasoning part ${i.id} not found`},partialOutput:void 0});e.text+=i.text,e.providerMetadata=null!=(s=i.providerMetadata)?s:e.providerMetadata}if("reasoning-end"===i.type){let e=J[i.id];if(null==e)return void a.enqueue({part:{type:"error",error:`reasoning part ${i.id} not found`},partialOutput:void 0});e.providerMetadata=null!=(n=i.providerMetadata)?n:e.providerMetadata,delete J[i.id]}if("file"===i.type&&j.push({type:"file",file:i.file}),"source"===i.type&&j.push(i),"tool-call"===i.type&&j.push(i),"tool-result"!==i.type||i.preliminary||j.push(i),"tool-approval-request"===i.type&&j.push(i),"tool-error"===i.type&&j.push(i),"start-step"===i.type&&(j=[],J={},F={},P=i.request,D=i.warnings),"finish-step"===i.type){let t=await aJ({content:j,tools:u}),a=new aD({content:j,finishReason:i.finishReason,rawFinishReason:i.rawFinishReason,usage:i.usage,warnings:D,request:P,response:{...i.response,messages:[...q,...t]},providerMetadata:i.providerMetadata});await (null==M?void 0:M(a)),tb({warnings:D,provider:e.provider,model:e.modelId}),U.push(a),q.push(...t),R.resolve()}"finish"===i.type&&(O=i.totalUsage,_=i.finishReason,A=i.rawFinishReason)},async flush(e){try{if(0===U.length){let e=new e2({message:"No output generated. Check the stream for errors."});X._finishReason.reject(e),X._rawFinishReason.reject(e),X._totalUsage.reject(e),X._steps.reject(e);return}let e=null!=_?_:"other",a=null!=O?O:ah();X._finishReason.resolve(e),X._rawFinishReason.resolve(A),X._totalUsage.resolve(a),X._steps.resolve(U);let r=U[U.length-1];await (null==S?void 0:S({finishReason:r.finishReason,rawFinishReason:r.rawFinishReason,totalUsage:a,usage:r.usage,content:r.content,text:r.text,reasoningText:r.reasoningText,reasoning:r.reasoning,files:r.files,sources:r.sources,toolCalls:r.toolCalls,staticToolCalls:r.staticToolCalls,dynamicToolCalls:r.dynamicToolCalls,toolResults:r.toolResults,staticToolResults:r.staticToolResults,dynamicToolResults:r.dynamicToolResults,request:r.request,response:r.response,warnings:r.warnings,providerMetadata:r.providerMetadata,steps:U,experimental_context:z})),C.setAttributes(await ad({telemetry:t,attributes:{"ai.response.finishReason":e,"ai.response.text":{output:()=>r.text},"ai.response.toolCalls":{output:()=>{var e;return(null==(e=r.toolCalls)?void 0:e.length)?JSON.stringify(r.toolCalls):void 0}},"ai.response.providerMetadata":JSON.stringify(r.providerMetadata),"ai.usage.inputTokens":a.inputTokens,"ai.usage.outputTokens":a.outputTokens,"ai.usage.totalTokens":a.totalTokens,"ai.usage.reasoningTokens":a.reasoningTokens,"ai.usage.cachedInputTokens":a.cachedInputTokens}}))}catch(t){e.error(t)}finally{C.end()}}}),G=rl();this.addStream=G.addStream,this.closeStream=G.close;const L=G.stream.getReader();let K=new ReadableStream({async start(e){e.enqueue({type:"start"})},async pull(e){function t(){null==E||E({steps:U}),e.enqueue({type:"abort"}),e.close()}try{let{done:a,value:r}=await L.read();if(a)return void e.close();if(null==s?void 0:s.aborted)return void t();e.enqueue(r)}catch(a){(0,N.isAbortError)(a)&&(null==s?void 0:s.aborted)?t():e.error(a)}},cancel:e=>G.stream.cancel(e)});for(const e of d)K=K.pipeThrough(e({tools:u,stopStream(){G.terminate()}}));this.baseStream=K.pipeThrough(function(e){let t,a,r="",o="",s="";function n({controller:e,partialOutput:r}){e.enqueue({part:{type:"text-delta",id:t,text:o,providerMetadata:a},partialOutput:r}),o=""}return new TransformStream({async transform(i,l){var u;if("finish-step"===i.type&&o.length>0&&n({controller:l}),"text-delta"!==i.type&&"text-start"!==i.type&&"text-end"!==i.type)return void l.enqueue({part:i,partialOutput:void 0});if(null==t)t=i.id;else if(i.id!==t)return void l.enqueue({part:i,partialOutput:void 0});if("text-start"===i.type)return void l.enqueue({part:i,partialOutput:void 0});if("text-end"===i.type){o.length>0&&n({controller:l}),l.enqueue({part:i,partialOutput:void 0});return}r+=i.text,o+=i.text,a=null!=(u=i.providerMetadata)?u:a;let p=await e.parsePartialOutput({text:r});if(void 0!==p){let e=JSON.stringify(p.partial);e!==s&&(n({controller:l,partialOutput:p.partial}),s=e)}}})}(null!=g?g:aC())).pipeThrough(V);const{maxRetries:B,retry:W}=aw({maxRetries:o,abortSignal:s}),H=al(t),Y=tB(r),Q=ao({model:e,telemetry:t,headers:a,settings:{...Y,maxRetries:B}}),X=this;au({name:"ai.streamText",attributes:ad({telemetry:t,attributes:{...ar({operationId:"ai.streamText",telemetry:t}),...Q,"ai.prompt":{input:()=>JSON.stringify({system:n,prompt:i,messages:l})}}}),tracer:H,endWhenDone:!1,fn:async r=>{C=r;let o=await at({system:n,prompt:i,messages:l}),d=o.messages,y=[],{approvedToolApprovals:T,deniedToolApprovals:x}=ab({messages:d});if(x.length>0||T.length>0){let e,a=[...T,...x].filter(e=>e.toolCall.providerExecuted),r=T.filter(e=>!e.toolCall.providerExecuted),o=x.filter(e=>!e.toolCall.providerExecuted),n=x.filter(e=>e.toolCall.providerExecuted),i=new ReadableStream({start(t){e=t}});X.addStream(i);try{for(let t of[...o,...n])null==e||e.enqueue({type:"tool-output-denied",toolCallId:t.toolCall.toolCallId,toolName:t.toolCall.toolName});let i=[];if(await Promise.all(r.map(async a=>{let r=await aI({toolCall:a.toolCall,tools:u,tracer:H,telemetry:t,messages:d,abortSignal:s,experimental_context:z,onPreliminaryToolResult:t=>{null==e||e.enqueue(t)}});null!=r&&(null==e||e.enqueue(r),i.push(r))})),a.length>0&&y.push({role:"tool",content:a.map(e=>({type:"tool-approval-response",approvalId:e.approvalResponse.approvalId,approved:e.approvalResponse.approved,reason:e.approvalResponse.reason,providerExecuted:!0}))}),i.length>0||o.length>0){let e=[];for(let t of i)e.push({type:"tool-result",toolCallId:t.toolCallId,toolName:t.toolName,output:await tL({toolCallId:t.toolCallId,input:t.input,tool:null==u?void 0:u[t.toolName],output:"tool-result"===t.type?t.output:t.error,errorMode:"tool-error"===t.type?"json":"none"})});for(let t of o)e.push({type:"tool-result",toolCallId:t.toolCall.toolCallId,toolName:t.toolCall.toolName,output:{type:"execution-denied",reason:t.approvalResponse.reason}});y.push({role:"tool",content:e})}}finally{null==e||e.close()}}async function S({currentStep:r,responseMessages:i,usage:l}){var y,T,x,E,M,C;let _,A,O,j=X.includeRawChunks;R=new N.DelayedPromise;let q=[...d,...i],P=await (null==v?void 0:v({model:e,steps:U,stepNumber:U.length,messages:q,experimental_context:z})),D=tR(null!=(y=null==P?void 0:P.model)?y:e),F=await tJ({prompt:{system:null!=(T=null==P?void 0:P.system)?T:o.system,messages:null!=(x=null==P?void 0:P.messages)?x:q},supportedUrls:await D.supportedUrls,download:k}),{toolChoice:J,tools:V}=await tW({tools:u,toolChoice:null!=(E=null==P?void 0:P.toolChoice)?E:p,activeTools:null!=(M=null==P?void 0:P.activeTools)?M:c});z=null!=(C=null==P?void 0:P.experimental_context)?C:z;let G=av(f,null==P?void 0:P.providerOptions),{result:{stream:L,response:K,request:B},doStreamSpan:Z,startTimestampMs:ee}=await W(()=>au({name:"ai.streamText.doStream",attributes:ad({telemetry:t,attributes:{...ar({operationId:"ai.streamText.doStream",telemetry:t}),...Q,"ai.model.provider":D.provider,"ai.model.id":D.modelId,"ai.prompt.messages":{input:()=>ac(F)},"ai.prompt.tools":{input:()=>null==V?void 0:V.map(e=>JSON.stringify(e))},"ai.prompt.toolChoice":{input:()=>null!=J?JSON.stringify(J):void 0},"gen_ai.system":D.provider,"gen_ai.request.model":D.modelId,"gen_ai.request.frequency_penalty":Y.frequencyPenalty,"gen_ai.request.max_tokens":Y.maxOutputTokens,"gen_ai.request.presence_penalty":Y.presencePenalty,"gen_ai.request.stop_sequences":Y.stopSequences,"gen_ai.request.temperature":Y.temperature,"gen_ai.request.top_k":Y.topK,"gen_ai.request.top_p":Y.topP}}),tracer:H,endWhenDone:!1,fn:async e=>({startTimestampMs:w(),doStreamSpan:e,result:await D.doStream({...Y,tools:V,toolChoice:J,responseFormat:await (null==g?void 0:g.responseFormat),prompt:F,providerOptions:G,abortSignal:s,headers:a,includeRawChunks:j})})})),et=function({tools:e,generatorStream:t,tracer:a,telemetry:r,system:o,messages:s,abortSignal:n,repairToolCall:i,experimental_context:l,generateId:u}){let p,d=null,c=new ReadableStream({start(e){d=e}}),m=new Set,h=new Map,g=new Map,f=!1;function v(){f&&0===m.size&&(null!=p&&d.enqueue(p),d.close())}let y=new TransformStream({async transform(t,c){let f=t.type;switch(f){case"stream-start":case"text-start":case"text-delta":case"text-end":case"reasoning-start":case"reasoning-delta":case"reasoning-end":case"tool-input-start":case"tool-input-delta":case"tool-input-end":case"source":case"response-metadata":case"error":case"raw":c.enqueue(t);break;case"file":c.enqueue({type:"file",file:new aS({data:t.data,mediaType:t.mediaType})});break;case"finish":p={type:"finish",finishReason:t.finishReason.unified,rawFinishReason:t.finishReason.raw,usage:am(t.usage),providerMetadata:t.providerMetadata};break;case"tool-approval-request":{let e=g.get(t.toolCallId);if(null==e){d.enqueue({type:"error",error:new eG({toolCallId:t.toolCallId,approvalId:t.approvalId})});break}c.enqueue({type:"tool-approval-request",approvalId:t.approvalId,toolCall:e});break}case"tool-call":try{let p=await aj({toolCall:t,tools:e,repairToolCall:i,system:o,messages:s});if(g.set(p.toolCallId,p),c.enqueue(p),p.invalid){d.enqueue({type:"tool-error",toolCallId:p.toolCallId,toolName:p.toolName,input:p.input,error:(0,N.getErrorMessage)(p.error),dynamic:!0,title:p.title});break}let f=null==e?void 0:e[p.toolName];if(null==f)break;if(null!=f.onInputAvailable&&await f.onInputAvailable({input:p.input,toolCallId:p.toolCallId,messages:s,abortSignal:n,experimental_context:l}),await aE({tool:f,toolCall:p,messages:s,experimental_context:l})){d.enqueue({type:"tool-approval-request",approvalId:u(),toolCall:p});break}if(h.set(p.toolCallId,p.input),null!=f.execute&&!0!==p.providerExecuted){let t=u();m.add(t),aI({toolCall:p,tools:e,tracer:a,telemetry:r,messages:s,abortSignal:n,experimental_context:l,onPreliminaryToolResult:e=>{d.enqueue(e)}}).then(e=>{d.enqueue(e),m.delete(t),v()})}}catch(e){d.enqueue({type:"error",error:e})}break;case"tool-result":{let e=t.toolName;t.isError?d.enqueue({type:"tool-error",toolCallId:t.toolCallId,toolName:e,input:h.get(t.toolCallId),providerExecuted:!0,error:t.result,dynamic:t.dynamic}):c.enqueue({type:"tool-result",toolCallId:t.toolCallId,toolName:e,input:h.get(t.toolCallId),output:t.result,providerExecuted:!0,dynamic:t.dynamic});break}default:throw Error(`Unhandled chunk type: ${f}`)}},flush(){f=!0,v()}});return new ReadableStream({start:async e=>Promise.all([t.pipeThrough(y).pipeTo(new WritableStream({write(t){e.enqueue(t)},close(){}})),c.pipeTo(new WritableStream({write(t){e.enqueue(t)},close(){e.close()}}))])})}({tools:u,generatorStream:L,tracer:H,telemetry:t,system:n,messages:q,repairToolCall:m,abortSignal:s,experimental_context:z,generateId:I}),ea=null!=B?B:{},er=[],eo=[],es={},en="other",ei=ah(),el=!0,eu={id:I(),timestamp:b(),modelId:e.modelId},ep="";X.addStream(et.pipeThrough(new TransformStream({async transform(e,t){var a,r,o,n,i;if("stream-start"===e.type){_=e.warnings;return}if(el){let e=w()-ee;el=!1,Z.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":e}),Z.setAttributes({"ai.response.msToFirstChunk":e}),t.enqueue({type:"start-step",request:ea,warnings:null!=_?_:[]})}let l=e.type;switch(l){case"tool-approval-request":case"text-start":case"text-end":case"reasoning-start":case"reasoning-end":case"file":case"source":t.enqueue(e);break;case"text-delta":e.delta.length>0&&(t.enqueue({type:"text-delta",id:e.id,text:e.delta,providerMetadata:e.providerMetadata}),ep+=e.delta);break;case"reasoning-delta":t.enqueue({type:"reasoning-delta",id:e.id,text:e.delta,providerMetadata:e.providerMetadata});break;case"tool-call":t.enqueue(e),er.push(e);break;case"tool-result":t.enqueue(e),e.preliminary||eo.push(e);break;case"tool-error":t.enqueue(e),eo.push(e);break;case"response-metadata":eu={id:null!=(a=e.id)?a:eu.id,timestamp:null!=(r=e.timestamp)?r:eu.timestamp,modelId:null!=(o=e.modelId)?o:eu.modelId};break;case"finish":{ei=e.usage,en=e.finishReason,O=e.rawFinishReason,A=e.providerMetadata;let t=w()-ee;Z.addEvent("ai.stream.finish"),Z.setAttributes({"ai.response.msToFinish":t,"ai.response.avgOutputTokensPerSecond":1e3*(null!=(n=ei.outputTokens)?n:0)/t});break}case"tool-input-start":{es[e.id]=e.toolName;let a=null==u?void 0:u[e.toolName];(null==a?void 0:a.onInputStart)!=null&&await a.onInputStart({toolCallId:e.id,messages:q,abortSignal:s,experimental_context:z}),t.enqueue({...e,dynamic:null!=(i=e.dynamic)?i:(null==a?void 0:a.type)==="dynamic",title:null==a?void 0:a.title});break}case"tool-input-end":delete es[e.id],t.enqueue(e);break;case"tool-input-delta":{let a=es[e.id],r=null==u?void 0:u[a];(null==r?void 0:r.onInputDelta)!=null&&await r.onInputDelta({inputTextDelta:e.delta,toolCallId:e.id,messages:q,abortSignal:s,experimental_context:z}),t.enqueue(e);break}case"error":t.enqueue(e),en="error";break;case"raw":j&&t.enqueue(e);break;default:throw Error(`Unknown chunk type: ${l}`)}},async flush(e){let a=er.length>0?JSON.stringify(er):void 0;try{Z.setAttributes(await ad({telemetry:t,attributes:{"ai.response.finishReason":en,"ai.response.text":{output:()=>ep},"ai.response.toolCalls":{output:()=>a},"ai.response.id":eu.id,"ai.response.model":eu.modelId,"ai.response.timestamp":eu.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(A),"ai.usage.inputTokens":ei.inputTokens,"ai.usage.outputTokens":ei.outputTokens,"ai.usage.totalTokens":ei.totalTokens,"ai.usage.reasoningTokens":ei.reasoningTokens,"ai.usage.cachedInputTokens":ei.cachedInputTokens,"gen_ai.response.finish_reasons":[en],"gen_ai.response.id":eu.id,"gen_ai.response.model":eu.modelId,"gen_ai.usage.input_tokens":ei.inputTokens,"gen_ai.usage.output_tokens":ei.outputTokens}}))}catch(e){}finally{Z.end()}e.enqueue({type:"finish-step",finishReason:en,rawFinishReason:O,usage:ei,providerMetadata:A,response:{...eu,headers:null==K?void 0:K.headers}});let o=ag(l,ei);await R.promise;let s=er.filter(e=>!0!==e.providerExecuted),n=eo.filter(e=>!0!==e.providerExecuted);for(let e of er){if(!0!==e.providerExecuted)continue;let t=null==u?void 0:u[e.toolName];(null==t?void 0:t.type)==="provider"&&t.supportsDeferredResults&&(eo.some(t=>"tool-result"===t.type&&t.toolCallId===e.toolCallId)||$.set(e.toolCallId,{toolName:e.toolName}))}for(let e of eo)"tool-result"===e.type&&$.delete(e.toolCallId);if((s.length>0&&n.length===s.length||$.size>0)&&!await aF({stopConditions:h,steps:U})){i.push(...await aJ({content:U[U.length-1].content,tools:u}));try{await S({currentStep:r+1,responseMessages:i,usage:o})}catch(t){e.enqueue({type:"error",error:t}),X.closeStream()}}else e.enqueue({type:"finish",finishReason:en,rawFinishReason:O,totalUsage:o}),X.closeStream()}})))}q.push(...y),await S({currentStep:0,responseMessages:y,usage:ah()})}}).catch(e=>{X.addStream(new ReadableStream({start(t){t.enqueue({type:"error",error:e}),t.close()}})),X.closeStream()})}get steps(){return this.consumeStream(),this._steps.promise}get finalStep(){return this.steps.then(e=>e[e.length-1])}get content(){return this.finalStep.then(e=>e.content)}get warnings(){return this.finalStep.then(e=>e.warnings)}get providerMetadata(){return this.finalStep.then(e=>e.providerMetadata)}get text(){return this.finalStep.then(e=>e.text)}get reasoningText(){return this.finalStep.then(e=>e.reasoningText)}get reasoning(){return this.finalStep.then(e=>e.reasoning)}get sources(){return this.finalStep.then(e=>e.sources)}get files(){return this.finalStep.then(e=>e.files)}get toolCalls(){return this.finalStep.then(e=>e.toolCalls)}get staticToolCalls(){return this.finalStep.then(e=>e.staticToolCalls)}get dynamicToolCalls(){return this.finalStep.then(e=>e.dynamicToolCalls)}get toolResults(){return this.finalStep.then(e=>e.toolResults)}get staticToolResults(){return this.finalStep.then(e=>e.staticToolResults)}get dynamicToolResults(){return this.finalStep.then(e=>e.dynamicToolResults)}get usage(){return this.finalStep.then(e=>e.usage)}get request(){return this.finalStep.then(e=>e.request)}get response(){return this.finalStep.then(e=>e.response)}get totalUsage(){return this.consumeStream(),this._totalUsage.promise}get finishReason(){return this.consumeStream(),this._finishReason.promise}get rawFinishReason(){return this.consumeStream(),this._rawFinishReason.promise}teeStream(){let[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return rs(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){"text-delta"===e.type&&t.enqueue(e.text)}})))}get fullStream(){return rs(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(e){var t;try{await rn({stream:this.fullStream,onError:null==e?void 0:e.onError})}catch(a){null==(t=null==e?void 0:e.onError)||t.call(e,a)}}get experimental_partialOutputStream(){return this.partialOutputStream}get partialOutputStream(){return rs(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){null!=e&&t.enqueue(e)}})))}get output(){return this.finalStep.then(e=>{var t;return(null!=(t=this.outputSpecification)?t:aC()).parseCompleteOutput({text:e.text},{response:e.response,usage:e.usage,finishReason:e.finishReason})})}toUIMessageStream({originalMessages:e,generateMessageId:t,onFinish:a,messageMetadata:r,sendReasoning:o=!0,sendSources:s=!1,sendStart:n=!0,sendFinish:i=!0,onError:l=eI.getErrorMessage}={}){let u=null!=t?function({originalMessages:e,responseMessageId:t}){if(null==e)return;let a=e[e.length-1];return(null==a?void 0:a.role)==="assistant"?a.id:"function"==typeof t?t():t}({originalMessages:e,responseMessageId:t}):void 0,p=e=>{var t;let a=null==(t=this.tools)?void 0:t[e.toolName];return null==a?e.dynamic:(null==a?void 0:a.type)==="dynamic"||void 0};return rs(rr({stream:this.fullStream.pipeThrough(new TransformStream({transform:async(e,t)=>{let a=null==r?void 0:r({part:e}),d=e.type;switch(d){case"text-start":t.enqueue({type:"text-start",id:e.id,...null!=e.providerMetadata?{providerMetadata:e.providerMetadata}:{}});break;case"text-delta":t.enqueue({type:"text-delta",id:e.id,delta:e.text,...null!=e.providerMetadata?{providerMetadata:e.providerMetadata}:{}});break;case"text-end":t.enqueue({type:"text-end",id:e.id,...null!=e.providerMetadata?{providerMetadata:e.providerMetadata}:{}});break;case"reasoning-start":t.enqueue({type:"reasoning-start",id:e.id,...null!=e.providerMetadata?{providerMetadata:e.providerMetadata}:{}});break;case"reasoning-delta":o&&t.enqueue({type:"reasoning-delta",id:e.id,delta:e.text,...null!=e.providerMetadata?{providerMetadata:e.providerMetadata}:{}});break;case"reasoning-end":t.enqueue({type:"reasoning-end",id:e.id,...null!=e.providerMetadata?{providerMetadata:e.providerMetadata}:{}});break;case"file":t.enqueue({type:"file",mediaType:e.file.mediaType,url:`data:${e.file.mediaType};base64,${e.file.base64}`});break;case"source":s&&"url"===e.sourceType&&t.enqueue({type:"source-url",sourceId:e.id,url:e.url,title:e.title,...null!=e.providerMetadata?{providerMetadata:e.providerMetadata}:{}}),s&&"document"===e.sourceType&&t.enqueue({type:"source-document",sourceId:e.id,mediaType:e.mediaType,title:e.title,filename:e.filename,...null!=e.providerMetadata?{providerMetadata:e.providerMetadata}:{}});break;case"tool-input-start":{let a=p(e);t.enqueue({type:"tool-input-start",toolCallId:e.id,toolName:e.toolName,...null!=e.providerExecuted?{providerExecuted:e.providerExecuted}:{},...null!=a?{dynamic:a}:{},...null!=e.title?{title:e.title}:{}});break}case"tool-input-delta":t.enqueue({type:"tool-input-delta",toolCallId:e.id,inputTextDelta:e.delta});break;case"tool-call":{let a=p(e);e.invalid?t.enqueue({type:"tool-input-error",toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,...null!=e.providerExecuted?{providerExecuted:e.providerExecuted}:{},...null!=e.providerMetadata?{providerMetadata:e.providerMetadata}:{},...null!=a?{dynamic:a}:{},errorText:l(e.error),...null!=e.title?{title:e.title}:{}}):t.enqueue({type:"tool-input-available",toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,...null!=e.providerExecuted?{providerExecuted:e.providerExecuted}:{},...null!=e.providerMetadata?{providerMetadata:e.providerMetadata}:{},...null!=a?{dynamic:a}:{},...null!=e.title?{title:e.title}:{}});break}case"tool-approval-request":t.enqueue({type:"tool-approval-request",approvalId:e.approvalId,toolCallId:e.toolCall.toolCallId});break;case"tool-result":{let a=p(e);t.enqueue({type:"tool-output-available",toolCallId:e.toolCallId,output:e.output,...null!=e.providerExecuted?{providerExecuted:e.providerExecuted}:{},...null!=e.preliminary?{preliminary:e.preliminary}:{},...null!=a?{dynamic:a}:{}});break}case"tool-error":{let a=p(e);t.enqueue({type:"tool-output-error",toolCallId:e.toolCallId,errorText:l(e.error),...null!=e.providerExecuted?{providerExecuted:e.providerExecuted}:{},...null!=a?{dynamic:a}:{}});break}case"tool-output-denied":t.enqueue({type:"tool-output-denied",toolCallId:e.toolCallId});break;case"error":t.enqueue({type:"error",errorText:l(e.error)});break;case"start-step":t.enqueue({type:"start-step"});break;case"finish-step":t.enqueue({type:"finish-step"});break;case"start":n&&t.enqueue({type:"start",...null!=a?{messageMetadata:a}:{},...null!=u?{messageId:u}:{}});break;case"finish":i&&t.enqueue({type:"finish",finishReason:e.finishReason,...null!=a?{messageMetadata:a}:{}});break;case"abort":t.enqueue(e);break;case"tool-input-end":case"raw":break;default:throw Error(`Unknown chunk type: ${d}`)}null!=a&&"start"!==d&&"finish"!==d&&t.enqueue({type:"message-metadata",messageMetadata:a})}})),messageId:null!=u?u:null==t?void 0:t(),originalMessages:e,onFinish:a,onError:l}))}pipeUIMessageStreamToResponse(e,{originalMessages:t,generateMessageId:a,onFinish:r,messageMetadata:o,sendReasoning:s,sendSources:n,sendFinish:i,sendStart:l,onError:u,...p}={}){ro({response:e,stream:this.toUIMessageStream({originalMessages:t,generateMessageId:a,onFinish:r,messageMetadata:o,sendReasoning:s,sendSources:n,sendFinish:i,sendStart:l,onError:u}),...p})}pipeTextStreamToResponse(e,t){aQ({response:e,textStream:this.textStream,...t})}toUIMessageStreamResponse({originalMessages:e,generateMessageId:t,onFinish:a,messageMetadata:r,sendReasoning:o,sendSources:s,sendFinish:n,sendStart:i,onError:l,...u}={}){return a0({stream:this.toUIMessageStream({originalMessages:e,generateMessageId:t,onFinish:a,messageMetadata:r,sendReasoning:o,sendSources:s,sendFinish:n,sendStart:i,onError:l}),...u})}toTextStreamResponse(e){return aH({textStream:this.textStream,...e})}},rm=class{constructor(e){this.version="agent-v1",this.settings=e}get id(){return this.settings.id}get tools(){return this.settings.tools}async prepareCall(e){var t,a,r,o;let s={...this.settings,stopWhen:null!=(t=this.settings.stopWhen)?t:aU(20),...e},{instructions:n,messages:i,prompt:l,...u}=null!=(o=await (null==(r=(a=this.settings).prepareCall)?void 0:r.call(a,s)))?o:s;return{...u,system:n,messages:i,prompt:l}}async generate({abortSignal:e,...t}){return aG({...await this.prepareCall(t),abortSignal:e})}async stream({abortSignal:e,experimental_transform:t,...a}){return rd({...await this.prepareCall(a),abortSignal:e,experimental_transform:t})}};function rh({execute:e,onError:t=N.getErrorMessage,originalMessages:a,onFinish:r,generateId:o=N.generateId}){let s,n=[],i=new ReadableStream({start(e){s=e}});function l(e){try{s.enqueue(e)}catch(e){}}try{let a=e({writer:{write(e){l(e)},merge(e){n.push((async()=>{let t=e.getReader();for(;;){let{done:e,value:a}=await t.read();if(e)break;l(a)}})().catch(e=>{l({type:"error",errorText:t(e)})}))},onError:t}});a&&n.push(a.catch(e=>{l({type:"error",errorText:t(e)})}))}catch(e){l({type:"error",errorText:t(e)})}return new Promise(async e=>{for(;n.length>0;)await n.shift();e()}).finally(()=>{try{s.close()}catch(e){}}),rr({stream:i,messageId:o(),originalMessages:a,onFinish:r,onError:t})}function rg({message:e,stream:t,onError:a,terminateOnError:r=!1}){var o;let s,n=!1,i=new ReadableStream({start(e){s=e}}),l=rt({messageId:null!=(o=null==e?void 0:e.id)?o:"",lastMessage:e}),u=e=>{null==a||a(e),!n&&r&&(n=!0,null==s||s.error(e))};return rn({stream:ra({stream:t,runUpdateMessageJob:e=>e({state:l,write:()=>{null==s||s.enqueue(structuredClone(l.message))}}),onError:u}),onError:u}).finally(()=>{n||null==s||s.close()}),rs(i)}async function rf(e,t){let a=[];for(let o of((null==t?void 0:t.ignoreIncompleteToolCalls)&&(e=e.map(e=>({...e,parts:e.parts.filter(e=>!a5(e)||"input-streaming"!==e.state&&"input-available"!==e.state)}))),e))switch(o.role){case"system":{let e=o.parts.filter(e=>"text"===e.type),t=e.reduce((e,t)=>null!=t.providerMetadata?{...e,...t.providerMetadata}:e,{});a.push({role:"system",content:e.map(e=>e.text).join(""),...Object.keys(t).length>0?{providerOptions:t}:{}});break}case"user":a.push({role:"user",content:o.parts.map(e=>{var a;return a3(e)?{type:"text",text:e.text,...null!=e.providerMetadata?{providerOptions:e.providerMetadata}:{}}:a6(e)?{type:"file",mediaType:e.mediaType,filename:e.filename,data:e.url,...null!=e.providerMetadata?{providerOptions:e.providerMetadata}:{}}:a2(e)?null==(a=null==t?void 0:t.convertDataPart)?void 0:a.call(t,e):void 0}).filter(N.isNonNullable)});break;case"assistant":if(null!=o.parts){let e=[];async function r(){var r,o,s,n,i,l;if(0===e.length)return;let u=[];for(let a of e)if(a3(a))u.push({type:"text",text:a.text,...null!=a.providerMetadata?{providerOptions:a.providerMetadata}:{}});else if(a6(a))u.push({type:"file",mediaType:a.mediaType,filename:a.filename,data:a.url});else if(a7(a))u.push({type:"reasoning",text:a.text,providerOptions:a.providerMetadata});else if(a5(a)){let e=re(a);"input-streaming"!==a.state&&(u.push({type:"tool-call",toolCallId:a.toolCallId,toolName:e,input:"output-error"===a.state?null!=(r=a.input)?r:"rawInput"in a?a.rawInput:void 0:a.input,providerExecuted:a.providerExecuted,...null!=a.callProviderMetadata?{providerOptions:a.callProviderMetadata}:{}}),null!=a.approval&&u.push({type:"tool-approval-request",approvalId:a.approval.id,toolCallId:a.toolCallId}),!0===a.providerExecuted&&"approval-responded"!==a.state&&("output-available"===a.state||"output-error"===a.state)&&u.push({type:"tool-result",toolCallId:a.toolCallId,toolName:e,output:await tL({toolCallId:a.toolCallId,input:a.input,output:"output-error"===a.state?a.errorText:a.output,tool:null==(o=null==t?void 0:t.tools)?void 0:o[e],errorMode:"output-error"===a.state?"json":"none"}),...null!=a.callProviderMetadata?{providerOptions:a.callProviderMetadata}:{}}))}else if(a2(a)){let e=null==(s=null==t?void 0:t.convertDataPart)?void 0:s.call(t,a);null!=e&&u.push(e)}else throw Error(`Unsupported part: ${a}`);a.push({role:"assistant",content:u});let p=e.filter(e=>{var t;return a5(e)&&(!0!==e.providerExecuted||(null==(t=e.approval)?void 0:t.approved)!=null)});if(p.length>0){let e=[];for(let a of p)if((null==(n=a.approval)?void 0:n.approved)!=null&&e.push({type:"tool-approval-response",approvalId:a.approval.id,approved:a.approval.approved,reason:a.approval.reason,providerExecuted:a.providerExecuted}),!0!==a.providerExecuted)switch(a.state){case"output-denied":e.push({type:"tool-result",toolCallId:a.toolCallId,toolName:re(a),output:{type:"error-text",value:null!=(i=a.approval.reason)?i:"Tool execution denied."},...null!=a.callProviderMetadata?{providerOptions:a.callProviderMetadata}:{}});break;case"output-error":case"output-available":{let r=re(a);e.push({type:"tool-result",toolCallId:a.toolCallId,toolName:r,output:await tL({toolCallId:a.toolCallId,input:a.input,output:"output-error"===a.state?a.errorText:a.output,tool:null==(l=null==t?void 0:t.tools)?void 0:l[r],errorMode:"output-error"===a.state?"text":"none"}),...null!=a.callProviderMetadata?{providerOptions:a.callProviderMetadata}:{}})}}e.length>0&&a.push({role:"tool",content:e})}e=[]}for(let t of o.parts)a3(t)||a7(t)||a6(t)||a5(t)||a2(t)?e.push(t):"step-start"===t.type&&await r();await r()}break;default:{let e=o.role;throw new th({originalMessage:o,message:`Unsupported role: ${e}`})}}return a}var rv=(0,N.lazySchema)(()=>(0,N.zodSchema)(A.z.array(A.z.object({id:A.z.string(),role:A.z.enum(["system","user","assistant"]),metadata:A.z.unknown().optional(),parts:A.z.array(A.z.union([A.z.object({type:A.z.literal("text"),text:A.z.string(),state:A.z.enum(["streaming","done"]).optional(),providerMetadata:tY.optional()}),A.z.object({type:A.z.literal("reasoning"),text:A.z.string(),state:A.z.enum(["streaming","done"]).optional(),providerMetadata:tY.optional()}),A.z.object({type:A.z.literal("source-url"),sourceId:A.z.string(),url:A.z.string(),title:A.z.string().optional(),providerMetadata:tY.optional()}),A.z.object({type:A.z.literal("source-document"),sourceId:A.z.string(),mediaType:A.z.string(),title:A.z.string(),filename:A.z.string().optional(),providerMetadata:tY.optional()}),A.z.object({type:A.z.literal("file"),mediaType:A.z.string(),filename:A.z.string().optional(),url:A.z.string(),providerMetadata:tY.optional()}),A.z.object({type:A.z.literal("step-start")}),A.z.object({type:A.z.string().startsWith("data-"),id:A.z.string().optional(),data:A.z.unknown()}),A.z.object({type:A.z.literal("dynamic-tool"),toolName:A.z.string(),toolCallId:A.z.string(),state:A.z.literal("input-streaming"),input:A.z.unknown().optional(),providerExecuted:A.z.boolean().optional(),output:A.z.never().optional(),errorText:A.z.never().optional(),approval:A.z.never().optional()}),A.z.object({type:A.z.literal("dynamic-tool"),toolName:A.z.string(),toolCallId:A.z.string(),state:A.z.literal("input-available"),input:A.z.unknown(),providerExecuted:A.z.boolean().optional(),output:A.z.never().optional(),errorText:A.z.never().optional(),callProviderMetadata:tY.optional(),approval:A.z.never().optional()}),A.z.object({type:A.z.literal("dynamic-tool"),toolName:A.z.string(),toolCallId:A.z.string(),state:A.z.literal("approval-requested"),input:A.z.unknown(),providerExecuted:A.z.boolean().optional(),output:A.z.never().optional(),errorText:A.z.never().optional(),callProviderMetadata:tY.optional(),approval:A.z.object({id:A.z.string(),approved:A.z.never().optional(),reason:A.z.never().optional()})}),A.z.object({type:A.z.literal("dynamic-tool"),toolName:A.z.string(),toolCallId:A.z.string(),state:A.z.literal("approval-responded"),input:A.z.unknown(),providerExecuted:A.z.boolean().optional(),output:A.z.never().optional(),errorText:A.z.never().optional(),callProviderMetadata:tY.optional(),approval:A.z.object({id:A.z.string(),approved:A.z.boolean(),reason:A.z.string().optional()})}),A.z.object({type:A.z.literal("dynamic-tool"),toolName:A.z.string(),toolCallId:A.z.string(),state:A.z.literal("output-available"),input:A.z.unknown(),providerExecuted:A.z.boolean().optional(),output:A.z.unknown(),errorText:A.z.never().optional(),callProviderMetadata:tY.optional(),preliminary:A.z.boolean().optional(),approval:A.z.object({id:A.z.string(),approved:A.z.literal(!0),reason:A.z.string().optional()}).optional()}),A.z.object({type:A.z.literal("dynamic-tool"),toolName:A.z.string(),toolCallId:A.z.string(),state:A.z.literal("output-error"),input:A.z.unknown(),providerExecuted:A.z.boolean().optional(),output:A.z.never().optional(),errorText:A.z.string(),callProviderMetadata:tY.optional(),approval:A.z.object({id:A.z.string(),approved:A.z.literal(!0),reason:A.z.string().optional()}).optional()}),A.z.object({type:A.z.literal("dynamic-tool"),toolName:A.z.string(),toolCallId:A.z.string(),state:A.z.literal("output-denied"),input:A.z.unknown(),providerExecuted:A.z.boolean().optional(),output:A.z.never().optional(),errorText:A.z.never().optional(),callProviderMetadata:tY.optional(),approval:A.z.object({id:A.z.string(),approved:A.z.literal(!1),reason:A.z.string().optional()})}),A.z.object({type:A.z.string().startsWith("tool-"),toolCallId:A.z.string(),state:A.z.literal("input-streaming"),providerExecuted:A.z.boolean().optional(),input:A.z.unknown().optional(),output:A.z.never().optional(),errorText:A.z.never().optional(),approval:A.z.never().optional()}),A.z.object({type:A.z.string().startsWith("tool-"),toolCallId:A.z.string(),state:A.z.literal("input-available"),providerExecuted:A.z.boolean().optional(),input:A.z.unknown(),output:A.z.never().optional(),errorText:A.z.never().optional(),callProviderMetadata:tY.optional(),approval:A.z.never().optional()}),A.z.object({type:A.z.string().startsWith("tool-"),toolCallId:A.z.string(),state:A.z.literal("approval-requested"),input:A.z.unknown(),providerExecuted:A.z.boolean().optional(),output:A.z.never().optional(),errorText:A.z.never().optional(),callProviderMetadata:tY.optional(),approval:A.z.object({id:A.z.string(),approved:A.z.never().optional(),reason:A.z.never().optional()})}),A.z.object({type:A.z.string().startsWith("tool-"),toolCallId:A.z.string(),state:A.z.literal("approval-responded"),input:A.z.unknown(),providerExecuted:A.z.boolean().optional(),output:A.z.never().optional(),errorText:A.z.never().optional(),callProviderMetadata:tY.optional(),approval:A.z.object({id:A.z.string(),approved:A.z.boolean(),reason:A.z.string().optional()})}),A.z.object({type:A.z.string().startsWith("tool-"),toolCallId:A.z.string(),state:A.z.literal("output-available"),providerExecuted:A.z.boolean().optional(),input:A.z.unknown(),output:A.z.unknown(),errorText:A.z.never().optional(),callProviderMetadata:tY.optional(),preliminary:A.z.boolean().optional(),approval:A.z.object({id:A.z.string(),approved:A.z.literal(!0),reason:A.z.string().optional()}).optional()}),A.z.object({type:A.z.string().startsWith("tool-"),toolCallId:A.z.string(),state:A.z.literal("output-error"),providerExecuted:A.z.boolean().optional(),input:A.z.unknown(),output:A.z.never().optional(),errorText:A.z.string(),callProviderMetadata:tY.optional(),approval:A.z.object({id:A.z.string(),approved:A.z.literal(!0),reason:A.z.string().optional()}).optional()}),A.z.object({type:A.z.string().startsWith("tool-"),toolCallId:A.z.string(),state:A.z.literal("output-denied"),providerExecuted:A.z.boolean().optional(),input:A.z.unknown(),output:A.z.never().optional(),errorText:A.z.never().optional(),callProviderMetadata:tY.optional(),approval:A.z.object({id:A.z.string(),approved:A.z.literal(!1),reason:A.z.string().optional()})})])).nonempty("Message must contain at least one part")})).nonempty("Messages array must not be empty")));async function ry({messages:e,metadataSchema:t,dataSchemas:a,tools:r}){try{if(null==e)return{success:!1,error:new ek({parameter:"messages",value:e,message:"messages parameter must be provided"})};let o=await (0,N.validateTypes)({value:e,schema:rv});if(t)for(let e of o)await (0,N.validateTypes)({value:e.metadata,schema:t});if(a)for(let e of o)for(let t of e.parts.filter(e=>e.type.startsWith("data-"))){let e=t.type.slice(5),r=a[e];if(!r)return{success:!1,error:new eI.TypeValidationError({value:t.data,cause:`No data schema found for data part ${e}`})};await (0,N.validateTypes)({value:t.data,schema:r})}if(r)for(let e of o)for(let t of e.parts.filter(e=>e.type.startsWith("tool-"))){let e=t.type.slice(5),a=r[e];if(!a)return{success:!1,error:new eI.TypeValidationError({value:t.input,cause:`No tool schema found for tool part ${e}`})};("input-available"===t.state||"output-available"===t.state||"output-error"===t.state&&void 0!==t.input)&&await (0,N.validateTypes)({value:t.input,schema:a.inputSchema}),"output-available"===t.state&&a.outputSchema&&await (0,N.validateTypes)({value:t.output,schema:a.outputSchema})}return{success:!0,data:o}}catch(e){return{success:!1,error:e}}}async function rw({messages:e,metadataSchema:t,dataSchemas:a,tools:r}){let o=await ry({messages:e,metadataSchema:t,dataSchemas:a,tools:r});if(!o.success)throw o.error;return o.data}async function rb({agent:e,uiMessages:t,options:a,abortSignal:r,experimental_transform:o,...s}){let n=await rw({messages:t,tools:e.tools}),i=await rf(n,{tools:e.tools});return(await e.stream({prompt:i,options:a,abortSignal:r,experimental_transform:o})).toUIMessageStream(s)}async function rI({headers:e,status:t,statusText:a,consumeSseStream:r,...o}){return a0({headers:e,status:t,statusText:a,consumeSseStream:r,stream:await rb(o)})}async function rT({response:e,headers:t,status:a,statusText:r,consumeSseStream:o,...s}){ro({response:e,headers:t,status:a,statusText:r,consumeSseStream:o,stream:await rb(s)})}async function rx({model:e,value:t,providerOptions:a,maxRetries:r,abortSignal:o,headers:s,experimental_telemetry:n}){let i=tC(e),{maxRetries:l,retry:u}=aw({maxRetries:r,abortSignal:o}),p=(0,N.withUserAgentSuffix)(null!=s?s:{},`ai/${tj}`),d=ao({model:i,telemetry:n,headers:p,settings:{maxRetries:l}}),c=al(n);return au({name:"ai.embed",attributes:ad({telemetry:n,attributes:{...ar({operationId:"ai.embed",telemetry:n}),...d,"ai.value":{input:()=>JSON.stringify(t)}}}),tracer:c,fn:async e=>{let{embedding:r,usage:s,warnings:l,response:m,providerMetadata:h}=await u(()=>au({name:"ai.embed.doEmbed",attributes:ad({telemetry:n,attributes:{...ar({operationId:"ai.embed.doEmbed",telemetry:n}),...d,"ai.values":{input:()=>[JSON.stringify(t)]}}}),tracer:c,fn:async e=>{var r;let s=await i.doEmbed({values:[t],abortSignal:o,headers:p,providerOptions:a}),l=s.embeddings[0],u=null!=(r=s.usage)?r:{tokens:NaN};return e.setAttributes(await ad({telemetry:n,attributes:{"ai.embeddings":{output:()=>s.embeddings.map(e=>JSON.stringify(e))},"ai.usage.tokens":u.tokens}})),{embedding:l,usage:u,warnings:s.warnings,providerMetadata:s.providerMetadata,response:s.response}}}));return e.setAttributes(await ad({telemetry:n,attributes:{"ai.embedding":{output:()=>JSON.stringify(r)},"ai.usage.tokens":s.tokens}})),tb({warnings:l,provider:i.provider,model:i.modelId}),new rS({value:t,embedding:r,usage:s,warnings:l,providerMetadata:h,response:m})}})}var rS=class{constructor(e){this.value=e.value,this.embedding=e.embedding,this.usage=e.usage,this.warnings=e.warnings,this.providerMetadata=e.providerMetadata,this.response=e.response}};function rE(e,t){if(t<=0)throw Error("chunkSize must be greater than 0");let a=[];for(let r=0;r<e.length;r+=t)a.push(e.slice(r,r+t));return a}async function rM({model:e,values:t,maxParallelCalls:a=1/0,maxRetries:r,abortSignal:o,headers:s,providerOptions:n,experimental_telemetry:i}){let l=tC(e),{maxRetries:u,retry:p}=aw({maxRetries:r,abortSignal:o}),d=(0,N.withUserAgentSuffix)(null!=s?s:{},`ai/${tj}`),c=ao({model:l,telemetry:i,headers:d,settings:{maxRetries:u}}),m=al(i);return au({name:"ai.embedMany",attributes:ad({telemetry:i,attributes:{...ar({operationId:"ai.embedMany",telemetry:i}),...c,"ai.values":{input:()=>t.map(e=>JSON.stringify(e))}}}),tracer:m,fn:async e=>{var r;let s,[u,h]=await Promise.all([l.maxEmbeddingsPerCall,l.supportsParallelCalls]);if(null==u||u===1/0){let{embeddings:a,usage:r,warnings:s,response:u,providerMetadata:h}=await p(()=>au({name:"ai.embedMany.doEmbed",attributes:ad({telemetry:i,attributes:{...ar({operationId:"ai.embedMany.doEmbed",telemetry:i}),...c,"ai.values":{input:()=>t.map(e=>JSON.stringify(e))}}}),tracer:m,fn:async e=>{var a;let r=await l.doEmbed({values:t,abortSignal:o,headers:d,providerOptions:n}),s=r.embeddings,u=null!=(a=r.usage)?a:{tokens:NaN};return e.setAttributes(await ad({telemetry:i,attributes:{"ai.embeddings":{output:()=>s.map(e=>JSON.stringify(e))},"ai.usage.tokens":u.tokens}})),{embeddings:s,usage:u,warnings:r.warnings,providerMetadata:r.providerMetadata,response:r.response}}}));return e.setAttributes(await ad({telemetry:i,attributes:{"ai.embeddings":{output:()=>a.map(e=>JSON.stringify(e))},"ai.usage.tokens":r.tokens}})),tb({warnings:s,provider:l.provider,model:l.modelId}),new rz({values:t,embeddings:a,usage:r,warnings:s,providerMetadata:h,responses:[u]})}let g=rE(t,u),f=[],v=[],y=[],w=0;for(let e of rE(g,h?a:1))for(let t of(await Promise.all(e.map(e=>p(()=>au({name:"ai.embedMany.doEmbed",attributes:ad({telemetry:i,attributes:{...ar({operationId:"ai.embedMany.doEmbed",telemetry:i}),...c,"ai.values":{input:()=>e.map(e=>JSON.stringify(e))}}}),tracer:m,fn:async t=>{var a;let r=await l.doEmbed({values:e,abortSignal:o,headers:d,providerOptions:n}),s=r.embeddings,u=null!=(a=r.usage)?a:{tokens:NaN};return t.setAttributes(await ad({telemetry:i,attributes:{"ai.embeddings":{output:()=>s.map(e=>JSON.stringify(e))},"ai.usage.tokens":u.tokens}})),{embeddings:s,usage:u,warnings:r.warnings,providerMetadata:r.providerMetadata,response:r.response}}}))))))if(f.push(...t.embeddings),v.push(...t.warnings),y.push(t.response),w+=t.usage.tokens,t.providerMetadata)if(s)for(let[e,a]of Object.entries(t.providerMetadata))s[e]={...null!=(r=s[e])?r:{},...a};else s={...t.providerMetadata};return e.setAttributes(await ad({telemetry:i,attributes:{"ai.embeddings":{output:()=>f.map(e=>JSON.stringify(e))},"ai.usage.tokens":w}})),tb({warnings:v,provider:l.provider,model:l.modelId}),new rz({values:t,embeddings:f,usage:{tokens:w},warnings:v,providerMetadata:s,responses:y})}})}var rz=class{constructor(e){this.values=e.values,this.embeddings=e.embeddings,this.usage=e.usage,this.warnings=e.warnings,this.providerMetadata=e.providerMetadata,this.responses=e.responses}};async function rk({model:e,prompt:t,n:a=1,maxImagesPerCall:r,size:o,aspectRatio:s,seed:n,providerOptions:i,maxRetries:l,abortSignal:u,headers:p}){var d,c,m;let h=function(e){if("string"!=typeof e){if("v3"!==e.specificationVersion&&"v2"!==e.specificationVersion)throw new ta({version:e.specificationVersion,provider:e.provider,modelId:e.modelId});return tx(e)}return tN().imageModel(e)}(e),g=(0,N.withUserAgentSuffix)(null!=p?p:{},`ai/${tj}`),{retry:f}=aw({maxRetries:l,abortSignal:u}),v=null!=(d=null!=r?r:await rC(h))?d:1,y=Math.ceil(a/v),w=Array.from({length:y},(e,t)=>{if(t<y-1)return v;let r=a%v;return 0===r?v:r}),b=await Promise.all(w.map(async e=>f(()=>{var a;let{prompt:r,files:l,mask:p}="string"==typeof(a=t)?{prompt:a,files:void 0,mask:void 0}:{prompt:a.text,files:a.images.map(rN),mask:a.mask?rN(a.mask):void 0};return h.doGenerate({prompt:r,files:l,mask:p,n:e,abortSignal:u,headers:g,size:o,aspectRatio:s,seed:n,providerOptions:null!=i?i:{}})}))),I=[],T=[],x=[],S={},E={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0};for(let e of b){if(I.push(...e.images.map(e=>{var t;return new ax({data:e,mediaType:null!=(t=tO({data:e,signatures:t_}))?t:"image/png"})})),T.push(...e.warnings),null!=e.usage&&(c=E,m=e.usage,E={inputTokens:af(c.inputTokens,m.inputTokens),outputTokens:af(c.outputTokens,m.outputTokens),totalTokens:af(c.totalTokens,m.totalTokens)}),e.providerMetadata)for(let[t,a]of Object.entries(e.providerMetadata))if("gateway"===t){let e=S[t];null!=e&&"object"==typeof e?S[t]={...e,...a}:S[t]=a;let r=S[t].images;Array.isArray(r)&&0===r.length&&delete S[t].images}else null!=S[t]||(S[t]={images:[]}),S[t].images.push(...e.providerMetadata[t].images);x.push(e.response)}if(tb({warnings:T,provider:h.provider,model:h.modelId}),!I.length)throw new eW({responses:x});return new rR({images:I,warnings:T,responses:x,providerMetadata:S,usage:E})}var rR=class{constructor(e){this.images=e.images,this.warnings=e.warnings,this.responses=e.responses,this.providerMetadata=e.providerMetadata,this.usage=e.usage}get image(){return this.images[0]}};async function rC(e){return e.maxImagesPerCall instanceof Function?e.maxImagesPerCall({modelId:e.modelId}):e.maxImagesPerCall}function rN(e){if("string"==typeof e&&e.startsWith("http"))return{type:"url",url:e};if("string"==typeof e&&e.startsWith("data:")){let{mediaType:t,base64Content:a}=tP(e);if(null!=a){let e=(0,N.convertBase64ToUint8Array)(a);return{type:"file",data:e,mediaType:t||tO({data:e,signatures:t_})||"image/png"}}}let t=t$(e);return{type:"file",data:t,mediaType:tO({data:t,signatures:t_})||"image/png"}}var r_={type:"no-schema",jsonSchema:async()=>void 0,validatePartialResult:async({value:e,textDelta:t})=>({success:!0,value:{partial:e,textDelta:t}}),validateFinalResult:async(e,t)=>void 0===e?{success:!1,error:new eX({message:"No object generated: response did not match schema.",text:t.text,response:t.response,usage:t.usage,finishReason:t.finishReason})}:{success:!0,value:e},createElementStream(){throw new eI.UnsupportedFunctionalityError({functionality:"element streams in no-schema mode"})}};function rA({output:e,schema:t,enumValues:a}){switch(e){case"object":let r;return r=(0,N.asSchema)(t),{type:"object",jsonSchema:async()=>await r.jsonSchema,validatePartialResult:async({value:e,textDelta:t})=>({success:!0,value:{partial:e,textDelta:t}}),validateFinalResult:async e=>(0,N.safeValidateTypes)({value:e,schema:r}),createElementStream(){throw new eI.UnsupportedFunctionalityError({functionality:"element streams in object mode"})}};case"array":let o;return o=(0,N.asSchema)(t),{type:"array",jsonSchema:async()=>{let{$schema:e,...t}=await o.jsonSchema;return{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{elements:{type:"array",items:t}},required:["elements"],additionalProperties:!1}},async validatePartialResult({value:e,latestObject:t,isFirstDelta:a,isFinalDelta:r}){var s;if(!(0,eI.isJSONObject)(e)||!(0,eI.isJSONArray)(e.elements))return{success:!1,error:new eI.TypeValidationError({value:e,cause:"value must be an object that contains an array of elements"})};let n=e.elements,i=[];for(let e=0;e<n.length;e++){let t=n[e],a=await (0,N.safeValidateTypes)({value:t,schema:o});if(e!==n.length-1||r){if(!a.success)return a;i.push(a.value)}}let l=null!=(s=null==t?void 0:t.length)?s:0,u="";return a&&(u+="["),l>0&&(u+=","),u+=i.slice(l).map(e=>JSON.stringify(e)).join(","),r&&(u+="]"),{success:!0,value:{partial:i,textDelta:u}}},async validateFinalResult(e){if(!(0,eI.isJSONObject)(e)||!(0,eI.isJSONArray)(e.elements))return{success:!1,error:new eI.TypeValidationError({value:e,cause:"value must be an object that contains an array of elements"})};let t=e.elements;for(let e of t){let t=await (0,N.safeValidateTypes)({value:e,schema:o});if(!t.success)return t}return{success:!0,value:t}},createElementStream(e){let t=0;return rs(e.pipeThrough(new TransformStream({transform(e,a){switch(e.type){case"object":{let r=e.object;for(;t<r.length;t++)a.enqueue(r[t]);break}case"text-delta":case"finish":case"error":break;default:throw Error(`Unsupported chunk type: ${e}`)}}})))}};case"enum":return{type:"enum",jsonSchema:async()=>({$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{result:{type:"string",enum:a}},required:["result"],additionalProperties:!1}),async validateFinalResult(e){if(!(0,eI.isJSONObject)(e)||"string"!=typeof e.result)return{success:!1,error:new eI.TypeValidationError({value:e,cause:'value must be an object that contains a string in the "result" property.'})};let t=e.result;return a.includes(t)?{success:!0,value:t}:{success:!1,error:new eI.TypeValidationError({value:e,cause:"value must be a string in the enum"})}},async validatePartialResult({value:e,textDelta:t}){if(!(0,eI.isJSONObject)(e)||"string"!=typeof e.result)return{success:!1,error:new eI.TypeValidationError({value:e,cause:'value must be an object that contains a string in the "result" property.'})};let r=e.result,o=a.filter(e=>e.startsWith(r));return 0===e.result.length||0===o.length?{success:!1,error:new eI.TypeValidationError({value:e,cause:"value must be a string in the enum"})}:{success:!0,value:{partial:o.length>1?r:o[0],textDelta:t}}},createElementStream(){throw new eI.UnsupportedFunctionalityError({functionality:"element streams in enum mode"})}};case"no-schema":return r_;default:throw Error(`Unsupported output: ${e}`)}}async function rO(e,t,a){let r=await (0,N.safeParseJSON)({text:e});if(!r.success)throw new eX({message:"No object generated: could not parse the response.",cause:r.error,text:e,response:a.response,usage:a.usage,finishReason:a.finishReason});let o=await t.validateFinalResult(r.value,{text:e,response:a.response,usage:a.usage});if(!o.success)throw new eX({message:"No object generated: response did not match schema.",cause:o.error,text:e,response:a.response,usage:a.usage,finishReason:a.finishReason});return o.value}async function rj(e,t,a,r){try{return await rO(e,t,r)}catch(o){if(null!=a&&eX.isInstance(o)&&(eI.JSONParseError.isInstance(o.cause)||eI.TypeValidationError.isInstance(o.cause))){let s=await a({text:e,error:o.cause});if(null===s)throw o;return await rO(s,t,r)}throw o}}function rq({output:e,schema:t,schemaName:a,schemaDescription:r,enumValues:o}){if(null!=e&&"object"!==e&&"array"!==e&&"enum"!==e&&"no-schema"!==e)throw new ek({parameter:"output",value:e,message:"Invalid output type."});if("no-schema"===e){if(null!=t)throw new ek({parameter:"schema",value:t,message:"Schema is not supported for no-schema output."});if(null!=r)throw new ek({parameter:"schemaDescription",value:r,message:"Schema description is not supported for no-schema output."});if(null!=a)throw new ek({parameter:"schemaName",value:a,message:"Schema name is not supported for no-schema output."});if(null!=o)throw new ek({parameter:"enumValues",value:o,message:"Enum values are not supported for no-schema output."})}if("object"===e){if(null==t)throw new ek({parameter:"schema",value:t,message:"Schema is required for object output."});if(null!=o)throw new ek({parameter:"enumValues",value:o,message:"Enum values are not supported for object output."})}if("array"===e){if(null==t)throw new ek({parameter:"schema",value:t,message:"Element schema is required for array output."});if(null!=o)throw new ek({parameter:"enumValues",value:o,message:"Enum values are not supported for array output."})}if("enum"===e){if(null!=t)throw new ek({parameter:"schema",value:t,message:"Schema is not supported for enum output."});if(null!=r)throw new ek({parameter:"schemaDescription",value:r,message:"Schema description is not supported for enum output."});if(null!=a)throw new ek({parameter:"schemaName",value:a,message:"Schema name is not supported for enum output."});if(null==o)throw new ek({parameter:"enumValues",value:o,message:"Enum values are required for enum output."});for(let e of o)if("string"!=typeof e)throw new ek({parameter:"enumValues",value:e,message:"Enum values must be strings."})}}var rP=(0,N.createIdGenerator)({prefix:"aiobj",size:24});async function rD(e){let{model:t,output:a="object",system:r,prompt:o,messages:s,maxRetries:n,abortSignal:i,headers:l,experimental_repairText:u,experimental_telemetry:p,experimental_download:d,providerOptions:c,_internal:{generateId:m=rP,currentDate:h=()=>new Date}={},...g}=e,f=tR(t),v="enum"in e?e.enum:void 0,{schema:y,schemaDescription:w,schemaName:b}="schema"in e?e:{};rq({output:a,schema:y,schemaName:b,schemaDescription:w,enumValues:v});let{maxRetries:I,retry:T}=aw({maxRetries:n,abortSignal:i}),x=rA({output:a,schema:y,enumValues:v}),S=tB(g),E=(0,N.withUserAgentSuffix)(null!=l?l:{},`ai/${tj}`),M=ao({model:f,telemetry:p,headers:E,settings:{...S,maxRetries:I}}),z=al(p),k=await x.jsonSchema();try{return await au({name:"ai.generateObject",attributes:ad({telemetry:p,attributes:{...ar({operationId:"ai.generateObject",telemetry:p}),...M,"ai.prompt":{input:()=>JSON.stringify({system:r,prompt:o,messages:s})},"ai.schema":null!=k?{input:()=>JSON.stringify(k)}:void 0,"ai.schema.name":b,"ai.schema.description":w,"ai.settings.output":x.type}}),tracer:z,fn:async e=>{var t;let a,n,l,v,y,I,R,C,N=await at({system:r,prompt:o,messages:s}),_=await tJ({prompt:N,supportedUrls:await f.supportedUrls,download:d}),A=await T(()=>au({name:"ai.generateObject.doGenerate",attributes:ad({telemetry:p,attributes:{...ar({operationId:"ai.generateObject.doGenerate",telemetry:p}),...M,"ai.prompt.messages":{input:()=>ac(_)},"gen_ai.system":f.provider,"gen_ai.request.model":f.modelId,"gen_ai.request.frequency_penalty":S.frequencyPenalty,"gen_ai.request.max_tokens":S.maxOutputTokens,"gen_ai.request.presence_penalty":S.presencePenalty,"gen_ai.request.temperature":S.temperature,"gen_ai.request.top_k":S.topK,"gen_ai.request.top_p":S.topP}}),tracer:z,fn:async e=>{var t,a,r,o,s,n,l,u;let d,v=await f.doGenerate({responseFormat:{type:"json",schema:k,name:b,description:w},...tB(g),prompt:_,providerOptions:c,abortSignal:i,headers:E}),y={id:null!=(a=null==(t=v.response)?void 0:t.id)?a:m(),timestamp:null!=(o=null==(r=v.response)?void 0:r.timestamp)?o:h(),modelId:null!=(n=null==(s=v.response)?void 0:s.modelId)?n:f.modelId,headers:null==(l=v.response)?void 0:l.headers,body:null==(u=v.response)?void 0:u.body},I=aT(v.content),T=(d=v.content.filter(e=>"reasoning"===e.type),0===d.length?void 0:d.map(e=>e.text).join("\n"));if(void 0===I)throw new eX({message:"No object generated: the model did not return a response.",response:y,usage:am(v.usage),finishReason:v.finishReason.unified});return e.setAttributes(await ad({telemetry:p,attributes:{"ai.response.finishReason":v.finishReason.unified,"ai.response.object":{output:()=>I},"ai.response.id":y.id,"ai.response.model":y.modelId,"ai.response.timestamp":y.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(v.providerMetadata),"ai.usage.promptTokens":v.usage.inputTokens.total,"ai.usage.completionTokens":v.usage.outputTokens.total,"gen_ai.response.finish_reasons":[v.finishReason.unified],"gen_ai.response.id":y.id,"gen_ai.response.model":y.modelId,"gen_ai.usage.input_tokens":v.usage.inputTokens.total,"gen_ai.usage.output_tokens":v.usage.outputTokens.total}})),{...v,objectText:I,reasoning:T,responseData:y}}}));a=A.objectText,n=A.finishReason.unified,l=am(A.usage),v=A.warnings,R=A.providerMetadata,I=null!=(t=A.request)?t:{},y=A.responseData,C=A.reasoning,tb({warnings:v,provider:f.provider,model:f.modelId});let O=await rj(a,x,u,{response:y,usage:l,finishReason:n});return e.setAttributes(await ad({telemetry:p,attributes:{"ai.response.finishReason":n,"ai.response.object":{output:()=>JSON.stringify(O)},"ai.response.providerMetadata":JSON.stringify(R),"ai.usage.promptTokens":l.inputTokens,"ai.usage.completionTokens":l.outputTokens}})),new rU({object:O,reasoning:C,finishReason:n,usage:l,warnings:v,request:I,response:y,providerMetadata:R})}})}catch(e){throw aa(e)}}var rU=class{constructor(e){this.object=e.object,this.finishReason=e.finishReason,this.usage=e.usage,this.warnings=e.warnings,this.providerMetadata=e.providerMetadata,this.response=e.response,this.request=e.request,this.reasoning=e.reasoning}toJsonResponse(e){var t;return new Response(JSON.stringify(this.object),{status:null!=(t=null==e?void 0:e.status)?t:200,headers:aW(null==e?void 0:e.headers,{"content-type":"application/json; charset=utf-8"})})}};function r$(e,t){if(e.length!==t.length)throw new ek({parameter:"vector1,vector2",value:{vector1Length:e.length,vector2Length:t.length},message:"Vectors must have the same length"});let a=e.length;if(0===a)return 0;let r=0,o=0,s=0;for(let n=0;n<a;n++){let a=e[n],i=t[n];r+=a*a,o+=i*i,s+=a*i}return 0===r||0===o?0:s/(Math.sqrt(r)*Math.sqrt(o))}function rF(e){let[t,a]=e.split(",");if(null==t.split(";")[0].split(":")[1]||null==a)throw Error("Invalid data URL format");try{return window.atob(a)}catch(e){throw Error("Error decoding data URL")}}function rJ(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if("object"!=typeof e&&"object"!=typeof t)return e===t;if(e.constructor!==t.constructor)return!1;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(Array.isArray(e)){if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(!rJ(e[a],t[a]))return!1;return!0}let a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(let o of a)if(!r.includes(o)||!rJ(e[o],t[o]))return!1;return!0}var rV=class{constructor(){this.queue=[],this.isProcessing=!1}async processQueue(){if(!this.isProcessing){for(this.isProcessing=!0;this.queue.length>0;)await this.queue[0](),this.queue.shift();this.isProcessing=!1}}async run(e){return new Promise((t,a)=>{this.queue.push(async()=>{try{await e(),t()}catch(e){a(e)}}),this.processQueue()})}};function rG({chunks:e,initialDelayInMs:t=0,chunkDelayInMs:a=0,_internal:r}){var o;let s=null!=(o=null==r?void 0:r.delay)?o:N.delay,n=0;return new ReadableStream({async pull(r){n<e.length?(await s(0===n?t:a),r.enqueue(e[n++])):r.close()}})}var rL=(0,N.createIdGenerator)({prefix:"aiobj",size:24});function rK(e){let{model:t,output:a="object",system:r,prompt:o,messages:s,maxRetries:n,abortSignal:i,headers:l,experimental_repairText:u,experimental_telemetry:p,experimental_download:d,providerOptions:c,onError:m=({error:e})=>{console.error(e)},onFinish:h,_internal:{generateId:g=rL,currentDate:f=()=>new Date,now:v=ru}={},...y}=e,w="enum"in e&&e.enum?e.enum:void 0,{schema:b,schemaDescription:I,schemaName:T}="schema"in e?e:{};return rq({output:a,schema:b,schemaName:T,schemaDescription:I,enumValues:w}),new rB({model:t,telemetry:p,headers:l,settings:y,maxRetries:n,abortSignal:i,outputStrategy:rA({output:a,schema:b,enumValues:w}),system:r,prompt:o,messages:s,schemaName:T,schemaDescription:I,providerOptions:c,repairText:u,onError:m,onFinish:h,download:d,generateId:g,currentDate:f,now:v})}var rB=class{constructor({model:e,headers:t,telemetry:a,settings:r,maxRetries:o,abortSignal:s,outputStrategy:n,system:i,prompt:l,messages:u,schemaName:p,schemaDescription:d,providerOptions:c,repairText:m,onError:h,onFinish:g,download:f,generateId:v,currentDate:y,now:w}){this._object=new N.DelayedPromise,this._usage=new N.DelayedPromise,this._providerMetadata=new N.DelayedPromise,this._warnings=new N.DelayedPromise,this._request=new N.DelayedPromise,this._response=new N.DelayedPromise,this._finishReason=new N.DelayedPromise;const b=tR(e),{maxRetries:I,retry:T}=aw({maxRetries:o,abortSignal:s}),x=tB(r),S=ao({model:b,telemetry:a,headers:t,settings:{...x,maxRetries:I}}),E=al(a),M=this,z=rl(),k=new TransformStream({transform(e,t){t.enqueue(e),"error"===e.type&&h({error:aa(e.error)})}});this.baseStream=z.stream.pipeThrough(k),au({name:"ai.streamObject",attributes:ad({telemetry:a,attributes:{...ar({operationId:"ai.streamObject",telemetry:a}),...S,"ai.prompt":{input:()=>JSON.stringify({system:i,prompt:l,messages:u})},"ai.schema":{input:async()=>JSON.stringify(await n.jsonSchema())},"ai.schema.name":p,"ai.schema.description":d,"ai.settings.output":n.type}}),tracer:E,endWhenDone:!1,fn:async e=>{let o,h,I,k,R,C,N,_=await at({system:i,prompt:l,messages:u}),A={responseFormat:{type:"json",schema:await n.jsonSchema(),name:p,description:d},...tB(r),prompt:await tJ({prompt:_,supportedUrls:await b.supportedUrls,download:f}),providerOptions:c,abortSignal:s,headers:t,includeRawChunks:!1},{result:{stream:O,response:j,request:q},doStreamSpan:P,startTimestampMs:D}=await T(()=>au({name:"ai.streamObject.doStream",attributes:ad({telemetry:a,attributes:{...ar({operationId:"ai.streamObject.doStream",telemetry:a}),...S,"ai.prompt.messages":{input:()=>ac(A.prompt)},"gen_ai.system":b.provider,"gen_ai.request.model":b.modelId,"gen_ai.request.frequency_penalty":x.frequencyPenalty,"gen_ai.request.max_tokens":x.maxOutputTokens,"gen_ai.request.presence_penalty":x.presencePenalty,"gen_ai.request.temperature":x.temperature,"gen_ai.request.top_k":x.topK,"gen_ai.request.top_p":x.topP}}),tracer:E,endWhenDone:!1,fn:async e=>({startTimestampMs:w(),doStreamSpan:e,result:await b.doStream(A)})}));M._request.resolve(null!=q?q:{});let U=ah(),$="",F="",J={id:v(),timestamp:y(),modelId:b.modelId},V=!0,G=!0,L=O.pipeThrough(new TransformStream({transform:(e,t)=>{switch(e.type){case"text-delta":t.enqueue(e.delta);break;case"response-metadata":case"finish":case"error":case"stream-start":t.enqueue(e)}}})).pipeThrough(new TransformStream({async transform(e,t){var a,r,s;if("object"==typeof e&&"stream-start"===e.type){o=e.warnings;return}if(V){let e=w()-D;V=!1,P.addEvent("ai.stream.firstChunk",{"ai.stream.msToFirstChunk":e}),P.setAttributes({"ai.stream.msToFirstChunk":e})}if("string"==typeof e){$+=e,F+=e;let{value:a,state:r}=await aR($);if(void 0!==a&&!rJ(C,a)){let e=await n.validatePartialResult({value:a,textDelta:F,latestObject:N,isFirstDelta:G,isFinalDelta:"successful-parse"===r});e.success&&!rJ(N,e.value.partial)&&(C=a,N=e.value.partial,t.enqueue({type:"object",object:N}),t.enqueue({type:"text-delta",textDelta:e.value.textDelta}),F="",G=!1)}return}switch(e.type){case"response-metadata":J={id:null!=(a=e.id)?a:J.id,timestamp:null!=(r=e.timestamp)?r:J.timestamp,modelId:null!=(s=e.modelId)?s:J.modelId};break;case"finish":""!==F&&t.enqueue({type:"text-delta",textDelta:F}),h=e.finishReason.unified,U=am(e.usage),I=e.providerMetadata,t.enqueue({...e,finishReason:e.finishReason.unified,usage:U,response:J}),tb({warnings:null!=o?o:[],provider:b.provider,model:b.modelId}),M._usage.resolve(U),M._providerMetadata.resolve(I),M._warnings.resolve(o),M._response.resolve({...J,headers:null==j?void 0:j.headers}),M._finishReason.resolve(null!=h?h:"other");try{k=await rj($,n,m,{response:J,usage:U,finishReason:h}),M._object.resolve(k)}catch(e){R=e,M._object.reject(e)}break;default:t.enqueue(e)}},async flush(t){try{let t=null!=U?U:{promptTokens:NaN,completionTokens:NaN,totalTokens:NaN};P.setAttributes(await ad({telemetry:a,attributes:{"ai.response.finishReason":h,"ai.response.object":{output:()=>JSON.stringify(k)},"ai.response.id":J.id,"ai.response.model":J.modelId,"ai.response.timestamp":J.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(I),"ai.usage.inputTokens":t.inputTokens,"ai.usage.outputTokens":t.outputTokens,"ai.usage.totalTokens":t.totalTokens,"ai.usage.reasoningTokens":t.reasoningTokens,"ai.usage.cachedInputTokens":t.cachedInputTokens,"gen_ai.response.finish_reasons":[h],"gen_ai.response.id":J.id,"gen_ai.response.model":J.modelId,"gen_ai.usage.input_tokens":t.inputTokens,"gen_ai.usage.output_tokens":t.outputTokens}})),P.end(),e.setAttributes(await ad({telemetry:a,attributes:{"ai.usage.inputTokens":t.inputTokens,"ai.usage.outputTokens":t.outputTokens,"ai.usage.totalTokens":t.totalTokens,"ai.usage.reasoningTokens":t.reasoningTokens,"ai.usage.cachedInputTokens":t.cachedInputTokens,"ai.response.object":{output:()=>JSON.stringify(k)},"ai.response.providerMetadata":JSON.stringify(I)}})),await (null==g?void 0:g({usage:t,object:k,error:R,response:{...J,headers:null==j?void 0:j.headers},warnings:o,providerMetadata:I}))}catch(e){t.enqueue({type:"error",error:e})}finally{e.end()}}}));z.addStream(L)}}).catch(e=>{z.addStream(new ReadableStream({start(t){t.enqueue({type:"error",error:e}),t.close()}}))}).finally(()=>{z.close()}),this.outputStrategy=n}get object(){return this._object.promise}get usage(){return this._usage.promise}get providerMetadata(){return this._providerMetadata.promise}get warnings(){return this._warnings.promise}get request(){return this._request.promise}get response(){return this._response.promise}get finishReason(){return this._finishReason.promise}get partialObjectStream(){return rs(this.baseStream.pipeThrough(new TransformStream({transform(e,t){switch(e.type){case"object":t.enqueue(e.object);break;case"text-delta":case"finish":case"error":break;default:throw Error(`Unsupported chunk type: ${e}`)}}})))}get elementStream(){return this.outputStrategy.createElementStream(this.baseStream)}get textStream(){return rs(this.baseStream.pipeThrough(new TransformStream({transform(e,t){switch(e.type){case"text-delta":t.enqueue(e.textDelta);break;case"object":case"finish":case"error":break;default:throw Error(`Unsupported chunk type: ${e}`)}}})))}get fullStream(){return rs(this.baseStream)}pipeTextStreamToResponse(e,t){aQ({response:e,textStream:this.textStream,...t})}toTextStreamResponse(e){return aH({textStream:this.textStream,...e})}},rW=class extends ax{constructor({data:e,mediaType:t}){super({data:e,mediaType:t});let a="mp3";if(t){const e=t.split("/");2===e.length&&"audio/mpeg"!==t&&(a=e[1])}if(!a)throw Error("Audio format must be provided or determinable from media type");this.format=a}};async function rH({model:e,text:t,voice:a,outputFormat:r,instructions:o,speed:s,language:n,providerOptions:i={},maxRetries:l,abortSignal:u,headers:p}){var d;let c=function(e){var t,a;if("string"!=typeof e){if("v3"!==e.specificationVersion&&"v2"!==e.specificationVersion)throw new ta({version:e.specificationVersion,provider:e.provider,modelId:e.modelId});return tz(e)}return null==(a=(t=tN()).speechModel)?void 0:a.call(t,e)}(e);if(!c)throw Error("Model could not be resolved");let m=(0,N.withUserAgentSuffix)(null!=p?p:{},`ai/${tj}`),{retry:h}=aw({maxRetries:l,abortSignal:u}),g=await h(()=>c.doGenerate({text:t,voice:a,outputFormat:r,instructions:o,speed:s,language:n,abortSignal:u,headers:m,providerOptions:i}));if(!g.audio||0===g.audio.length)throw new e3({responses:[g.response]});return tb({warnings:g.warnings,provider:c.provider,model:c.modelId}),new rY({audio:new rW({data:g.audio,mediaType:null!=(d=tO({data:g.audio,signatures:tA}))?d:"audio/mp3"}),warnings:g.warnings,responses:[g.response],providerMetadata:g.providerMetadata})}var rY=class{constructor(e){var t;this.audio=e.audio,this.warnings=e.warnings,this.responses=e.responses,this.providerMetadata=null!=(t=e.providerMetadata)?t:{}}};function rQ({messages:e,reasoning:t="none",toolCalls:a=[],emptyMessages:r="remove"}){for(let r of(("all"===t||"before-last-message"===t)&&(e=e.map((a,r)=>"assistant"!==a.role||"string"==typeof a.content||"before-last-message"===t&&r===e.length-1?a:{...a,content:a.content.filter(e=>"reasoning"!==e.type)})),"none"===a?a=[]:"all"===a?a=[{type:"all"}]:"before-last-message"===a?a=[{type:"before-last-message"}]:"string"==typeof a&&(a=[{type:a}]),a)){let t="all"===r.type?void 0:"before-last-message"===r.type?1:Number(r.type.slice(12).slice(0,-9)),a=new Set,o=new Set;if(null!=t){for(let r of e.slice(-t))if(("assistant"===r.role||"tool"===r.role)&&"string"!=typeof r.content)for(let e of r.content)"tool-call"===e.type||"tool-result"===e.type?a.add(e.toolCallId):("tool-approval-request"===e.type||"tool-approval-response"===e.type)&&o.add(e.approvalId)}e=e.map((s,n)=>{if("assistant"!==s.role&&"tool"!==s.role||"string"==typeof s.content||t&&n>=e.length-t)return s;let i={},l={};return{...s,content:s.content.filter(e=>"tool-call"!==e.type&&"tool-result"!==e.type&&"tool-approval-request"!==e.type&&"tool-approval-response"!==e.type||("tool-call"===e.type?i[e.toolCallId]=e.toolName:"tool-approval-request"===e.type&&(l[e.approvalId]=i[e.toolCallId]),!!(("tool-call"===e.type||"tool-result"===e.type)&&a.has(e.toolCallId)||("tool-approval-request"===e.type||"tool-approval-response"===e.type)&&o.has(e.approvalId))||null!=r.tools&&!r.tools.includes("tool-call"===e.type||"tool-result"===e.type?e.toolName:l[e.approvalId])))}})}return"remove"===r&&(e=e.filter(e=>e.content.length>0)),e}var rX={word:/\S+\s+/m,line:/\n+/m};function rZ({delayInMs:e=10,chunking:t="word",_internal:{delay:a=N.delay}={}}={}){let r;if("function"==typeof t)r=e=>{let a=t(e);if(null==a)return null;if(!a.length)throw Error("Chunking function must return a non-empty string.");if(!e.startsWith(a))throw Error(`Chunking function must return a match that is a prefix of the buffer. Received: "${a}" expected to start with "${e}"`);return a};else{let e="string"==typeof t?rX[t]:t;if(null==e)throw new eI.InvalidArgumentError({argument:"chunking",message:`Chunking must be "word" or "line" or a RegExp. Received: ${t}`});r=t=>{let a=e.exec(t);return a?t.slice(0,a.index)+(null==a?void 0:a[0]):null}}return()=>{let t="",o="";return new TransformStream({async transform(s,n){let i;if("text-delta"!==s.type){t.length>0&&(n.enqueue({type:"text-delta",text:t,id:o}),t=""),n.enqueue(s);return}for(s.id!==o&&t.length>0&&(n.enqueue({type:"text-delta",text:t,id:o}),t=""),t+=s.text,o=s.id;null!=(i=r(t));)n.enqueue({type:"text-delta",text:i,id:o}),t=t.slice(i.length),await a(e)}})}}function r0({settings:e}){return{specificationVersion:"v3",transformParams:async({params:t})=>av(e,t)}}function r1({settings:e}){return{specificationVersion:"v3",transformParams:async({params:t})=>av(e,t)}}function r2({tagName:e,separator:t="\n",startWithReasoning:a=!1}){let r=`<${e}>`,o=`</${e}>`;return{specificationVersion:"v3",wrapGenerate:async({doGenerate:e})=>{let{content:s,...n}=await e(),i=[];for(let e of s){if("text"!==e.type){i.push(e);continue}let s=a?r+e.text:e.text,n=RegExp(`${r}(.*?)${o}`,"gs"),l=Array.from(s.matchAll(n));if(!l.length){i.push(e);continue}let u=l.map(e=>e[1]).join(t),p=s;for(let e=l.length-1;e>=0;e--){let a=l[e],r=p.slice(0,a.index),o=p.slice(a.index+a[0].length);p=r+(r.length>0&&o.length>0?t:"")+o}i.push({type:"reasoning",text:u}),i.push({type:"text",text:p})}return{content:i,...n}},wrapStream:async({doStream:e})=>{let s,{stream:n,...i}=await e(),l={};return{stream:n.pipeThrough(new TransformStream({transform:(e,n)=>{if("text-start"===e.type){s=e;return}if("text-end"===e.type&&s&&(n.enqueue(s),s=void 0),"text-delta"!==e.type)return void n.enqueue(e);null==l[e.id]&&(l[e.id]={isFirstReasoning:!0,isFirstText:!0,afterSwitch:!1,isReasoning:a,buffer:"",idCounter:0,textId:e.id});let i=l[e.id];function u(e){if(e.length>0){let a=!i.afterSwitch||(i.isReasoning?i.isFirstReasoning:i.isFirstText)?"":t;i.isReasoning&&(i.afterSwitch||i.isFirstReasoning)&&n.enqueue({type:"reasoning-start",id:`reasoning-${i.idCounter}`}),i.isReasoning?n.enqueue({type:"reasoning-delta",delta:a+e,id:`reasoning-${i.idCounter}`}):(s&&(n.enqueue(s),s=void 0),n.enqueue({type:"text-delta",delta:a+e,id:i.textId})),i.afterSwitch=!1,i.isReasoning?i.isFirstReasoning=!1:i.isFirstText=!1}}for(i.buffer+=e.delta;;){let e=i.isReasoning?o:r,t=function(e,t){if(0===t.length)return null;let a=e.indexOf(t);if(-1!==a)return a;for(let a=e.length-1;a>=0;a--){let r=e.substring(a);if(t.startsWith(r))return a}return null}(i.buffer,e);if(null==t){u(i.buffer),i.buffer="";break}if(u(i.buffer.slice(0,t)),t+e.length<=i.buffer.length)i.buffer=i.buffer.slice(t+e.length),i.isReasoning&&n.enqueue({type:"reasoning-end",id:`reasoning-${i.idCounter++}`}),i.isReasoning=!i.isReasoning,i.afterSwitch=!0;else{i.buffer=i.buffer.slice(t);break}}}})),...i}}}}function r3(){return{specificationVersion:"v3",wrapStream:async({doGenerate:e})=>{let t=await e(),a=0;return{stream:new ReadableStream({start(e){for(let r of(e.enqueue({type:"stream-start",warnings:t.warnings}),e.enqueue({type:"response-metadata",...t.response}),t.content))switch(r.type){case"text":r.text.length>0&&(e.enqueue({type:"text-start",id:String(a)}),e.enqueue({type:"text-delta",id:String(a),delta:r.text}),e.enqueue({type:"text-end",id:String(a)}),a++);break;case"reasoning":e.enqueue({type:"reasoning-start",id:String(a),providerMetadata:r.providerMetadata}),e.enqueue({type:"reasoning-delta",id:String(a),delta:r.text}),e.enqueue({type:"reasoning-end",id:String(a)}),a++;break;default:e.enqueue(r)}e.enqueue({type:"finish",finishReason:t.finishReason,usage:t.usage,providerMetadata:t.providerMetadata}),e.close()}}),request:t.request,response:t.response}}}}function r6(e){return JSON.stringify(e.input)}function r7({prefix:e="Input Examples:",format:t=r6,remove:a=!0}={}){return{specificationVersion:"v3",transformParams:async({params:r})=>{var o;if(!(null==(o=r.tools)?void 0:o.length))return r;let s=r.tools.map(r=>{var o;if("function"!==r.type||!(null==(o=r.inputExamples)?void 0:o.length))return r;let s=r.inputExamples.map((e,a)=>t(e,a)).join("\n"),n=`${e}
${s}`,i=r.description?`${r.description}

${n}`:n;return{...r,description:i,inputExamples:a?void 0:r.inputExamples}});return{...r,tools:s}}}}var r4=({model:e,middleware:t,modelId:a,providerId:r})=>[...tF(t)].reverse().reduce((e,t)=>r8({model:e,middleware:t,modelId:a,providerId:r}),e),r8=({model:e,middleware:{transformParams:t,wrapGenerate:a,wrapStream:r,overrideProvider:o,overrideModelId:s,overrideSupportedUrls:n},modelId:i,providerId:l})=>{var u,p,d;async function c({params:a,type:r}){return t?await t({params:a,type:r,model:e}):a}return{specificationVersion:"v3",provider:null!=(u=null!=l?l:null==o?void 0:o({model:e}))?u:e.provider,modelId:null!=(p=null!=i?i:null==s?void 0:s({model:e}))?p:e.modelId,supportedUrls:null!=(d=null==n?void 0:n({model:e}))?d:e.supportedUrls,async doGenerate(t){let r=await c({params:t,type:"generate"}),o=async()=>e.doGenerate(r),s=async()=>e.doStream(r);return a?a({doGenerate:o,doStream:s,params:r,model:e}):o()},async doStream(t){let a=await c({params:t,type:"stream"}),o=async()=>e.doGenerate(a),s=async()=>e.doStream(a);return r?r({doGenerate:o,doStream:s,params:a,model:e}):s()}}},r5=({model:e,middleware:t,modelId:a,providerId:r})=>[...tF(t)].reverse().reduce((e,t)=>r9({model:e,middleware:t,modelId:a,providerId:r}),e),r9=({model:e,middleware:{transformParams:t,wrapEmbed:a,overrideProvider:r,overrideModelId:o,overrideMaxEmbeddingsPerCall:s,overrideSupportsParallelCalls:n},modelId:i,providerId:l})=>{var u,p,d,c;async function m({params:a}){return t?await t({params:a,model:e}):a}return{specificationVersion:"v3",provider:null!=(u=null!=l?l:null==r?void 0:r({model:e}))?u:e.provider,modelId:null!=(p=null!=i?i:null==o?void 0:o({model:e}))?p:e.modelId,maxEmbeddingsPerCall:null!=(d=null==s?void 0:s({model:e}))?d:e.maxEmbeddingsPerCall,supportsParallelCalls:null!=(c=null==n?void 0:n({model:e}))?c:e.supportsParallelCalls,async doEmbed(t){let r=await m({params:t}),o=async()=>e.doEmbed(r);return a?a({doEmbed:o,params:r,model:e}):o()}}};function oe(e){return"specificationVersion"in e&&"v3"===e.specificationVersion?e:{specificationVersion:"v3",languageModel:t=>tS(e.languageModel(t)),embeddingModel:t=>tT(e.textEmbeddingModel(t)),imageModel:t=>tx(e.imageModel(t)),transcriptionModel:e.transcriptionModel?t=>tk(e.transcriptionModel(t)):void 0,speechModel:e.speechModel?t=>tz(e.speechModel(t)):void 0,rerankingModel:void 0}}function ot({provider:e,languageModelMiddleware:t}){let a=oe(e);return{specificationVersion:"v3",languageModel:e=>r4({model:a.languageModel(e),middleware:t}),embeddingModel:a.embeddingModel,imageModel:a.imageModel,transcriptionModel:a.transcriptionModel,speechModel:a.speechModel,rerankingModel:a.rerankingModel}}function oa({languageModels:e,embeddingModels:t,imageModels:a,transcriptionModels:r,speechModels:o,rerankingModels:s,fallbackProvider:n}){let i=n?oe(n):void 0;return{specificationVersion:"v3",languageModel(t){if(null!=e&&t in e)return e[t];if(i)return i.languageModel(t);throw new eI.NoSuchModelError({modelId:t,modelType:"languageModel"})},embeddingModel(e){if(null!=t&&e in t)return t[e];if(i)return i.embeddingModel(e);throw new eI.NoSuchModelError({modelId:e,modelType:"embeddingModel"})},imageModel(e){if(null!=a&&e in a)return a[e];if(null==i?void 0:i.imageModel)return i.imageModel(e);throw new eI.NoSuchModelError({modelId:e,modelType:"imageModel"})},transcriptionModel(e){if(null!=r&&e in r)return r[e];if(null==i?void 0:i.transcriptionModel)return i.transcriptionModel(e);throw new eI.NoSuchModelError({modelId:e,modelType:"transcriptionModel"})},speechModel(e){if(null!=o&&e in o)return o[e];if(null==i?void 0:i.speechModel)return i.speechModel(e);throw new eI.NoSuchModelError({modelId:e,modelType:"speechModel"})},rerankingModel(e){if(null!=s&&e in s)return s[e];if(null==i?void 0:i.rerankingModel)return i.rerankingModel(e);throw new eI.NoSuchModelError({modelId:e,modelType:"rerankingModel"})}}}var or="AI_NoSuchProviderError",oo=`vercel.ai.error.${or}`,os=Symbol.for(oo),on=class extends eI.NoSuchModelError{constructor({modelId:e,modelType:t,providerId:a,availableProviders:r,message:o=`No such provider: ${a} (available providers: ${r.join()})`}){super({errorName:or,modelId:e,modelType:t,message:o}),this[R]=!0,this.providerId=a,this.availableProviders=r}static isInstance(e){return eI.AISDKError.hasMarker(e,oo)}};function oi(e,{separator:t=":",languageModelMiddleware:a}={}){let r=new ol({separator:t,languageModelMiddleware:a});for(let[t,a]of Object.entries(e))r.registerProvider({id:t,provider:a});return r}R=os;var ol=class{constructor({separator:e,languageModelMiddleware:t}){this.providers={},this.separator=e,this.languageModelMiddleware=t}registerProvider({id:e,provider:t}){this.providers[e]=t}getProvider(e,t){let a=this.providers[e];if(null==a)throw new on({modelId:e,modelType:t,providerId:e,availableProviders:Object.keys(this.providers)});return a}splitId(e,t){let a=e.indexOf(this.separator);if(-1===a)throw new eI.NoSuchModelError({modelId:e,modelType:t,message:`Invalid ${t} id for registry: ${e} (must be in the format "providerId${this.separator}modelId")`});return[e.slice(0,a),e.slice(a+this.separator.length)]}languageModel(e){var t,a;let[r,o]=this.splitId(e,"languageModel"),s=null==(a=(t=this.getProvider(r,"languageModel")).languageModel)?void 0:a.call(t,o);if(null==s)throw new eI.NoSuchModelError({modelId:e,modelType:"languageModel"});return null!=this.languageModelMiddleware&&(s=r4({model:s,middleware:this.languageModelMiddleware})),s}embeddingModel(e){var t;let[a,r]=this.splitId(e,"embeddingModel"),o=this.getProvider(a,"embeddingModel"),s=null==(t=o.embeddingModel)?void 0:t.call(o,r);if(null==s)throw new eI.NoSuchModelError({modelId:e,modelType:"embeddingModel"});return s}imageModel(e){var t;let[a,r]=this.splitId(e,"imageModel"),o=this.getProvider(a,"imageModel"),s=null==(t=o.imageModel)?void 0:t.call(o,r);if(null==s)throw new eI.NoSuchModelError({modelId:e,modelType:"imageModel"});return s}transcriptionModel(e){var t;let[a,r]=this.splitId(e,"transcriptionModel"),o=this.getProvider(a,"transcriptionModel"),s=null==(t=o.transcriptionModel)?void 0:t.call(o,r);if(null==s)throw new eI.NoSuchModelError({modelId:e,modelType:"transcriptionModel"});return s}speechModel(e){var t;let[a,r]=this.splitId(e,"speechModel"),o=this.getProvider(a,"speechModel"),s=null==(t=o.speechModel)?void 0:t.call(o,r);if(null==s)throw new eI.NoSuchModelError({modelId:e,modelType:"speechModel"});return s}rerankingModel(e){var t;let[a,r]=this.splitId(e,"rerankingModel"),o=this.getProvider(a,"rerankingModel"),s=null==(t=o.rerankingModel)?void 0:t.call(o,r);if(null==s)throw new eI.NoSuchModelError({modelId:e,modelType:"rerankingModel"});return s}};async function ou({model:e,documents:t,query:a,topN:r,maxRetries:o,abortSignal:s,headers:n,providerOptions:i,experimental_telemetry:l}){if(0===t.length)return new op({originalDocuments:[],ranking:[],providerMetadata:void 0,response:{timestamp:new Date,modelId:e.modelId}});let{maxRetries:u,retry:p}=aw({maxRetries:o,abortSignal:s}),d="string"==typeof t[0]?{type:"text",values:t}:{type:"object",values:t},c=ao({model:e,telemetry:l,headers:n,settings:{maxRetries:u}}),m=al(l);return au({name:"ai.rerank",attributes:ad({telemetry:l,attributes:{...ar({operationId:"ai.rerank",telemetry:l}),...c,"ai.documents":{input:()=>t.map(e=>JSON.stringify(e))}}}),tracer:m,fn:async()=>{var o,u;let{ranking:h,response:g,providerMetadata:f,warnings:v}=await p(()=>au({name:"ai.rerank.doRerank",attributes:ad({telemetry:l,attributes:{...ar({operationId:"ai.rerank.doRerank",telemetry:l}),...c,"ai.documents":{input:()=>t.map(e=>JSON.stringify(e))}}}),tracer:m,fn:async t=>{let o=await e.doRerank({documents:d,query:a,topN:r,providerOptions:i,abortSignal:s,headers:n}),u=o.ranking;return t.setAttributes(await ad({telemetry:l,attributes:{"ai.ranking.type":d.type,"ai.ranking":{output:()=>u.map(e=>JSON.stringify(e))}}})),{ranking:u,providerMetadata:o.providerMetadata,response:o.response,warnings:o.warnings}}}));return tb({warnings:null!=v?v:[],provider:e.provider,model:e.modelId}),new op({originalDocuments:t,ranking:h.map(e=>({originalIndex:e.index,score:e.relevanceScore,document:t[e.index]})),providerMetadata:f,response:{id:null==g?void 0:g.id,timestamp:null!=(o=null==g?void 0:g.timestamp)?o:new Date,modelId:null!=(u=null==g?void 0:g.modelId)?u:e.modelId,headers:null==g?void 0:g.headers,body:null==g?void 0:g.body}})}})}var op=class{constructor(e){this.originalDocuments=e.originalDocuments,this.ranking=e.ranking,this.response=e.response,this.providerMetadata=e.providerMetadata}get rerankedDocuments(){return this.ranking.map(e=>e.document)}},od=class extends eI.AISDKError{constructor(e){super({name:"AI_NoTranscriptGeneratedError",message:"No transcript generated."}),this.responses=e.responses}};async function oc({model:e,audio:t,providerOptions:a={},maxRetries:r,abortSignal:o,headers:s}){let n=function(e){var t,a;if("string"!=typeof e){if("v3"!==e.specificationVersion&&"v2"!==e.specificationVersion)throw new ta({version:e.specificationVersion,provider:e.provider,modelId:e.modelId});return tk(e)}return null==(a=(t=tN()).transcriptionModel)?void 0:a.call(t,e)}(e);if(!n)throw Error("Model could not be resolved");let{retry:i}=aw({maxRetries:r,abortSignal:o}),l=(0,N.withUserAgentSuffix)(null!=s?s:{},`ai/${tj}`),u=t instanceof URL?(await tq({url:t})).data:t$(t),p=await i(()=>{var e;return n.doGenerate({audio:u,abortSignal:o,headers:l,providerOptions:a,mediaType:null!=(e=tO({data:u,signatures:tA}))?e:"audio/wav"})});if(tb({warnings:p.warnings,provider:n.provider,model:n.modelId}),!p.text)throw new od({responses:[p.response]});return new om({text:p.text,segments:p.segments,language:p.language,durationInSeconds:p.durationInSeconds,warnings:p.warnings,responses:[p.response],providerMetadata:p.providerMetadata})}var om=class{constructor(e){var t;this.text=e.text,this.segments=e.segments,this.language=e.language,this.durationInSeconds=e.durationInSeconds,this.warnings=e.warnings,this.responses=e.responses,this.providerMetadata=null!=(t=e.providerMetadata)?t:{}}};async function oh({stream:e,onTextPart:t}){let a=e.pipeThrough(new TextDecoderStream).getReader();for(;;){let{done:e,value:r}=await a.read();if(e)break;await t(r)}}async function og({api:e,prompt:t,credentials:a,headers:r,body:o,streamProtocol:s="data",setCompletion:n,setLoading:i,setError:l,setAbortController:u,onFinish:p,onError:d,fetch:c=fetch}){var m;try{i(!0),l(void 0);let d=new AbortController;u(d),n("");let h=await c(e,{method:"POST",body:JSON.stringify({prompt:t,...o}),credentials:a,headers:(0,N.withUserAgentSuffix)({"Content-Type":"application/json",...r},`ai-sdk/${tj}`,(0,N.getRuntimeEnvironmentUserAgent)()),signal:d.signal}).catch(e=>{throw e});if(!h.ok)throw Error(null!=(m=await h.text())?m:"Failed to fetch the chat response.");if(!h.body)throw Error("The response body is empty.");let g="";switch(s){case"text":await oh({stream:h.body,onTextPart:e=>{g+=e,n(g)}});break;case"data":await rn({stream:(0,N.parseJsonEventStream)({stream:h.body,schema:a1}).pipeThrough(new TransformStream({async transform(e){if(!e.success)throw e.error;let t=e.value;if("text-delta"===t.type)g+=t.delta,n(g);else if("error"===t.type)throw Error(t.errorText)}})),onError:e=>{throw e}});break;default:throw Error(`Unknown stream protocol: ${s}`)}return p&&p(t,g),u(null),g}catch(e){if("AbortError"===e.name)return u(null),null;e instanceof Error&&d&&d(e),l(e)}finally{i(!1)}}async function of(e){if(null==e)return[];if(!globalThis.FileList||!(e instanceof globalThis.FileList))throw Error("FileList is not supported in the current environment");return Promise.all(Array.from(e).map(async e=>{let{name:t,type:a}=e;return{type:"file",mediaType:a,filename:t,url:await new Promise((t,a)=>{let r=new FileReader;r.onload=e=>{var a;t(null==(a=e.target)?void 0:a.result)},r.onerror=e=>a(e),r.readAsDataURL(e)})}}))}var ov=class{constructor({api:e="/api/chat",credentials:t,headers:a,body:r,fetch:o,prepareSendMessagesRequest:s,prepareReconnectToStreamRequest:n}){this.api=e,this.credentials=t,this.headers=a,this.body=r,this.fetch=o,this.prepareSendMessagesRequest=s,this.prepareReconnectToStreamRequest=n}async sendMessages({abortSignal:e,...t}){var a,r,o,s,n;let i=await (0,N.resolve)(this.body),l=await (0,N.resolve)(this.headers),u=await (0,N.resolve)(this.credentials),p={...(0,N.normalizeHeaders)(l),...(0,N.normalizeHeaders)(t.headers)},d=await (null==(a=this.prepareSendMessagesRequest)?void 0:a.call(this,{api:this.api,id:t.chatId,messages:t.messages,body:{...i,...t.body},headers:p,credentials:u,requestMetadata:t.metadata,trigger:t.trigger,messageId:t.messageId})),c=null!=(r=null==d?void 0:d.api)?r:this.api,m=(null==d?void 0:d.headers)!==void 0?(0,N.normalizeHeaders)(d.headers):p,h=(null==d?void 0:d.body)!==void 0?d.body:{...i,...t.body,id:t.chatId,messages:t.messages,trigger:t.trigger,messageId:t.messageId},g=null!=(o=null==d?void 0:d.credentials)?o:u,f=null!=(s=this.fetch)?s:globalThis.fetch,v=await f(c,{method:"POST",headers:(0,N.withUserAgentSuffix)({"Content-Type":"application/json",...m},`ai-sdk/${tj}`,(0,N.getRuntimeEnvironmentUserAgent)()),body:JSON.stringify(h),credentials:g,signal:e});if(!v.ok)throw Error(null!=(n=await v.text())?n:"Failed to fetch the chat response.");if(!v.body)throw Error("The response body is empty.");return this.processResponseStream(v.body)}async reconnectToStream(e){var t,a,r,o,s;let n=await (0,N.resolve)(this.body),i=await (0,N.resolve)(this.headers),l=await (0,N.resolve)(this.credentials),u={...(0,N.normalizeHeaders)(i),...(0,N.normalizeHeaders)(e.headers)},p=await (null==(t=this.prepareReconnectToStreamRequest)?void 0:t.call(this,{api:this.api,id:e.chatId,body:{...n,...e.body},headers:u,credentials:l,requestMetadata:e.metadata})),d=null!=(a=null==p?void 0:p.api)?a:`${this.api}/${e.chatId}/stream`,c=(null==p?void 0:p.headers)!==void 0?(0,N.normalizeHeaders)(p.headers):u,m=null!=(r=null==p?void 0:p.credentials)?r:l,h=null!=(o=this.fetch)?o:globalThis.fetch,g=await h(d,{method:"GET",headers:(0,N.withUserAgentSuffix)(c,`ai-sdk/${tj}`,(0,N.getRuntimeEnvironmentUserAgent)()),credentials:m});if(204===g.status)return null;if(!g.ok)throw Error(null!=(s=await g.text())?s:"Failed to fetch the chat response.");if(!g.body)throw Error("The response body is empty.");return this.processResponseStream(g.body)}},oy=class extends ov{constructor(e={}){super(e)}processResponseStream(e){return(0,N.parseJsonEventStream)({stream:e,schema:a1}).pipeThrough(new TransformStream({async transform(e,t){if(!e.success)throw e.error;t.enqueue(e.value)}}))}},ow=class{constructor({generateId:e=N.generateId,id:t=e(),transport:a=new oy,messageMetadataSchema:r,dataPartSchemas:o,state:s,onError:n,onToolCall:i,onFinish:l,onData:u,sendAutomaticallyWhen:p}){this.activeResponse=void 0,this.jobExecutor=new rV,this.sendMessage=async(e,t)=>{var a,r,o,s;let n;if(null==e)return void await this.makeRequest({trigger:"submit-message",messageId:null==(a=this.lastMessage)?void 0:a.id,...t});if(n="text"in e||"files"in e?{parts:[...Array.isArray(e.files)?e.files:await of(e.files),..."text"in e&&null!=e.text?[{type:"text",text:e.text}]:[]]}:e,null!=e.messageId){let t=this.state.messages.findIndex(t=>t.id===e.messageId);if(-1===t)throw Error(`message with id ${e.messageId} not found`);if("user"!==this.state.messages[t].role)throw Error(`message with id ${e.messageId} is not a user message`);this.state.messages=this.state.messages.slice(0,t+1),this.state.replaceMessage(t,{...n,id:e.messageId,role:null!=(r=n.role)?r:"user",metadata:e.metadata})}else this.state.pushMessage({...n,id:null!=(o=n.id)?o:this.generateId(),role:null!=(s=n.role)?s:"user",metadata:e.metadata});await this.makeRequest({trigger:"submit-message",messageId:e.messageId,...t})},this.regenerate=async({messageId:e,...t}={})=>{let a=null==e?this.state.messages.length-1:this.state.messages.findIndex(t=>t.id===e);if(-1===a)throw Error(`message ${e} not found`);this.state.messages=this.state.messages.slice(0,"assistant"===this.messages[a].role?a:a+1),await this.makeRequest({trigger:"regenerate-message",messageId:e,...t})},this.resumeStream=async(e={})=>{await this.makeRequest({trigger:"resume-stream",...e})},this.clearError=()=>{"error"===this.status&&(this.state.error=void 0,this.setStatus({status:"ready"}))},this.addToolApprovalResponse=async({id:e,approved:t,reason:a})=>this.jobExecutor.run(async()=>{var r,o;let s=this.state.messages,n=s[s.length-1],i=r=>a5(r)&&"approval-requested"===r.state&&r.approval.id===e?{...r,state:"approval-responded",approval:{id:e,approved:t,reason:a}}:r;this.state.replaceMessage(s.length-1,{...n,parts:n.parts.map(i)}),this.activeResponse&&(this.activeResponse.state.message.parts=this.activeResponse.state.message.parts.map(i)),"streaming"!==this.status&&"submitted"!==this.status&&(null==(r=this.sendAutomaticallyWhen)?void 0:r.call(this,{messages:this.state.messages}))&&this.makeRequest({trigger:"submit-message",messageId:null==(o=this.lastMessage)?void 0:o.id})}),this.addToolOutput=async({state:e="output-available",tool:t,toolCallId:a,output:r,errorText:o})=>this.jobExecutor.run(async()=>{var t,s;let n=this.state.messages,i=n[n.length-1],l=t=>a5(t)&&t.toolCallId===a?{...t,state:e,output:r,errorText:o}:t;this.state.replaceMessage(n.length-1,{...i,parts:i.parts.map(l)}),this.activeResponse&&(this.activeResponse.state.message.parts=this.activeResponse.state.message.parts.map(l)),"streaming"!==this.status&&"submitted"!==this.status&&(null==(t=this.sendAutomaticallyWhen)?void 0:t.call(this,{messages:this.state.messages}))&&this.makeRequest({trigger:"submit-message",messageId:null==(s=this.lastMessage)?void 0:s.id})}),this.addToolResult=this.addToolOutput,this.stop=async()=>{var e;("streaming"===this.status||"submitted"===this.status)&&(null==(e=this.activeResponse)?void 0:e.abortController)&&this.activeResponse.abortController.abort()},this.id=t,this.transport=a,this.generateId=e,this.messageMetadataSchema=r,this.dataPartSchemas=o,this.state=s,this.onError=n,this.onToolCall=i,this.onFinish=l,this.onData=u,this.sendAutomaticallyWhen=p}get status(){return this.state.status}setStatus({status:e,error:t}){this.status!==e&&(this.state.status=e,this.state.error=t)}get error(){return this.state.error}get messages(){return this.state.messages}get lastMessage(){return this.state.messages[this.state.messages.length-1]}set messages(e){this.state.messages=e}async makeRequest({trigger:e,metadata:t,headers:a,body:r,messageId:o}){var s,n,i,l;this.setStatus({status:"submitted",error:void 0});let u=this.lastMessage,p=!1,d=!1,c=!1;try{let s,n={state:rt({lastMessage:this.state.snapshot(u),messageId:this.generateId()}),abortController:new AbortController};if(n.abortController.signal.addEventListener("abort",()=>{p=!0}),this.activeResponse=n,"resume-stream"===e){let e=await this.transport.reconnectToStream({chatId:this.id,metadata:t,headers:a,body:r});if(null==e)return void this.setStatus({status:"ready"});s=e}else s=await this.transport.sendMessages({chatId:this.id,messages:this.state.messages,abortSignal:n.abortController.signal,metadata:t,headers:a,body:r,trigger:e,messageId:o});let i=e=>this.jobExecutor.run(()=>e({state:n.state,write:()=>{var e;this.setStatus({status:"streaming"}),n.state.message.id===(null==(e=this.lastMessage)?void 0:e.id)?this.state.replaceMessage(this.state.messages.length-1,n.state.message):this.state.pushMessage(n.state.message)}}));await rn({stream:ra({stream:s,onToolCall:this.onToolCall,onData:this.onData,messageMetadataSchema:this.messageMetadataSchema,dataPartSchemas:this.dataPartSchemas,runUpdateMessageJob:i,onError:e=>{throw e}}),onError:e=>{throw e}}),this.setStatus({status:"ready"})}catch(e){if(p||"AbortError"===e.name)return p=!0,this.setStatus({status:"ready"}),null;c=!0,e instanceof TypeError&&(e.message.toLowerCase().includes("fetch")||e.message.toLowerCase().includes("network"))&&(d=!0),this.onError&&e instanceof Error&&this.onError(e),this.setStatus({status:"error",error:e})}finally{try{null==(n=this.onFinish)||n.call(this,{message:this.activeResponse.state.message,messages:this.state.messages,isAbort:p,isDisconnect:d,isError:c,finishReason:null==(s=this.activeResponse)?void 0:s.state.finishReason})}catch(e){console.error(e)}this.activeResponse=void 0}(null==(i=this.sendAutomaticallyWhen)?void 0:i.call(this,{messages:this.state.messages}))&&!c&&await this.makeRequest({trigger:"submit-message",messageId:null==(l=this.lastMessage)?void 0:l.id,metadata:t,headers:a,body:r})}};function ob({messages:e}){let t=e[e.length-1];if(!t||"assistant"!==t.role)return!1;let a=t.parts.reduce((e,t,a)=>"step-start"===t.type?a:e,-1),r=t.parts.slice(a+1).filter(a5).filter(e=>!e.providerExecuted);return r.filter(e=>"approval-responded"===e.state).length>0&&r.every(e=>"output-available"===e.state||"output-error"===e.state||"approval-responded"===e.state)}function oI({messages:e}){let t=e[e.length-1];if(!t||"assistant"!==t.role)return!1;let a=t.parts.reduce((e,t,a)=>"step-start"===t.type?a:e,-1),r=t.parts.slice(a+1).filter(a5).filter(e=>!e.providerExecuted);return r.length>0&&r.every(e=>"output-available"===e.state||"output-error"===e.state)}var oT=class extends ov{constructor(e={}){super(e)}processResponseStream(e){return function({stream:e}){return e.pipeThrough(new TransformStream({start(e){e.enqueue({type:"start"}),e.enqueue({type:"start-step"}),e.enqueue({type:"text-start",id:"text-1"})},async transform(e,t){t.enqueue({type:"text-delta",id:"text-1",delta:e})},async flush(e){e.enqueue({type:"text-end",id:"text-1"}),e.enqueue({type:"finish-step"}),e.enqueue({type:"finish"})}}))}({stream:e.pipeThrough(new TextDecoderStream)})}};e.s(["AbstractChat",()=>ow,"DefaultChatTransport",()=>oy,"Experimental_Agent",()=>rm,"HttpChatTransport",()=>ov,"InvalidArgumentError",()=>ek,"InvalidDataContentError",()=>tn,"InvalidMessageRoleError",()=>tp,"InvalidStreamPartError",()=>e_,"InvalidToolApprovalError",()=>eq,"InvalidToolInputError",()=>e$,"JsonToSseTransformStream",()=>aX,"MessageConversionError",()=>th,"NoImageGeneratedError",()=>eW,"NoObjectGeneratedError",()=>eX,"NoOutputGeneratedError",()=>e2,"NoSpeechGeneratedError",()=>e3,"NoSuchProviderError",()=>on,"NoSuchToolError",()=>e8,"Output",()=>aM,"RetryError",()=>ty,"SerialJobExecutor",()=>rV,"TextStreamChatTransport",()=>oT,"ToolCallNotFoundForApprovalError",()=>eG,"ToolCallRepairError",()=>tt,"ToolLoopAgent",()=>rm,"UI_MESSAGE_STREAM_HEADERS",()=>aZ,"UnsupportedModelVersionError",()=>ta,"addToolInputExamplesMiddleware",()=>r7,"assistantModelMessageSchema",()=>t5,"callCompletionApi",()=>og,"consumeStream",()=>rn,"convertFileListToFileUIParts",()=>of,"convertToModelMessages",()=>rf,"cosineSimilarity",()=>r$,"createAgentUIStream",()=>rb,"createAgentUIStreamResponse",()=>rI,"createProviderRegistry",()=>oi,"createTextStreamResponse",()=>aH,"createUIMessageStream",()=>rh,"createUIMessageStreamResponse",()=>a0,"customProvider",()=>oa,"defaultEmbeddingSettingsMiddleware",()=>r0,"defaultSettingsMiddleware",()=>r1,"embed",()=>rx,"embedMany",()=>rM,"experimental_createProviderRegistry",()=>oi,"experimental_customProvider",()=>oa,"experimental_generateImage",()=>rk,"experimental_generateSpeech",()=>rH,"experimental_transcribe",()=>oc,"extractReasoningMiddleware",()=>r2,"generateImage",()=>rk,"generateObject",()=>rD,"generateText",()=>aG,"getStaticToolName",()=>a9,"getTextFromDataUrl",()=>rF,"getToolName",()=>re,"getToolOrDynamicToolName",()=>re,"hasToolCall",()=>a$,"isDataUIPart",()=>a2,"isDeepEqualData",()=>rJ,"isFileUIPart",()=>a6,"isReasoningUIPart",()=>a7,"isStaticToolUIPart",()=>a4,"isTextUIPart",()=>a3,"isToolOrDynamicToolUIPart",()=>a5,"isToolUIPart",()=>a5,"lastAssistantMessageIsCompleteWithApprovalResponses",()=>ob,"lastAssistantMessageIsCompleteWithToolCalls",()=>oI,"modelMessageSchema",()=>ae,"parsePartialJson",()=>aR,"pipeAgentUIStreamToResponse",()=>rT,"pipeTextStreamToResponse",()=>aQ,"pipeUIMessageStreamToResponse",()=>ro,"pruneMessages",()=>rQ,"readUIMessageStream",()=>rg,"rerank",()=>ou,"safeValidateUIMessages",()=>ry,"simulateReadableStream",()=>rG,"simulateStreamingMiddleware",()=>r3,"smoothStream",()=>rZ,"stepCountIs",()=>aU,"streamObject",()=>rK,"streamText",()=>rd,"systemModelMessageSchema",()=>t4,"toolModelMessageSchema",()=>t9,"uiMessageChunkSchema",()=>a1,"userModelMessageSchema",()=>t8,"validateUIMessages",()=>rw,"wrapEmbeddingModel",()=>r5,"wrapLanguageModel",()=>r4,"wrapProvider",()=>ot],97804)}]);

//# sourceMappingURL=node_modules_a458cac4._.js.map
/**/;(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["chunks/turbopack-node_modules_next_dist_esm_build_templates_edge-wrapper_98149c2d.js",{otherChunks:["chunks/[root-of-the-server]__5f5efe2e._.js","chunks/_7ece717d._.js","chunks/node_modules_@opentelemetry_api_build_esm_a886cc58._.js","chunks/node_modules_@ai-sdk_provider-utils_dist_index_mjs_995f32ad._.js","chunks/src_services_ai-providers_ts_f30e308f._.js","chunks/node_modules_c144a9c7._.js","chunks/node_modules_a458cac4._.js"],runtimeModuleIds:[66060]}]),(()=>{let e;if(!Array.isArray(globalThis.TURBOPACK))return;let t=new WeakMap;function r(e,t){this.m=e,this.e=t}let n=r.prototype,o=Object.prototype.hasOwnProperty,u="undefined"!=typeof Symbol&&Symbol.toStringTag;function i(e,t,r){o.call(e,t)||Object.defineProperty(e,t,r)}function l(e,t){let r=e[t];return r||(r=s(t),e[t]=r),r}function s(e){return{exports:{},error:void 0,id:e,namespaceObject:void 0}}function a(e,t){i(e,"__esModule",{value:!0}),u&&i(e,u,{value:"Module"});let r=0;for(;r<t.length;){let n=t[r++],o=t[r++];if("number"==typeof o)if(0===o)i(e,n,{value:t[r++],enumerable:!0,writable:!1});else throw Error(`unexpected tag: ${o}`);else"function"==typeof t[r]?i(e,n,{get:o,set:t[r++],enumerable:!0}):i(e,n,{get:o,enumerable:!0})}Object.seal(e)}n.s=function(e,t){let r,n;null!=t?n=(r=l(this.c,t)).exports:(r=this.m,n=this.e),r.namespaceObject=n,a(n,e)},n.j=function(e,r){var n,u;let i,s,a;null!=r?s=(i=l(this.c,r)).exports:(i=this.m,s=this.e);let c=(n=i,u=s,(a=t.get(n))||(t.set(n,a=[]),n.exports=n.namespaceObject=new Proxy(u,{get(e,t){if(o.call(e,t)||"default"===t||"__esModule"===t)return Reflect.get(e,t);for(let e of a){let r=Reflect.get(e,t);if(void 0!==r)return r}},ownKeys(e){let t=Reflect.ownKeys(e);for(let e of a)for(let r of Reflect.ownKeys(e))"default"===r||t.includes(r)||t.push(r);return t}})),a);"object"==typeof e&&null!==e&&c.push(e)},n.v=function(e,t){(null!=t?l(this.c,t):this.m).exports=e},n.n=function(e,t){let r;(r=null!=t?l(this.c,t):this.m).exports=r.namespaceObject=e};let c=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,f=[null,c({}),c([]),c(c)];function d(e,t,r){let n=[],o=-1;for(let t=e;("object"==typeof t||"function"==typeof t)&&!f.includes(t);t=c(t))for(let r of Object.getOwnPropertyNames(t))n.push(r,function(e,t){return()=>e[t]}(e,r)),-1===o&&"default"===r&&(o=n.length-1);return r&&o>=0||(o>=0?n.splice(o,1,0,e):n.push("default",0,e)),a(t,n),t}function h(e){return"function"==typeof e?function(...t){return e.apply(this,t)}:Object.create(null)}function p(e){let t=N(e,this.m);if(t.namespaceObject)return t.namespaceObject;let r=t.exports;return t.namespaceObject=d(r,h(r),r&&r.__esModule)}function m(e){let t=e.indexOf("#");-1!==t&&(e=e.substring(0,t));let r=e.indexOf("?");return -1!==r&&(e=e.substring(0,r)),e}function b(e){return"string"==typeof e?e:e.path}function y(){let e,t;return{promise:new Promise((r,n)=>{t=n,e=r}),resolve:e,reject:t}}n.i=p,n.A=function(e){return this.r(e)(p.bind(this))},n.t="function"==typeof require?require:function(){throw Error("Unexpected use of runtime require")},n.r=function(e){return N(e,this.m).exports},n.f=function(e){function t(t){if(t=m(t),o.call(e,t))return e[t].module();let r=Error(`Cannot find module '${t}'`);throw r.code="MODULE_NOT_FOUND",r}return t.keys=()=>Object.keys(e),t.resolve=t=>{if(t=m(t),o.call(e,t))return e[t].id();let r=Error(`Cannot find module '${t}'`);throw r.code="MODULE_NOT_FOUND",r},t.import=async e=>await t(e),t};let _=Symbol("turbopack queues"),O=Symbol("turbopack exports"),g=Symbol("turbopack error");function w(e){e&&1!==e.status&&(e.status=1,e.forEach(e=>e.queueCount--),e.forEach(e=>e.queueCount--?e.queueCount++:e()))}n.a=function(e,t){let r=this.m,n=t?Object.assign([],{status:-1}):void 0,o=new Set,{resolve:u,reject:i,promise:l}=y(),s=Object.assign(l,{[O]:r.exports,[_]:e=>{n&&e(n),o.forEach(e),s.catch(()=>{})}}),a={get:()=>s,set(e){e!==s&&(s[O]=e)}};Object.defineProperty(r,"exports",a),Object.defineProperty(r,"namespaceObject",a),e(function(e){let t=e.map(e=>{if(null!==e&&"object"==typeof e){if(_ in e)return e;if(null!=e&&"object"==typeof e&&"then"in e&&"function"==typeof e.then){let t=Object.assign([],{status:0}),r={[O]:{},[_]:e=>e(t)};return e.then(e=>{r[O]=e,w(t)},e=>{r[g]=e,w(t)}),r}}return{[O]:e,[_]:()=>{}}}),r=()=>t.map(e=>{if(e[g])throw e[g];return e[O]}),{promise:u,resolve:i}=y(),l=Object.assign(()=>i(r),{queueCount:0});function s(e){e!==n&&!o.has(e)&&(o.add(e),e&&0===e.status&&(l.queueCount++,e.push(l)))}return t.map(e=>e[_](s)),l.queueCount?u:r()},function(e){e?i(s[g]=e):u(s[O]),w(n)}),n&&-1===n.status&&(n.status=0)};let j=function(e){let t=new URL(e,"x:/"),r={};for(let e in t)r[e]=t[e];for(let t in r.href=e,r.pathname=e.replace(/[?#].*/,""),r.origin=r.protocol="",r.toString=r.toJSON=(...t)=>e,r)Object.defineProperty(this,t,{enumerable:!0,configurable:!0,value:r[t]})};function k(e,t){throw Error(`Invariant: ${t(e)}`)}j.prototype=URL.prototype,n.U=j,n.z=function(e){throw Error("dynamic usage of require is not supported")},n.g=globalThis;let C=r.prototype;var U,R=((U=R||{})[U.Runtime=0]="Runtime",U[U.Parent=1]="Parent",U[U.Update=2]="Update",U);let v=new Map;n.M=v;let P=new Map,T=new Map;async function $(e,t,r){let n;if("string"==typeof r)return M(e,t,A(r));let o=r.included||[],u=o.map(e=>!!v.has(e)||P.get(e));if(u.length>0&&u.every(e=>e))return void await Promise.all(u);let i=r.moduleChunks||[],l=i.map(e=>T.get(e)).filter(e=>e);if(l.length>0){if(l.length===i.length)return void await Promise.all(l);let r=new Set;for(let e of i)T.has(e)||r.add(e);for(let n of r){let r=M(e,t,A(n));T.set(n,r),l.push(r)}n=Promise.all(l)}else{for(let o of(n=M(e,t,A(r.path)),i))T.has(o)||T.set(o,n)}for(let e of o)P.has(e)||P.set(e,n);await n}C.l=function(e){return $(1,this.m.id,e)};let x=Promise.resolve(void 0),E=new WeakMap;function M(t,r,n){let o=e.loadChunkCached(t,n),u=E.get(o);if(void 0===u){let e=E.set.bind(E,o,x);u=o.then(e).catch(e=>{let o;switch(t){case 0:o=`as a runtime dependency of chunk ${r}`;break;case 1:o=`from module ${r}`;break;case 2:o="from an HMR update";break;default:k(t,e=>`Unknown source type: ${e}`)}let u=Error(`Failed to load chunk ${n} ${o}${e?`: ${e}`:""}`,e?{cause:e}:void 0);throw u.name="ChunkLoadError",u}),E.set(o,u)}return u}function A(e){return`${e.split("/").map(e=>encodeURIComponent(e)).join("/")}`}C.L=function(e){return M(1,this.m.id,e)},C.R=function(e){let t=this.r(e);return t?.default??t},C.P=function(e){return`/ROOT/${e??""}`},C.b=function(e){let t=new Blob([`self.TURBOPACK_WORKER_LOCATION = ${JSON.stringify(location.origin)};
self.TURBOPACK_CHUNK_SUFFIX = ${JSON.stringify("")};
self.TURBOPACK_NEXT_CHUNK_URLS = ${JSON.stringify(e.reverse().map(A),null,2)};
importScripts(...self.TURBOPACK_NEXT_CHUNK_URLS.map(c => self.TURBOPACK_WORKER_LOCATION + c).reverse());`],{type:"text/javascript"});return URL.createObjectURL(t)};let K=/\.js(?:\?[^#]*)?(?:#.*)?$/;n.w=function(t,r,n){return e.loadWebAssembly(1,this.m.id,t,r,n)},n.u=function(t,r){return e.loadWebAssemblyModule(1,this.m.id,t,r)};let S={};n.c=S;let N=(e,t)=>{let r=S[e];if(r){if(r.error)throw r.error;return r}return q(e,R.Parent,t.id)};function q(e,t,n){let o=v.get(e);if("function"!=typeof o)throw Error(function(e,t,r){let n;switch(t){case 0:n=`as a runtime entry of chunk ${r}`;break;case 1:n=`because it was required from module ${r}`;break;case 2:n="because of an HMR update";break;default:k(t,e=>`Unknown source type: ${e}`)}return`Module ${e} was instantiated ${n}, but the module factory is not available.`}(e,t,n));let u=s(e),i=u.exports;S[e]=u;let l=new r(u,i);try{o(l,u,i)}catch(e){throw u.error=e,e}return u.namespaceObject&&u.exports!==u.namespaceObject&&d(u.exports,u.namespaceObject),u}function L(t){let r,n=function(e){if("string"==typeof e)return e;let t=decodeURIComponent(("undefined"!=typeof TURBOPACK_NEXT_CHUNK_URLS?TURBOPACK_NEXT_CHUNK_URLS.pop():e.getAttribute("src")).replace(/[?#].*$/,""));return t.startsWith("")?t.slice(0):t}(t[0]);return 2===t.length?r=t[1]:(r=void 0,!function(e,t,r,n){let o=1;for(;o<e.length;){let t=e[o],n=o+1;for(;n<e.length&&"function"!=typeof e[n];)n++;if(n===e.length)throw Error("malformed chunk format, expected a factory function");if(!r.has(t)){let u=e[n];for(Object.defineProperty(u,"name",{value:"module evaluation"});o<n;o++)t=e[o],r.set(t,u)}o=n+1}}(t,0,v)),e.registerChunk(n,r)}function B(e,t,r=!1){let n;try{n=t()}catch(t){throw Error(`Failed to load external module ${e}: ${t}`)}return!r||n.__esModule?n:d(n,h(n),!0)}n.y=async function(e){let t;try{t=await import(e)}catch(t){throw Error(`Failed to load external module ${e}: ${t}`)}return t&&t.__esModule&&t.default&&"default"in t.default?d(t.default,h(t),!0):t},B.resolve=(e,t)=>require.resolve(e,t),n.x=B,e={registerChunk(e,t){I.add(e),function(e){let t=W.get(e);if(null!=t){for(let r of t)r.requiredChunks.delete(e),0===r.requiredChunks.size&&F(r.runtimeModuleIds,r.chunkPath);W.delete(e)}}(e),null!=t&&(0===t.otherChunks.length?F(t.runtimeModuleIds,e):function(e,t,r){let n=new Set,o={runtimeModuleIds:r,chunkPath:e,requiredChunks:n};for(let e of t){let t=b(e);if(I.has(t))continue;n.add(t);let r=W.get(t);null==r&&(r=new Set,W.set(t,r)),r.add(o)}0===o.requiredChunks.size&&F(o.runtimeModuleIds,o.chunkPath)}(e,t.otherChunks.filter(e=>{var t;return t=b(e),K.test(t)}),t.runtimeModuleIds))},loadChunkCached(e,t){throw Error("chunk loading is not supported")},async loadWebAssembly(e,t,r,n,o){let u=await H(r,n);return await WebAssembly.instantiate(u,o)},loadWebAssemblyModule:async(e,t,r,n)=>H(r,n)};let I=new Set,W=new Map;function F(e,t){for(let r of e)!function(e,t){let r=S[t];if(r){if(r.error)throw r.error;return}q(t,R.Runtime,e)}(t,r)}async function H(e,t){let r;try{r=t()}catch(e){}if(!r)throw Error(`dynamically loading WebAssembly is not supported in this runtime as global was not injected for chunk '${e}'`);return r}let X=globalThis.TURBOPACK;globalThis.TURBOPACK={push:L},X.forEach(L)})();

//# sourceMappingURL=node_modules_next_dist_esm_build_templates_edge-wrapper_98149c2d.js.map;
  export default (function () {
    const module = { exports: {}, loaded: false };
    const fn = (function(module,exports) {var b=Object.create;var p=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var T=Object.getOwnPropertyNames;var P=Object.getPrototypeOf,L=Object.prototype.hasOwnProperty;var h=e=>p(e,"__esModule",{value:!0});var _=(e,n)=>{h(e);for(var t in n)p(e,t,{get:n[t],enumerable:!0})},U=(e,n,t)=>{if(n&&typeof n=="object"||typeof n=="function")for(let i of T(n))!L.call(e,i)&&i!=="default"&&p(e,i,{get:()=>n[i],enumerable:!(t=w(n,i))||t.enumerable});return e},A=e=>U(h(p(e!=null?b(P(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);_(exports,{default:()=>N});var R=A(require("async_hooks")),S="@next/request-context",f=Symbol.for(S),C=Symbol.for("internal.storage");function O(){let e=globalThis;if(!e[f]){let n=new R.AsyncLocalStorage,t={get:()=>n.getStore(),[C]:n};e[f]=t}return e[f]}var q=O();function m(e,n){return q[C].run(e,n)}function y(e){let n={};return e&&e.forEach((t,i)=>{n[i]=t,i.toLowerCase()==="set-cookie"&&(n[i]=M(t))}),n}function M(e){let n=[],t=0,i,a,g,o,r;function x(){for(;t<e.length&&/\s/.test(e.charAt(t));)t+=1;return t<e.length}function s(){return a=e.charAt(t),a!=="="&&a!==";"&&a!==","}for(;t<e.length;){for(i=t,r=!1;x();)if(a=e.charAt(t),a===","){for(g=t,t+=1,x(),o=t;t<e.length&&s();)t+=1;t<e.length&&e.charAt(t)==="="?(r=!0,t=o,n.push(e.substring(i,g)),i=t):t=g+1}else t+=1;(!r||t>=e.length)&&n.push(e.substring(i,e.length))}return n}function N(e){let n=e.staticRoutes.map(i=>({regexp:new RegExp(i.namedRegex),page:i.page})),t=e.dynamicRoutes?.map(i=>({regexp:new RegExp(i.namedRegex),page:i.page}))||[];return async function(a,g){let o=new URL(a.url).pathname,r={};if(e.nextConfig?.basePath&&o.startsWith(e.nextConfig.basePath)&&(o=o.replace(e.nextConfig.basePath,"")||"/"),e.nextConfig?.i18n)for(let s of e.nextConfig.i18n.locales){let u=new RegExp(`^/${s}($|/)`,"i");if(o.match(u)){o=o.replace(u,"/")||"/";break}}for(let s of n)if(s.regexp.exec(o)){r.name=s.page;break}if(!r.name){let s=E(o);for(let u of t||[]){if(s&&!E(u.page))continue;let d=u.regexp.exec(o);if(d){r={name:u.page,params:d.groups};break}}}let x=await m({waitUntil:g.waitUntil},()=>_ENTRIES[`middleware_${e.name}`].default.call({},{request:{url:a.url,method:a.method,headers:y(a.headers),ip:c(a.headers,l.Ip),geo:{city:c(a.headers,l.City,!0),country:c(a.headers,l.Country,!0),latitude:c(a.headers,l.Latitude),longitude:c(a.headers,l.Longitude),region:c(a.headers,l.Region,!0)},nextConfig:e.nextConfig,page:r,body:a.body}}));return x.waitUntil&&g.waitUntil(x.waitUntil),x.response}}function c(e,n,t=!1){let i=e.get(n)||void 0;return t&&i?decodeURIComponent(i):i}function E(e){return e==="/api"||e.startsWith("/api/")}var l;(function(o){o.City="x-vercel-ip-city",o.Country="x-vercel-ip-country",o.Ip="x-real-ip",o.Latitude="x-vercel-ip-latitude",o.Longitude="x-vercel-ip-longitude",o.Region="x-vercel-ip-country-region"})(l||(l={}));

});
    fn(module, module.exports);
    return module.exports;
  }).call({}).default(
    {"name":"app/api/repos/[id]/summarize/route","staticRoutes":[{"page":"/","regex":"^/(?:/)?$","routeKeys":{},"namedRegex":"^/(?:/)?$"},{"page":"/_global-error","regex":"^/_global\\-error(?:/)?$","routeKeys":{},"namedRegex":"^/_global\\-error(?:/)?$"},{"page":"/_not-found","regex":"^/_not\\-found(?:/)?$","routeKeys":{},"namedRegex":"^/_not\\-found(?:/)?$"},{"page":"/api/explain","regex":"^/api/explain(?:/)?$","routeKeys":{},"namedRegex":"^/api/explain(?:/)?$"},{"page":"/api/repos","regex":"^/api/repos(?:/)?$","routeKeys":{},"namedRegex":"^/api/repos(?:/)?$"},{"page":"/api/test-connection","regex":"^/api/test\\-connection(?:/)?$","routeKeys":{},"namedRegex":"^/api/test\\-connection(?:/)?$"},{"page":"/favicon.ico","regex":"^/favicon\\.ico(?:/)?$","routeKeys":{},"namedRegex":"^/favicon\\.ico(?:/)?$"}],"dynamicRoutes":[{"page":"/api/repos/[id]/commits","regex":"^/api/repos/([^/]+?)/commits(?:/)?$","routeKeys":{"nxtPid":"nxtPid"},"namedRegex":"^/api/repos/(?<nxtPid>[^/]+?)/commits(?:/)?$"},{"page":"/api/repos/[id]/commits/[sha]","regex":"^/api/repos/([^/]+?)/commits/([^/]+?)(?:/)?$","routeKeys":{"nxtPid":"nxtPid","nxtPsha":"nxtPsha"},"namedRegex":"^/api/repos/(?<nxtPid>[^/]+?)/commits/(?<nxtPsha>[^/]+?)(?:/)?$"},{"page":"/api/repos/[id]/commits/[sha]/content","regex":"^/api/repos/([^/]+?)/commits/([^/]+?)/content(?:/)?$","routeKeys":{"nxtPid":"nxtPid","nxtPsha":"nxtPsha"},"namedRegex":"^/api/repos/(?<nxtPid>[^/]+?)/commits/(?<nxtPsha>[^/]+?)/content(?:/)?$"},{"page":"/api/repos/[id]/summarize","regex":"^/api/repos/([^/]+?)/summarize(?:/)?$","routeKeys":{"nxtPid":"nxtPid"},"namedRegex":"^/api/repos/(?<nxtPid>[^/]+?)/summarize(?:/)?$"},{"page":"/explore/[id]","regex":"^/explore/([^/]+?)(?:/)?$","routeKeys":{"nxtPid":"nxtPid"},"namedRegex":"^/explore/(?<nxtPid>[^/]+?)(?:/)?$"},{"page":"/explore/[id]/timeline","regex":"^/explore/([^/]+?)/timeline(?:/)?$","routeKeys":{"nxtPid":"nxtPid"},"namedRegex":"^/explore/(?<nxtPid>[^/]+?)/timeline(?:/)?$"}],"nextConfig":{"basePath":""}}
  )