(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,a,t)=>{a.exports=e.r(76562)},30175,75254,e=>{"use strict";var a=e.i(71645);let t=e=>{let a=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,t)=>t?t.toUpperCase():a.toLowerCase());return a.charAt(0).toUpperCase()+a.slice(1)},l=(...e)=>e.filter((e,a,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===a).join(" ").trim();var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let r=(0,a.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:o="",children:n,iconNode:d,...c},u)=>(0,a.createElement)("svg",{ref:u,...s,width:t,height:t,stroke:e,strokeWidth:i?24*Number(r)/Number(t):r,className:l("lucide",o),...!n&&!(e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0})(c)&&{"aria-hidden":"true"},...c},[...d.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(n)?n:[n]])),i=(e,s)=>{let i=(0,a.forwardRef)(({className:i,...o},n)=>(0,a.createElement)(r,{ref:n,iconNode:s,className:l(`lucide-${t(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,i),...o}));return i.displayName=t(e),i};e.s(["default",()=>i],75254);let o=i("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);e.s(["BookOpen",()=>o],30175)},83086,e=>{"use strict";let a=(0,e.i(75254).default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);e.s(["Sparkles",()=>a],83086)},31278,e=>{"use strict";let a=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>a],31278)},39616,e=>{"use strict";let a=(0,e.i(75254).default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Settings",()=>a],39616)},27989,e=>{e.v({closeBtn:"SettingsModal-module__TCnG-q__closeBtn",content:"SettingsModal-module__TCnG-q__content",description:"SettingsModal-module__TCnG-q__description",fadeIn:"SettingsModal-module__TCnG-q__fadeIn",field:"SettingsModal-module__TCnG-q__field",footer:"SettingsModal-module__TCnG-q__footer",form:"SettingsModal-module__TCnG-q__form",header:"SettingsModal-module__TCnG-q__header",label:"SettingsModal-module__TCnG-q__label",modal:"SettingsModal-module__TCnG-q__modal",overlay:"SettingsModal-module__TCnG-q__overlay",slideUp:"SettingsModal-module__TCnG-q__slideUp",spin:"SettingsModal-module__TCnG-q__spin",spinner:"SettingsModal-module__TCnG-q__spinner",tab:"SettingsModal-module__TCnG-q__tab",tabActive:"SettingsModal-module__TCnG-q__tabActive",tabs:"SettingsModal-module__TCnG-q__tabs",testBtn:"SettingsModal-module__TCnG-q__testBtn",testError:"SettingsModal-module__TCnG-q__testError",testRow:"SettingsModal-module__TCnG-q__testRow",testSuccess:"SettingsModal-module__TCnG-q__testSuccess"})},31767,37727,34161,43531,63209,45502,e=>{"use strict";var a=e.i(43476),t=e.i(71645),l=e.i(75254);let s=(0,l.default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>s],37727);let r=(0,l.default)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);e.s(["Key",()=>r],34161);let i=(0,l.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>i],43531);let o=(0,l.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>o],63209);var n=e.i(31278),d=e.i(27989);function c(e){switch(e){case"gemini":return["gemini-3-flash-preview","gemini-3-pro-preview","gemini-2.0-flash","gemini-2.0-pro-exp-02-05","gemini-1.5-pro"];case"openai":return["gpt-5.2","gpt-5.2-chat-latest","gpt-5.1","gpt-5","gpt-4o","o3-mini","o1"];case"anthropic":return["claude-opus-4-5-20251101","claude-sonnet-4-5-20250929","claude-haiku-4-5-20251001","claude-3-5-sonnet-20241022","claude-3-5-haiku-20241022"];case"ollama":return["llama3.2","llama3.1","codellama","mistral","phi3","qwen2.5"];case"lmstudio":return["deepseek-r1-distill-llama-8b","meta-llama-3.1-8b-instruct","qwen2.5-7b-instruct"];default:return[]}}let u={gemini:"Google Gemini",openai:"OpenAI GPT",anthropic:"Anthropic Claude",ollama:"Ollama (Local)",lmstudio:"LMStudio (Local)"};e.s(["PROVIDER_NAMES",0,u,"getAvailableModels",()=>c],45502);let m="grepbase_ai_settings";function _({isOpen:e,onClose:l}){let[_,p]=(0,t.useState)("gemini"),[h,f]=(0,t.useState)({gemini:{apiKey:"",model:"gemini-3-flash-preview"},openai:{apiKey:"",model:"gpt-5.2"},anthropic:{apiKey:"",model:"claude-sonnet-4-5-20250929"},ollama:{apiKey:"",model:"llama3.2",baseUrl:"http://localhost:11434/v1"},lmstudio:{apiKey:"",model:"deepseek-r1-distill-llama-8b",baseUrl:"http://127.0.0.1:1234/v1"}}),[g,x]=(0,t.useState)(!1),[y,j]=(0,t.useState)(null),[v,b]=(0,t.useState)(null);function S(e,a,t){f(l=>({...l,[e]:{...l[e],[a]:t}})),j(null)}async function w(){x(!0),j(null),b(null);try{let e=h[_];if("ollama"!==_&&"lmstudio"!==_&&!e.apiKey)throw Error("API key is required");let a=await fetch("/api/test-connection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:_,baseUrl:e.baseUrl,apiKey:e.apiKey})}),t=await a.json();if(!a.ok)throw Error(t.error||"Connection failed");j("success"),t.models?.length&&b(`Found ${t.models.length} model(s): ${t.models.slice(0,3).join(", ")}${t.models.length>3?"...":""}`)}catch(e){j("error"),b(e instanceof Error?e.message:"Connection failed")}finally{x(!1)}}if((0,t.useEffect)(()=>{let e=localStorage.getItem(m);if(e)try{let a=JSON.parse(e);f(e=>({...e,...a})),a.activeProvider&&p(a.activeProvider)}catch(e){console.error("Failed to parse saved settings:",e)}},[]),!e)return null;let N=h[_],U=c(_);return(0,a.jsx)("div",{className:d.default.overlay,onClick:l,children:(0,a.jsxs)("div",{className:d.default.modal,onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:d.default.header,children:[(0,a.jsx)("h2",{children:"API Settings"}),(0,a.jsx)("button",{className:d.default.closeBtn,onClick:l,children:(0,a.jsx)(s,{size:20})})]}),(0,a.jsxs)("div",{className:d.default.content,children:[(0,a.jsx)("p",{className:d.default.description,children:"Configure your AI provider. Keys are stored locally in your browser."}),(0,a.jsx)("div",{className:d.default.tabs,children:["gemini","openai","anthropic","ollama","lmstudio"].map(e=>(0,a.jsx)("button",{className:`${d.default.tab} ${_===e?d.default.tabActive:""}`,onClick:()=>{p(e),j(null)},children:u[e]},e))}),(0,a.jsxs)("div",{className:d.default.form,children:["ollama"!==_&&"lmstudio"!==_?(0,a.jsxs)("div",{className:d.default.field,children:[(0,a.jsxs)("label",{className:d.default.label,children:[(0,a.jsx)(r,{size:14}),"API Key"]}),(0,a.jsx)("input",{type:"password",className:"input",placeholder:`Enter your ${u[_]} API key`,value:N.apiKey,onChange:e=>S(_,"apiKey",e.target.value)})]}):(0,a.jsxs)("div",{className:d.default.field,children:[(0,a.jsx)("label",{className:d.default.label,children:"Base URL"}),(0,a.jsx)("input",{type:"text",className:"input",placeholder:"lmstudio"===_?"http://127.0.0.1:1234/v1":"http://localhost:11434/v1",value:N.baseUrl||"",onChange:e=>S(_,"baseUrl",e.target.value)})]}),("ollama"===_||"lmstudio"===_)&&(0,a.jsxs)("div",{className:d.default.field,children:[(0,a.jsx)("label",{className:d.default.label,children:"Custom Model Name (optional)"}),(0,a.jsx)("input",{type:"text",className:"input",placeholder:"e.g., deepseek-r1:8b, qwen2.5:7b",value:N.model,onChange:e=>S(_,"model",e.target.value)}),(0,a.jsx)("small",{style:{color:"var(--text-muted)",marginTop:"4px",display:"block"},children:"Leave empty to use default, or enter your model name"})]}),(0,a.jsxs)("div",{className:d.default.field,children:[(0,a.jsx)("label",{className:d.default.label,children:"Model"}),(0,a.jsx)("select",{className:"input",value:N.model,onChange:e=>S(_,"model",e.target.value),children:U.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{className:d.default.testRow,children:[(0,a.jsx)("button",{className:`btn btn-secondary ${d.default.testBtn}`,onClick:w,disabled:g,children:g?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Loader2,{size:16,className:d.default.spinner}),"Testing..."]}):"Test Connection"}),"success"===y&&(0,a.jsxs)("span",{className:d.default.testSuccess,children:[(0,a.jsx)(i,{size:16}),"Connected!"]}),"error"===y&&(0,a.jsxs)("span",{className:d.default.testError,children:[(0,a.jsx)(o,{size:16}),v||"Connection failed"]})]})]})]}),(0,a.jsxs)("div",{className:d.default.footer,children:[(0,a.jsx)("button",{className:"btn btn-secondary",onClick:l,children:"Cancel"}),(0,a.jsx)("button",{className:"btn btn-primary",onClick:function(){localStorage.setItem(m,JSON.stringify({...h,activeProvider:_})),l()},children:"Save Settings"})]})]})})}function p(){let e=localStorage.getItem(m);if(!e)return null;try{let a=JSON.parse(e),t=a.activeProvider||"gemini";return{provider:t,config:a[t]}}catch{return null}}e.s(["default",()=>_,"getAISettings",()=>p],31767)},3116,e=>{"use strict";let a=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>a],3116)},16715,e=>{"use strict";let a=(0,e.i(75254).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>a],16715)},20897,e=>{e.v({badge:"page-module___8aEwW__badge",error:"page-module___8aEwW__error",fadeIn:"page-module___8aEwW__fadeIn",feature:"page-module___8aEwW__feature",features:"page-module___8aEwW__features",header:"page-module___8aEwW__header",hero:"page-module___8aEwW__hero",heroContent:"page-module___8aEwW__heroContent",inputIcon:"page-module___8aEwW__inputIcon",inputWrapper:"page-module___8aEwW__inputWrapper",logo:"page-module___8aEwW__logo",main:"page-module___8aEwW__main",recentSection:"page-module___8aEwW__recentSection",repoCard:"page-module___8aEwW__repoCard",repoDesc:"page-module___8aEwW__repoDesc",repoGrid:"page-module___8aEwW__repoGrid",repoHeader:"page-module___8aEwW__repoHeader",repoMeta:"page-module___8aEwW__repoMeta",repoName:"page-module___8aEwW__repoName",searchForm:"page-module___8aEwW__searchForm",searchInput:"page-module___8aEwW__searchInput",searchInputError:"page-module___8aEwW__searchInputError",sectionTitle:"page-module___8aEwW__sectionTitle",slideUp:"page-module___8aEwW__slideUp",spin:"page-module___8aEwW__spin",spinner:"page-module___8aEwW__spinner",stars:"page-module___8aEwW__stars",submitBtn:"page-module___8aEwW__submitBtn",subtitle:"page-module___8aEwW__subtitle",title:"page-module___8aEwW__title",validationError:"page-module___8aEwW__validationError"})},81010,e=>{e.v({btn:"SetupFlow-module__aOBUUW__btn",content:"SetupFlow-module__aOBUUW__content",errorActions:"SetupFlow-module__aOBUUW__errorActions",errorState:"SetupFlow-module__aOBUUW__errorState",fadeIn:"SetupFlow-module__aOBUUW__fadeIn",fetchingSpinner:"SetupFlow-module__aOBUUW__fetchingSpinner",field:"SetupFlow-module__aOBUUW__field",float:"SetupFlow-module__aOBUUW__float",footer:"SetupFlow-module__aOBUUW__footer",form:"SetupFlow-module__aOBUUW__form",header:"SetupFlow-module__aOBUUW__header",headerContent:"SetupFlow-module__aOBUUW__headerContent",headerIcon:"SetupFlow-module__aOBUUW__headerIcon",headerSub:"SetupFlow-module__aOBUUW__headerSub",label:"SetupFlow-module__aOBUUW__label",loadingAnimation:"SetupFlow-module__aOBUUW__loadingAnimation",loadingBar:"SetupFlow-module__aOBUUW__loadingBar",loadingIcon:"SetupFlow-module__aOBUUW__loadingIcon",loadingProgress:"SetupFlow-module__aOBUUW__loadingProgress",loadingSlide:"SetupFlow-module__aOBUUW__loadingSlide",loadingState:"SetupFlow-module__aOBUUW__loadingState",loadingText:"SetupFlow-module__aOBUUW__loadingText",modal:"SetupFlow-module__aOBUUW__modal",overlay:"SetupFlow-module__aOBUUW__overlay",pulse:"SetupFlow-module__aOBUUW__pulse",repoDescription:"SetupFlow-module__aOBUUW__repoDescription",repoTitle:"SetupFlow-module__aOBUUW__repoTitle",slideUp:"SetupFlow-module__aOBUUW__slideUp",spin:"SetupFlow-module__aOBUUW__spin",spinner:"SetupFlow-module__aOBUUW__spinner",summaryContent:"SetupFlow-module__aOBUUW__summaryContent",summaryFooter:"SetupFlow-module__aOBUUW__summaryFooter",summaryHeader:"SetupFlow-module__aOBUUW__summaryHeader",summaryModal:"SetupFlow-module__aOBUUW__summaryModal",summaryText:"SetupFlow-module__aOBUUW__summaryText",tab:"SetupFlow-module__aOBUUW__tab",tabActive:"SetupFlow-module__aOBUUW__tabActive",tabs:"SetupFlow-module__aOBUUW__tabs",testBtn:"SetupFlow-module__aOBUUW__testBtn",testError:"SetupFlow-module__aOBUUW__testError",testRow:"SetupFlow-module__aOBUUW__testRow",testSuccess:"SetupFlow-module__aOBUUW__testSuccess"})},52683,e=>{"use strict";var a=e.i(43476),t=e.i(71645),l=e.i(18566),s=e.i(30175),r=e.i(75254);let i=(0,r.default)("github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);var o=e.i(83086);let n=(0,r.default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var d=e.i(3116);let c=(0,r.default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var u=e.i(31278),m=e.i(39616),_=e.i(20897),p=e.i(31767),h=e.i(34161),f=e.i(43531),g=e.i(63209),x=e.i(16715),y=e.i(81010),j=e.i(45502);let v="grepbase_ai_settings";function b({repoUrl:e,onCancel:s}){let r=(0,l.useRouter)(),[i,d]=(0,t.useState)("config"),[c,m]=(0,t.useState)("gemini"),[_,p]=(0,t.useState)({gemini:{apiKey:"",model:"gemini-3-flash-preview"},openai:{apiKey:"",model:"gpt-5.2"},anthropic:{apiKey:"",model:"claude-sonnet-4-5-20250929"},ollama:{apiKey:"",model:"llama3.2",baseUrl:"http://localhost:11434/v1"},lmstudio:{apiKey:"",model:"deepseek-r1-distill-llama-8b",baseUrl:"http://127.0.0.1:1234/v1"}}),[b,S]=(0,t.useState)(!1),[w,N]=(0,t.useState)(null),[U,C]=(0,t.useState)(null),[k,W]=(0,t.useState)(null),[E,B]=(0,t.useState)(null),[O,F]=(0,t.useState)(!0),T=(0,t.useRef)(!1),[A,M]=(0,t.useState)(""),[I,z]=(0,t.useState)(!1);function G(e,a,t){p(l=>({...l,[e]:{...l[e],[a]:t}})),N(null)}async function K(){S(!0),N(null),C(null);try{let e=_[c];if("ollama"!==c&&"lmstudio"!==c&&!e.apiKey)throw Error("API key is required");let a=await fetch("/api/test-connection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:c,baseUrl:e.baseUrl,apiKey:e.apiKey})}),t=await a.json();if(!a.ok)throw Error(t.error||"Connection failed");N("success")}catch(e){N("error"),C(e instanceof Error?e.message:"Connection failed")}finally{S(!1)}}async function q(){if(k){z(!0);try{let e=_[c],a=await fetch("/api/repos/"+k.id+"/summarize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:c,apiKey:e.apiKey,model:e.model,baseUrl:e.baseUrl})});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to generate summary")}let t=a.body?.getReader(),l=new TextDecoder;if(t)for(;;){let{done:e,value:a}=await t.read();if(e)break;let s=l.decode(a,{stream:!0});M(e=>e+s)}d("summary")}catch(e){console.error("Summary generation failed:",e),M(`**${k.name}** is a project by ${k.owner}.

${k.description||"No description available."}

*AI summary generation failed. Click "View Timeline" to explore the commit history.*`),d("summary")}finally{z(!1)}}}(0,t.useEffect)(()=>{let e=localStorage.getItem(v);if(e)try{let a=JSON.parse(e);p(e=>({...e,...a})),a.activeProvider&&m(a.activeProvider)}catch(e){console.error("Failed to parse saved settings:",e)}},[]),(0,t.useEffect)(()=>{T.current||(T.current=!0,a());async function a(){try{let a=await fetch("/api/repos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e})}),t=await a.json();if(!a.ok)throw Error(t.error||"Failed to fetch repository");W(t.repository)}catch(e){B(e instanceof Error?e.message:"Failed to fetch repository")}finally{F(!1)}}},[e]),(0,t.useEffect)(()=>{"loading"!==i||!k||I||A||q()},[i,k,I,A]);let P=_[c],R=(0,j.getAvailableModels)(c),$="ollama"===c||"lmstudio"===c,L=$||P.apiKey&&P.apiKey.length>10;return E&&"config"===i?(0,a.jsx)("div",{className:y.default.overlay,children:(0,a.jsx)("div",{className:y.default.modal,children:(0,a.jsxs)("div",{className:y.default.errorState,children:[(0,a.jsx)(g.AlertCircle,{size:48}),(0,a.jsx)("h2",{children:"Failed to fetch repository"}),(0,a.jsx)("p",{children:E}),(0,a.jsx)("div",{className:y.default.errorActions,children:(0,a.jsx)("button",{className:"btn btn-secondary",onClick:s,children:"Go Back"})})]})})}):"config"===i?(0,a.jsx)("div",{className:y.default.overlay,children:(0,a.jsxs)("div",{className:y.default.modal,children:[(0,a.jsxs)("div",{className:y.default.header,children:[(0,a.jsxs)("div",{className:y.default.headerContent,children:[(0,a.jsx)(o.Sparkles,{size:24,className:y.default.headerIcon}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{children:"Configure AI Provider"}),(0,a.jsx)("p",{className:y.default.headerSub,children:O?"Fetching repository...":`Ready to analyze ${k?.owner}/${k?.name}`})]})]}),O&&(0,a.jsx)(u.Loader2,{size:20,className:y.default.fetchingSpinner})]}),(0,a.jsxs)("div",{className:y.default.content,children:[(0,a.jsx)("div",{className:y.default.tabs,children:["gemini","openai","anthropic","ollama","lmstudio"].map(e=>(0,a.jsx)("button",{className:`${y.default.tab} ${c===e?y.default.tabActive:""}`,onClick:()=>{m(e),N(null)},children:j.PROVIDER_NAMES[e]},e))}),(0,a.jsxs)("div",{className:y.default.form,children:[$?(0,a.jsxs)("div",{className:y.default.field,children:[(0,a.jsx)("label",{className:y.default.label,children:"Base URL"}),(0,a.jsx)("input",{type:"text",className:"input",placeholder:"lmstudio"===c?"http://127.0.0.1:1234/v1":"http://localhost:11434/v1",value:P.baseUrl||"",onChange:e=>G(c,"baseUrl",e.target.value)})]}):(0,a.jsxs)("div",{className:y.default.field,children:[(0,a.jsxs)("label",{className:y.default.label,children:[(0,a.jsx)(h.Key,{size:14}),"API Key"]}),(0,a.jsx)("input",{type:"password",className:"input",placeholder:`Enter your ${j.PROVIDER_NAMES[c]} API key`,value:P.apiKey,onChange:e=>G(c,"apiKey",e.target.value)})]}),(0,a.jsxs)("div",{className:y.default.field,children:[(0,a.jsx)("label",{className:y.default.label,children:"Model"}),(0,a.jsx)("select",{className:"input",value:P.model,onChange:e=>G(c,"model",e.target.value),children:R.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{className:y.default.testRow,children:[(0,a.jsx)("button",{className:`btn btn-secondary ${y.default.testBtn}`,onClick:K,disabled:b||!$&&!P.apiKey,children:b?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Loader2,{size:16,className:y.default.spinner}),"Testing..."]}):"Test Connection"}),"success"===w&&(0,a.jsxs)("span",{className:y.default.testSuccess,children:[(0,a.jsx)(f.Check,{size:16}),"Connected!"]}),"error"===w&&(0,a.jsxs)("span",{className:y.default.testError,children:[(0,a.jsx)(g.AlertCircle,{size:16}),U||"Connection failed"]})]})]})]}),(0,a.jsxs)("div",{className:y.default.footer,children:[(0,a.jsx)("button",{className:"btn btn-secondary",onClick:s,children:"Cancel"}),(0,a.jsx)("button",{className:"btn btn-primary",onClick:function(){localStorage.setItem(v,JSON.stringify({..._,activeProvider:c})),d("loading"),q()},disabled:!L||O,children:O?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.RefreshCw,{size:16,className:y.default.spinner}),"Fetching..."]}):(0,a.jsxs)(a.Fragment,{children:["Continue",(0,a.jsx)(n,{size:16})]})})]})]})}):"loading"===i?(0,a.jsx)("div",{className:y.default.overlay,children:(0,a.jsxs)("div",{className:y.default.loadingState,children:[(0,a.jsx)("div",{className:y.default.loadingAnimation,children:(0,a.jsx)(o.Sparkles,{size:48,className:y.default.loadingIcon})}),(0,a.jsx)("h2",{children:"Analyzing Repository"}),(0,a.jsx)("p",{className:y.default.loadingText,children:O?"Fetching repository data...":"Generating AI summary..."}),(0,a.jsx)("div",{className:y.default.loadingProgress,children:(0,a.jsx)("div",{className:y.default.loadingBar})})]})}):(0,a.jsx)("div",{className:y.default.overlay,children:(0,a.jsxs)("div",{className:y.default.summaryModal,children:[(0,a.jsx)("div",{className:y.default.summaryHeader,children:(0,a.jsxs)("div",{className:y.default.repoTitle,children:[(0,a.jsxs)("h1",{children:[k?.owner,"/",k?.name]}),k?.description&&(0,a.jsx)("p",{className:y.default.repoDescription,children:k.description})]})}),(0,a.jsx)("div",{className:y.default.summaryContent,children:(0,a.jsx)("div",{className:y.default.summaryText,children:A.split("\n").map((e,t)=>e.startsWith("**")&&e.endsWith("**")?(0,a.jsx)("h3",{children:e.replace(/\*\*/g,"")},t):e.startsWith("- ")?(0,a.jsx)("li",{children:e.substring(2)},t):e.trim()?(0,a.jsx)("p",{children:e},t):(0,a.jsx)("br",{},t))})}),(0,a.jsxs)("div",{className:y.default.summaryFooter,children:[(0,a.jsx)("button",{className:"btn btn-secondary",onClick:s,children:"Back to Home"}),(0,a.jsxs)("button",{className:"btn btn-primary",onClick:function(){k&&r.push(`/explore/${k.id}/timeline`)},children:["View Timeline",(0,a.jsx)(n,{size:16})]})]})]})})}function S(){let[e,r]=(0,t.useState)(""),[h,f]=(0,t.useState)(!1),[g,x]=(0,t.useState)(null),[y,j]=(0,t.useState)(null),[v,S]=(0,t.useState)(!1),[w,N]=(0,t.useState)([]),[U,C]=(0,t.useState)(!1),[k,W]=(0,t.useState)(!1),[E,B]=(0,t.useState)(""),O=(0,l.useRouter)();async function F(){try{let e=await fetch("/api/repos"),a=await e.json();N(a.repositories||[])}catch(e){console.error("Failed to fetch repositories:",e)}}async function T(a){a.preventDefault(),v&&(B(e),W(!0))}return(0,t.useEffect)(()=>{F()},[]),(0,a.jsxs)("main",{className:_.default.main,children:[(0,a.jsxs)("header",{className:_.default.header,children:[(0,a.jsxs)("div",{className:_.default.logo,children:[(0,a.jsx)(s.BookOpen,{size:28}),(0,a.jsx)("span",{children:"Grepbase"})]}),(0,a.jsxs)("button",{className:"btn btn-ghost",onClick:()=>C(!0),children:[(0,a.jsx)(m.Settings,{size:20}),"Settings"]})]}),(0,a.jsx)("section",{className:_.default.hero,children:(0,a.jsxs)("div",{className:_.default.heroContent,children:[(0,a.jsxs)("div",{className:_.default.badge,children:[(0,a.jsx)(o.Sparkles,{size:14}),(0,a.jsx)("span",{children:"AI-Powered Code Learning"})]}),(0,a.jsxs)("h1",{className:_.default.title,children:["Understand Code ",(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"text-gradient",children:"Through Time"})]}),(0,a.jsx)("p",{className:_.default.subtitle,children:"Walk through any open source project's git history like a book. Let AI explain each chapter of the codebase evolution."}),(0,a.jsxs)("form",{onSubmit:T,className:_.default.searchForm,children:[(0,a.jsxs)("div",{className:_.default.inputWrapper,children:[(0,a.jsx)(i,{size:20,className:_.default.inputIcon}),(0,a.jsx)("input",{type:"text",className:`${_.default.searchInput} ${y?_.default.searchInputError:""}`,placeholder:"Enter GitHub URL (e.g., github.com/sindresorhus/is)",value:e,onChange:function(e){let a=e.target.value;r(a);let t=function(e){let a=e.trim();if(!a)return{valid:!1,error:null};let t=a.replace(/^(https?:\/\/)?(www\.)?/i,"").replace(/\.git\/?$/,"").replace(/\/+$/,"");t.toLowerCase().startsWith("github.com/")&&(t=t.substring(11));let l=t.split("/").filter(Boolean);if(1===l.length)return/^[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?$/.test(l[0])?{valid:!1,error:"Please enter a repository, not just a username (e.g., owner/repo)"}:{valid:!1,error:"Invalid format. Try: github.com/owner/repo or owner/repo"};if(2===l.length){let[e,a]=l;return/^[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?$/.test(e)?/^[a-zA-Z0-9._-]+$/.test(a)?{valid:!0,error:null}:{valid:!1,error:"Invalid repository name"}:{valid:!1,error:"Invalid repository owner name"}}return l.length>2?{valid:!1,error:"Please enter just the repository URL, not a file path"}:{valid:!1,error:"Invalid GitHub repository URL"}}(a);S(t.valid),j(t.error),g&&x(null)},disabled:h,"aria-invalid":!!y,"aria-describedby":y?"url-error":void 0}),y&&(0,a.jsx)("div",{id:"url-error",className:_.default.validationError,role:"alert",children:y})]}),(0,a.jsx)("button",{type:"submit",className:`btn btn-primary ${_.default.submitBtn}`,disabled:h||!v,children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Loader2,{size:18,className:_.default.spinner}),"Loading..."]}):(0,a.jsxs)(a.Fragment,{children:["Explore",(0,a.jsx)(n,{size:18})]})})]}),g&&(0,a.jsx)("div",{className:_.default.error,children:g}),(0,a.jsxs)("div",{className:_.default.features,children:[(0,a.jsxs)("div",{className:_.default.feature,children:[(0,a.jsx)(d.Clock,{size:18}),(0,a.jsx)("span",{children:"Time-travel through commits"})]}),(0,a.jsxs)("div",{className:_.default.feature,children:[(0,a.jsx)(o.Sparkles,{size:18}),(0,a.jsx)("span",{children:"AI explanations at each step"})]}),(0,a.jsxs)("div",{className:_.default.feature,children:[(0,a.jsx)(s.BookOpen,{size:18}),(0,a.jsx)("span",{children:"Learn like reading a book"})]})]})]})}),w.length>0&&(0,a.jsxs)("section",{className:_.default.recentSection,children:[(0,a.jsx)("h2",{className:_.default.sectionTitle,children:"Recent Explorations"}),(0,a.jsx)("div",{className:_.default.repoGrid,children:w.slice(0,6).map(e=>(0,a.jsxs)("button",{className:_.default.repoCard,onClick:()=>O.push(`/explore/${e.id}`),children:[(0,a.jsxs)("div",{className:_.default.repoHeader,children:[(0,a.jsx)(i,{size:18}),(0,a.jsxs)("span",{className:_.default.repoName,children:[e.owner,"/",e.name]})]}),e.description&&(0,a.jsx)("p",{className:_.default.repoDesc,children:e.description}),(0,a.jsx)("div",{className:_.default.repoMeta,children:(0,a.jsxs)("span",{className:_.default.stars,children:[(0,a.jsx)(c,{size:14}),e.stars.toLocaleString()]})})]},e.id))})]}),(0,a.jsx)(p.default,{isOpen:U,onClose:()=>C(!1)}),k&&(0,a.jsx)(b,{repoUrl:E,onCancel:function(){W(!1),B("")}})]})}e.s(["default",()=>S],52683)}]);